(function(){var e={440:function(){HTMLCanvasElement.prototype.toBlob||Object.defineProperty(HTMLCanvasElement.prototype,"toBlob",{value:function(e,t,n){for(var r=atob(this.toDataURL(t,n).split(",")[1]),a=r.length,i=a>>2,s=new Uint8Array(a),o=new Uint32Array(s.buffer,0,i),c=0,u=0;c<i;c++)o[c]=r.charCodeAt(u++)|r.charCodeAt(u++)<<8|r.charCodeAt(u++)<<16|r.charCodeAt(u++)<<24;for(var l=3&a;l--;)s[u]=r.charCodeAt(u++);e(new Blob([s],{type:t||"image/png"}))}})},585:function(e,t,n){"use strict";n.d(t,{J:function(){return R},Z:function(){return D}});var r=n(75),a=n(195),i=n.n(a),s=n(76),o=n.n(s),c=n(78),u=n.n(c),l=n(46),h=n.n(l),d=n(91),p=n(203),f=n.n(p),m=function(e){return function(t){t.preventDefault();var n=document.getElementById("popup-add-shortcut");null==n||n.remove(),e()}},v=function(e){var t=document.createElement("div");return t.innerHTML=f()(e).call(e),t.firstChild},g=function(){var e=(0,r.Z)(h().mark((function e(t,n){var r,a,i;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=v('<div style="height: 50vh;width: 53vh;max-width: 95vw;position:absolute;background-color: rgba(31, 120, 136, 0.48);border-radius: 2vh;margin: auto;right: 0;left: 0;top: 0;bottom: 0;display: flex;flex-direction:column;justify-content:space-evenly;">\n            <p style="color:white;font-size:40px;text-align:center">Add shortcut for this game</p>\n            <p style="color:white;font-size:20px;text-align:center">This game wants to add a shortcut.</p>\n        </div>'),a=v('<button style="border: none;background-color: #1877f2;color: #fff;width: 90%;height: 50px;border-radius: 15px;margin-left: auto;margin-right: auto;font-size: 20px;cursor: pointer;">No</button>'),i=v('<button style="border: none;background-color: #1877f2;color: #fff;width: 90%;height: 50px;border-radius: 15px;margin-left: auto;margin-right: auto;font-size: 20px;cursor: pointer;">Yes</button>'),r&&a&&i||n({code:"CREATE_POPUP_ERROR",message:"Show popup failed"}),r.id="popup-add-shortcut",r.appendChild(a),r.appendChild(i),document.body.appendChild(r),a.addEventListener("click",m(n)),i.addEventListener("click",m(t));case 10:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),y=function(){function e(){this.isFirstCall=!0}var t=e.prototype;return t.canCreateShortcutAsync=function(){var e=(0,r.Z)(h().mark((function e(){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.isFirstCall){e.next=3;break}return this.isFirstCall=!1,e.abrupt("return",!0);case 3:return e.abrupt("return",!1);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),t.createShortcutAsync=function(){var e=(0,r.Z)(h().mark((function e(){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new(o())((function(e,t){g(e,t)})));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),e}(),w=y,S=function(e){return function(t){t.preventDefault();var n=document.getElementById("popup-subscribe-bots");null==n||n.remove(),e()}},E=function(e){var t=document.createElement("div");return t.innerHTML=f()(e).call(e),t.firstChild},b=function(){var e=(0,r.Z)(h().mark((function e(t,n){var r,a,i;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=E('<div style="height: 50vh;width: 53vh;max-width: 95vw;position:absolute;background-color: rgba(31, 120, 136, 0.48);border-radius: 2vh;margin: auto;right: 0;left: 0;top: 0;bottom: 0;display: flex;flex-direction:column;justify-content:space-evenly;">\n            <p style="color:white;font-size:40px;text-align:center">Turn on messages from this game</p>\n            <p style="color:white;font-size:20px;text-align:center">This game wants to send messages, announcements and more.</p>\n        </div>'),a=E('<button style="border: none;background-color: #1877f2;color: #fff;width: 90%;height: 50px;border-radius: 15px;margin-left: auto;margin-right: auto;font-size: 20px;cursor: pointer;">Not Now</button>'),i=E('<button style="border: none;background-color: #1877f2;color: #fff;width: 90%;height: 50px;border-radius: 15px;margin-left: auto;margin-right: auto;font-size: 20px;cursor: pointer;">Turn On</button>'),r&&a&&i||n({code:"CREATE_POPUP_ERROR",message:"Show popup failed"}),r.id="popup-subscribe-bots",r.appendChild(a),r.appendChild(i),document.body.appendChild(r),a.addEventListener("click",S(n)),i.addEventListener("click",S(t));case 10:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),k=function(){function e(){this.isFirstCall=!0}var t=e.prototype;return t.canSubscribeBotAsync=function(){var e=(0,r.Z)(h().mark((function e(){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.isFirstCall){e.next=3;break}return this.isFirstCall=!1,e.abrupt("return",!0);case 3:return e.abrupt("return",!1);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),t.subscribeBotAsync=function(){var e=(0,r.Z)(h().mark((function e(){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new(o())((function(e,t){b(e,t)})));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),e}(),x=k,A=n(419),C=n(184),T=n(603),P=n(421),I=GameCore.Configs,O=I.Notification,M=I.AddShortcut,_=I.SubscribeBot,L=O.GameTitle,R=(O.GameImage,function(){function e(){}var t=e.prototype;return t.createAsync=function(){var e=(0,r.Z)(h().mark((function e(t){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,GameSDK.tournament.createAsync(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),t.shareAsync=function(){var e=(0,r.Z)(h().mark((function e(t){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,GameSDK.tournament.shareAsync(t);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),t.joinAsync=function(){var e=(0,r.Z)(h().mark((function e(t){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,GameSDK.tournament.joinAsync(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),t.postScoreAsync=function(){var e=(0,r.Z)(h().mark((function e(t){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,GameSDK.tournament.postScoreAsync(t);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),t.getTournamentsAsync=function(){var e=(0,r.Z)(h().mark((function e(){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,GameSDK.tournament.getTournamentsAsync();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),e}()),B=function(){function e(e){var t=this;this.facebook=void 0,this.supportedAPIs=[],this.mockSubscribeBot=void 0,this.mockAddShortcut=void 0,this.isCalledSubscribeBot=!1,this.isCalledCreateShortcut=!1,this.isCanPlayerMatch=null,this.isCanSubscribeBot=null,this.isCanCreateShortcut=null,this.attemptToAddShortcut=(0,r.Z)(h().mark((function e(){var n,r,a,i,s,o;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.isCalledCreateShortcut){e.next=2;break}return e.abrupt("return",!1);case 2:if(e.prev=2,null===t.isCanCreateShortcut&&(M.UseMock?t.isCanCreateShortcut=!0:t.isCanCreateShortcut=t.isSupportedAPI("canCreateShortcutAsync")),t.isCanCreateShortcut){e.next=6;break}return e.abrupt("return",!1);case 6:return e.next=8,GameSDK.player.getDataAsync(["lastCallCreateShortcut"]);case 8:if(e.t0=e.sent,e.t0){e.next=11;break}e.t0={};case 11:if(n=e.t0,!(r=n.lastCallCreateShortcut||0)||!(0,C.Gm)(+r)){e.next=15;break}return e.abrupt("return",!1);case 15:if(!M.UseMock){e.next=21;break}return e.next=18,t.mockAddShortcut.canCreateShortcutAsync();case 18:e.t1=e.sent,e.next=24;break;case 21:return e.next=23,GameSDK.canCreateShortcutAsync();case 23:e.t1=e.sent;case 24:if(a=e.t1,i=Date.now(),GameSDK.player.setDataAsync({lastCallCreateShortcut:i}),!a){e.next=49;break}return s=d._.SHORTCUT_CREATE,o=d._.SHORTCUT_CREATE_POPUP,t.isCalledCreateShortcut=!0,window.game.analytics.event(o),e.prev=31,e.next=34,GameCore.Utils.Valid.isValueChangeAsync(window.__fbGameReady,!0);case 34:if(!M.UseMock){e.next=39;break}return e.next=37,t.mockAddShortcut.createShortcutAsync();case 37:e.next=41;break;case 39:return e.next=41,FBInstant.createShortcutAsync();case 41:return window.game.analytics.event(s,{success:!0}),e.abrupt("return",!0);case 45:return e.prev=45,e.t2=e.catch(31),window.game.analytics.event(s,{success:!1}),e.abrupt("return",!1);case 49:return e.abrupt("return",!1);case 52:return e.prev=52,e.t3=e.catch(2),e.abrupt("return",!1);case 55:case"end":return e.stop()}}),e,null,[[2,52],[31,45]])}))),this.attemptToSubscribeBot=(0,r.Z)(h().mark((function e(){var n,r,a,i,s;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.isCalledSubscribeBot){e.next=2;break}return e.abrupt("return",!1);case 2:if(e.prev=2,null===t.isCanSubscribeBot&&(_.UseMock?t.isCanSubscribeBot=!0:t.isCanSubscribeBot=t.isSupportedAPI("player.canSubscribeBotAsync")),t.isCanSubscribeBot){e.next=6;break}return e.abrupt("return",!1);case 6:if(!_.UseMock){e.next=12;break}return e.next=9,t.mockSubscribeBot.canSubscribeBotAsync();case 9:e.t0=e.sent,e.next=15;break;case 12:return e.next=14,GameSDK.player.canSubscribeBotAsync();case 14:e.t0=e.sent;case 15:if(!e.t0){e.next=49;break}return e.next=19,GameSDK.player.getDataAsync(["lastCallSubscribeBot"]);case 19:if(e.t1=e.sent,e.t1){e.next=22;break}e.t1={};case 22:if(n=e.t1,!(r=n.lastCallSubscribeBot)||!(0,C.Gm)(+r)){e.next=26;break}return e.abrupt("return",!1);case 26:return a=Date.now(),GameSDK.player.setDataAsync({lastCallSubscribeBot:a}),i=d._.BOT_SUBSCRIBE,s=d._.BOT_SUBSCRIBE_POPUP,t.isCalledSubscribeBot=!0,window.game.analytics.event(s),e.prev=31,e.next=34,GameCore.Utils.Valid.isValueChangeAsync(window.__fbGameReady,!0);case 34:if(!_.UseMock){e.next=39;break}return e.next=37,t.mockSubscribeBot.subscribeBotAsync();case 37:e.next=41;break;case 39:return e.next=41,GameSDK.player.subscribeBotAsync();case 41:return window.game.analytics.event(i,{success:!0}),e.abrupt("return",!0);case 45:return e.prev=45,e.t2=e.catch(31),window.game.analytics.event(i,{success:!1}),e.abrupt("return",!1);case 49:return e.abrupt("return",!1);case 52:return e.prev=52,e.t3=e.catch(2),e.abrupt("return",!1);case 55:case"end":return e.stop()}}),e,null,[[2,52],[31,45]])}))),this.matchPlayerAsync=function(){var e=(0,r.Z)(h().mark((function e(n,r,a){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,null===t.isCanPlayerMatch&&(t.isCanPlayerMatch=t.isSupportedAPI("checkCanPlayerMatchAsync")),t.isCanPlayerMatch){e.next=4;break}return e.abrupt("return",!1);case 4:return e.next=6,GameSDK.checkCanPlayerMatchAsync();case 6:if(e.sent){e.next=9;break}return e.abrupt("return",!1);case 9:return e.next=11,GameSDK.matchPlayerAsync(n,r,a);case 11:return e.abrupt("return",!0);case 14:return e.prev=14,e.t0=e.catch(0),e.abrupt("return",!1);case 17:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(t,n,r){return e.apply(this,arguments)}}(),this.getTournamentAsync=(0,r.Z)(h().mark((function e(){var n,r,a;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.facebook.tournament.getTournamentsAsync();case 2:if(n=e.sent,r=GameSDK.context.getID(),!(a=i()(n).call(n,(function(e){return e.getContextID()===r})))){e.next=7;break}return e.abrupt("return",o().resolve(a));case 7:return e.abrupt("return",o().reject(new T.Z(null)));case 8:case"end":return e.stop()}}),e)}))),this.requestTournamentAsync=function(){var e=(0,r.Z)(h().mark((function e(n){var r;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.facebook.getTournamentAsync();case 3:return e.next=5,t.facebook.tournament.shareAsync({score:n});case 5:e.next=12;break;case 7:return e.prev=7,e.t0=e.catch(0),r=GameSDK.player.getName(),e.next=12,t.facebook.tournament.createAsync({initialScore:n,config:{tournamentTitle:r+"'s Tournament"}});case 12:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),this.isSupportedAPI=function(e){var n;return 0===t.supportedAPIs.length&&(t.supportedAPIs=GameSDK.getSupportedAPIs()),u()(n=t.supportedAPIs).call(n,e)},this.facebook=e,this.mockSubscribeBot=new x,this.mockAddShortcut=new w}var t=e.prototype;return t.switchAsync=function(){var e=(0,r.Z)(h().mark((function e(t){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,GameCore.Utils.Valid.isValueChangeAsync(window.__fbGameReady,!0);case 2:return e.next=4,GameSDK.context.switchAsync(t);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),t.chooseAsync=function(){var e=(0,r.Z)(h().mark((function e(){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,GameCore.Utils.Valid.isValueChangeAsync(window.__fbGameReady,!0);case 3:return e.next=5,GameSDK.context.chooseAsync({filters:["INCLUDE_EXISTING_CHALLENGES"],minSize:2,maxSize:2});case 5:case 15:return e.abrupt("return",GameSDK.context.getID());case 8:if(e.prev=8,e.t0=e.catch(0),!(e.t0 instanceof Object&&GameCore.Utils.Object.hasOwn(e.t0,"code"))){e.next=16;break}e.t1=e.t0.code,e.next="USER_INPUT"===e.t1?14:"SAME_CONTEXT"===e.t1?15:16;break;case 14:return e.abrupt("return",!1);case 16:return e.abrupt("return",null);case 17:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}(),t.createAsync=function(){var e=(0,r.Z)(h().mark((function e(t){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,GameCore.Utils.Valid.isValueChangeAsync(window.__fbGameReady,!0);case 3:return e.next=5,GameSDK.context.createAsync(""+t);case 5:case 15:return e.abrupt("return",GameSDK.context.getID());case 8:if(e.prev=8,e.t0=e.catch(0),!(e.t0 instanceof Object&&GameCore.Utils.Object.hasOwn(e.t0,"code"))){e.next=16;break}e.t1=e.t0.code,e.next="USER_INPUT"===e.t1?14:"SAME_CONTEXT"===e.t1?15:16;break;case 14:return e.abrupt("return",!1);case 16:return e.abrupt("return",null);case 17:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}(),t.getPlayerToken=function(){var e=(0,r.Z)(h().mark((function e(){var t;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,GameSDK.player.getSignedPlayerInfoAsync();case 2:return t=e.sent,e.abrupt("return",t.getSignature());case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),t.getContextPlayers=function(){var e=(0,r.Z)(h().mark((function e(t){var n,r;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,GameSDK.context.getPlayersAsync();case 3:return n=e.sent,r=[],n.forEach((function(e){var n=e.getID();if(n!==t){var a=e.getName();if(a){var i=e.getPhoto();r.push(new A.Z(n,a,i).toObject())}}})),e.abrupt("return",GameCore.Utils.Array.unique(r));case 9:return e.prev=9,e.t0=e.catch(0),console.warn("getPlayersAsync",{error:e.t0}),e.abrupt("return",[]);case 13:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}(),t.shareAsync=function(){var e=(0,r.Z)(h().mark((function e(t){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,GameSDK.shareAsync(t);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),t.sendMessage=function(){var e=(0,r.Z)(h().mark((function e(t){var n,r,a,i,s,o;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.data,r=t.image,a=t.template,i=t.cta,s=t.text,o={data:n,image:r,action:"CUSTOM",template:a,cta:i,text:s,strategy:"IMMEDIATE",notification:"PUSH"},e.next=4,GameSDK.updateAsync(o);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),t.inviteAsync=function(){var e=(0,r.Z)(h().mark((function e(t){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,GameSDK.inviteAsync(t);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),t.postSessionScoreAsync=function(){var e=(0,r.Z)(h().mark((function e(t){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,GameSDK.postSessionScoreAsync(t);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),t.getRewardedVideoAsync=function(){var e=(0,r.Z)(h().mark((function e(t){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,GameSDK.getRewardedVideoAsync(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),t.getInterstitialAdAsync=function(){var e=(0,r.Z)(h().mark((function e(t){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,GameSDK.getInterstitialAdAsync(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),t.getContextID=function(){return GameSDK.context.getID()},t.setLoadingProgress=function(e){GameSDK.setLoadingProgress(e)},t.getLocale=function(){return GameSDK.getLocale()||"en"},t.injectTournament=function(){var e=(0,r.Z)(h().mark((function e(){var t,r;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!GameCore.Configs.Tournament.UseMock){e.next=11;break}return e.next=4,n.e(783).then(n.bind(n,599));case 4:t=e.sent.default,r=new t,this.facebook.tournament=r,GameSDK.getTournamentAsync=this.getTournamentAsync,GameSDK.tournament=r,e.next=12;break;case 11:this.facebook.tournament=new R;case 12:this.facebook.getTournamentAsync=function(){return FBInstant.getTournamentAsync()},this.facebook.requestTournamentAsync=this.requestTournamentAsync;case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),t.sendNotificationAsync=function(){var e=(0,r.Z)(h().mark((function e(t){var n,r,a;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,console.log("\ud83e\udd16 ? sendNotificationAsync",t),n=t.message,r=t.delayTime,a=t.type,e.next=5,FBInstant.scheduleNotificationAsync({title:L,minDelayInSeconds:r,description:n,type:null!=a?a:P.Z.GENERIC_NOTIFICATION});case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.error("\ud83e\udd16 ? sendNotificationAsync",e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),e}(),D=B},441:function(e,t,n){"use strict";var r=n(115),a=n.n(r),i=n(59),s=n.n(i),o=function(e,t){return void 0===t&&(t=1),a()({length:Math.ceil(e.length/t)},(function(n,r){return s()(e).call(e,r*t,r*t+t)}))},c=n(192),u=n.n(c),l=n(78),h=n.n(l),d=function(e,t){return u()(e).call(e,(function(e){return!h()(t).call(t,e)}))},p=function(e){for(var t=e.length-1;t>0;t--){var n=Math.floor(Math.random()*(t+1)),r=[e[n],e[t]];e[t]=r[0],e[n]=r[1]}},f=n(93),m=n.n(f),v=function(e,t,n){return m()(n).call(n,e)===t&&null!==e&&void 0!==e},g=function(e){return u()(e).call(e,v)},y={chunk:o,difference:d,shuffle:p,unique:g},w=n(118),S=n.n(w),E=n(260),b=n.n(E),k=b()((function(e,t){if("string"===typeof e){var n=t[e.toLowerCase()];if("string"===typeof n)return n}return"?"})),x=b()((function(e){for(var t=null,n=[],r=/:([A-Z0-9?]+)/gm;null!==(t=r.exec(e));)n.push(t[1]);return n})),A=b()((function(e){for(var t=null,n=[],r=/([0-9]+[A-Z?]{1}|[A-Z?]{1})/gm;null!==(t=r.exec(e));){var a=t[0];if(a.length>=2){var i,o=a.length,c=s()(a).call(a,0,o-1),u=a[o-1],l=S()(i=new Array(+c)).call(i,u);n.push.apply(n,l)}else n.push(a)}return n})),C=function(e,t){var n=e,r=GameCore.Utils.Object.invert(t),a={},i=0,s=0;return x(n).forEach((function(e){i=0,s++,a[s]||(a[s]={}),A(e).forEach((function(e){i++,a[s][i]=k(e,r)}))})),a},T=b()((function(e,t){var n=t[e];return"string"===typeof n?""+n.toUpperCase():"?"})),P=function e(t,n,r){void 0===r&&(r=!1);var a="";if(!GameCore.Utils.Valid.isObject(t))return a;var i="",o=1;for(var c in t)if(GameCore.Utils.Object.hasOwn(t,c)){var u=t[c];if(GameCore.Utils.Valid.isObject(u))a+=":"+e(u,n,!0);else if(GameCore.Utils.Valid.isString(u)){var l=T(u,n);l===i?(o++,a=s()(a).call(a,0,-2)):o=1,a+=""+o+l,i=l}}return a=a.replace(/1([A-Z])/g,"$1")},I=function(e){try{return atob(e)}catch(t){return""}},O={decodeMap:C,encodeMap:P,hashToString:I,stringToHash:function(e){try{return btoa(e)}catch(t){return""}}},M=function(e){try{return JSON.parse(e)}catch(t){return null}},_=n(60),L=n.n(_),R=function(e){try{return L()(e,null,0)}catch(t){return""}},B=function(e){return M(R(e))},D={clone:B,decode:M,encode:R},N=function(e){var t="object"===typeof e||"function"===typeof e,n=Array.isArray(e);return null!==e&&t&&!n},G=function(e){return void 0===e||null===e},F=function e(t){if(!N(t))return t;for(var n in t){G(t[n])&&delete t[n];var r=t[n];N(r)&&(t[n]=e(r))}return t},Z=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},U=n(92),H=n.n(U),W=function(e){var t={};return H()(e).forEach((function(n){if(Z(e,n)){var r=e[n];"string"===typeof r&&(t[r]=n)}})),t},V=function(e,t){if(!Array.isArray(e))return{};var n={};return e.forEach((function(e){if(Z(e,t)){var r=e[t];"string"===typeof r&&(n[r]=e)}})),n},Y={clear:F,hasOwn:Z,invert:W,keyBy:V},z=function(e){return e?e[0].toUpperCase()+s()(e).call(e,1):e},K=function(e){var t=0;if(0==e.length)return t;for(var n=0;n<e.length;n++){t=(t<<5)-t+e.charCodeAt(n),t&=t}return t},j=n(94),X=n.n(j),q=function(e){var t;return X()(t=H()(e)).call(t,(function(t,n){var r=e[n];return void 0!==r&&t.push(n+"="+r),t}),[]).join("&")},Q=function(e){void 0===e&&(e="0x");for(var t=e,n=0;n<6;n++)t+="0123456789ABCDEF"[Math.floor(16*Math.random())];return t},J=n(415),$=function(e){return e.normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(/[\u0111\u0110]/g,(function(e){return"\u0111"===e?"d":"D"}))},ee=n(77),te=n.n(ee),ne=n(461),re=n.n(ne),ae=function(e,t){var n,r=e.split(" "),a=(r.length<=1?te()(n=[]).call(n,r):[r[0],r.pop()]).join(" "),i=re()(a).call(a," ")||0,s=i>=0?i:t;return(a.length>t?a.substring(0,s):a).substring(0,t)},ie=n(267),se=n.n(ie),oe=function(e){void 0===e&&(e=16);var t=function(t){return Math.floor(t).toString(e)};return t(Date.now()/1e3)+se()(" ").call(" ",e).replace(/./g,(function(){return t(Math.random()*e)}))},ce={capitalize:z,hashCode:K,params:q,toCamelCase:function(e){var t=e.replace(/[-_\s.]+(.)?/g,(function(e,t){return t?t.toUpperCase():""}));return t.substr(0,1).toLowerCase()+t.substr(1)},toUpperCamelCase:function(e){var t=e.replace(/[-_\s.]+(.)?/g,(function(e,t){return t?t.toUpperCase():""}));return t.substr(0,1).toUpperCase()+t.substr(1)},randomColor:Q,random:J.Z,removeDiacritics:$,getShortName:ae,generateObjectId:oe},ue=function(e){return"boolean"===typeof e},le=function(){return!0},he=function(e){return"function"===typeof e},de=function(e){return"number"===typeof e},pe=function(e){var t;return m()(t=["string","number","symbol"]).call(t,typeof e)>-1},fe=function(e){return"string"===typeof e},me=n(76),ve=n.n(me),ge=function(e,t,n){var r=n||{},a=r.timeout,i=void 0===a?1e3:a,s=r.checkInterval,o=void 0===s?100:s;return new(ve())((function(n){var r=setInterval((function(){("function"===typeof e?e():e)===("function"===typeof t?t():t)&&(clearInterval(r),n(!0))}),o);i>0&&setTimeout((function(){clearInterval(r),n(!1)}),i)}))},ye={isBoolean:ue,isDebugger:le,isFunction:he,isNumber:de,isObject:N,isPropertyKey:pe,isString:fe,isValueChangeAsync:ge},we=function(e){var t=e.scene,n=e.key,r=e.newKey,a=t.textures.get(n).getSourceImage();if(!a)return!1;var i=Math.min(a.width,a.height);r||t.textures.removeKey(n);var s=t.textures.createCanvas(r||n,i,i),o=s.context;return o.beginPath(),o.arc(i/2,i/2,i/2,0,2*Math.PI,!1),o.clip(),s.draw((a.width-i)/2,(a.height-i)/2,a),!0},Se=function(e){var t=e.scene,n=e.key,r=e.newKey,a=e.radius,i=e.width,s=e.height,o=t.textures.get(n).getSourceImage();if(!o)return!1;i||(i=o.width),s||(s=o.height),r||t.textures.removeKey(n);var c=t.textures.createCanvas(r||n,i,s),u=c.context,l=Math.min(i,s)/100*a/2;return u.beginPath(),u.moveTo(0+l,0),u.lineTo(0+i-l,0),u.quadraticCurveTo(0+i,0,0+i,0+l),u.lineTo(0+i,0+s-l),u.quadraticCurveTo(0+i,0+s,0+i-l,0+s),u.lineTo(0+l,0+s),u.quadraticCurveTo(0,0+s,0,0+s-l),u.lineTo(0,0+l),u.quadraticCurveTo(0,0,0+l,0),u.closePath(),u.clip(),c.draw(0,0,o),!0},Ee=function(){return GameCore.Utils.Device.isDesktop()||GameCore.Utils.Device.pixelRatio()>1?2:1},be=function(e,t){var n=e.split(","),r=n[0].match(/:(.*?);/);if(!r)return null;for(var a=r[1],i=atob(n[n.length-1]),s=i.length,o=new Uint8Array(s);s--;)o[s]=i.charCodeAt(s);return new File([o],t,{type:a})},ke=n(202),xe=n.n(ke),Ae=new Image,Ce=function(e,t){return void 0===t&&(t=!0),new(ve())((function(n){t&&(Ae=new Image),Ae.onload=function(){n(Ae)},Ae.onerror=function(){n(null)},Ae.src=xe().createObjectURL(e)}))},Te=n(75),Pe=n(46),Ie=n.n(Pe),Oe=function(){var e=(0,Te.Z)(Ie().mark((function e(t,n){var r;return Ie().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(t).then((function(e){return e.blob()})).catch((function(){return null}));case 2:if(r=e.sent){e.next=5;break}return e.abrupt("return",null);case 5:return e.abrupt("return",new File([r],n));case 6:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),Me=function(e){if(m()(e).call(e,".")<0)return e;for(var t=e.length-1;t>=0;t--){if("."==e[t])return e.substring(0,t);if("0"!=e[t])return e.substring(0,t+1)}return e},_e=function(e,t){var n=t||{},r=n.fractionalDigits,a=void 0===r?0:r,i=n.startAbbreviate,s=void 0===i?1e3:i,o=n.abbreviateStep,c=void 0===o?3:o,u=n.maxLength,l=void 0===u?-1:u,h=n.removeLastZero,d=void 0===h||h,p=n.suffixes,f=void 0===p?["","k","m","b","t","q"]:p,m=-1===l?99999999:l;if(e>=s){var v=Math.floor(e/Math.pow(10,c)),g=Math.floor((v.toString().length-1)/c)+1,y=(e/Math.pow(Math.pow(10,c),g)).toFixed(a),w=m-f[g].length,S=y.substring(0,w);return(d?Me(S):S)+f[g]}var E=e.toFixed(a),b=m-f[0].length,k=E.substring(0,b);return d?Me(k):k+f[0]},Le={Array:y,Hash:O,Json:D,Object:Y,String:ce,Valid:ye,Image:{drawCircle:we,drawBorder:Se,getImageScale:Ee,base64ToFile:be,blobToHtmlImage:Ce,blobUrlToFile:Oe},Number:{toAbbreviatedString:_e,padStart:function(e,t,n){void 0===n&&(n="0");for(var r=e.toString(),a=r.length,i=0;i<t-a;i++)r=n+r;return r},padEnd:function(e,t,n){void 0===n&&(n="0");for(var r=e.toString(),a=r.length,i=0;i<t-a;i++)r+=n;return r},random:function(e,t){var n=t?Math.random()>.5?1:-1:1;return Math.floor(Math.random()*e)*n}},Device:{isDesktop:function(){return!/Android|iPhone|iPad|iPod/i.test(navigator.userAgent)},isMobile:function(){return/Android|iPhone|iPad|iPod/i.test(navigator.userAgent)},isAndroid:function(){return window.__fbPlatform?"ANDROID"===window.__fbPlatform:/Android/i.test(navigator.userAgent)},isIOS:function(){return window.__fbPlatform?"IOS"===window.__fbPlatform:/iPhone|iPad|iPod/i.test(navigator.userAgent)},isMobileWeb:function(){return window.__fbPlatform?"MOBILE_WEB"===window.__fbPlatform:/mobile/i.test(navigator.userAgent)},pixelRatio:function(){return Math.round(window.devicePixelRatio)||1}},Time:{isToday:function(e){var t=new Date(e),n=new Date;return t.getDate()===n.getDate()&&t.getMonth()===n.getMonth()&&t.getFullYear()===n.getFullYear()},sleepAsync:function(e){return new(ve())((function(t){return setTimeout(t,e)}))}}},Re=n(90),Be=n(182),De={AppId:"1485269139041031",Ads:{CalculateSafeAreaBottom:!0,EnableRewardVideoResetInterstitial:!1,RewardAdOptions:{pID:"",secondsFirstTime:0,secondsBetweenAds:0},Enabled:!0,Mockup:{ErrorRate:5,GiphyApiKey:"VmjHIRsfrwCAssDS4mDo9DoImxJm1lLM",Enable:!1},InterstitialAdOptions:{pID:"",showWhenStartGame:!1,secondsFirstTime:45,secondsBetweenAds:90},BannerAdOptions:[{placementId:"456",position:"right",bannerWidth:160,bannerHeight:600,platform:"DESKTOP",secondsReload:60},{placementId:"789",position:"left",bannerWidth:160,bannerHeight:600,platform:"DESKTOP",secondsReload:60}]}},Ne={ENV:"production",Notification:{Enable:!1},LeadersBoard:{Prefix:"leaderboards"},Debugger:{ShowConsole:!1,ShowInspector:!1,ShowMonitoring:!1},Statistics:{Enable:!1,ShowFPSInGame:!1,ShowMemoryInGame:!1},Ads:{BannerAdOptions:[{placementId:"456",position:"right",bannerWidth:160,bannerHeight:600,platform:"DESKTOP",secondsReload:60}]},Rollbar:{Enable:!0}},Ge={ENV:"development",AppId:"",ApiHost:"https://fbig-singleplay-apps-dev.sunstudio.io",OtherHost:"https://leaderboards-dev.sunstudio.io",Level:{url:"./assets/compressed-levels/",maxLevel:2e3,alwaysLoadNew:!1,retryCount:3,retryDelay:2e3,step:50,wisdomPerLevel:30},SyncProfileFromAPI:!1,Notification:{Enable:!0,DisableSendNotification:!1,ApiUrl:"https://notifications.sunstudio.io",GameTitle:"Sun Studio",GameImage:"https://sunstudio.io/images/logo.png",DailyNotificationMessages:{MONDAY:"Start fresh and match 3 tiles to keep your rack clear! You've got this! \ud83e\udde0",TUESDAY:"Another day, another challenge! Shuffle the board and get matching! \ud83d\udd04",WEDNESDAY:"Got a strategy? Clear the board before the rack fills up! \ud83d\udca1",THURSDAY:"Don't let the tiles pile up\u2014log in and match your way to a clear rack! \ud83c\udfc6",FRIDAY:"It's almost the weekend! Match, shuffle, and keep your winning streak alive! \ud83d\udd25",SATURDAY:"Weekend fun\u2014shuffle the board and make the perfect match today! \ud83c\udf00",SUNDAY:"End your week with some tile-matching fun! Keep your rack clear to win! \ud83c\udfae"}},AddShortcut:{UseMock:!1},SubscribeBot:{UseMock:!1},PlayerMock:{id:"",signature:""},OpponentMock:{id:"",signature:""},MatchMockFailRate:5,Gameplay:{StartLevel:1,StartScore:0,StartDiamonds:0,DefaultDiamondsForNewUser:300,LevelDifficultRate:{FromUnder30:1.07,FromUnder35:1.05,FromUnder45:1.05,FromUnder200:1.1},StartAdAtLevel:2,GiftTime:10800,AwardDiamonds:100,FreeItems:!1,DelayStart:2e3,DelayLevelUp:1800,DelayFinishGame:2900,EnableVibrate:!0},Tutorial:{ForceUseTutorial:!1,NumberOfTutorial:{FirstMove:3,TargetScore:1,CurrentScore:1,ColorfulGem:1,ItemPaint:1,ItemHammer:1,ItemShuffle:1}},PlayerDataStore:"playerData",Game:{AutoResize:!0,PortraitRatio:375/667,PortraitWidth:375,PortraitHeight:667,LandscapeRatio:760/450,LandscapeWidth:760,LandscapeHeight:500,ForcePixelRatio:0,DisableLandscape:!0,FullSizeOnLandscape:!1},Debugger:{ShowInspector:!1,ShowMonitoring:!1,ShowConsole:!1,Expanded:!0,AutoRefresh:!0,InspectorAutoUpdate:!0,Opacity:.8,ListPlayerDevIds:[]},Statistics:{Enable:!1,DisplayMode:0,FPS:!0,MS:!0,MB:!0,Opacity:.8,ShowFPSInGame:!0,ShowMemoryInGame:!1},ParticleEditor:{Enable:!1,Opacity:.8,Expanded:!0},ProfilerPlugin:{Enable:!1},CanvasRecorder:{Enable:!1,Options:{Type:"png",Quality:.85,RecordFps:60,SyncFps:!0}},Match:{MaxRescueCount:1,RescueGamePopupTimeout:15,ContinueSingleMatchEnabled:!1,SingleMatchStore:"singleMatch",LocalSingleMatchDefault:{_id:"12345678890",status:"open",playerId:"",score:0,level:1,startedAt:0,updateAt:0,finishAt:0,data:{}}},DailyRewards:{MaxDays:6,MockTime:0,CheckInterrupt:!0},DailyTasks:{Duration:86400},Tournament:{UseMock:!1,ForcePlay:!1,UseLeaderboard:!1,TournamentContextIds:[],YourMockTournamentCount:1},LeadersBoard:{Name:null,UseMock:!1,Prefix:"leaderboards",LeaderboardId:"5fbb6bee3f2485dac9b1dfa3",Limit:50,MockOptions:{PlayerEntryIndex:-1}},LanguageSupport:{en:"en"},EnableEffectSceneTransition:!0,DefaultTheme:"default",ThemeSupport:{default:"default"},Ads:{Enabled:!0,CalculateSafeAreaBottom:!0,EnableRewardVideoResetInterstitial:!1,Mockup:{Enable:!1,ErrorRate:5,GiphyApiKey:""},InterstitialAdOptions:{pID:"",showWhenStartGame:!1,secondsFirstTime:30,secondsBetweenAds:30},RewardAdOptions:{pID:"",secondsFirstTime:0,secondsBetweenAds:0},BannerAdOptions:[{placementId:"123",position:"bottom",bannerWidth:320,bannerHeight:50,platform:"MOBILE",secondsReload:60},{placementId:"456",position:"right",bannerWidth:160,bannerHeight:600,platform:"DESKTOP",secondsReload:60}]},Network:{MaximumRequest:6,Timeout:15e3,Retries:3},Analytics:{GoogleAnalytics:{consoleLog:!1},FacebookAnalytics:{prefix:"fba",consoleLog:!1}},Sentry:{errorCodes:{accepted:[],ignored:["USER_INPUT","NETWORK_FAILURE"]},errorMessages:{accepted:[],ignored:["Load image failed","Script error."]}},Rollbar:{Enable:!1,UseMockup:!1,FilterError:{Codes:{accepted:[],ignored:["USER_INPUT","NETWORK_FAILURE"]},Messages:{accepted:[],ignored:["Load image failed","Request failed to be processed","Script error."]}}},Performance:{Enable:!1,trackingSceneKeys:["DASHBOARD_SCENE","GAME_SCENE"],minQuality:1,maxQuality:2,fpsThreshold:48,checkInterval:2e3,qualityAdjustStep:.1,autoUpgradeQuality:!0,onlyUpdateWhenSwitchScene:!0}};Ge=(0,Be.TS)((0,Re.Z)({},Ge),Ne);var Fe=Ge=(0,Be.TS)((0,Re.Z)({},Ge),De),Ze=function(e){return function(t){try{var n=window.game,r=t.module;if(n.scene.getScenes(!0)[0].scene.key!==e)return;var a=r.default;n.scene.remove(e),n.scene.add(e,a,!0),n.scene.bringToTop(n.globalScene),console.log("%c HotScene: ","font-size:12px;background-color: #465975;color:#fff;",e)}catch(s){var i;null==(i=void 0)||i.invalidate()}}},Ue=n(530),He=n.n(Ue),We=n(532),Ve=n.n(We),Ye=n(534),ze=n.n(Ye),Ke=n(416),je=!1,Xe=function e(t,n,r){n.forEach((function(n){if(n.name){var a=null;if(a=r?r.getByName(n.name):t.children.getByName(n.name),je&&console.log("%c Checking object: ","font-size:12px;background-color: #465975;color:#fff;",n.name,n.type),a){if("Container"===n.type){var i=a,s=n.getAll();if(e(t,s,i),!i.hotContainer)return;console.log("%c Update container: ","font-size:12px;background-color: #33A5FF;color:#fff;",i.name)}var o=He()(n),c=["_events","_sysEvents","input","localTransform","list","displayList"],l=u()(o).call(o,(function(e){if("string"!==typeof e)return!1;if(m()(c).call(c,e)>=0)return!1;if(!a)return!1;var t=Ve()(n,e);return!(t instanceof Function)&&(!(t instanceof Phaser.Scene)&&(!(t instanceof Phaser.GameObjects.Group)&&(!(t instanceof Phaser.GameObjects.GameObject)&&t===Ve()(a,e))))}));l.length<1||(je&&console.log("%c HotObject: ","font-size:12px;background-color: #2EAFB0;color:#fff;",n.name,l),l.forEach((function(e){if(a){var t=Ve()(n,e),r=Ve()(a,e),i=ze()(a,e,t);je&&console.log("%c Update property: ","font-size:12px;background-color: #B03734;color:#fff;",i,e,{oldValue:r,newValue:t})}})))}}}))},qe={Configs:Fe,Utils:Le,LiveUpdate:{Scene:Ze,SceneObjects:function(e,t){return void 0===t&&(t=je),function(n){try{var r=window.game,a=n.module,i=r.scene.getScenes(!0)[0];if(i.scene.key!==e)return;je=t;var s=a.default,o=e+"-draft";r.scene.remove(o);var c=r.scene.add(o,s);console.log("%c HotSceneObjects: ","font-size:12px;background-color: #465975;color:#fff;",e),i=r.scene.getScene(e),c.events.once(Phaser.Scenes.Events.RENDER,(0,Ke.D)((function(){var e=c.children.getAll();Xe(i,e),r.scene.remove(o)})),50),r.scene.run(o),r.scene.bringToTop(i),r.scene.bringToTop(r.globalScene)}catch(u){console.warn(u)}}}}};window.GameCore=qe},589:function(e,t,n){"use strict";var r=n(75),a=n(45),i=n(46),s=n.n(i),o=n(91),c=n(432),u=GameCore.Utils.Object,l=GameCore.Ads,h=l.Types,d=l.Status,p=function(e){function t(t,n){var r;return(r=e.call(this,t)||this).instance=void 0,r.placementId=void 0,r.instanceLoadFailedQueue=void 0,r.isHasTooManyInstancesError=void 0,r.instance=null,r.placementId=n,r.instanceLoadFailedQueue=[],r.isHasTooManyInstancesError=!1,r}(0,a.Z)(t,e),t.setGame=function(e){self.game=e};var n=t.prototype;return n.loadAsync=function(){var e=(0,r.Z)(s().mark((function e(){var t,n;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.status===d.IDLE){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,this.status=d.LOADING,e.next=6,this.createInstanceByType(this.type);case 6:if(this.instance=e.sent,null!==this.instance){e.next=9;break}throw new GameCore.Ads.AdError("AD_INSTANCE_NOT_INITIATED","Ad instance didn't initiated.");case 9:return e.next=11,this.instance.loadAsync();case 11:this.status=d.FILLED,t=this.getSceneName(),this.type===h.PRE_ROLL&&self.game.analytics.loadPreRollAd(t),this.type===h.INTERSTITIAL&&self.game.analytics.loadInterstitialAd(t),this.type===h.REWARDED&&self.game.analytics.loadRewardedVideoAd(t),e.next=26;break;case 18:throw e.prev=18,e.t0=e.catch(2),this.status=d.IDLE,this.instance&&this.instanceLoadFailedQueue.push(this.instance),this.instance=null,n=this.getSceneName(),self.game.analytics.loadAdFail(this.type,n,e.t0),e.t0;case 26:case"end":return e.stop()}}),e,this,[[2,18]])})));return function(){return e.apply(this,arguments)}}(),n.showAsync=function(){var e=(0,r.Z)(s().mark((function e(){var t,n;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=!1,e.prev=1,this.status===d.FILLED){e.next=4;break}throw new GameCore.Ads.AdError("AD_NOT_FILLED","Ads no fill.");case 4:if(this.status=d.SHOWING,null!==this.instance){e.next=7;break}throw new GameCore.Ads.AdError("AD_INSTANCE_NOT_INITIATED","Ad instance didn't initiated.");case 7:return this.isHasTooManyInstancesError&&self.game.analytics.event(o._.MISSING_AD_SHOW,{ad_type:this.type}),e.next=10,this.instance.showAsync();case 10:t=!0,this.status=d.IDLE,this.instance=null,e.next=19;break;case 15:throw e.prev=15,e.t0=e.catch(1),e.t0 instanceof Object&&u.hasOwn(e.t0,"code")?("ADS_NOT_LOADED"===e.t0.code?this.status=d.FILLED:(this.status=d.IDLE,this.instance=null),"USER_INPUT"===e.t0.code&&(this.status=d.IDLE,this.instance=null,t=!0)):(this.status=d.IDLE,this.instance=null),e.t0;case 19:return e.prev=19,window.focus(),n=this.getSceneName(),t?(this.type===h.PRE_ROLL&&self.game.analytics.showPreRollAd(n),this.type===h.INTERSTITIAL&&self.game.analytics.showInterstitialAd(n),this.type===h.REWARDED&&self.game.analytics.showRewardedVideoAd(n)):self.game.analytics.showAdFail(this.type,n),e.finish(19);case 24:case"end":return e.stop()}}),e,this,[[1,15,19,24]])})));return function(){return e.apply(this,arguments)}}(),n.getStatus=function(){return this.status},n.createInstanceByType=function(){var e=(0,r.Z)(s().mark((function e(t){var n;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=self.game.facebook,e.prev=1,e.t0=t,e.next=e.t0===h.REWARDED?5:e.t0===h.INTERSTITIAL||e.t0===h.PRE_ROLL?8:11;break;case 5:return e.next=7,n.getRewardedVideoAsync(this.placementId);case 7:case 10:return e.abrupt("return",e.sent);case 8:return e.next=10,n.getInterstitialAdAsync(this.placementId);case 11:case 20:return e.abrupt("return",null);case 12:e.next=21;break;case 14:if(e.prev=14,e.t1=e.catch(1),!(e.t1 instanceof Object&&u.hasOwn(e.t1,"code"))){e.next=20;break}if("ADS_TOO_MANY_INSTANCES"!==e.t1.code){e.next=20;break}return this.isHasTooManyInstancesError=!0,e.abrupt("return",this.instanceLoadFailedQueue.shift()||null);case 21:case"end":return e.stop()}}),e,this,[[1,14]])})));return function(t){return e.apply(this,arguments)}}(),n.getSceneName=function(){try{var e=self.game.globalScene;return e instanceof c.Z?e.getCurrentScene().scene.getSceneName():"unknown"}catch(t){return"unknown"}},t}(GameCore.Ads.AdInstance);t.Z=p},587:function(e,t,n){"use strict";n.d(t,{U:function(){return E},v:function(){return b}});var r=n(90),a=n(75),i=n(46),s=n.n(i),o=n(60),c=n.n(o),u=n(45),l=n(185),h=function(e){function t(t,n){var r;return(r=e.call(this,t,n)||this).name="BadRequest",r.message=t||"This request is bad",r.payload=n,r}return(0,u.Z)(t,e),t}((0,l.Z)(Error)),d=function(e){function t(t,n){var r;return(r=e.call(this,t,n)||this).name="RequestTimeout",r.message=t||"This request is timeout",r.payload=n,r}return(0,u.Z)(t,e),t}((0,l.Z)(Error)),p=n(184),f=GameCore.Configs,m=f.AppId,v=f.Network,g=function(e){if(!e.ok)throw new h(null,{response:e})},y=function(){var e=window.game.auth.getToken();return{token:e,timeout:v.Timeout,headers:{Authorization:"Bearer "+e,"Content-Type":"application/json"}}},w=function(e,t,n,r){return(0,a.Z)(s().mark((function a(){var i,o,u,l,p;return s().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,i=e+"/apps/"+m+"/"+t,o=new AbortController,n.signal=o.signal,u=setTimeout((function(){o.abort()}),n.timeout),GameCore.Utils.Valid.isObject(r)&&(n.body=c()(r)),a.next=8,fetch(i,n);case 8:return l=a.sent,clearTimeout(u),g(l),a.next=13,l.json();case 13:if(a.t0=a.sent,a.t0){a.next=16;break}a.t0={};case 16:return p=a.t0,a.abrupt("return",p);case 20:if(a.prev=20,a.t1=a.catch(0),!(a.t1 instanceof h)){a.next=24;break}return a.abrupt("return",null);case 24:if(!(a.t1 instanceof Object&&GameCore.Utils.Object.hasOwn(a.t1,"name"))){a.next=27;break}if("AbortError"!==a.t1.name){a.next=27;break}throw new d(null);case 27:throw a.t1;case 28:case"end":return a.stop()}}),a,null,[[0,20]])})))},S=function(){var e=(0,a.Z)(s().mark((function e(t,n){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.abrupt("return",t());case 4:if(e.prev=4,e.t0=e.catch(0),!(e.t0 instanceof d&&n>0)){e.next=18;break}return e.prev=7,e.next=10,(0,p.qZ)(600);case 10:return e.next=12,S(t,n-1);case 12:return e.abrupt("return",e.sent);case 15:return e.prev=15,e.t1=e.catch(7),e.abrupt("return",{});case 18:if(!(e.t0 instanceof d)){e.next=20;break}return e.abrupt("return",{});case 20:return console.warn(e.t0),e.abrupt("return",{});case 22:case"end":return e.stop()}}),e,null,[[0,4],[7,15]])})));return function(t,n){return e.apply(this,arguments)}}(),E=function(){var e=(0,a.Z)(s().mark((function e(t,n,a,i){var o,c;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return void 0===n&&(n={}),void 0===i&&(i=v.Retries),e.prev=2,o=(0,r.Z)({},y(),n,{method:"GET"}),c=w(a,t,o),e.next=7,S(c,i);case 7:return e.abrupt("return",e.sent);case 10:return e.prev=10,e.t0=e.catch(2),console.warn(e.t0),e.abrupt("return",{});case 14:case"end":return e.stop()}}),e,null,[[2,10]])})));return function(t,n,r,a){return e.apply(this,arguments)}}(),b=function(){var e=(0,a.Z)(s().mark((function e(t,n,a,i,o){var c,u;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return void 0===a&&(a={}),void 0===o&&(o=v.Retries),e.prev=2,c=(0,r.Z)({},y(),a,{method:"POST"}),u=w(i,t,c,n),e.next=7,S(u,o);case 7:return e.abrupt("return",e.sent);case 10:return e.prev=10,e.t0=e.catch(2),console.warn(e.t0),e.abrupt("return",{});case 14:case"end":return e.stop()}}),e,null,[[2,10]])})));return function(t,n,r,a,i){return e.apply(this,arguments)}}()},424:function(e,t,n){"use strict";n.d(t,{DW:function(){return c},EH:function(){return i},fJ:function(){return a},kL:function(){return r},qj:function(){return s},rh:function(){return o}});var r="CONTEXT_RECEIVED",a="CONTEXT_PROCESSED",i="CONTEXT_GAME_MODE_DETECTED",s="MESSAGES_SENT_UPDATE",o="MESSAGES_SENT_REMOVE",c="SCENE_KEY_UPDATE"},603:function(e,t,n){"use strict";var r=n(45),a=function(e){function t(t,n){var r;return(r=e.call(this,t,n)||this).name="TournamentNotFound",r.message=t||"A Tournament with current context was not found",r.payload=n,r.code="TOURNAMENT_NOT_FOUND",r}return(0,r.Z)(t,e),t}((0,n(185).Z)(Error));t.Z=a},189:function(e,t,n){"use strict";var r=n(182),a=function(){function e(e,t){if(this.scene=void 0,this.config=void 0,this.isStarted=void 0,this.tween=void 0,!(t.targets.length<1)){this.buildConfig(e,t);var n=this.config.targets[0].scene;n&&(this.scene=n,this.isStarted=!1,this.tween=n.tweens.create(this.config))}}var t=e.prototype;return t.buildConfig=function(e,t){this.config=(0,r.TS)(e,t)},t.play=function(){this.tween&&(this.isStarted&&this.tween.hasStarted?this.restart():(this.tween.play(),this.isStarted=!0))},t.restart=function(){var e;null==(e=this.tween)||e.restart()},t.stop=function(){var e;null==(e=this.tween)||e.stop()},t.remove=function(){var e;null==(e=this.tween)||e.remove()},t.next=function(e){return this.tween?(this.tween.off(Phaser.Tweens.Events.TWEEN_COMPLETE,e),this.tween.once(Phaser.Tweens.Events.TWEEN_COMPLETE,e),this.tween):null},e}();t.Z=a},433:function(e,t,n){"use strict";var r=n(117),a=n.n(r)()(.48,1.57,.6,.83);t.Z=a},588:function(e,t,n){"use strict";n.d(t,{Z:function(){return f}});var r=n(186),a=n(188),i=n(45),s=n(91),o=n(189),c={targets:[],duration:400,ease:n(433).Z,props:{scale:"-=0.1"}},u=function(e){function t(t){return e.call(this,c,t)||this}return(0,i.Z)(t,e),t}(o.Z),l=n(190),h=n(427),d=n(183),p=n(187),f=function(e){function t(t,n,r,i,s,o){var c;return void 0===o&&(o=!1),(c=e.call(this,t)||this).soundKey=h.Z.BUTTON_CLICK,c.callback=void 0,c.callbackPointerUpOut=void 0,c.isClicked=!1,c.isPointerOver=!0,c.scaleUp=-1,c.scaleDown=-1,c.button=void 0,c.upAnimation=void 0,c.downAnimation=void 0,c.isUsePixelPerfect=!1,c.hitArea=void 0,c.hitZone=void 0,c.scaleDownPress=void 0,c.parentName=void 0,c.handelObjectDestroy=function(){c.scene&&c.scene.events.off(Phaser.Scenes.Events.SLEEP,c.handleSceneSleep)},c.handleSceneSleep=function(){c.scene&&c.scene.tweens.killTweensOf((0,a.Z)(c))},c.handlePointerDown=function(){var e;c.isClicked||null!=(e=c.upAnimation)&&null!=(e=e.tween)&&e.isPlaying()||(c.isClicked=!0,c.scene.input.once(Phaser.Input.Events.POINTER_UP,c.handlePointerUpOut),c.runDownAnimation())},c.handleOnClick=function(e){return function(){var t;c.isClicked&&c.isPointerOver&&(null!=(t=c.upAnimation)&&null!=(t=t.tween)&&t.isPlaying()||(c.isClicked=!1,c.isPointerOver=!0,c.runUpAnimation(),c.logButtonEvent(),c.addDebugData(),c.processCallback(e)))}},c.handlePointerOut=function(){var e;c.isClicked&&(null!=(e=c.upAnimation)&&null!=(e=e.tween)&&e.isPlaying()||(c.isPointerOver=!1))},c.handlePointerOver=function(){c.isClicked&&(c.isPointerOver=!0)},c.handlePointerUpOut=function(){var e,t;c.isClicked&&(c.isPointerOver||null!=(e=c.upAnimation)&&null!=(e=e.tween)&&e.isPlaying()||(c.isClicked=!1,c.isPointerOver=!0,c.callbackPointerUpOut&&(c.scaleUp=1),c.runUpAnimation(),c.callbackPointerUpOut&&(null==(t=c.upAnimation)||null==(t=t.tween)||t.once(Phaser.Tweens.Events.TWEEN_COMPLETE,(function(){c.callbackPointerUpOut()})))))},c.runDownAnimation=function(){var e;-1===c.scaleDown&&(c.scaleUp=c.scale,c.scaleDown=c.scaleDownPress),c.soundKey&&c.scene.audio.playSound(c.soundKey),null==(e=c.downAnimation)||e.remove(),c.downAnimation=new u({targets:[(0,a.Z)(c)],duration:100,props:{scale:c.scaleDown},onUpdate:function(){c.hitZone.scale=1/c.scale}}),c.downAnimation.play()},c.runUpAnimation=function(){var e;-1!==c.scaleUp&&(null==(e=c.upAnimation)||e.remove(),c.upAnimation=new u({targets:[(0,a.Z)(c)],duration:100,props:{scale:c.scaleUp},onUpdate:function(){c.hitZone.scale=1/c.scale}}),c.upAnimation.play())},c.isUsePixelPerfect=o,c.setDepth(l.Z.BUTTON),c.createButton(n,r,i,s),c.updateSize(),c.listenEvents(),c.scene.add.existing((0,a.Z)(c)),c}(0,i.Z)(t,e);var n=t.prototype;return n.listenEvents=function(){this.scene.events.on(Phaser.Scenes.Events.SLEEP,this.handleSceneSleep),this.once(Phaser.GameObjects.Events.DESTROY,this.handelObjectDestroy)},n.processCallback=function(e){var t,n,r;null==(t=this.upAnimation)||t.stop(),null==(n=this.downAnimation)||n.stop(),null==(r=this.scene)||r.tweens.killTweensOf(this),-1!==this.scaleUp&&this.setScale(this.scaleUp),e()},n.setDisabled=function(e){var t,n;e?(this.setAlpha(.5),null==(t=this.hitArea)||t.disableInteractive()):(this.setAlpha(1),null==(n=this.hitArea)||n.setInteractive())},n.createButton=function(e,t,n,r){this.button=this.scene.add.image(0,0,e,t),n&&r&&this.button.setWorldSize(n,r),this.scaleDownPress=this.scale-.1;var a=this.button,i=a.displayWidth,s=a.displayHeight;this.hitZone=this.scene.make.zone({displayWidth:i,displayHeight:s}),this.add([this.button,this.hitZone])},n.updateSize=function(){var e=this.button,t=e.width,n=e.height,r=t/100*10,a=n/100*10,i=r<10?r:10,s=a<10?a:10;this.setSize(t+i,n+s),this.hitZone.setSize(t+i,n+s)},n.addDebugData=function(){var e=this.getParentName(),t=this.name;(0,d.sw)("ui-click",e+":"+t)},n.logButtonEvent=function(){var e=this.getParentName(),t=this.name;this.scene.analytics.event(s._.BUTTON_CLICK,{button_name:t,screen_name:e})},n.getParentName=function(){if(this.parentName)return this.parentName;for(var e=this.parentContainer;e;){if(e instanceof GameCore.Screen){var t=e;return this.parentName=t.getScreenName(),this.parentName}e=e.parentContainer}var n=this.scene.screen.get(p.o4.DASHBOARD_SCREEN);if(null!=n&&n.visible)return n.getScreenName();var r=this.scene.screen.get(p.o4.RESULT_SCREEN);return null!=r&&r.visible?r.getScreenName():(this.parentName=this.scene.getSceneName(),this.parentName)},(0,r.Z)(t,[{key:"onClick",set:function(e){this.callback=e,this.isUsePixelPerfect?(this.hitArea=this.button,this.hitArea.setInteractive({useHandCursor:!0,pixelPerfect:!0})):(this.hitArea=this.hitZone,this.updateSize(),this.hitArea.setInteractive({useHandCursor:!0})),this.hitArea.on(Phaser.Input.Events.GAMEOBJECT_POINTER_DOWN,this.handlePointerDown),this.hitArea.on(Phaser.Input.Events.GAMEOBJECT_POINTER_UP,this.handleOnClick(e)),this.hitArea.on(Phaser.Input.Events.GAMEOBJECT_POINTER_OUT,this.handlePointerOut),this.hitArea.on(Phaser.Input.Events.GAMEOBJECT_POINTER_OVER,this.handlePointerOver)}},{key:"isUsePixelPerFect",get:function(){return this.isUsePixelPerfect}}]),t}(Phaser.GameObjects.Container)},190:function(e,t){"use strict";t.Z={BACKGROUND:1,UI:2,FIREWORKS:5,ITEM:10,LOGO:15,BUTTON:20,TILE:25,TEXT:30,ENCOURAGING:31,EFFECT:32,MESSAGE:33,POPUP:40,PRIORITY:80,DEBUG:90,BOARD:99,RACK:100,FOOTER:101,TUTORIAL_HAND:102,TOP_CONTAINER:103,GAMEPLAY_PARTICLE:104,TOP_SCREEN:1e3,ON_TOP:1e4,TEMP_ON_TOP:10001,SPECIAL_ANIM:10002}},428:function(e,t){"use strict";t.Z={PRIMARY:{KEY:"bebas",TEXTURE:"./assets/fonts/bebas.png",DATA:"./assets/fonts/bebas.xml"},NUMBERS:{KEY:"numbers",TEXTURE:"./assets/fonts/numbers.png",DATA:"./assets/fonts/numbers.xml"},NUMBERS_ORANGE:{KEY:"numbers-orange",TEXTURE:"./assets/fonts/numbers-orange.png",DATA:"./assets/fonts/numbers-orange.xml"},FONT_FAMILY:"D-DIN-PRO-900-Heavy"}},420:function(e,t){"use strict";var n=GameCore.Utils.Image.getImageScale(),r={AVATAR:{KEY:"avatar",FILE:"./assets/images/others/avatar.png",CONFIG:{}},ICON_EARTH:{KEY:"icon-earth",FILE:"./assets/images/others/icon-earth.png",CONFIG:{}},DB_BACKGROUND:{KEY:"db-background",FILE:"./assets/images/"+n+"x/db-bg.jpg",CONFIG:{}},GP_BACKGROUND:{PATH:"./assets/images/"+n+"x/",KEYS:{background_1:"bg-1.jpg",background_2:"bg-2.jpg",background_3:"bg-3.jpg"}}};t.Z=r},431:function(e,t,n){"use strict";var r=n(90),a=GameCore.Utils.Image.getImageScale(),i={DEFAULT:{KEY:"default-resources",TEXTURE:"./assets/textures/"+a+"x/default-resources.png",BLANK_TEXTURE:"./assets/textures/"+a+"x/blank-default-resources.png",TEXTURE_32:"./assets/textures/"+a+"x/default-resources-32.png",JSON:"./assets/textures/"+a+"x/default-resources.json",BLANK_JSON:"./assets/textures/"+a+"x/blank-default-resources.json",FRAME:{BLANK:"blank",LOGO:"title-logo",PRELOADER:"preloader/dual-ring",BUTTON_BLUE_LONG_2:"dashboard-screen/blue-long-2",BUTTON_BLUE_CIRCLE_BIG:"dashboard-screen/blue-circle-big",ICON_TROPHY:"dashboard-screen/trophy",DASHBOARD_SCREEN_RIBBON:"dashboard-screen/ribbon",DASHBOARD_SCREEN_SUN:"dashboard-screen/sun",DASHBOARD_SCREEN_SUN_RAY_PREFIX:"dashboard-screen/sun-ray-",DASHBOARD_SCREEN_WISDOM:"dashboard-screen/wisdom",TEXT_LEVEL:"dashboard-screen/level",BACK_ICON:"theme-screen/icon-back",CARDS:{CARD_1:"theme-screen/card-01",CARD_2:"theme-screen/card-02",CARD_3:"theme-screen/card-03",LOCKED_CARD:"theme-screen/card-lock"},GRADIENT_FRAMES:{GREEN:"theme-screen/frame-green",TURQUOISE:"theme-screen/frame-turquoise",VIOLET:"theme-screen/frame-violet",YELLOW:"theme-screen/frame-yellow"},SHOP_SCREEN_HEADER:"shop-screen/header",SHOP_SCREEN_POPUP_BLUE:"shop-screen/popup-blue",SHOP_SCREEN_ITEM_MEGA_PACK:"shop-screen/item-mega-pack",SHOP_SCREEN_ITEM_STARTER:"shop-screen/item-starter",SHOP_SCREEN_ITEM_SUPER_PACK:"shop-screen/item-super-pack",SHOP_SCREEN_BTN_BLUE:"shop-screen/btn-blue",SHOP_SCREEN_BTN_ORANGE:"shop-screen/btn-orange",SHOP_SCREEN_COIN:"shop-screen/coin",SHOP_SCREEN_COIN_PILE:"shop-screen/coin-pile",SHOP_SCREEN_ICON_AD:"shop-screen/icon-ad",SHOP_SCREEN_ICON_HELP:"shop-screen/icon-help",SHOP_SCREEN_ICON_SHUFFLE:"shop-screen/icon-shuffle",SHOP_SCREEN_ICON_THUNDER:"shop-screen/icon-thunder",SHOP_SCREEN_ICON_UNDO:"shop-screen/icon-undo",SHOP_SCREEN_RIBBON_PINK:"shop-screen/ribbon-pink",SHOP_SCREEN_SUN_RAY_BLUE:"shop-screen/sun-ray-blue",SHOP_SCREEN_SUN_RAY_YELLOW:"shop-screen/sun-ray-yellow",SHOP_SCREEN_TAG_VALUE:"shop-screen/tag-value",SHOP_SCREEN_WATCH_AD:"shop-screen/watch-ad",SETTINGS_SCREEN_BTN_CANCEL:"settings-screen/btn-cancel",SETTINGS_SCREEN_BTN_LONG:"settings-screen/btn-long",SETTINGS_SCREEN_BTN_PLUS:"settings-screen/btn-plus",SETTINGS_SCREEN_BTN_DIVINE_LINE:"settings-screen/divine-line",SETTINGS_SCREEN_ICON_ADD:"settings-screen/icon-add",SETTINGS_SCREEN_ICON_MUSIC:"settings-screen/icon-music",SETTINGS_SCREEN_ICON_SOUND:"settings-screen/icon-sound",SETTINGS_SCREEN_ICON_VIBRATE:"settings-screen/icon-vibrate",SETTINGS_SCREEN_POPUP_TOP:"settings-screen/popup-top",SETTINGS_SCREEN_POPUP_MIDDLE:"settings-screen/popup-middle",SETTINGS_SCREEN_POPUP_BOTTOM:"settings-screen/popup-bottom",SETTINGS_SCREEN_S_OFF:"settings-screen/s-off",SETTINGS_SCREEN_S_ON:"settings-screen/s-on",SETTINGS_SCREEN_SWITCH_FRAME:"settings-screen/switch-frame",SETTINGS_SCREEN_TITLE:"settings-screen/setting",SETTINGS_SCREEN_INVITE_FRIENDS:"settings-screen/invite-friends",RESULT_SCREEN_BTN_BLUE:"result-screen/btn-blue",RESULT_SCREEN_ICON_GIFT_ACTIVE:"result-screen/icon-gift-active",RESULT_SCREEN_PROGRESS_BAR_INSIDE:"result-screen/progress-bar-inside",RESULT_SCREEN_PROGRESS_BAR_OUTSIDE:"result-screen/progress-bar-outside",RESULT_SCREEN_PROGRESS_RIGHT:"result-screen/progress-right",RESULT_SCREEN_WISDOM:"result-screen/wisdom"}},EFFECTS:{KEY:"effects-resources",PATH:"./assets/textures/"+a+"x/",JSON:"./assets/textures/"+a+"x/effects-resources.json",FRAME:{BLANK:"blank",STAR:"star",COIN:"coin",FX_COMET:"comet",FX_SPARK:"spark",FX_CIRCLE:"circle",FX_CIRCLE_LIGHT:"circle-light",FX_STAR_WHITE:"star-white",FX_STAR_YELLOW:"star-yellow",FX_STAR_YELLOW_2:"star-yellow-2",GLOW_SUN:"glow-sun",FX_CONFETTI_SMALL_1:"confetti/small-1",FX_CONFETTI_SMALL_2:"confetti/small-2",FX_CONFETTI_SMALL_3:"confetti/small-3",FX_CONFETTI_SMALL_4:"confetti/small-4",FX_CONFETTI_HEXAGON:"confetti/hexagon-",FX_FIREWORKS_SMALL:"fireworks/small",FX_FIREWORKS_BIG_0:"fireworks/big-explosive-0",FX_FIREWORKS_BIG_1:"fireworks/big-explosive-1",FX_FIREWORKS_SOAR_LINE:"fireworks/soar-line",FX_FIREWORKS_SOAR_CIRCLE:"soar-circle-white",SOAR_CIRCLE_WHITE:"soar-circle-white",SOAR_CIRCLE:"soar-circle",BRIGHT:"bright",BRIGHT_DUST:"bright-dust",SOAP:"soap"}},ANIMATION_SCENE:{KEY:"effects-resources",PATH:"./assets/textures/"+a+"x/",JSON:"./assets/textures/"+a+"x/animation-scene-resources.json",FRAME:{BLANK:"blank",COIN:"coins/coin",COIN_SMALL:"coins/coin-small",COIN_SMALL_GREY:"coins/coin-small-grey",ANIMATION_STAR_X:"star-x/star-",ANIMATION_STAR_Y:"star-y/star-",FX_SPARK_YELLOW:"yellow-spark",FX_CONFETTI_RIBBON:"ribbon/ribbon",PREFIX_ANIMATION_RIBBON_CONFETTI_A:"ribbon/falling-confetti/confetti-a/confetti-a-",PREFIX_ANIMATION_RIBBON_CONFETTI_B:"ribbon/falling-confetti/confetti-b/confetti-b-",PREFIX_ANIMATION_RIBBON_CONFETTI_C:"ribbon/falling-confetti/confetti-c/confetti-c-",PREFIX_ANIMATION_RIBBON_CONFETTI_D:"ribbon/falling-confetti/confetti-d/confetti-d-"}},GAMEPLAY:{KEY:"gameplay-resources",TEXTURE:"./assets/textures/"+a+"x/gameplay-resources.png",JSON:"./assets/textures/"+a+"x/gameplay-resources.json",FRAME:{BLANK:"blank",PRELOADER:"preloader/dual-ring",BTN_CIRCLE:"buttons/btn-circle",ICON_BACK:"icons/icon-back",ICON_HELP:"icons/icon-help",ICON_SETTING:"icons/icon-setting",ICON_SHUFFLE:"icons/icon-shuffle",ICON_UNDO:"icons/icon-undo",RACK_PLUS:"icons/icon-plus",RACK_ICON_AD:"icons/icon-ad",BUTTON_BLUE_CIRCLE_SMALL:"dashboard-screen/blue-circle-small",ICON_COIN:"dashboard-screen/coin",ICON_THEME:"dashboard-screen/theme",DASHBOARD_ICON_SETTING:"dashboard-screen/setting",ICON_PLUS:"dashboard-screen/plus",COIN_PANEL_LEFT:"dashboard-screen/coin-panel-left",COIN_PANEL_MIDDLE:"dashboard-screen/coin-panel-middle",NO_MORE_SCREEN_BTN_BLUE:"no-more-moves-screen/btn-blue",NO_MORE_SCREEN_BTN_ORANGE:"no-more-moves-screen/btn-orange",NO_MORE_SCREEN_ICON_AD:"no-more-moves-screen/icon-ad",NO_MORE_SCREEN_ICON_HOME:"no-more-moves-screen/icon-home",NO_MORE_SCREEN_ICON_RETRY:"no-more-moves-screen/icon-retry",NO_MORE_SCREEN_POPUP_TOP:"no-more-moves-screen/popup-top",NO_MORE_SCREEN_POPUP_MIDDLE:"no-more-moves-screen/popup-middle",NO_MORE_SCREEN_POPUP_BOTTOM:"no-more-moves-screen/popup-bottom",NO_MORE_SCREEN_RIBBON_RED:"no-more-moves-screen/ribbon-red",NO_MORE_SCREEN_SUN_RAY:"no-more-moves-screen/sun-ray",NO_MORE_SCREEN_RETRY:"no-more-moves-screen/retry",NO_MORE_SCREEN_HOME:"no-more-moves-screen/home",NO_MORE_SCREEN_ONE_MORE_CHANCE:"no-more-moves-screen/one-more-chance",NO_MORE_SCREEN_WATCH_AN_AD:"no-more-moves-screen/watch-an-ad",NO_MORE_SCREEN_CARD_FRAME:"no-more-moves-screen/card-frame",TUTORIAL_SCREEN_RIBBON_TURQUOISE:"tutorial-screen/ribbon-turquoise",HAND:"hand"}},GAMEPLAY_COLORFUL:{KEY:"gameplay-colorful-resources",TEXTURE:"./assets/textures/"+a+"x/gameplay-colorful-resources.png",JSON:"./assets/textures/"+a+"x/gameplay-colorful-resources.json",FRAME:{BLANK:"blank",TILE_CONTAINER:"tile-container",EMPTY_TILE:"tiles/0_empty",FRONT_GLOW:"tiles/front_glow",BACK_GLOW:"tiles/back_glow",MAGIC_GLOW:"tiles/magic-glow"}},DEMO_SPINE:{KEY:"demo-spine",jsonPATH:"./assets/spines/demo/demo.json",atlasPATH:"./assets/spines/demo/demo.atlas"}};GameCore.Utils.Valid.isDebugger()&&(i.EFFECTS.FRAME=(0,r.Z)({},i.ANIMATION_SCENE.FRAME,i.EFFECTS.FRAME)),t.Z=i},429:function(e,t,n){"use strict";n.d(t,{C:function(){return a},K:function(){return i}});var r=n(116),a={BOOT_SCENE:"BOOT_SCENE",LOAD_SCENE:"LOAD_SCENE",GAME_SCENE:"GAME_SCENE",GLOBAL_SCENE:"GLOBAL_SCENE",TEST_SCENE:"TEST_SCENE",ANIMATIONS_SCENE:"ANIMATIONS_SCENE"},i={SWITCH:n.n(r)()("SWITCH")}},187:function(e,t,n){"use strict";n.d(t,{Ks:function(){return a},o4:function(){return r}});var r={NOTIFY_SCREEN:"NOTIFY_SCREEN",MAP_SCREEN:"MAP_SCREEN",DASHBOARD_SCREEN:"DASHBOARD_SCREEN",NO_MORE_MOVES_SCREEN:"NO_MORE_MOVES_SCREEN",REWARD_SCREEN:"REWARD_SCREEN",RESULT_SCREEN:"RESULT_SCREEN",WELL_DONE_SCREEN:"WELL_DONE_SCREEN",SHOP_SCREEN:"SHOP_SCREEN",SWITCH_MAP_SCREEN:"SWITCH_MAP_SCREEN",SETTINGS_SCREEN:"SETTINGS_SCREEN",TUTORIAL_SCREEN:"TUTORIAL_SCREEN"},a={SCREEN:200,POPUP:300,NAVIGATION:400,PRIORITY:999}},427:function(e,t){"use strict";t.Z={BUTTON_CLICK:"button_click",POPUP_SHOW:"popup_show",POPUP_OFF:"popup_off",SHOP_POPUP_SHOW:"shop_popup_show",THEME_POPUP_SHOW:"theme_popup_show",START_LEVEL:"start_level",TILE_TAP:"tile_tap",TILE_DROP:"tile_drop",TILE_SHAKE:"tile_shake",MATCH_1:"match_1",MATCH_2:"match_2",MATCH_3:"match_3",MATCH_4:"match_4",MATCH_5:"match_5",WIN:"win",FAIL:"fail",STAR_1:"star_1",STAR_2:"star_2",STAR_3:"star_3",SCORE_INCREASE_SINGLE:"score_increase_single",SCORE_INCREASE_END:"score_increase_end",BOOST:"boost",LEVEL_BTN_APPEAR:"level_btn_appear",COINS_ADD:"coins_add",ITEM_APPEAR:"item_appear",ITEM_RECEIVE:"item_receive",COIN_APPEAR:"coin_appear",OPEN_CHEST:"open_chest",CHEST_DROP:"chest_drop",SWITCH_MAP:"switch_map",DASHBOARD_OPEN:"dashboard_open",SHUFFLE_START:"shuffle_start",SWITCH:"switch",EXTRA_SLOT:"extra_slot"}},434:function(e,t,n){"use strict";n.d(t,{Z:function(){return c}});var r=n(45),a=n(91),i=function(e){function t(t,n,r){var a;return(a=e.call(this,t,0,0,n,r)||this).setOrigin(0,0),a}return(0,r.Z)(t,e),t}(Phaser.GameObjects.Zone),s=n(426),o={LAYOUT_UPDATE:"layout-update"},c=function(e){function t(){var t;return(t=e.call(this,{visible:!1})||this).unsubscribeList=void 0,t.gameZone=void 0,t.background=void 0,t.handleOpenScene=function(){t.logPageviewOnOpen(),t.logEventOpen()},t.handleResize=function(){if(t.background&&t.gameZone){var e=t.world.getResizeEventData(),n=e.width,r=e.height;t.gameZone.setSize(n,r),t.background.setPosition(n/2,r/2),t.background.setDisplaySize(n,r),t.events.emit(o.LAYOUT_UPDATE)}},t.removeStateChange=function(){t.unsubscribeList.forEach((function(e){return e()}))},t}(0,r.Z)(t,e);var n=t.prototype;return n.create=function(){this.events.on("wake",this.handleOpenScene),this.events.on("resume",this.handleOpenScene),this.events.on("create",this.handleOpenScene),this.world.events.on(s.Z.RESIZE,this.handleResize),this.scaleGame(),this.createGameZone()},n.scaleGame=function(){var e=this.getCamera("main"),t=this.world.getZoomRatio(),n=this.world.getWorldSize(),r=n.width,a=n.height;e.setZoom(t),e.centerOn(r/2,a/2)},n.createGameZone=function(){var e=this.world.getWorldSize(),t=e.width,n=e.height;this.gameZone=new i(this,t,n)},n.getCamera=function(e){return"main"===e?this.cameras.main:this.cameras.getCamera(e)},n.createMask=function(e){void 0===e&&(e=1),this.getCamera("main").setBackgroundColor("rgba(0, 0, 0, "+e+")")},n.fontSize=function(e){return e/2.4},n.createBackground=function(e,t,n,r){this.background?(this.background.setTexture(e),t&&this.background.setFrame(t)):this.background=this.make.image({key:e,frame:t}),this.background.setName(e);var a=this.gameZone,i=a.displayWidth,s=a.displayHeight;this.background.setDisplaySize(i,s),GameCore.Utils.Valid.isNumber(n)&&this.background.setAlpha(n),GameCore.Utils.Valid.isNumber(r)&&this.background.setTint(r),Phaser.Display.Align.In.Center(this.background,this.gameZone)},n.handleStateChange=function(e){var t=this;this.unsubscribeList=[],e.forEach((function(e){var n=e.selector,r=e.callback,a=t.storage.watch(n,r);t.unsubscribeList.push(a)})),this.events.once("sleep",this.removeStateChange),this.events.once("destroy",this.removeStateChange),this.events.once("shutdown",this.removeStateChange)},n.logPageviewOnOpen=function(){this.analytics.pageview(this.scene.key)},n.logEventOpen=function(){this.analytics.event(a._.SCREEN_OPEN,{screen_name:this.getSceneName()})},n.getSceneName=function(){return GameCore.Utils.String.toUpperCamelCase(this.scene.key.toLowerCase())},t}(Phaser.Scene)},432:function(e,t,n){"use strict";n.d(t,{Z:function(){return V}});var r=n(186),a=n(45),i=n(77),s=n.n(i),o=n(189),c={targets:[],duration:600,ease:Phaser.Math.Easing.Cubic.Out,props:{alpha:{start:0,from:0,to:1}}},u=function(e){function t(t){return e.call(this,c,t)||this}return(0,a.Z)(t,e),t}(o.Z),l={targets:[],duration:600,ease:Phaser.Math.Easing.Quadratic.Out,props:{alpha:{start:1,from:1,to:0}}},h=function(e){function t(t){return e.call(this,l,t)||this}return(0,a.Z)(t,e),t}(o.Z),d=n(431),p=n(429),f=n(187),m=n(430),v=(0,n(425).P1)([function(e){return e.scene.currentSceneKey}],(function(e){return e})),g=n(183),y=n(434),w=n(188),S=n(428),E=n(190),b=d.Z.DEFAULT,k=b.KEY,x=b.FRAME,A=function(e){function t(t){var n;return(n=e.call(this,t,0,0)||this).fps=0,n.fpsString="FPS: %1",n.fpsText=void 0,n.background=void 0,n.lastUpdate=void 0,n.update=function(e){if(!(e-n.lastUpdate<800)){n.lastUpdate=e;var t=Math.floor(n.scene.game.loop.actualFps);n.setFps(t)}},n.createFps(),n.setDepth(E.Z.DEBUG),n.scene.add.existing((0,w.Z)(n)),n.scene.events.on(Phaser.Scenes.Events.UPDATE,n.update),n}(0,a.Z)(t,e);var n=t.prototype;return n.setFps=function(e){this.fps=e;var t=Phaser.Utils.String.Format(this.fpsString,[e]);this.fpsText.setText(t)},n.createFps=function(){this.background=this.scene.make.image({key:k,frame:x.BLANK}),this.background.setName("BG"),this.background.setTint(13801480),this.background.setWorldSize(45,25),this.fpsText=this.scene.make.text({style:{fontFamily:S.Z.FONT_FAMILY,fontSize:"14px"},text:this.fpsString}),this.fpsText.setHighQuality(),this.fpsText.setOrigin(.5,.5),this.fpsText.setName("FPS Meter"),Phaser.Display.Align.In.Center(this.fpsText,this.background),this.add([this.background,this.fpsText]),this.setFps(0)},t}(Phaser.GameObjects.Container),C=A,T=function(e){function t(t){var n;if((n=e.call(this,t,0,0)||this).performance=void 0,n.memory=0,n.maxMemoryLimit=void 0,n.maxPercentThreshold=void 0,n.normalColor=3459162,n.warningColor=16768343,n.alarmColor=15812200,n.memoryString="Memory: %1MB / %2MB",n.memoryText=void 0,n.lastUpdate=void 0,n.update=function(e){if(!(e-n.lastUpdate<1e3)){n.lastUpdate=e;var t=n.performance.memory.usedJSHeapSize,r=1048576*n.maxMemoryLimit,a=Math.round(t/1048576);n.setMemory(a),n.memoryText.setTint(n.normalColor),t>n.maxPercentThreshold/100*r&&n.memoryText.setTint(n.warningColor),t>r&&n.memoryText.setTint(n.alarmColor)}},n.performance=window.performance,n.createMemory(),n.setDepth(E.Z.DEBUG),n.scene.add.existing((0,w.Z)(n)),!n.isSupport())return n.memoryText.setText("Memory: not supported!"),(0,w.Z)(n);var r=n.performance.memory.jsHeapSizeLimit;return n.maxPercentThreshold=90,n.setMaxMemory(r/1048576),n.scene.events.on(Phaser.Scenes.Events.UPDATE,n.update),n}(0,a.Z)(t,e);var n=t.prototype;return n.isSupport=function(){var e;return this.performance&&!(null==(e=this.performance)||!e.memory)},n.setMaxMemory=function(e){this.maxMemoryLimit=Math.round(e)},n.setMemory=function(e){this.memory=e;var t=Phaser.Utils.String.Format(this.memoryString,[e,this.maxMemoryLimit]);this.memoryText.setText(t)},n.createMemory=function(){this.memoryText=this.scene.make.text({style:{fontFamily:S.Z.FONT_FAMILY,fontSize:"14px"},text:this.memoryString}),this.memoryText.setHighQuality(),this.memoryText.setOrigin(.5,.5),this.memoryText.setDepth(2e3),this.memoryText.setName("Memory Meter"),this.add(this.memoryText),this.setMemory(0)},t}(Phaser.GameObjects.Container),P=T,I={targets:[],duration:300,ease:n(433).Z,props:{scale:{from:1.2,to:1}}},O=function(e){function t(t){return e.call(this,I,t)||this}return(0,a.Z)(t,e),t}(o.Z),M={targets:[],duration:600,ease:Phaser.Math.Easing.Linear,props:{angle:{from:0,to:360}}},_=function(e){function t(t){return e.call(this,M,t)||this}return(0,a.Z)(t,e),t}(o.Z),L=d.Z.GAMEPLAY,R=L.KEY,B=L.FRAME,D=function(e){function t(t){var n;return(n=e.call(this,t,0,0,R,B.PRELOADER)||this).anim=void 0,n.originScale=void 0,n.runAnimation(),n.setWorldSize(80,80),n.originScale=n.scale,n.scene.add.existing((0,w.Z)(n)),n}(0,a.Z)(t,e);var n=t.prototype;return n.runAnimation=function(){var e;null==(e=this.anim)||e.remove(),this.anim=new _({targets:[this],repeat:-1,duration:1200}),this.anim.play()},n.setVisible=function(t){return e.prototype.setVisible.call(this,t),t?this.runAnimation():this.anim.stop(),this},n.resetScale=function(){this.setScale(this.originScale)},t}(Phaser.GameObjects.Image),N=D,G=function(e){function t(t,n,r,a){var i;return(i=e.call(this,t,n,r,a)||this).loadingIcon=void 0,i.messageText=void 0,i.openAnimation=void 0,i.closeTimerEvent=void 0,i.addLoadingIcon(),i.addMessageText(),i.setDepth(f.Ks.PRIORITY),i.background.setAlpha(.8),i}(0,a.Z)(t,e);var n=t.prototype;return n.open=function(t){var n,r=this;e.prototype.open.call(this,t);var a=this.getData(["message","duration","loading"]),i=a[0],s=void 0===i?"":i,o=a[1],c=void 0===o?0:o,u=a[2],l=void 0!==u&&u;this.setMessage(s),this.showLoading(l),null==(n=this.closeTimerEvent)||n.remove(),c>0&&(this.closeTimerEvent=this.scene.time.addEvent({delay:c,callback:function(){r.visible&&r.scene.screen.close(r.name)}})),this.data.reset(),this.runOpenAnimation()},n.addLoadingIcon=function(){this.loadingIcon=new N(this.scene),this.add(this.loadingIcon),Phaser.Display.Align.In.Center(this.loadingIcon,this.zone)},n.addMessageText=function(){var e=this.scene.make.text({style:{fontFamily:S.Z.FONT_FAMILY,fontSize:"30px",align:"center"},text:""});e.setHighQuality(),e.setOrigin(.5,.5),e.setLineSpacing(5);var t=e.context.createLinearGradient(0,0,0,e.height);t.addColorStop(0,"#ffffff"),t.addColorStop(1,"#cce5f9"),e.setFill(t),e.setShadow(0,6,"#0000003F",0,!1,!0),this.messageText=e,this.add(this.messageText)},n.setMessage=function(e){this.messageText.setText(e)},n.showLoading=function(e){this.loadingIcon.setVisible(e);var t=!1===e?20:80;Phaser.Display.Align.In.Center(this.messageText,this.zone,0,t)},n.runOpenAnimation=function(){var e,t;null==(e=this.openAnimation)||e.stop(),null==(t=this.openAnimation)||t.remove(),this.messageText.setScale(1),this.loadingIcon.resetScale(),this.openAnimation=new O({targets:[this.messageText,this.loadingIcon],props:{scale:{getStart:function(e){return e.scale-.3},getEnd:function(e){return e.scale}}}}),this.openAnimation.play()},n.logPageviewOnOpen=function(){},n.logPageviewOnClose=function(){},t}(GameCore.Screen),F=G,Z=d.Z.DEFAULT,U=Z.KEY,H=Z.FRAME,W=function(e){function t(){for(var t,n,r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(n=e.call.apply(e,s()(t=[this]).call(t,a))||this).mask=void 0,n.fadeInAnim=void 0,n.fadeOutAnim=void 0,n.fpsMeter=void 0,n.memoryMeter=void 0,n.topZone=void 0,n.switchScene=function(e){n.currentScene.switch(e)},n.emitGameEventStartScene=function(e){var t=e.scene.key;console.info("%cScene start","color: #D27D2D",t),n.updateSceneState(),n.runMaskFadeOutAnimation(),n.updateActiveSceneKey(t),n.game.events.emit(Phaser.Scenes.Events.START,t),(0,g.sw)("scene","Start scene: "+t)},n.emitGameEventSleepScene=function(e){var t=e.scene.scene.key;console.info("%cScene sleep","color: #D27D2D",t),t!==p.C.LOAD_SCENE&&(n.runMaskFadeInAnimation(),n.game.events.emit(Phaser.Scenes.Events.SLEEP,t))},n.emitGameEventWakeScene=function(e){var t=e.scene.scene.key;console.info("%cScene wake","color: #D27D2D",t),t!==p.C.LOAD_SCENE&&(n.updateSceneState(),n.runMaskFadeOutAnimation(),n.updateActiveSceneKey(t),n.game.events.emit(Phaser.Scenes.Events.WAKE,t))},n.emitGameEventPauseScene=function(e){var t=e.scene.scene.key;console.info("%cScene pause","color: #D27D2D",t),n.game.events.emit(Phaser.Scenes.Events.PAUSE,t)},n.emitGameEventResumeScene=function(e){var t=e.scene.key;console.info("%cScene resume","color: #D27D2D",t),n.game.events.emit(Phaser.Scenes.Events.RESUME,t)},n.emitGameEventShutdownScene=function(e){var t=e.scene.scene.key;console.info("%cScene shutdown","color: #D27D2D",t),n.game.events.emit(Phaser.Scenes.Events.SHUTDOWN,t)},n}(0,a.Z)(t,e);var n=t.prototype;return n.init=function(){this.listenScenesEvents(),this.game.globalScene=this},n.setup=function(){this.scaleGame(),this.addMask(),this.addNotifyScreen(),this.addFPS(),this.addMemory(),this.createInputDisableZone()},n.disableInput=function(){this.topZone.setVisible(!0)},n.enableInput=function(){this.topZone.setVisible(!1)},n.addNotifyScreen=function(){var e=this.screen.add(f.o4.NOTIFY_SCREEN,F);Phaser.Display.Align.In.Center(e,this.gameZone)},n.addMask=function(){this.mask=this.make.image({key:U,frame:H.BLANK});var e=this.gameZone,t=e.width,n=e.height;this.mask.setAlpha(0),this.mask.setOrigin(0,0),this.mask.setTint(0),this.mask.setWorldSize(t,n)},n.addFPS=function(){GameCore.Configs.Statistics.ShowFPSInGame&&(this.fpsMeter=new C(this),Phaser.Display.Align.In.TopLeft(this.fpsMeter,this.gameZone,-20,-10))},n.addMemory=function(){GameCore.Configs.Statistics.ShowMemoryInGame&&(this.memoryMeter=new P(this),Phaser.Display.Align.In.TopLeft(this.memoryMeter,this.gameZone,-45,-3))},n.createInputDisableZone=function(){var e=this.gameZone,t=e.width,n=e.height;this.topZone=this.add.zone(0,0,t,n),this.topZone.setInteractive({useHandCursor:!1}),this.topZone.setVisible(!1),this.topZone.setDepth(f.Ks.PRIORITY),Phaser.Display.Align.In.Center(this.topZone,this.gameZone)},n.updateSceneState=function(){this.setGlobalSceneOnTop()},n.setGlobalSceneOnTop=function(){this.scene.bringToTop(this)},n.runMaskFadeInAnimation=function(){var e,t;this.mask&&GameCore.Configs.EnableEffectSceneTransition&&(null==(e=this.fadeInAnim)||e.remove(),null==(t=this.fadeOutAnim)||t.remove(),this.fadeInAnim=new u({targets:[this.mask],duration:400,ease:Phaser.Math.Easing.Cubic.In,props:{alpha:{start:0,from:0,to:.6}}}),this.mask.setAlpha(0),this.fadeInAnim.play())},n.runMaskFadeOutAnimation=function(){var e,t;this.mask&&GameCore.Configs.EnableEffectSceneTransition&&(null==(e=this.fadeInAnim)||e.remove(),null==(t=this.fadeOutAnim)||t.remove(),this.fadeOutAnim=new h({targets:[this.mask],duration:400,ease:Phaser.Math.Easing.Cubic.Out,props:{alpha:{start:.6,from:.6,to:0}}}),this.mask.setAlpha(1),this.fadeOutAnim.play())},n.listenScenesEvents=function(){var e=this;this.scene.manager.getScenes(!1).forEach((function(t){t.events.on(Phaser.Scenes.Events.CREATE,e.emitGameEventStartScene),t.events.on(Phaser.Scenes.Events.SLEEP,e.emitGameEventSleepScene),t.events.on(Phaser.Scenes.Events.WAKE,e.emitGameEventWakeScene),t.events.on(Phaser.Scenes.Events.PAUSE,e.emitGameEventPauseScene),t.events.on(Phaser.Scenes.Events.RESUME,e.emitGameEventResumeScene),t.events.on(Phaser.Scenes.Events.SHUTDOWN,e.emitGameEventShutdownScene)})),this.events.on(p.K.SWITCH,this.switchScene)},n.getActiveScene=function(){return this.scene.manager.getScenes(!0)[0]},n.getCurrentScene=function(){return this.currentScene},n.updateActiveSceneKey=function(e){e!==p.C.GLOBAL_SCENE&&this.storage.dispatch((0,m.I)(e))},n.logEventOpen=function(){},n.logPageviewOnOpen=function(){},(0,r.Z)(t,[{key:"currentScene",get:function(){var e=this.storage.getState(),t=v(e);return(t?this.scene.manager.getScene(t):this.getActiveScene()).scene}}]),t}(y.Z),V=W},551:function(e,t,n){"use strict";var r=n(183),a=n(418),i=n(90),s=n(75),o=n(45),c=n(76),u=n.n(c),l=n(46),h=n.n(l),d=n(585),p=0,f=0,m=function(){function e(e){this.game=void 0,this.progressFbTimeEvent=void 0,this.game=e}var t=e.prototype;return t.loadingProgressFbBootScene=function(){var e=this,t=100;f=30;!function n(){t<=0?clearTimeout(e.progressFbTimeEvent):e.progressFbTimeEvent=setTimeout((function(){e.game.facebook.setLoadingProgress(Math.round(f)),f+=30/t,t--,n()}),50)}()},t.finishLoadingProgressFbBootScene=function(){clearTimeout(this.progressFbTimeEvent)},t.loadingProgressFbLoadScene=function(){var e=this;(!f||f<30)&&(f=60),p=f;!function t(){e.progressFbTimeEvent=setTimeout((function(){e.game.facebook.setLoadingProgress(Math.round(f)),f+=.1,t()}),50)}()},t.onProgress=function(e){var t=100-f,n=Math.round(e*t+f);n>p&&clearTimeout(this.progressFbTimeEvent),this.game.facebook.setLoadingProgress(n)},e}(),v=m,g=n(78),y=n.n(g),w=function(){function e(e){this.game=void 0,this.game=e}var t=e.prototype;return t.addKillRevive=function(){var e=this;[Phaser.GameObjects.Container,Phaser.GameObjects.Image,Phaser.GameObjects.Sprite,Phaser.GameObjects.Graphics,Phaser.GameObjects.Text,Phaser.GameObjects.BitmapText,Phaser.GameObjects.Particles.ParticleEmitter,Phaser.GameObjects.Particles.ParticleEmitterManager].forEach((function(t){t.prototype.kill=e.kill,t.prototype.revive=e.revive}))},t.addKillReviveGroup=function(){Phaser.GameObjects.Group.prototype.killGroup=this.killGroup,Phaser.GameObjects.Group.prototype.reviveGroup=this.reviveGroup},t.addSetWorldSize=function(){var e=this;[Phaser.GameObjects.Image,Phaser.GameObjects.Sprite].forEach((function(t){t.prototype.setWorldSize=e.setWorldSize}))},t.addSetWorldSizeForContainer=function(){var e=this;[Phaser.GameObjects.Container].forEach((function(t){t.prototype.setWorldSize=e.setWorldSizeForContainer}))},t.addGetWorldPosition=function(){var e=this;[Phaser.GameObjects.Container,Phaser.GameObjects.Image,Phaser.GameObjects.Sprite,Phaser.GameObjects.Graphics,Phaser.GameObjects.Text,Phaser.GameObjects.BitmapText].forEach((function(t){t.prototype.getWorldPosition=e.getWorldPosition}))},t.addGetLocalPosition=function(){Phaser.GameObjects.Container.prototype.getLocalPosition=this.getLocalPosition},t.addSetSizeBasedOnDpr=function(){var e=this;[Phaser.GameObjects.Image].forEach((function(t){t.prototype.setSizeBasedOnDpr=e.setSizeBasedOnDpr}))},t.addWaitPromises=function(){var e=[Phaser.Tweens.PENDING_REMOVE,Phaser.Tweens.REMOVED];Phaser.Tweens.Tween.prototype.waitForCompletion=function(t){var n=this;return void 0===t&&(t=!0),y()(e).call(e,this.state)?u().resolve():new(u())((function(e){t&&n.on(Phaser.Tweens.Events.TWEEN_STOP,(function(){return e()})),n.on(Phaser.Tweens.Events.TWEEN_COMPLETE,(function(){return e()}))}))},Phaser.Tweens.Tween.prototype.waitForLoops=function(t,n){var r=this;return void 0===n&&(n=!0),y()(e).call(e,this.state)?u().resolve():new(u())((function(e){n&&(r.on(Phaser.Tweens.Events.TWEEN_COMPLETE,(function(){return e()})),r.on(Phaser.Tweens.Events.TWEEN_STOP,(function(){return e()}))),r.on(Phaser.Tweens.Events.TWEEN_LOOP,(function(){0==--t&&e()}))}))},Phaser.Tweens.Tween.prototype.waitForProgress=function(t,n){var r=this;return void 0===n&&(n=!0),y()(e).call(e,this.state)?u().resolve():new(u())((function(e){n&&(r.on(Phaser.Tweens.Events.TWEEN_COMPLETE,(function(){return e()})),r.on(Phaser.Tweens.Events.TWEEN_STOP,(function(){return e()}))),r.on(Phaser.Tweens.Events.TWEEN_UPDATE,(function(){r.progress>=t&&e()}))}))},Phaser.Tweens.Tween.prototype.waitForTimeElapsed=function(t,n){var r=this;return void 0===n&&(n=!0),y()(e).call(e,this.state)?u().resolve():new(u())((function(e){n&&(r.on(Phaser.Tweens.Events.TWEEN_COMPLETE,(function(){return e()})),r.on(Phaser.Tweens.Events.TWEEN_STOP,(function(){return e()}))),r.on(Phaser.Tweens.Events.TWEEN_UPDATE,(function(){r.totalElapsed>=t&&e()}))}))}},t.addDrawDebugBox=function(){var e=this;[Phaser.GameObjects.Container,Phaser.GameObjects.Image,Phaser.GameObjects.Sprite,Phaser.GameObjects.Graphics,Phaser.GameObjects.Text,Phaser.GameObjects.BitmapText,Phaser.GameObjects.Zone].forEach((function(t){t.prototype.drawDebugBox=e.drawDebugBox}))},t.addDrawDynamicDebugBox=function(){var e=this;[Phaser.GameObjects.Container].forEach((function(t){t.prototype.drawDynamicDebugBox=e.drawDynamicDebugBox}))},t.addHighQuality=function(){var e=this;[Phaser.GameObjects.Text].forEach((function(t){t.prototype.setHighQuality=e.setHighQuality}))},t.addSetLineHeightForBitmapText=function(){Phaser.GameObjects.BitmapText.prototype.setLineHeight=function(e){this.lineHeight=e,this.updateDisplayOrigin()}},t.kill=function(){this.setActive(!1),this.setVisible(!1)},t.revive=function(){this.setActive(!0),this.setVisible(!0)},t.killGroup=function(){this.getChildren().forEach((function(e){e.setActive(!1),e.setVisible(!1)}))},t.reviveGroup=function(){this.getChildren().forEach((function(e){e.setActive(!0),e.setVisible(!0)}))},t.setWorldSize=function(e,t){this.setSize(e,t),this.setDisplaySize(e,t)},t.setWorldSizeForContainer=function(e,t,n){void 0===n&&(n=2),this.setSize(e*n,t*n),this.setDisplaySize(e,t)},t.getWorldPosition=function(){var e=this.getWorldTransformMatrix().decomposeMatrix();return{x:e.translateX,y:e.translateY}},t.setSizeBasedOnDpr=function(){var e=this.frame,t=e.realWidth,n=e.realHeight,r=1/GameCore.Utils.Image.getImageScale();this.setWorldSize(t*r,n*r)},t.drawDynamicDebugBox=function(){var e=this,t=this.scene.add.graphics({lineStyle:{width:2,color:16711680}});this.add(t),this.scene.game.globalScene.events.on(Phaser.Scenes.Events.UPDATE,(function(){t.clear(),t.strokeRect(-e.width/2,-e.height/2,e.width,e.height)}))},t.drawDebugBox=function(e,t){var n=this.x,r=this.y,a=this.width,i=this.height,s=this.depth,o=this.originX,c=this.originY,u=this.scene.add.rectangle(n,r,a,i,e,t);u.setName("Debug Box"),u.setDepth(s);var l=GameCore.Utils.Valid.isNumber;return l(o)&&l(c)&&u.setOrigin(o,c),u},t.setHighQuality=function(){return this.renderer instanceof Phaser.Renderer.WebGL.WebGLRenderer?this.setResolution(2*this.scene.game.world.getZoomRatio()):this},t.getLocalPosition=function(e){var t=e.getWorldTransformMatrix().decomposeMatrix(),n=t.translateX,r=t.translateY;return this.getLocalPoint(n,r)},e}(),S=w,E=n(59),b=n.n(E),k=n(115),x=n.n(k),A=n(116),C=n.n(A),T=n(193),P=n.n(T),I=n(77),O=n.n(I),M=n(195),_=n.n(M),L=[{url:"./assets/images/others/mock1.jpg",title:"Buy lottery tickets on behalf",description:"\ud83d\udca5\ud83d\udca5\ud83d\udca5 Place an order for lottery tickets from 3 regions!!! \u2705 Fast - Convenient - Safe \u2705 Diverse products \u2705 Payment...",buttonName:"Discover more"},{url:"./assets/images/others/mock2.jpg",title:"SYSTEM-WIDE SALE UP TO 50%",description:'\ud83d\udd25 \ud835\uddec\ud835\uddd8\ud835\uddd4\ud835\udde5 \ud835\uddd8\ud835\udde1\ud835\uddd7 \ud835\udde6\ud835\uddd4\ud835\udddf\ud835\uddd8 | \ud835\udde8\ud835\udde3 \ud835\udde7\ud835\udde2 \ud835\udff1\ud835\udfec% "BIG PARTY" AUTHENTIC SPORTSWEAR SHOCKINGLY REDUCED PRICES! \ud83c\udf81 From...',buttonName:"Discover more"},{url:"./assets/images/others/mock3.jpg",title:"Register now",description:"Play safe, play fun, play 9club!",buttonName:"Register"}],R=function(){function e(){}return e.loadBannerAdAsync=function(){var e=(0,s.Z)(h().mark((function e(){var t,n,r,a,i,s,o,c,l,d;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.currentIdx=(this.currentIdx+1)%L.length,this.hideBannerAdAsync(),e.next=4,new(u())((function(e){setTimeout((function(){e()}),2e3)}));case 4:if(!document.getElementById("mock-banner-ads")){e.next=16;break}return t=L[this.currentIdx],n=t.url,r=t.buttonName,a=t.title,i=t.description,(s=document.getElementById("banner-content-text1"))&&(s.innerHTML=a),(o=document.getElementById("banner-content-text2"))&&(o.innerHTML=i),(c=document.getElementById("mock-banner-ads-avatar"))&&(c.style.background="url("+n+") center center/contain no-repeat"),(l=document.getElementById("banner-content-button"))&&(l.innerHTML=r),e.abrupt("return");case 16:d=GameCore.Utils.Device.isDesktop(),50,d?this.createDesktopBannerAd(50):this.createMobileBannerAd(50);case 19:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),e.createDesktopBannerAd=function(e){var t=this,n=L[this.currentIdx],r=n.url,a=n.buttonName,i=n.title,s=n.description,o=document.createElement("div");o.id="mock-banner-ads",o.style.width="100%",o.style.height=e+"px",o.style.bottom="var(--sab)",o.style.display="flex",o.style.position="absolute",o.style.opacity=this.currentOpacity;var c=document.createElement("div");c.id="mock-banner-ads-display-area",c.style.width="100%",c.style.height="100%",c.style.background="#323436 center center/auto no-repeat",c.style.borderRadius="10px",c.style.marginLeft="4px",c.style.marginRight="4px",c.style.display="block",c.style.alignContent="center";var u=document.createElement("div");u.id="mock-banner-ads-content",u.style.boxSizing="border-box",u.style.flexDirection="row",u.style.display="flex",u.style.position="relative",u.style.alignItems="stretch",u.style.paddingLeft="4px",u.style.paddingRight="4px",u.style.justifyContent="space-between";var l=document.createElement("div");l.id="mock-banner-ads-avatar",l.style.marginLeft="10px",l.style.width=e+"px",l.style.minWidth=e+"px",l.style.height=e+"px",l.style.display="flex",l.style.flexDirection="column",l.style.position="relative",l.style.background="url("+r+") center center/contain no-repeat",l.style.borderRadius="50%";var h=document.createElement("div");h.id="mock-banner-ads-right-content",h.style.width="100%",h.style.paddingLeft="10px",h.style.display="flex",h.style.flexDirection="row",h.style.position="relative",h.style.color="#E4E6EB",h.style.wordWrap="break-word",h.style.textAlign="left",h.style.alignContent="center",h.style.alignItems="center",h.style.fontSize="12px",h.style.fontFamily="Helvetica, Arial, sans-serif, Roboto, Helvetica, Arial, sans-serif",l.style.boxSizing="border-box";var d=document.createElement("div");d.style.flexDirection="column",d.style.display="flex",d.style.justifyContent="center",d.style.flexShrink="1",d.style.flexGrow="1",d.style.flexBasis="0",d.style.boxSizing="border-box",d.style.minWidth="0",d.innerHTML="\n            <div id='banner-content-text1' style=\"font-weight:600;line-height: 1.3333;font-size: .9375rem;text-overflow: ellipsis;-webkit-line-clamp: 1;overflow: hidden;display: -webkit-box;-webkit-box-orient: vertical;\">"+i+"</div>\n            <div id='banner-content-text2' style=\"font-weight:400;line-height: 1.2308;font-size: .8125rem;text-overflow: ellipsis;-webkit-line-clamp: 2;overflow: hidden;display: -webkit-box;-webkit-box-orient: vertical;\">"+s+"</div>";var p=document.createElement("button");p.id="banner-content-button",p.type="button",p.style.width="120px",p.style.height=e-20+"px",p.style.fontWeight="600",p.style.backgroundColor="#3963fc",p.style.border="none",p.style.color="white",p.style.borderRadius="5px",p.style.textAlign="center",p.style.display="inline-block",p.style.cursor="pointer",p.style.marginRight="10px",p.style.marginLeft="10px",p.style.flexShrink="1",p.style.boxSizing="border-box",p.style.paddingRight="2px",p.style.paddingLeft="2px",p.innerHTML=a,p.onclick=function(){"0.2"===t.currentOpacity?o.style.opacity="1":o.style.opacity="0.2",t.currentOpacity=o.style.opacity};var f=document.createElement("button");f.type="button",f.style.width=e-20+"px",f.style.height=e-20+"px",f.style.fontWeight="1000",f.style.backgroundColor="#5a5c5c",f.style.border="none",f.style.color="white",f.style.borderRadius="50%",f.style.textAlign="center",f.style.display="inline-block",f.style.cursor="pointer",f.style.marginRight="10px",f.style.marginLeft="10px",f.style.flexShrink="0",f.style.boxSizing="border-box",f.style.paddingRight="2px",f.style.paddingLeft="2px",f.innerHTML="...",document.body.appendChild(o),o.appendChild(c),c.appendChild(u),u.appendChild(l),u.appendChild(h),h.appendChild(d),h.appendChild(p),h.appendChild(f)},e.createMobileBannerAd=function(e){var t=this,n=L[this.currentIdx],r=n.url,a=n.buttonName,i=n.title,s=n.description,o=document.createElement("div");o.id="mock-banner-ads",o.style.width="100%",o.style.height=e+"px",o.style.bottom="var(--sab)",o.style.display="block",o.style.position="absolute",o.style.opacity=this.currentOpacity;var c=document.createElement("div");c.id="mock-banner-ads-display-area",c.style.background="#ffffff center center/auto no-repeat",c.style.display="block",c.style.alignContent="center";var u=document.createElement("div");u.id="mock-banner-ads-content",u.style.boxSizing="border-box",u.style.flexDirection="row",u.style.display="flex",u.style.position="relative",u.style.alignItems="stretch",u.style.justifyContent="space-between";var l=document.createElement("div");l.id="mock-banner-ads-avatar",l.style.width=e+"px",l.style.minWidth=e+"px",l.style.height=e+"px",l.style.display="flex",l.style.flexDirection="column",l.style.position="relative",l.style.background="url("+r+") center center/contain no-repeat";var h=document.createElement("div");h.id="mock-banner-ads-right-content",h.style.width="100%",h.style.paddingLeft="10px",h.style.display="flex",h.style.flexDirection="row",h.style.position="relative",h.style.color="#000",h.style.wordWrap="break-word",h.style.textAlign="left",h.style.alignContent="center",h.style.alignItems="center",h.style.fontSize="12px",h.style.fontFamily="Helvetica, Arial, sans-serif, Roboto, Helvetica, Arial, sans-serif",l.style.boxSizing="border-box";var d=document.createElement("div");d.style.flexDirection="column",d.style.display="flex",d.style.justifyContent="center",d.style.flexShrink="1",d.style.flexGrow="1",d.style.flexBasis="0",d.style.boxSizing="border-box",d.style.minWidth="0",d.innerHTML="\n            <div id='banner-content-text1' style=\"font-weight:600;line-height: 1.3333;font-size: .9375rem;text-overflow: ellipsis;-webkit-line-clamp: 1;overflow: hidden;display: -webkit-box;-webkit-box-orient: vertical;\">"+i+"</div>\n            <div id='banner-content-text2' style=\"font-weight:400;line-height: 1.2308;font-size: .8125rem;text-overflow: ellipsis;-webkit-line-clamp: 1;overflow: hidden;display: -webkit-box;-webkit-box-orient: vertical;\">"+s+"</div>";var p=document.createElement("button");p.id="banner-content-button",p.type="button",p.style.height="100%",p.style.fontWeight="600",p.style.backgroundColor="#3963fc",p.style.border="none",p.style.color="white",p.style.textAlign="center",p.style.display="inline-block",p.style.cursor="pointer",p.style.marginLeft="10px",p.style.flexShrink="1",p.style.boxSizing="border-box",p.style.paddingRight="7px",p.style.paddingLeft="7px",p.innerHTML=a,p.onclick=function(){"0.2"===t.currentOpacity?o.style.opacity="1":o.style.opacity="0.2",t.currentOpacity=o.style.opacity},document.body.appendChild(o),o.appendChild(c),c.appendChild(u),u.appendChild(l),u.appendChild(h),h.appendChild(d),h.appendChild(p)},e.hideBannerAdAsync=function(){var e=(0,s.Z)(h().mark((function e(){var t;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=document.getElementById("mock-banner-ads")){e.next=3;break}return e.abrupt("return");case 3:t.remove();case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),e}();R.currentIdx=-1,R.currentOpacity="1";var B={LOADED:"loaded",DISPLAYED:"displayed"},D=function(e){return e.IDLE="idle",e.LOADING="loading",e.FILLED="filled",e.SHOWING="showing",e}(D||{}),N=D,G=function(e){return e.REWARDED="rewarded",e.PRE_ROLL="pre-roll",e.INTERSTITIAL="interstitial",e.BANNER="banner",e}(G||{}),F=G,Z=n(185),U=function(e){function t(t,n){var r;return(r=e.call(this,n)||this).code=void 0,r.code=t,r.message=n,r}return(0,o.Z)(t,e),t}((0,Z.Z)(Error)),H=function(e){this.type=void 0,this.status=void 0,this.type=e,this.status=N.IDLE};function W(e,t){var n="undefined"!==typeof C()&&P()(e)||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=function(e,t){var n;if(!e)return;if("string"===typeof e)return V(e,t);var r=b()(n=Object.prototype.toString.call(e)).call(n,8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return x()(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return V(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0;return function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function V(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}GameCore.Ads={Types:F,Status:N,Events:B,AdError:U,AdInstance:H};var Y=function(e){function t(){for(var t,n,r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(n=e.call.apply(e,O()(t=[this]).call(t,a))||this).events=void 0,n.enabled=void 0,n.config=void 0,n.lastInterAdShownTime=void 0,n.lastInterAdLoadedTime=void 0,n.lastRewardAdShownTime=void 0,n.interstitial=void 0,n.rewardedVideo=void 0,n.preRoll=void 0,n.safeAreaBottom=void 0,n.showingBannerAd=void 0,n.reloadBannerAdIntervals=void 0,n.bannerAdConfigs=void 0,n.isHaveBannerAdOptions=void 0,n.isBannerAdsShown=void 0,n}(0,o.Z)(t,e);var n=t.prototype;return n.init=function(){this.events=new Phaser.Events.EventEmitter,this.safeAreaBottom=0,this.lastInterAdShownTime=0,this.lastInterAdLoadedTime=0,this.lastRewardAdShownTime=0,this.showingBannerAd={},this.reloadBannerAdIntervals={},this.bannerAdConfigs=[],this.isHaveBannerAdOptions=!0,this.isBannerAdsShown=!1},n.calculateSafeAreaBottom=function(){try{if(!this.config.calculateSafeAreaBottom)return;this.safeAreaBottom=parseInt(getComputedStyle(document.documentElement).getPropertyValue("--sab")),isNaN(this.safeAreaBottom)&&(this.safeAreaBottom=0)}catch(e){this.safeAreaBottom=0}},n.configure=function(e,t){this.enabled=t.enabled,this.config=t,this.setAdInstance(e),this.setBannerAdConfigStatus(),this.calculateSafeAreaBottom()},n.setBannerAdConfigStatus=function(){for(var e,t=this.config.bannerAdOptions,n=GameCore.Utils.Device.isDesktop(),r=W(t);!(e=r()).done;){var a=e.value,i=a.platform,s="ALL"==i||"DESKTOP"==i&&n||"MOBILE"==i&&!n;this.bannerAdConfigs.push({config:a,canShow:s}),s&&(this.isHaveBannerAdOptions=!0)}},n.setAdInstance=function(e){var t=this.config,n=t.rewardAdOptions,r=t.interstitialAdOptions;this.interstitial=new e(F.INTERSTITIAL,r.pID),this.rewardedVideo=new e(F.REWARDED,n.pID),this.preRoll=new e(F.PRE_ROLL,r.pID)},n.preloadInterstitialAdAsync=function(){var e=(0,s.Z)(h().mark((function e(){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.preloadAdAsync(F.INTERSTITIAL);case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.showInterstitialAdAsync=function(){var e=(0,s.Z)(h().mark((function e(){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.canbeShowInterstitialAdByTime()){e.next=2;break}throw new U("INTERSTITIAL_AD_CAN_NOT_SHOW","Can't show interstitial ad");case 2:return e.next=4,this.showAdAsync(F.INTERSTITIAL);case 4:this.lastInterAdShownTime=window.performance.now()/1e3;case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.preloadPreRollAdAsync=function(){var e=(0,s.Z)(h().mark((function e(){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.preloadAdAsync(F.PRE_ROLL);case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.showPreRollAdAsync=function(){var e=(0,s.Z)(h().mark((function e(){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.showAdAsync(F.PRE_ROLL);case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.preloadRewardedVideoAsync=function(){var e=(0,s.Z)(h().mark((function e(){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.preloadAdAsync(F.REWARDED);case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.showRewardedVideoAsync=function(){var e=(0,s.Z)(h().mark((function e(){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.canbeShowRewardAd()){e.next=2;break}throw new U("REWARDED_VIDEO_CAN_NOT_SHOW","Can't show rewarded video");case 2:return e.next=4,this.showAdAsync(F.REWARDED);case 4:this.lastRewardAdShownTime=window.performance.now()/1e3;case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.getRemainingRewardTime=function(){var e=window.performance.now()/1e3,t=this.config.rewardAdOptions.secondsBetweenAds,n=e-this.lastRewardAdShownTime;return n<t?t-n:0},n.preloadAdAsync=function(){var e=(0,s.Z)(h().mark((function e(t){var n;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.enabled){e.next=2;break}throw new U("ADS_NOT_ENABLED","Ads is't enabled");case 2:if(null!==(n=this.getAdInstanceByType(t))){e.next=5;break}throw new U("AD_INSTANCE_NOT_INITIATED","The instance ads not yet initiated");case 5:return t!==F.INTERSTITIAL&&t!==F.PRE_ROLL||(this.lastInterAdLoadedTime=window.performance.now()/1e3),e.next=8,n.loadAsync();case 8:this.events.emit(B.LOADED,t);case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),n.showAdAsync=function(){var e=(0,s.Z)(h().mark((function e(t){var n;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.enabled){e.next=2;break}throw new U("ADS_NOT_ENABLED","Ads is't enabled");case 2:if(null!==(n=this.getAdInstanceByType(t))){e.next=5;break}throw new U("AD_INSTANCE_NOT_INITIATED","The instance ads not yet initiated");case 5:return t!==F.INTERSTITIAL&&t!==F.PRE_ROLL||(this.lastInterAdShownTime=window.performance.now()/1e3),t===F.REWARDED&&(this.lastRewardAdShownTime=window.performance.now()/1e3,this.config.enableRewardVideoResetInterstitial&&(this.lastInterAdShownTime=this.lastRewardAdShownTime)),e.next=9,n.showAsync();case 9:this.events.emit(B.DISPLAYED,t);case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),n.getAdStatus=function(e){var t=this.getAdInstanceByType(e);return t?t.getStatus():null},n.getAdInstanceByType=function(e){switch(e){case F.INTERSTITIAL:return this.interstitial;case F.REWARDED:return this.rewardedVideo;case F.PRE_ROLL:return this.preRoll;default:return null}},n.canbeShowInterstitialAd=function(){var e=this.canbeLoadInterstitialAdByTime();return e&&(e=this.canbeShowInterstitialAdByTime()),e},n.canbeLoadInterstitialAdByTime=function(){var e=window.performance.now()/1e3,t=this.config.interstitialAdOptions,n=t.secondsFirstTime,r=t.secondsBetweenAds,a=Math.floor(e-this.lastInterAdLoadedTime);return this.lastInterAdLoadedTime>0?a>=r:a>=n},n.canbeShowInterstitialAdByTime=function(){var e=window.performance.now()/1e3,t=this.config.interstitialAdOptions,n=t.secondsFirstTime,r=t.secondsBetweenAds,a=Math.floor(e-this.lastInterAdShownTime);return this.lastInterAdShownTime>0?a>=r:a>=n},n.canbeShowRewardAd=function(){var e=window.performance.now()/1e3,t=this.config.rewardAdOptions,n=t.secondsFirstTime,r=t.secondsBetweenAds,a=Math.floor(e-this.lastRewardAdShownTime);return this.lastRewardAdShownTime>0?a>=r:a>=n},n.getEnabledBannerAds=function(){if(!this.isHaveBannerAdOptions)return[];for(var e,t=[],n=W(this.bannerAdConfigs);!(e=n()).done;){var r=e.value,a=r.config;r.canShow&&t.push(a)}return t},n.disableBannerAds=function(){this.config.bannerAdOptions=[]},n.showBannerAdAsync=function(){var e=(0,s.Z)(h().mark((function e(){var t;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.enabled){e.next=2;break}return e.abrupt("return");case 2:if(!this.isBannerAdsShown){e.next=5;break}return e.next=5,this.hideBannerAdAsync();case 5:if(0!==(t=this.getEnabledBannerAds()).length){e.next=8;break}return e.abrupt("return");case 8:return this.reloadBannerAdIntervals=this.reloadBannerAdIntervals||{},this.loadBannerAdAsync("",t),e.abrupt("return");case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.loadBannerAdAsync=function(){var e=(0,s.Z)(h().mark((function e(t,n){var r,a=this;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.enabled){e.next=2;break}return e.abrupt("return");case 2:if(r=this.getSceneName(),e.prev=3,!GameCore.Configs.Ads.Mockup.Enable){e.next=10;break}return e.next=8,R.loadBannerAdAsync();case 8:e.next=12;break;case 10:return e.next=12,GameSDK.loadBannerAdAsync(t,n);case 12:this.isBannerAdsShown=!0,n.forEach((function(e){var t=e.placementId,n=e.position,i=e.bannerWidth,s=e.bannerHeight;if(t&&""!==t){var o=n+":"+i+"x"+s;a.showingBannerAd[t]=!0,window.game.analytics.showBannerAd(o,r)}})),e.next=21;break;case 16:e.prev=16,e.t0=e.catch(3),console.log(e.t0),this.isBannerAdsShown=!1,n.forEach((function(t){var n=t.position+":"+t.bannerWidth+"x"+t.bannerHeight;window.game.analytics.showAdFail(F.BANNER,r,e.t0,n)}));case 21:case"end":return e.stop()}}),e,this,[[3,16]])})));return function(t,n){return e.apply(this,arguments)}}(),n.hideBannerAdAsync=function(){var e=(0,s.Z)(h().mark((function e(){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.enabled){e.next=2;break}return e.abrupt("return");case 2:if(this.isHaveBannerAdOptions){e.next=4;break}return e.abrupt("return");case 4:if(this.isBannerAdsShown=!1,e.prev=5,!GameCore.Configs.Ads.Mockup.Enable){e.next=12;break}return e.next=10,R.hideBannerAdAsync();case 10:e.next=14;break;case 12:return e.next=14,GameSDK.hideBannerAdAsync();case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(5),console.log(e.t0);case 19:case"end":return e.stop()}}),e,this,[[5,16]])})));return function(){return e.apply(this,arguments)}}(),n.getBannerHeight=function(){if(!this.enabled)return 0;if(!this.isBannerAdsShown)return 0;var e=this.getBottomBannerConfig();if(!e)return 0;var t=e.bannerHeight,n=(void 0===t?0:t)+this.safeAreaBottom+20;if(this.game.world){var r=this.game.world,a=r.getPixelRatio(),i=r.getZoomRatio();return this.game.world.getPhysicPixels(n,a/i)}return n},n.getBottomBannerConfig=function(){var e=this.getEnabledBannerAds();return 0===e.length?null:_()(e).call(e,(function(e){return"bottom"===e.position}))||null},n.getSceneName=function(){try{var e=self.game.globalScene;return this.globalSceneTypeCheck(e)?e.getCurrentScene().scene.getSceneName():"unknown"}catch(t){return"unknown"}},n.globalSceneTypeCheck=function(e){return"getCurrentScene"in e&&"function"===typeof e.getCurrentScene},t}(Phaser.Plugins.BasePlugin),z=Y,K=function(){function e(e,t,n){this.name=void 0,this.color=void 0,this.selfLog=void 0,this.options=void 0,this.name=e,this.color=n||"#FFF",this.options=t,this.selfLog=!0,console.info("%c"+this.name+": init","color: "+this.color,this.options)}var t=e.prototype;return t.event=function(e,t,n){this.processEvent(e,t,n),this.selfLog&&console.info("%c"+this.name+": event","color: "+this.color,{name:e,value:n,payload:t})},t.pageview=function(e){var t=this.getPageByKey(e);this.processPageView(t),this.selfLog&&console.info("%c"+this.name+": pageview","color: "+this.color,{page:t})},t.levelStart=function(e,t,n){this.processLevelStart(e,t,n),this.selfLog&&console.info("%c"+this.name+": level start","color: "+this.color,{level:e,score:t,levelName:n})},t.levelFail=function(e,t,n){this.processLevelFail(e,t,n),this.selfLog&&console.info("%c"+this.name+": level fail","color: "+this.color,{level:e,score:t,levelName:n})},t.levelRescue=function(e,t,n){this.processLevelRescue(e,t,n),this.selfLog&&console.info("%c"+this.name+": level rescue","color: "+this.color,{level:e,score:t,levelName:n})},t.levelComplete=function(e,t,n){this.processLevelComplete(e,t,n),this.selfLog&&console.info("%c"+this.name+": level complete","color: "+this.color,{level:e,score:t,levelName:n})},t.loadPreRollAd=function(e){this.processLoadPreRollAd(e),this.selfLog&&console.info("%c"+this.name+": load pre-roll ad","color: "+this.color,{placement:e})},t.showPreRollAd=function(e){this.processShowPreRollAd(e),this.selfLog&&console.info("%c"+this.name+": show pre-roll","color: "+this.color,{placement:e})},t.loadInterstitialAd=function(e){this.processLoadInterstitialAd(e),this.selfLog&&console.info("%c"+this.name+": load interstitial ad","color: "+this.color,{placement:e})},t.showInterstitialAd=function(e){this.processShowInterstitialAd(e),this.selfLog&&console.info("%c"+this.name+": show interstitial ad","color: "+this.color,{placement:e})},t.loadRewardedVideoAd=function(e){this.processLoadRewardedVideoAd(e),this.selfLog&&console.info("%c"+this.name+": load rewarded video ad","color: "+this.color,{placement:e})},t.showRewardedVideoAd=function(e){this.processShowRewardedVideoAd(e),this.selfLog&&console.info("%c"+this.name+": show rewarded video ad","color: "+this.color,{placement:e})},t.showBannerAd=function(e,t){this.processShowBannerAd(e,t),this.selfLog&&console.info("%c"+this.name+": show banner ad","color: "+this.color,{placement:t})},t.receiveReward=function(e){this.processReceiveReward(e),this.selfLog&&console.info("%c"+this.name+": receive reward","color: "+this.color,{placement:e})},t.loadAdFail=function(e,t,n){this.processLoadAdFail(e,t,n),this.selfLog&&console.info("%c"+this.name+": load ad fail","color: "+this.color,{type:e,placement:t,reason:n})},t.showAdFail=function(e,t,n,r){this.processShowAdFail(e,t,n,r),this.selfLog&&console.info("%c"+this.name+": show ad fail","color: "+this.color,{type:e,placement:t,reason:n})},t.getPageByKey=function(e){var t=e.replace(/_/g,"-");return t=t.toLowerCase()},t.processLevelStart=function(e,t,n){},t.processLevelFail=function(e,t,n){},t.processLevelRescue=function(e,t,n){},t.processLevelComplete=function(e,t,n){},t.processLoadInterstitialAd=function(e){},t.processShowInterstitialAd=function(e){},t.processLoadPreRollAd=function(e){},t.processShowPreRollAd=function(e){},t.processLoadRewardedVideoAd=function(e){},t.processShowRewardedVideoAd=function(e){},t.processShowBannerAd=function(e,t){},t.processReceiveReward=function(e){},t.processLoadAdFail=function(e,t,n){},t.processShowAdFail=function(e,t,n,r){},e}(),j=K;GameCore.Analytics={BaseAnalytics:j};var X,q=function(e){function t(){for(var t,n,r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(n=e.call.apply(e,O()(t=[this]).call(t,a))||this).analytics=void 0,n.pageview=function(e){n.isActive()&&n.analytics.forEach((function(t){t.pageview(e)}))},n}(0,o.Z)(t,e);var n=t.prototype;return n.init=function(){this.analytics=[]},n.add=function(e){this.analytics.push(e)},n.event=function(e,t,n){this.isActive()&&this.analytics.forEach((function(r){r.event(e,t,n)}))},n.levelStart=function(e,t,n){this.isActive()&&this.analytics.forEach((function(r){r.levelStart(e,t,n)}))},n.levelRescue=function(e,t,n){this.isActive()&&this.analytics.forEach((function(r){r.levelRescue(e,t,n)}))},n.levelFail=function(e,t,n){this.isActive()&&this.analytics.forEach((function(r){r.levelFail(e,t,n)}))},n.levelComplete=function(e,t,n){this.isActive()&&this.analytics.forEach((function(r){r.levelComplete(e,t,n)}))},n.loadPreRollAd=function(e){this.isActive()&&this.analytics.forEach((function(t){t.loadPreRollAd(e)}))},n.showPreRollAd=function(e){this.isActive()&&this.analytics.forEach((function(t){t.showPreRollAd(e)}))},n.loadInterstitialAd=function(e){this.isActive()&&this.analytics.forEach((function(t){t.loadInterstitialAd(e)}))},n.showInterstitialAd=function(e){this.isActive()&&this.analytics.forEach((function(t){t.showInterstitialAd(e)}))},n.loadRewardedVideoAd=function(e){this.isActive()&&this.analytics.forEach((function(t){t.loadRewardedVideoAd(e)}))},n.showRewardedVideoAd=function(e){this.isActive()&&this.analytics.forEach((function(t){t.showRewardedVideoAd(e)}))},n.showBannerAd=function(e,t){this.isActive()&&this.analytics.forEach((function(n){n.showBannerAd(e,t)}))},n.receiveReward=function(e){this.isActive()&&this.analytics.forEach((function(t){t.receiveReward(e)}))},n.loadAdFail=function(e,t,n){this.isActive()&&this.analytics.forEach((function(r){r.loadAdFail(e,t,n)}))},n.showAdFail=function(e,t,n,r){this.isActive()&&this.analytics.forEach((function(a){a.showAdFail(e,t,n,r)}))},n.isActive=function(){return this.analytics.length>=1},t}(Phaser.Plugins.BasePlugin),Q=q,J=n(436),$=n.n(J),ee=n(92),te=n.n(ee),ne=function(){function e(e){var t=this;this.game=void 0,this.audios=void 0,this.volume=void 0,this.soundKeys=void 0,this.isMusicEnabled=function(){return!!t.game.player.getPlayerSetting("music")},this.isSoundEnabled=function(){return!!t.game.player.getPlayerSetting("sound")},this.game=e,this.audios=new($()),this.soundKeys=new($())}var t=e.prototype;return t.addSoundKeys=function(e){var t=this;te()(e).forEach((function(n){var r=e[n];"string"===typeof r&&t.soundKeys.set(n,r)}))},t.clearSoundKeys=function(){this.soundKeys.clear()},t.play=function(e,t){var n=this,r=(0,i.Z)({volume:this.volume},t||{});r.volume!==this.volume&&(r.volume*=this.volume);var a=this.audios.get(e);if(!a&&this.game.cache.audio.exists(e)){var s=this.game.sound.add(e);this.audios.set(e,s),a=s}if(a)(a=this.getAnotherIfIsPlaying(a)).play(void 0,r);else{var o=this.soundKeys.get(e);if(!o)return console.log(this.soundKeys.get(e),e),void console.warn(e+" not found. Use importSoundEffectKeys from audio plugin to add it.");try{var c=o.replace(".ogg",".mp3");console.log(e,o,c,"load_sound_plugin"),this.game.globalScene.load.audio(e,[o,c]),this.game.globalScene.load.on(Phaser.Loader.Events.FILE_KEY_COMPLETE+"audio-"+e,(function(){console.log(e,o,"finish");var t=n.game.sound.add(e);n.audios.set(e,t),t.play(void 0,r)})),this.game.globalScene.load.start()}catch(u){console.warn(u)}}},t.getAnotherIfIsPlaying=function(e){if(!e.isPlaying)return e;for(var t=1,n=e.key+"-"+t,r=this.audios.get(n);void 0!==r;){if(!r.isPlaying)return r;t++,n=e.key+"-"+t,r=this.audios.get(n)}return r=this.game.sound.add(e.key),this.audios.set(n,r),r},t.pauseAll=function(){this.audios.forEach((function(e){e.pause()}))},t.resumeAll=function(){this.audios.forEach((function(e){e.resume()}))},t.stopAll=function(){this.audios.forEach((function(e){e.stop()}))},t.pause=function(e){var t=this.audios.get(e);t&&t.pause()},t.stop=function(e){var t=this.audios.get(e);t&&t.stop()},t.setVolume=function(e){this.volume=e},e}(),re=ne,ae=n(198),ie=n.n(ae),se=function(){function e(e){var t=this;this.game=void 0,this.musicKeys=void 0,this.previousAudio=void 0,this.currentAudio=void 0,this.audios=void 0,this.loadQueue={},this.fadeQueue={},this.volume=void 0,this.handleOnLoadComplete=function(e){return function(n){delete t.loadQueue[n],console.log("Music key: ",n,"finish"),t.play(n,e)}},this.isMusicEnabled=function(){return!!t.game.player.getPlayerSetting("music")},this.game=e,this.audios=new($()),this.musicKeys=new($()),this.loadQueue={}}var t=e.prototype;return t.addMusicKeys=function(e){var t=this;te()(e).forEach((function(n){var r=e[n];"string"===typeof r&&t.musicKeys.set(n,r)}))},t.play=function(e,t){var n=(0,i.Z)({volume:this.volume},t||{});if(n.volume!==this.volume&&(n.volume*=this.volume),void 0===e){if(!this.currentAudio)return;e=this.currentAudio.key}for(var r=0,a=ie()(this.loadQueue);r<a.length;r++){var s=a[r],o=s[0],c=s[1];this.game.globalScene.load.off(Phaser.Loader.Events.FILE_KEY_COMPLETE+"audio-"+o,c)}this.loadQueue={};var u=this.audios.get(e);if(!u&&this.game.cache.audio.exists(e)){var l=this.game.sound.add(e);this.audios.set(e,l),u=l}if(u)return u===this.currentAudio&&u.seek>0?void u.resume():(this.previousAudio=this.currentAudio,this.currentAudio&&this.fadePlay(this.currentAudio,this.currentAudio.volume,0,1e3),this.currentAudio=u,this.currentAudio.play(void 0,n),void this.fadePlay(this.currentAudio,0,n.volume,1e3));var h=this.musicKeys.get(e);if(!h)return console.log(this.musicKeys.get(e),e),void console.warn(e+" not found. Use importMusicEffectKeys from audio plugin to add it.");try{var d=h.replace(".ogg",".mp3");console.log(e,h,"load_music_plugin"),this.game.globalScene.load.audio(e,[h,d]);var p=this.handleOnLoadComplete(t);this.game.globalScene.load.once(Phaser.Loader.Events.FILE_KEY_COMPLETE+"audio-"+e,p),this.game.globalScene.load.start(),this.loadQueue[e]=p}catch(f){console.warn(f)}},t.fadePlay=function(e,t,n,r){var a=this,i=this.fadeQueue[e.key];i&&i.remove(),delete this.fadeQueue[e.key];var s=this.game.globalScene.tweens.add({targets:{volume:t},volume:n,duration:r,onUpdate:function(t,n){e.setVolume(n.volume)},onComplete:function(){e.setVolume(n);var t=a.fadeQueue[e.key];t&&t.remove(),delete a.fadeQueue[e.key]}});this.fadeQueue[e.key]=s},t.pause=function(){var e,t;null==(e=this.previousAudio)||e.pause(),null==(t=this.currentAudio)||t.pause()},t.stop=function(){var e;null==(e=this.currentAudio)||e.stop()},t.setVolume=function(e){this.volume=e},e}(),oe=se,ce=function(e){function t(){for(var t,n,r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(n=e.call.apply(e,O()(t=[this]).call(t,a))||this).soundManager=void 0,n.musicManager=void 0,n.isMuteAll=void 0,n.previousMusicKey=void 0,n.previousMusicConfig=void 0,n.initMusic=function(){n.musicManager=new oe(n.game),n.setMusicVolume(1)},n.initSound=function(){n.soundManager=new re(n.game),n.setSoundVolume(1)},n}(0,o.Z)(t,e);var n=t.prototype;return n.importSoundEffectKeys=function(e){this.soundManager.addSoundKeys(e)},n.importMusicKeys=function(e){this.musicManager.addMusicKeys(e)},n.playSound=function(e,t){try{if(!this.soundManager||this.isMuteAll||!this.game.visibility.isGameVisible())return;if(!this.soundManager.isSoundEnabled())return;this.soundManager.play(e,t)}catch(n){}},n.stopSound=function(e){try{this.soundManager.stop(e)}catch(t){}},n.playMusic=function(e,t){void 0===t&&(t={}),e&&(this.previousMusicKey=e,this.previousMusicConfig=t);try{if(!this.musicManager||this.isMuteAll||!this.game.visibility.isGameVisible())return;if(!this.musicManager.isMusicEnabled())return;this.musicManager.play(this.previousMusicKey,(0,i.Z)({loop:!0,volume:.2},this.previousMusicConfig))}catch(n){}},n.pauseMusic=function(){try{if(!this.musicManager)return;this.musicManager.pause()}catch(e){}},n.stopMusic=function(){try{if(!this.musicManager)return;this.musicManager.stop()}catch(e){}},n.pauseAllSounds=function(){try{if(!this.soundManager)return;this.soundManager.pauseAll()}catch(e){}},n.resumeAllSounds=function(){try{if(!this.soundManager)return;this.soundManager.resumeAll()}catch(e){}},n.setSoundVolume=function(e){try{if(!this.soundManager)return;this.soundManager.setVolume(e)}catch(t){console.warn("setSoundVolume",t)}},n.setMusicVolume=function(e){try{if(!this.musicManager)return;this.musicManager.setVolume(e)}catch(t){console.warn("setMusicVolume",t)}},n.muteAll=function(){this.isMuteAll=!0,this.game.sound.mute=!0},n.unmuteAll=function(){this.isMuteAll=!1,this.game.sound.mute=!1},t}(Phaser.Plugins.BasePlugin),ue=ce,le=n(186),he="AUTH_TOKEN_REQUEST",de="AUTH_TOKEN_RECEIVED",pe=function(e){function t(t,n){var r;return(r=e.call(this,t)||this).payload=void 0,r.name="RequestTokenFail",r.message=t||"Request token fail",r.payload=n||{},r}return(0,o.Z)(t,e),t}((0,Z.Z)(Error)),fe=n(425),me="auth",ve=(0,fe.P1)([function(e){return e[me].token}],(function(e){return e})),ge=(0,fe.P1)([function(e){return e[me].isRequesting}],(function(e){return e})),ye=function(e){return{type:de,payload:{token:e}}},we=function(e){function t(){return e.apply(this,arguments)||this}(0,o.Z)(t,e);var n=t.prototype;return n.requestToken=function(){var e=(0,s.Z)(h().mark((function e(){var t;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.game.storage,e.next=3,t.dispatch(function(){var e=(0,s.Z)(h().mark((function e(t,n){var a,i,s,o;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,a=window.game.facebook,i=n(),s=ve(i),!ge(i)&&""===s){e.next=7;break}return e.abrupt("return");case 7:return t({type:he,payload:{}}),e.next=10,a.getPlayerToken();case 10:o=e.sent,t(ye(o)),e.next=25;break;case 14:if(e.prev=14,e.t0=e.catch(0),!(e.t0 instanceof Object&&GameCore.Utils.Object.hasOwn(e.t0,"code"))){e.next=19;break}if("PENDING_REQUEST"!==e.t0.code){e.next=19;break}return e.abrupt("return");case 19:if(t(ye("")),!(e.t0 instanceof Object&&GameCore.Utils.Object.hasOwn(e.t0,"message"))){e.next=24;break}if("string"!==typeof e.t0.message){e.next=24;break}return(0,r.tO)(new Error(e.t0.message)),e.abrupt("return");case 24:(0,r.tO)(new pe);case 25:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(t,n){return e.apply(this,arguments)}}());case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.getToken=function(){return ve(this.state)},(0,le.Z)(t,[{key:"state",get:function(){return this.game.storage.getState()}}]),t}(Phaser.Plugins.BasePlugin),Se=we,Ee=n(428);function be(e,t,n){if(void 0===n&&(X||(X=document.createElement("canvas")),X.width=1,X.height=1,!(n=X.getContext("2d")||void 0)))throw new Error("Get context 2d failed.");var r=function(e){var t=(0,i.Z)({},ke,e),n=[];t.fontStyle&&n.push(t.fontStyle);t.fontVariant&&n.push(t.fontVariant);t.fontWeight&&n.push(t.fontWeight);GameCore.Utils.Valid.isNumber(t.fontSize)?t.fontSize=t.fontSize+"px":t.fontSize=ke.fontSize;t.lineHeight?n.push(t.fontSize+"/"+t.lineHeight):n.push(t.fontSize);return n.push(t.fontFamily),n.join(" ")}(t);n.font=r,n.textAlign="left",n.textBaseline="bottom";var a,s,o=n.measureText(e);if("undefined"===typeof o.actualBoundingBoxLeft)return{text:e,letter:e,width:o.width,height:parseInt(""+(null!=(a=t.fontSize)?a:"14"),10),fontWidth:o.width,fontHeight:parseInt(""+(null!=(s=t.fontSize)?s:"14"),10),trimOffsetTop:0,trimOffsetLeft:0};n.textAlign="right",n.textBaseline="top";var c=n.measureText(e),u=Math.ceil(o.actualBoundingBoxLeft),l=Math.ceil(c.actualBoundingBoxAscent),h=u+Math.ceil(o.actualBoundingBoxRight),d=Math.ceil(o.actualBoundingBoxDescent)+Math.ceil(o.actualBoundingBoxAscent),p=Math.ceil(o.width),f=o.actualBoundingBoxAscent-c.actualBoundingBoxAscent;return"M"===e&&console.log({text:e,letter:e,width:h,height:d,fontWidth:p,fontHeight:f,trimOffsetTop:l,trimOffsetLeft:u}),{text:e,letter:e,width:h,height:d,fontWidth:p,fontHeight:f,trimOffsetTop:l,trimOffsetLeft:u}}var ke={fontSize:"14px",fontFamily:"sans-serif"};var xe='nunito,-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Oxygen,Ubuntu,Cantarell,"Fira Sans","Droid Sans","Helvetica Neue",sans-serif',Ae=function(e,t){void 0===t&&(t=1);var n=new Image;n.onload=function(){var n,r,a=(n=this.width*t,r=this.height*t,{string:"+",style:"font-size: 1px; padding: "+Math.floor(r/2)+"px "+Math.floor(n/2)+"px;"});console.info("%c "+a.string,a.style+" background: transparent url("+e+") no-repeat center center; background-size: "+this.width*t+"px "+this.height*t+"px;")},n.src=e},Ce=function(e){function t(){for(var t,n,r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(n=e.call.apply(e,O()(t=[this]).call(t,a))||this).width=void 0,n.height=void 0,n.renderOptions=void 0,n.canvas=void 0,n}(0,o.Z)(t,e);var n=t.prototype;return n.preload=function(e){var t=this,n=te()(e);n.length<1||(n.forEach((function(n){t.scene.load.image(n,e[n])})),this.scene.load.start())},n.capture=function(){var e=(0,s.Z)(h().mark((function e(t){var n,r,a;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.width,r=t.height,a=t.renderOptions,this.width=n,this.height=r,this.renderOptions=a,this.createCanvas(),e.next=7,this.loadImages();case 7:return this.drawObjects(),e.abrupt("return",this.snapshotFrame());case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),n.createCanvas=function(){this.canvas||(this.canvas=this.game.textures.createCanvas("FrameCaptureCanvas")),this.canvas.clear(),this.canvas.setSize(this.width,this.height)},n.loadImages=function(){var e=[];for(var t in this.renderOptions){var n=this.renderOptions[t],r=n.name,a=n.image,i=n.fallbackWithImage;if(a)if(this.scene.textures.get(r).key!==r&&""!==r){var s=this.loadImage(r,a,i);e.push(s)}}return this.scene.load.start(),u().all(e)},n.loadImage=function(e,t,n){var r=this;return this.scene.load.image(e,t),new(u())((function(t,a){var i=Phaser.Loader.Events.FILE_KEY_COMPLETE+"image-"+e,s=Phaser.Loader.Events.FILE_LOAD_ERROR,o=function e(n){r.scene.load.off(i,e),r.scene.load.off(s,c),t()},c=function c(u){if(u.key===e)if(r.scene.load.off(i,o),r.scene.load.off(s,c),n)t();else{var l=new Error("Load image failed");a(l)}};r.scene.load.on(i,o),r.scene.load.on(s,c)}))},n.drawObjects=function(){for(var e in this.renderOptions){var t=this.renderOptions[e];switch(t.type){case"text":this.drawText(t);break;case"image":this.drawImage(t)}}},n.drawText=function(e){var t=this.canvas.context,n=e.x,r=e.y,a=e.font,i=e.text,s=e.fillStyle,o=void 0===s?"#ffffff":s,c=e.lineWidth,u=e.textAlign,l=e.layer3D,h=l||{},d=h.secondFillStyle,p=void 0===d?"#000000":d,f=h.shadowFillStyle;c&&(t.lineWidth=c),u&&(t.textAlign=u),t.font=a+" "+Ee.Z.FONT_FAMILY+","+xe;var m=14;try{var v=a.split(" ");m=parseInt(v[1],10)}catch(w){}if(l){if(f){var g=Phaser.Display.Color.HexStringToColor(f).rgba;t.shadowColor=g,t.shadowBlur=4,t.shadowOffsetY=3}t.fillStyle=p,t.fillText(i,n,r+3),t.shadowColor="transparent",t.shadowBlur=0,t.shadowOffsetX=0,t.shadowOffsetY=0}var y=be("@",{fontFamily:Ee.Z.FONT_FAMILY+","+xe,fontSize:m});Array.isArray(o)?this.setTintFillGradient(t,o,n,r-y.height,n,r):t.fillStyle=o,t.fillText(i,n,r)},n.drawImage=function(e){var t=this.canvas.context,n=e.x,r=e.y,a=e.name,i=e.frame,s=e.width,o=e.height,c=e.fallbackWithImage,u=this.scene.textures.get(a),l=u.getSourceImage(i);"__MISSING"===u.key&&c&&(l=(u=this.scene.textures.get(c)).getSourceImage()),t.drawImage(l,n,r,s,o)},n.snapshotFrame=function(){var e=this.canvas.getCanvas().toDataURL("image/jpeg",.85);return GameCore.Utils.Valid.isDebugger()&&Ae(e),e},n.setTintFillGradient=function(e,t,n,r,a,i){var s=e.createLinearGradient(n,r,a,i);t.forEach((function(e,n){s.addColorStop(n/(t.length-1),e)})),e.fillStyle=s},t}(Phaser.Plugins.ScenePlugin),Te=Ce,Pe=function(e){function t(t,n,r){var a;return(a=e.call(this)||this).game=void 0,a.options=void 0,a.performance=void 0,a.isRunning=!1,a.checkTimer=void 0,a.fpsHistory=void 0,a.start=function(){if(!a.isRunning){a.isRunning=!0;var e=a.options.checkInterval;a.checkTimer=e,a.fpsHistory=[],a.game.events.on(Phaser.Core.Events.POST_STEP,a.onPostStep)}},a.stop=function(){a.isRunning&&(a.isRunning=!1,a.game.events.off(Phaser.Core.Events.POST_STEP,a.onPostStep),a.options.onlyUpdateWhenSwitchScene&&a.checkFps())},a.onPostStep=function(e,t){if(a.checkTimer-=t,!(a.checkTimer>0)){var n=a.options,r=n.checkInterval,i=n.onlyUpdateWhenSwitchScene;a.checkTimer+=r,a.fpsHistory.push(a.game.loop.actualFps),!1===i&&a.fpsHistory.length>=5&&a.checkFps()}},a.game=t,a.options=r,a.performance=n,a}(0,o.Z)(t,e);var n=t.prototype;return n.checkFps=function(){if(0!==this.fpsHistory.length){var e=this.options.autoUpgradeQuality,t=!1;this.isLowFps()?t=this.performance.downgradeGraphicsQuality():e&&this.isHighFps()&&(t=this.performance.upgradeGraphicsQuality()),t&&(this.fpsHistory=[])}},n.getFpsMedian=function(){return Phaser.Math.Median(this.fpsHistory)},n.isLowFps=function(){return this.getFpsMedian()<this.options.fpsThreshold},n.isHighFps=function(){return this.getFpsMedian()>1.2*this.options.fpsThreshold},t}(Phaser.Events.EventEmitter),Ie=Pe,Oe=["pixelRatio","minQuality","maxQuality","qualityAdjustStep","trackingSceneKeys"],Me=function(e){function t(){for(var t,n,r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(n=e.call.apply(e,O()(t=[this]).call(t,a))||this).fpsTracker=void 0,n.pixelRatio=void 0,n.minQuality=void 0,n.maxQuality=void 0,n.qualityAdjustStep=void 0,n.trackingSceneKeys=[],n.trackingScene=function(e){var t;if(y()(t=n.trackingSceneKeys).call(t,e)){var r=n.game.scene.getScene(e);r.events.once(Phaser.Scenes.Events.UPDATE,n.fpsTracker.start),r.events.once(Phaser.Scenes.Events.SLEEP,n.fpsTracker.stop)}},n}(0,o.Z)(t,e);var n=t.prototype;return n.configure=function(e){var t=e.pixelRatio,n=e.minQuality,r=e.maxQuality,i=e.qualityAdjustStep,s=e.trackingSceneKeys,o=(0,a.Z)(e,Oe);this.pixelRatio=t,this.minQuality=n,this.maxQuality=r,this.qualityAdjustStep=i,this.trackingSceneKeys=s,this.fpsTracker=new Ie(this.game,this,o)},n.active=function(){this.game.events.on(Phaser.Scenes.Events.WAKE,this.trackingScene),this.game.events.on(Phaser.Scenes.Events.START,this.trackingScene)},n.downgradeGraphicsQuality=function(){var e=this.pixelRatio;if(e<=this.minQuality)return!1;var t=+(e-this.qualityAdjustStep).toFixed(2);return!(t<this.minQuality)&&(this.pixelRatio=t,this.game.world.resize(this.pixelRatio),console.warn("\ud83d\udcab Graphics quality was downgraded! ("+e+" -> "+t+")"),!0)},n.upgradeGraphicsQuality=function(){var e=this.pixelRatio;if(e>=this.maxQuality)return!1;var t=+(e+this.qualityAdjustStep).toFixed(2);return!(t>this.maxQuality)&&(this.pixelRatio=t,this.game.world.resize(this.pixelRatio),console.warn("\ud83d\ude80 Graphics quality was upgraded! ("+e+" -> "+t+")"),!0)},t}(Phaser.Plugins.BasePlugin),_e=Me,Le={sound:!0,music:!0,vibrate:!0,language:"en",theme:GameCore.Configs.DefaultTheme},Re=n(192),Be=n.n(Re),De=n(191),Ne=n.n(De),Ge=Le.sound,Fe=Le.music,Ze=Le.vibrate,Ue=Le.language,He=Le.theme,We=function(){function e(e){this.sound=void 0,this.music=void 0,this.vibrate=void 0,this.language=void 0,this.theme=void 0;var t=e||{},n=t.sound,r=t.music,a=t.vibrate,i=t.language,s=t.theme;this.sound=GameCore.Utils.Valid.isBoolean(n)?n:Ge,this.music=GameCore.Utils.Valid.isBoolean(r)?r:Fe,this.vibrate=GameCore.Utils.Valid.isBoolean(a)?a:Ze,this.language=GameCore.Utils.Valid.isString(i)?i:Ue,this.theme=GameCore.Utils.Valid.isString(s)?s:He}return e.prototype.toObject=function(){return{sound:this.sound,music:this.music,vibrate:this.vibrate,language:this.language,theme:this.theme}},e}(),Ve=We,Ye=GameCore.Utils,ze=Ye.Valid,Ke=Ye.Object,je=function(){function e(e){this.score=void 0,this.settings=void 0,this.gameData=void 0,this.userGuideDisplays=void 0,this.timeAddShortcut=void 0,this.setupDefaultData(),this.updateScore(e),this.updateSettings(e),this.updateGameData(e),this.updateUserGuideDisplays(e)}var t=e.prototype;return t.setupDefaultData=function(){this.score=0,this.settings=(0,i.Z)({},Le),this.gameData={coins:0,diamond:0,lastReceiveGift:0,dailyRewarded:{lastRewarded:0,logDays:[]},dailyTasks:{startedTime:0,logTasks:{}},level:1,items:{undo:1,return:1,shuffle:1,extraSlot:1,magicWand:1}},this.userGuideDisplays=0},t.updateScore=function(e){var t=e.score;!1!==ze.isNumber(t)&&(this.score=t)},t.updateSettings=function(e){var t=e.settings;if(!1!==ze.isObject(t)){var n=new Ve(t).toObject();this.settings=n}},t.updateGameData=function(e){var t=e.gameData;if(!1!==ze.isObject(t)){if(Ke.hasOwn(t,"coins")&&ze.isNumber(t.coins)&&(this.gameData.coins=t.coins),Ke.hasOwn(t,"diamond")&&ze.isNumber(t.diamond)&&(this.gameData.diamond=t.diamond),Ke.hasOwn(t,"lastReceiveGift")&&ze.isNumber(t.lastReceiveGift)&&(this.gameData.lastReceiveGift=t.lastReceiveGift),Ke.hasOwn(t,"dailyRewarded")&&ze.isObject(t.dailyRewarded)){var n=t.dailyRewarded;Ke.hasOwn(n,"lastRewarded")&&ze.isNumber(n.lastRewarded)&&(this.gameData.dailyRewarded.lastRewarded=n.lastRewarded),Ke.hasOwn(n,"logDays")&&Array.isArray(n.logDays)&&(this.gameData.dailyRewarded.logDays=n.logDays)}if(Ke.hasOwn(t,"dailyTasks")&&ze.isObject(t.dailyTasks)){var r=t.dailyTasks;Ke.hasOwn(r,"startedTime")&&ze.isNumber(r.startedTime)&&(this.gameData.dailyTasks.startedTime=r.startedTime),Ke.hasOwn(r,"logTasks")&&ze.isObject(r.logTasks)&&(this.gameData.dailyTasks.logTasks=r.logTasks)}if(Ke.hasOwn(t,"level")&&ze.isNumber(t.level)&&(this.gameData.level=t.level),Ke.hasOwn(t,"items")&&ze.isObject(t.items)){var a=t.items;Ke.hasOwn(a,"undo")&&ze.isNumber(a.undo)&&(this.gameData.items.undo=a.undo),Ke.hasOwn(a,"return")&&ze.isNumber(a.return)&&(this.gameData.items.return=a.return),Ke.hasOwn(a,"shuffle")&&ze.isNumber(a.shuffle)&&(this.gameData.items.shuffle=a.shuffle),Ke.hasOwn(a,"extraSlot")&&ze.isNumber(a.extraSlot)&&(this.gameData.items.extraSlot=a.extraSlot),Ke.hasOwn(a,"magicWand")&&ze.isNumber(a.magicWand)&&(this.gameData.items.magicWand=a.magicWand)}}},t.updateUserGuideDisplays=function(e){var t=e.userGuideDisplays;!1!==ze.isNumber(t)&&(this.userGuideDisplays=t)},t.updateTimeAddShortcut=function(e){var t=e.timeAddShortcut;!1!==ze.isNumber(t)&&(this.timeAddShortcut=t)},t.toObject=function(){return{score:this.score,settings:this.settings,gameData:this.gameData,userGuideDisplays:this.userGuideDisplays}},t.convertToPlayerData=function(){var e=this.gameData,t=e.coins,n=e.diamond,r=e.dailyTasks,a=e.dailyRewarded,i=e.lastReceiveGift,s=e.level,o=e.items;return{score:this.score,settings:this.settings,customFields:{coins:t,diamond:n,dailyTasks:r,dailyRewarded:a,lastReceiveGift:i,level:s,items:o},userGuideDisplays:this.userGuideDisplays,timeAddShortcut:this.timeAddShortcut}},t.convertToFacebookData=function(e){var t=e.score,n=e.settings,r=e.customFields,a=e.userGuideDisplays,i=e.timeAddShortcut;return this.updateScore({score:t}),this.updateSettings({settings:n}),this.updateGameData({gameData:r}),this.updateUserGuideDisplays({userGuideDisplays:a}),this.updateTimeAddShortcut({timeAddShortcut:i}),this.toObject()},e}(),Xe=je,qe=n(587),Qe=GameCore.Configs.ApiHost,Je=function(){var e=(0,s.Z)(h().mark((function e(t){var n;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,qe.v)("players?platform=ms-games",t,{},Qe,10);case 2:return n=e.sent,e.abrupt("return",(null==n?void 0:n.data)||{});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),$e=function(){var e=(0,s.Z)(h().mark((function e(t){var n;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,qe.v)("players/"+t+"/user-guide-displays/inc",{},{},Qe);case 2:return n=e.sent,e.abrupt("return",(null==n?void 0:n.data)||{});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),et="PLAYER_RECEIVED",tt="PLAYER_DATA_UPDATE",nt="PLAYER_SCORE_UPDATE",rt="PLAYER_PROFILE_UPDATE",at="PLAYER_SETTING_UPDATE",it="PLAYER_CONNECTED_PLAYERS_UPDATE",st=n(419),ot=function(e){function t(t,n){var r;return(r=e.call(this,t)||this).payload=void 0,r.name="PlayerDataNameNotSupport",r.message=t||"The name of player data is not supported",r.payload=n||{},r}return(0,o.Z)(t,e),t}((0,Z.Z)(Error)),ct="player",ut=(0,fe.P1)([function(e){return e[ct]}],(function(e){return e})),lt=(0,fe.P1)([ut],(function(e){return e.playerId})),ht=(0,fe.P1)([ut],(function(e){return e.ASID})),dt=(0,fe.P1)([function(e){return e[ct].data}],(function(e){return e})),pt=((0,fe.P1)([dt],(function(e){return e.settings})),(0,fe.P1)([function(e){return e[ct].connectedPlayers}],(function(e){return e}))),ft=(0,fe.P1)([pt,function(e,t){return t.limit},function(e,t){return t.offset}],(function(e,t,n){if("number"!==typeof t)return[];if("number"!==typeof n)return[];var r=te()(e);return b()(r).call(r,n,t+n)||[]})),mt=(0,fe.P1)([dt],(function(e){return e.score})),vt=(0,fe.P1)([dt],(function(e){return e.customFields})),gt=GameCore.Configs,yt=gt.AppId,wt=gt.Tutorial,St=function(e,t){return function(n){var r=e.playerId,a=e.name,i=e.photo,s=e.locale;n({type:et,payload:{playerId:r,name:a,photo:i,locale:s,data:t||{}}})}},Et=function(e){return{type:it,payload:{connectedPlayers:e}}},bt=function(e,t){return function(){var n=(0,s.Z)(h().mark((function n(a,i){var s,o,c;return h().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,a({type:at,payload:{name:e,value:t}});case 3:s=i(),o=dt(s),c=new Xe({}).convertToFacebookData(o),FBInstant.player.setDataAsync(c),n.next=12;break;case 9:n.prev=9,n.t0=n.catch(0),(0,r.tO)(n.t0);case 12:case"end":return n.stop()}}),n,null,[[0,9]])})));return function(e,t){return n.apply(this,arguments)}}()},kt=function(e,t){return function(){var n=(0,s.Z)(h().mark((function n(a,i){var s,o,c,u,l;return h().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,o={customFields:(s={},s[e]=t,s)},n.next=4,a(At(o));case 4:c=i(),u=dt(c),l=new Xe({}).convertToFacebookData(u),FBInstant.player.setDataAsync(l),n.next=15;break;case 10:if(n.prev=10,n.t0=n.catch(0),!(n.t0 instanceof ot)){n.next=14;break}return n.abrupt("return");case 14:(0,r.tO)(n.t0);case 15:case"end":return n.stop()}}),n,null,[[0,10]])})));return function(e,t){return n.apply(this,arguments)}}()},xt=function(e){return function(){var t=(0,s.Z)(h().mark((function t(n,a){var i,s,o,c;return h().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,i={customFields:e},t.next=4,n(At(i));case 4:s=a(),o=dt(s),c=new Xe({}).convertToFacebookData(o),FBInstant.player.setDataAsync(c),t.next=16;break;case 10:if(t.prev=10,t.t0=t.catch(0),console.log("\ud83e\udd16 ? error",t.t0),!(t.t0 instanceof ot)){t.next=15;break}return t.abrupt("return");case 15:(0,r.tO)(t.t0);case 16:case"end":return t.stop()}}),t,null,[[0,10]])})));return function(e,n){return t.apply(this,arguments)}}()},At=function(e){return{type:tt,payload:{data:e}}},Ct=function(e){return function(){var t=(0,s.Z)(h().mark((function t(n,a){var i,s,o;return h().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,n({type:nt,payload:{score:e}});case 3:Je({score:e}),i=a(),s=dt(i),o=new Xe({}).convertToFacebookData(s),FBInstant.player.setDataAsync(o),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(0),(0,r.tO)(t.t0);case 13:case"end":return t.stop()}}),t,null,[[0,10]])})));return function(e,n){return t.apply(this,arguments)}}()},Tt=function(e){return function(){var t=(0,s.Z)(h().mark((function t(n,a){var i,s,o;return h().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,n(At({timeAddShortcut:e}));case 3:i=a(),s=dt(i),o=new Xe({}).convertToFacebookData(s),FBInstant.player.setDataAsync(o),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(0),(0,r.tO)(t.t0);case 12:case"end":return t.stop()}}),t,null,[[0,9]])})));return function(e,n){return t.apply(this,arguments)}}()},Pt=function(e){function t(){return e.apply(this,arguments)||this}(0,o.Z)(t,e);var n=t.prototype;return n.incUserGuideDisplays=function(){var e=(0,s.Z)(h().mark((function e(){var t;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.game.storage,e.next=3,t.dispatch(function(){var e=(0,s.Z)(h().mark((function e(t,n){var a,i,s,o;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!wt.ForceUseTutorial){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,t(At({userGuideDisplays:1}));case 5:a=n(),i=lt(a),s=dt(a),o=new Xe({}).convertToFacebookData(s),FBInstant.player.setDataAsync(o),$e(i),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),(0,r.tO)(e.t0);case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(t,n){return e.apply(this,arguments)}}());case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.receiveData=function(){var e=(0,s.Z)(h().mark((function e(t,n){var r;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=this.game.storage,e.next=3,r.dispatch(St(t,n));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}(),n.updateData=function(){var e=(0,s.Z)(h().mark((function e(){var t;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.game.storage,e.next=3,t.dispatch(function(){var e=(0,s.Z)(h().mark((function e(t,n){var a,i,s,o,c,u,l,d;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a=n(),i=ut(a),s=i.playerId,o=i.name,c=i.photo,u=i.locale,e.next=6,FBInstant.player.getASIDAsync();case 6:return l=e.sent,d={appId:yt,playerId:s,name:o,photo:c,locale:u,ASID:l},e.next=10,t({type:rt,payload:{profile:d}});case 10:return e.next=12,Je(d);case 12:e.next=17;break;case 14:e.prev=14,e.t0=e.catch(0),(0,r.tO)(e.t0);case 17:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(t,n){return e.apply(this,arguments)}}());case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.setBestScore=function(){var e=(0,s.Z)(h().mark((function e(t){var n;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.game.storage,e.next=3,n.dispatch(Ct(t));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),n.setTimeAddShortcut=function(){var e=(0,s.Z)(h().mark((function e(t){var n;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.game.storage,e.next=3,n.dispatch(Tt(t));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),n.setSetting=function(){var e=(0,s.Z)(h().mark((function e(t,n){var r;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=this.game.storage,e.next=3,r.dispatch(bt(t,n));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}(),n.setCustomData=function(){var e=(0,s.Z)(h().mark((function e(t,n){var r;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=this.game.storage,e.next=3,r.dispatch(kt(t,n));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}(),n.setMultiCustomData=function(){var e=(0,s.Z)(h().mark((function e(t){var n;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.game.storage,e.next=3,n.dispatch(xt(t));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),n.requestConnectedPlayers=function(){var e=(0,s.Z)(h().mark((function e(){var t;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.game.storage,e.next=3,t.dispatch(function(){var e=(0,s.Z)(h().mark((function e(t){var n,a,i,s;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,FBInstant.player.getConnectedPlayersAsync();case 3:if(a=e.sent,i=function(e){return!!e},s=Be()(n=Ne()(a).call(a,(function(e){var t=e.getID(),n=e.getName(),r=e.getPhoto();return t&&n&&r?new st.Z(t,n,r).toObject():null}))).call(n,i),!(s.length<1)){e.next=8;break}return e.abrupt("return");case 8:t(Et(s)),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),(0,r.tO)(e.t0);case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t){return e.apply(this,arguments)}}());case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.updateConnectedPlayers=function(){var e=(0,s.Z)(h().mark((function e(t){var n;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.game.storage,e.next=3,n.dispatch(Et(t));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),n.getPlayer=function(){return ut(this.state)},n.getPlayerId=function(){return this.getPlayer().playerId},n.getPlayerASID=function(){return ht(this.state)},n.getPlayerData=function(){return this.getPlayer().data},n.getPlayerSetting=function(e){var t=this.getPlayerSettings();return"string"!==typeof e?null:GameCore.Utils.Object.hasOwn(t,e)?t[e]:GameCore.Utils.Object.hasOwn(Le,e)?Le[e]:null},n.getPlayerSettings=function(){return this.getPlayerData().settings},n.getPlayerIsNew=function(){return this.getPlayer().isUserNew},n.getDiamond=function(){var e=this.getCustomData("diamond");return GameCore.Utils.Valid.isNumber(e)?e:0},n.getBestScore=function(){return mt(this.state)},n.getCustomData=function(e){var t=vt(this.state);return GameCore.Utils.Valid.isObject(t)&&GameCore.Utils.Object.hasOwn(t,e)?t[e]:null},n.getConnectedPlayers=function(){return pt(this.state)},n.getConnectedPlayerIds=function(e,t){return ft(this.state,{limit:e,offset:t})},(0,le.Z)(t,[{key:"state",get:function(){return this.game.storage.getState()}}]),t}(Phaser.Plugins.BasePlugin),It=Pt,Ot=GameCore.Configs.ApiHost,Mt=function(){var e=(0,s.Z)(h().mark((function e(t){var n,r;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=GameCore.Utils.String.params(t),e.next=3,(0,qe.U)("players?"+n,{},Ot);case 3:return r=e.sent,e.abrupt("return",(null==r?void 0:r.data)||[]);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),_t="PROFILES_DATA_UPDATE",Lt="profile",Rt=(0,fe.P1)([function(e){return e[Lt].data}],(function(e){return e})),Bt=(0,fe.P1)([function(e){return e[Lt].profileIds}],(function(e){return e})),Dt=function(e){return function(){var t=(0,s.Z)(h().mark((function t(n,a){var i,s,o,c;return h().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,i=a(),s=Bt(i),!((o=GameCore.Utils.Array.difference(e,s)).length<1)){t.next=6;break}return t.abrupt("return");case 6:return t.next=8,Mt({playerIds:o});case 8:c=t.sent,n({type:_t,payload:{data:c}}),t.next=15;break;case 12:t.prev=12,t.t0=t.catch(0),(0,r.tO)(t.t0);case 15:case"end":return t.stop()}}),t,null,[[0,12]])})));return function(e,n){return t.apply(this,arguments)}}()},Nt=function(e){function t(){return e.apply(this,arguments)||this}(0,o.Z)(t,e);var n=t.prototype;return n.requestProfiles=function(){var e=(0,s.Z)(h().mark((function e(t){var n;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.game.storage,e.next=3,n.dispatch(Dt(t));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),n.getProfiles=function(){return Rt(this.state)},(0,le.Z)(t,[{key:"state",get:function(){return this.game.storage.getState()}}]),t}(Phaser.Plugins.BasePlugin),Gt=Nt,Ft=n(60),Zt=n.n(Ft),Ut=n(93),Ht=n.n(Ut),Wt=n(204),Vt=n.n(Wt),Yt=["player","match"],zt="null",Kt=GameCore.Utils,jt=(Kt.Valid,Kt.Object),Xt=GameCore.Configs.Rollbar,qt=Xt.UseMockup,Qt=Xt.FilterError,Jt=function(e){function t(){for(var t,n,r=arguments.length,i=new Array(r),s=0;s<r;s++)i[s]=arguments[s];return(n=e.call.apply(e,O()(t=[this]).call(t,i))||this).enable=void 0,n.rollbar=void 0,n.events=[],n.beforeSend=function(e,t,r){qt&&n.showPopupError(r)},n.checkIgnore=function(e,t,r){try{return!!n.isErrorIgnore(t)&&(console.warn(t),!0)}catch(a){return!1}},n.showPopupError=function(e){var t,r,a,i=null==e||null==(t=e.body)||null==(t=t.trace)?void 0:t.exception;i&&n.events.push(i);var s=(null==e||null==(r=e.body)||null==(r=r.trace)?void 0:r.frames)||[];(a=n.events).push.apply(a,s);var o=document.getElementById("popup-error");o||((o=document.createElement("div")).id="popup-error",document.body.appendChild(o)),o.innerHTML='<div style="color: #fff; display: flex; flex-flow: column; align-items: center; ">\n      <pre id="json" style="overflow: auto; background-color: rgb(195 112 97 / 80%); padding: 10px; max-height: 80vh; max-width: 90vw; border: 5px solid #545454;">'+Zt()(n.events,null,2)+'</pre>\n      <button id="close" style="cursor: pointer; padding: 10px 20px; border-radius: 100px;">Close</button>\n      </div>',o.style="top: 0px; z-index: 10000; width: 100vw; max-height: 100vh; position: absolute; display: flex; align-items: center; justify-content: center;";var c=document.getElementById("close");c&&(c.onclick=n.closePopup)},n.closePopup=function(){n.events=[{}];var e=document.getElementById("popup-error");null==e||e.remove()},n.isErrorIgnore=function(e){if(!e||0===e.length)return!1;for(var t=!1,r=0;r<e.length;r++){var a=e[r];a instanceof Object&&(t=n.isIgnoreByCode(a)||n.isIgnoreByMessage(a));try{"string"===typeof a&&(t=n.isIgnoreByCodeString(a))}catch(i){}if(t)break}return t},n.isIgnoreByCode=function(e){if(jt.hasOwn(e,"code")){var t=e.code,n=Qt.Codes,r=n.accepted,a=n.ignored;if("string"===typeof t){if(Ht()(r).call(r,t)>=0)return!1;if("UNKNOWN"===t||"AdLoadError"===t)return Math.random()<.3;if(Ht()(a).call(a,t)>=0)return!0}}else if(jt.hasOwn(e,"name")){var i=e.name,s=Qt.Codes,o=s.accepted,c=s.ignored;if("string"===typeof i){if(Ht()(o).call(o,i)>=0)return!1;if("UNKNOWN"===i||"AdLoadError"===i)return Math.random()<.3;if(Ht()(c).call(c,i)>=0)return!0}}return!1},n.isIgnoreByCodeString=function(e){var t=Qt.Codes,n=t.accepted,r=t.ignored;return!(Ht()(n).call(n,e)>=0)&&("UNKNOWN"===e||"AdLoadError"===e?Math.random()<.3:Ht()(r).call(r,e)>=0)},n.isIgnoreByMessage=function(e){if(jt.hasOwn(e,"message")){var t=e.message,n=Qt.Messages,r=n.accepted,a=n.ignored;if("string"===typeof t){if(Ht()(r).call(r,t)>=0)return!1;if(Ht()(a).call(a,t)>=0)return!0}}return!1},n.addExtraState=function(){try{if(!jt.hasOwn(window,"game"))return;if(!jt.hasOwn(window.game,"storage"))return;if(!jt.hasOwn(window.game.storage,"getState"))return;var e=(0,window.game.storage.getState)()||{},t=e.player,r=e.match,i=(0,a.Z)(e,Yt);n.rollbar.configure({payload:{player:t,match:r,other:i}})}catch(s){console.warn("%c addExtraState: ","font-size:12px;background-color: #42b983;color:#fff;",s)}},n}(0,o.Z)(t,e);var n=t.prototype;return n.setup=function(){this.rollbar=new(Vt())({accessToken:zt,checkIgnore:this.checkIgnore,onSendCallback:this.beforeSend,captureUncaught:!0,scrubTelemetryInputs:!0,captureUnhandledRejections:!0,autoInstrument:{dom:!1,navigation:!1},payload:{environment:"production",client:{javascript:{code_version:"0"}},server:{root:"webpack:///./",branch:"master"}}}),this.enable=!0},n.configure=function(e){this.rollbar&&this.rollbar.configure(e)},n.sendException=function(e,t){e&&(this.enable?this.rollbar&&(this.addExtraState(),this.rollbar.error(e,t)):console.error(e))},t}(Phaser.Plugins.BasePlugin),$t=Jt,en=n(187),tn=n(427),nn=function(e){function t(){return e.apply(this,arguments)||this}return(0,o.Z)(t,e),t.prototype.emit=function(t,n){return e.prototype.emit.call(this,t,n)},t}(Phaser.Events.EventEmitter),rn=nn,an=n(91),sn=n(426),on=function(e){function t(t,n,r,a){var i;(i=e.call(this,t)||this).zone=void 0,i.background=void 0,i.setName(n),i.setVisible(!1);var s=i.scene.world.getWorldSize(),o=s.width,c=s.height;return i.setSize(r||o,a||c),i.addZone(),i.addBackground(),i.registerEvents(),i}(0,o.Z)(t,e);var n=t.prototype;return n.open=function(e){GameCore.Utils.Valid.isObject(e)&&(this.setDataEnabled(),this.setData(e)),this.setBlockInputOutsideEnabled(!0),this.visible||(this.setVisible(!0),this.logPageviewOnOpen(),this.logEventOpen(),this.handleResize())},n.emitOpenCompleted=function(){this.emit(GameCore.Screens.Events.OPEN_COMPLETED,this),this.scene.screen.events.emit(GameCore.Screens.Events.OPEN_COMPLETED,this)},n.close=function(){this.setBlockInputOutsideEnabled(!1),this.visible&&(this.setVisible(!1),this.logPageviewOnClose(),this.emit(GameCore.Screens.Events.CLOSE_COMPLETED,this),this.scene.screen.events.emit(GameCore.Screens.Events.CLOSE_COMPLETED,this))},n.incY=function(e){this.y+=e,this.background.y-=e},n.incX=function(e){this.x+=e,this.background.x-=e},n.incScale=function(e){this.scale+=e,this.background.scale-=e^e*(100/e)},n.setBlockInputOutsideEnabled=function(e){},n.addZone=function(){this.zone=this.scene.add.zone(0,0,this.width,this.height),this.zone.setInteractive({}),this.add(this.zone)},n.addBackground=function(){var e="screen-background";if(!this.scene.textures.exists(e)){var t=this.width+2,n=this.height+2,r=this.scene.add.graphics();r.fillStyle(0,1),r.fillRect(0,0,t,n),r.generateTexture(e,t,n),r.destroy()}this.background=this.scene.add.image(0,0,e),this.add(this.background)},n.registerEvents=function(){this.scene.world.events.on(sn.Z.RESIZE,this.handleResize,this)},n.handleResize=function(){var e=this.scene.world.getWorldSize(),t=e.width,n=e.height;this.setSize(t,n).setPosition(t/2,n/2),this.zone.setSize(this.width,this.height),this.background.setDisplaySize(this.width,this.height)},n.logPageviewOnOpen=function(){this.scene.analytics.pageview(this.name)},n.logPageviewOnClose=function(){this.scene.analytics.pageview(this.scene.scene.key)},n.logEventOpen=function(){this.scene.analytics.event(an._.SCREEN_OPEN,{screen_name:this.getScreenName()})},n.getScreenName=function(){return GameCore.Utils.String.toUpperCamelCase(this.name.toLowerCase())},t}(Phaser.GameObjects.Container),cn=on,un={OPEN:"open",CLOSE:"close",OPEN_COMPLETED:"open-completed",CLOSE_COMPLETED:"close-completed",CREATED:"created"};GameCore.Screen=cn,GameCore.Screens={Events:un};var ln=function(e){function t(){for(var t,n,r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(n=e.call.apply(e,O()(t=[this]).call(t,a))||this).events=void 0,n}(0,o.Z)(t,e);var n=t.prototype;return n.boot=function(){this.events=new rn,this.registryScreenFactory()},n.get=function(e){var t=this.scene.children.getByName(e);return null===t?null:t},n.add=function(e,t,n,r){var a=this.get(e);return a||(a=this.scene.add.screen(e,t,n,r),this.events.emit(GameCore.Screens.Events.CREATED,a),a)},n.open=function(e,t){var n=this.get(e);return!!n&&(e===en.o4.MAP_SCREEN?this.scene.audio.playSound(tn.Z.THEME_POPUP_SHOW):e===en.o4.SHOP_SCREEN?this.scene.audio.playSound(tn.Z.SHOP_POPUP_SHOW,{volume:.3}):e===en.o4.NOTIFY_SCREEN||e===en.o4.SWITCH_MAP_SCREEN||e===en.o4.RESULT_SCREEN||(e===en.o4.DASHBOARD_SCREEN?this.scene.audio.playSound(tn.Z.DASHBOARD_OPEN,{volume:.3}):e===en.o4.NO_MORE_MOVES_SCREEN?this.scene.audio.playSound(tn.Z.FAIL):this.scene.audio.playSound(tn.Z.POPUP_SHOW)),n.open(t),n.emit(GameCore.Screens.Events.OPEN,n),this.events.emit(GameCore.Screens.Events.OPEN,n),console.log("Screen open",e,t),!0)},n.close=function(e){var t=this.get(e);return!!t&&(e!==en.o4.DASHBOARD_SCREEN&&e!==en.o4.SHOP_SCREEN&&e!==en.o4.SWITCH_MAP_SCREEN&&e!==en.o4.RESULT_SCREEN&&e!==en.o4.NO_MORE_MOVES_SCREEN&&e!==en.o4.WELL_DONE_SCREEN&&this.scene.audio.playSound(tn.Z.POPUP_OFF),t.close(),t.emit(GameCore.Screens.Events.CLOSE,t),this.events.emit(GameCore.Screens.Events.CLOSE,t),console.log("Screen close",e),!0)},n.openAsync=function(){var e=(0,s.Z)(h().mark((function e(t,n){var r;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.open(t,n),r=this.get(t)){e.next=4;break}return e.abrupt("return");case 4:return e.abrupt("return",new(u())((function(e){r.once(GameCore.Screens.Events.OPEN_COMPLETED,(function(){e()}))})));case 5:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}(),n.closeAsync=function(){var e=(0,s.Z)(h().mark((function e(t){var n;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.close(t),n=this.get(t)){e.next=4;break}return e.abrupt("return");case 4:if(n.visible){e.next=6;break}return e.abrupt("return");case 6:return e.abrupt("return",new(u())((function(e){n.once(GameCore.Screens.Events.CLOSE_COMPLETED,(function(){e()}))})));case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),n.bringToTop=function(e){var t=this.scene.children.getByName(e);t&&this.scene.children.bringToTop(t)},n.registryScreenFactory=function(){Phaser.GameObjects.GameObjectFactory.register("screen",this.createScreen)},n.createScreen=function(e,t,n,r){var a=new t(this.scene,e,n,r);return Phaser.Display.Align.In.Center(a,this.scene.gameZone),this.existing(a),a},t}(Phaser.Plugins.ScenePlugin),hn=ln,dn=n(394),pn=n.n(dn),fn=n(422),mn=n(424),vn=n(423),gn={currentSceneKey:"",prevSceneKey:""};(0,vn.pV)();var yn,wn,Sn,En,bn,kn,xn,An,Cn,Tn={processed:!1,contextId:"",contextType:"SOLO",entryPointData:{},currentGameMode:""},Pn=Tn,In={data:{}},On={token:"",isRequesting:!1},Mn=((yn={})[me]=function(e,t){return void 0===e&&(e=On),(0,vn.ZP)(e,(function(e){var n=t.payload;if(n){var r=n.token;switch(t.type){case he:e.isRequesting=!0;break;case de:e.token=r,e.isRequesting=!1}}}))},yn),_n=n(182),Ln={ASID:"",playerId:"",name:"",photo:"",locale:"",connectedPlayers:{},data:{score:0,settings:Le,userGuideDisplays:0,customFields:{},timeAddShortcut:0},isUserNew:!0},Rn=((wn={})[ct]=function(e,t){return void 0===e&&(e=Ln),(0,vn.ZP)(e,(function(n){var r=t.payload;if(r){var a=r.name,i=r.value,s=r.data,o=void 0===s?{}:s,c=r.score,u=r.connectedPlayers,l=void 0===u?[]:u,h=r.profile;switch(t.type){case et:var d=r.playerId,p=r.name,f=r.photo,m=r.locale,v=r.data;if(n.playerId=d,n.name=p,n.photo=f,n.locale=m,GameCore.Utils.Valid.isObject(v)){var g=v;n.data=(0,_n.TS)(e.data,g)}v.userGuideDisplays>0&&(n.isUserNew=!1);break;case rt:var y=h.playerId,w=h.name,S=h.photo,E=h.locale,b=h.ASID;n.ASID=b,n.playerId=y,n.name=w,n.photo=S,n.locale=E;break;case nt:n.data.score=c;break;case at:if(!GameCore.Utils.Object.hasOwn(n.data.settings,a))break;n.data.settings[a]=i;break;case tt:n.data=(0,_n.TS)(e.data,o),o.userGuideDisplays>0&&(n.isUserNew=!1);break;case it:if(l.length<=0)break;var k=GameCore.Utils.Object.keyBy(l,"playerId");n.connectedPlayers=(0,_n.TS)(e.connectedPlayers,k)}}}))},wn),Bn=n(438),Dn=n.n(Bn),Nn={data:{},profileIds:[]},Gn=((Sn={})[Lt]=function(e,t){return void 0===e&&(e=Nn),(0,vn.ZP)(e,(function(n){var r=t.payload;if(r){var a=r.data,s=void 0===a?[]:a;if(t.type===_t){var o,c,u=GameCore.Utils.Object.keyBy(s,"playerId"),l=te()(u);n.data=(0,_n.TS)((0,i.Z)({},e.data),u),n.profileIds=O()(o=[]).call(o,new(Dn())(O()(c=[]).call(c,e.profileIds,l)))}}}))},Sn),Fn="match",Zn="MATCH_CHALLENGE_DATA_RECEIVED",Un="MATCH_ONLINE_DATA_RECEIVED",Hn="open",Wn="active",Vn="finished",Yn={mode:"",status:Hn,rescued:0,startAt:0,finishAt:0},zn={single:{_id:"",data:{fen:""},playerId:"",status:Hn},group:{status:Hn,opponentInfo:{playerId:"",name:"",photo:""}},challenge:{_id:"",status:Hn,whitePlayerId:"",blackPlayerId:"",opponentInfo:{playerId:"",name:"",photo:""}},online:{_id:"",status:Hn,players:{}},updateAt:0,isRequesting:!1},Kn={current:{updateAt:0},data:{updateAt:0},isRequesting:!1},jn=((En={})[Fn]=(0,fn.UY)({gameplay:function(e,t){return void 0===e&&(e=Yn),(0,vn.ZP)(e,(function(n){var r=t.payload;if(r){var a=r.mode,i=r.status;switch(t.type){case"MATCH_GAMEPLAY_INITIALIZE":n.status=Hn,n.mode=Yn.mode,n.rescued=Yn.rescued,n.startAt=Yn.startAt,n.finishAt=Yn.finishAt,n.opponentInfo=Yn.opponentInfo;break;case"MATCH_GAMEPLAY_START":n.mode=a,n.status=Wn,n.rescued=Yn.rescued,n.startAt=Date.now();break;case"MATCH_GAMEPLAY_UPDATE":n.mode="string"===typeof a?a:e.mode,n.status=i||e.status;break;case"MATCH_GAMEPLAY_FINISH":n.status=Vn,n.finishAt=Date.now();break;case"MATCH_GAMEPLAY_RESCUE":n.rescued+=1}}}))},match:function(e,t){return void 0===e&&(e=zn),(0,vn.ZP)(e,(function(n){var r=t.payload;if(r){var a=r.match,s=r.opponentInfo,o=r.players;switch(t.type){case"MATCH_SINGLE_CREATE_REQUEST":case"MATCH_SINGLE_DETAIL_REQUEST":case"MATCH_CHALLENGE_JOIN_REQUEST":case"MATCH_CHALLENGE_FINISH_REQUEST":case"MATCH_ONLINE_CREATE_REQUEST":n.isRequesting=!0;break;case"MATCH_SINGLE_MOVE_UPDATED":n.single=(0,i.Z)({},e.single,a),n.updateAt=Date.now();break;case"MATCH_SINGLE_DATA_RECEIVED":n.isRequesting=!1,n.single=a||zn.single;break;case"MATCH_SINGLE_DATA_CLEAR":n.isRequesting=!1,n.single=zn.single;break;case"MATCH_CHALLENGE_CREATE_REQUEST":case"MATCH_CHALLENGE_CONTINUE_REQUEST":n.isRequesting=!0,n.challenge.opponentInfo=s;break;case Zn:n.isRequesting=!1,n.challenge=(0,i.Z)({},a||zn.challenge),n.challenge.opponentInfo=e.challenge.opponentInfo;break;case"MATCH_CHALLENGE_DATA_CLEAR":n.isRequesting=!1,n.challenge=zn.challenge;break;case"MATCH_GROUP_CREATE_REQUEST":n.group.status=Wn,s&&(n.group.opponentInfo=s);break;case"MATCH_GROUP_FINISH_REQUEST":n.group.status=Vn;break;case"MATCH_ONLINE_DATA_CLEAR":n.online.status=zn.online.status,n.online.players=zn.online.players;break;case Un:n.online.status=Wn,n.online.players=o;break;case"MATCH_ONLINE_FINISH_REQUEST":n.online.status=Vn}}}))},stats:function(e,t){return void 0===e&&(e=Kn),(0,vn.ZP)(e,(function(n){var r=t.payload;if(r){var a=r.playerId,s=r.stats,o=r.match,c=r.current,u=r.players,l=r.leaders;switch(t.type){case"MATCH_STATS_DATA_CLEAR":delete n.data[a],n.current=Kn.current;break;case"MATCH_STATS_CONTEXT_REQUEST":n.data=Kn.data,n.isRequesting=!0;break;case"MATCH_STATS_CONTEXT_RECEIVED":n.data=s,n.isRequesting=!1;break;case"MATCH_STATS_DATA_UPDATE":n.data[a]=s;break;case"MATCH_STATS_CURRENT_UPDATE":n.current=(0,_n.TS)((0,i.Z)({},e.current),s);break;case Un:te()(u).forEach((function(e){n.data[e]={score:0}}));break;case"MATCH_ONLINE_STATS_UPDATE":l.forEach((function(e){var t=e.playerId,r=e.score,a=e.rank;n.data[t]={score:r,rank:a}}));break;case Zn:var h=o||{},d=h.blackPlayerId,p=h.blackPlayerScore,f=h.whitePlayerId,m=h.whitePlayerScore,v=h.whitePlayerLevel,g=h.blackPlayerLevel;if(!d||!f)break;c&&(n.current=c),n.data[d]={score:p,level:g},n.data[f]={score:m,level:v}}}}))}}),En),Xn={active:!1,tournamentId:null,bestSessionScore:0,isRequesting:!1},qn=((bn={}).tournament=function(e,t){return void 0===e&&(e=Xn),(0,vn.ZP)(e,(function(n){var r=t.payload;if(r){var a=r.score,i=void 0===a?0:a,s=r.tournamentId;switch(t.type){case"TOURNAMENT_ACTIVE":n.active=!0,n.tournamentId=s;break;case"TOURNAMENT_REQUEST":n.isRequesting=!0;break;case"TOURNAMENT_RECEIVED":n.isRequesting=!1,i>e.bestSessionScore&&(n.bestSessionScore=i)}}}))},bn),Qn=n(435),Jn=n.n(Qn),$n=n(194),er=n.n($n),tr={leaderboardId:"",type:"",limit:0,offset:0,leaders:{},isRequesting:!1},nr=((kn={}).leaderboards=function(e,t){return void 0===e&&(e=tr),(0,vn.ZP)(e,(function(n){var r=t.payload;if(r){var a=r.leaderboardId,s=r.type,o=r.limit,c=r.offset,u=r.leaders;switch(t.type){case"LEADERBOARD_DATA_REQUEST":e.type!==s&&0===c&&(n.leaders=tr.leaders),n.isRequesting=!0,n.leaderboardId=a,n.type=s,n.limit=o,n.offset=c;break;case"LEADERBOARD_DATA_UPDATE":if(n.isRequesting=!1,e.type!==s)break;var l=GameCore.Utils.Json.clone((0,i.Z)({},e.leaders,u)),h=Jn()(l),d=Be()(h).call(h,(function(e){return!!e.name&&!!e.photo}));er()(d).call(d,(function(e,t){return+t.score-+e.score})),d.forEach((function(t,r){t.rank=r+1,e.leaders[t.playerId]||(n.leaders[t.playerId]=t)}));break;case"LEADERBOARD_DATA_CLEAR":n.isRequesting=!1,n.type=tr.type,n.limit=tr.limit,n.offset=tr.offset,n.leaders=tr.leaders,n.leaderboardId=tr.leaderboardId}}}))},kn),rr={mission:null,missions:null,isRequesting:!1},ar=((xn={}).missions=function(e,t){return void 0===e&&(e=rr),(0,vn.ZP)(e,(function(n){var r,a,i=t.payload;if(i){var s=i.name,o=i.type,c=i.value,u=i.missions;switch(t.type){case"MISSIONS_DATA_REQUEST":n.isRequesting=!0;break;case"MISSIONS_DATA_RECEIVE":if(n.isRequesting=!1,u.length<1)return;n.missions={},u.forEach((function(e){n.missions[e.name]=e}));break;case"MISSION_START":if(null===e.missions)break;var l=e.missions[s];n.mission={name:s,process:{},require:l.require,reward:l.reward},te()(l.require).forEach((function(e){n.mission.process[e]=0}));break;case"MISSION_UPDATE":if((null==(r=e.mission)?void 0:r.name)!==s)break;n.mission.process[o]+=c;break;case"MISSION_COMPLETED":if((null==(a=e.mission)?void 0:a.name)!==s)break;n.mission=null}}}))},xn),ir={tasks:[],process:[],isRequesting:!1,isNotice:!1},sr=((An={}).dailyTasks=function(e,t){return void 0===e&&(e=ir),(0,vn.ZP)(e,(function(n){var r=t.payload;if(r){var a=r.id,i=r.type,s=r.value,o=r.tasks,c=r.process;switch(t.type){case"DAILY_TASKS_DATA_REQUEST":n.isRequesting=!0;break;case"DAILY_TASKS_DATA_RECEIVE":n.isRequesting=!1,n.tasks=o;break;case"DAILY_TASKS_PROCESS_UPDATE":n.process=c;break;case"DAILY_TASK_VALUE_ADD":if(!e.process[a])break;n.process[a][i]+=s;break;case"DAILY_TASK_REWARDED":if(!e.process[a])break;n.process[a].rewarded=!0;break;case"DAILY_TASKS_SEEN":n.isNotice=!1;break;case"DAILY_TASK_FINISHED":n.isNotice=!0}}}))},An),or={rewards:[],isRequesting:!1},cr=((Cn={}).dailyRewards=function(e,t){return void 0===e&&(e=or),(0,vn.ZP)(e,(function(e){var n=t.payload;if(n){var r=n.rewards;switch(t.type){case"DAILY_REWARDS_REQUEST":e.isRequesting=!0;break;case"DAILY_REWARDS_RECEIVE":e.isRequesting=!1,e.rewards=r}}}))},Cn),ur=(0,fn.UY)((0,i.Z)({scene:function(e,t){return void 0===e&&(e=gn),(0,vn.ZP)(e,(function(n){var r=t.payload;if(r){var a=r.sceneKey;if(t.type===mn.DW)n.currentSceneKey=a,n.prevSceneKey=e.currentSceneKey}}))},context:function(e,t){return void 0===e&&(e=Tn),(0,vn.ZP)(e,(function(e){var n=t.payload;if(n){var r=n.gameMode,a=n.contextId,i=n.contextType,s=n.entryPointData;switch(t.type){case mn.kL:e.contextId=a,e.contextType=i,e.entryPointData=s;break;case mn.fJ:e.contextId=a,e.contextType=i,e.processed=!0;break;case mn.EH:e.currentGameMode=r}}}))},messages:function(e,t){return void 0===e&&(e=In),(0,vn.ZP)(e,(function(n){var r=t.payload;if(r){var a=r.opponentId;if("string"===typeof a)switch(t.type){case mn.qj:e.data[a]?n.data[a].sent=!0:n.data[a]={sent:!0};break;case mn.rh:e.data[a]?n.data[a].sent=!1:n.data[a]={sent:!1}}}}))}},Mn,Rn,Gn,jn,qn,nr,ar,sr,cr)),lr=n(586),hr=function(e){return(0,lr.xC)({reducer:ur,preloadedState:e,devTools:!0})},dr=function(e){function t(){for(var t,n,r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(n=e.call.apply(e,O()(t=[this]).call(t,a))||this).store=void 0,n.initiator=void 0,n.dispatch=function(e){return n.store.dispatch(e)},n.getState=function(){return n.store.getState()},n.subscribe=function(e){return n.store.subscribe(e)},n.watch=function(e,t){var r=pn()((function(){var t=n.getState();return e(t)}));return n.subscribe(r((function(e){t(e)})))},n}(0,o.Z)(t,e);var n=t.prototype;return n.init=function(){this.store=hr({})},n.setInitiator=function(e){this.initiator=e},n.syncStore=function(){var e=(0,s.Z)(h().mark((function e(){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.initiator.initContext(),e.next=3,this.initiator.initPlayer();case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.initPlayerManually=function(){var e=(0,s.Z)(h().mark((function e(){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.initiator.initPlayer();case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),t}(Phaser.Plugins.BasePlugin),pr=dr,fr=n(581),mr=n.n(fr),vr=function(e){function t(t,n){var r;return(r=e.call(this,t,{type:"webfont",key:n.type})||this).payload=void 0,r.payload=n,r}(0,o.Z)(t,e);var n=t.prototype;return n.load=function(){var e;switch(this.payload.type){case"google":e=this.getGoogleFontConfig(this.payload);break;case"local":e=this.getLocalFontConfig(this.payload)}mr().load(e)},n.getGoogleFontConfig=function(e){var t=this,n=e.character,r=e.fontName,a=e.fontWeight;return{google:{families:[r+":"+(void 0===a?400:a)],text:n},active:function(){t.loader.nextFile(t,!0)},timeout:15e3}},n.getLocalFontConfig=function(e){var t=this,n=e.fontName,r=e.fontType,a=document.createElement("style");document.head.appendChild(a);var i=a.sheet;if(i){var s='@font-face { font-family: "'+n+'"; src: url("assets/fonts/'+n+("opentype"===r?".otf":".ttf")+'") format("'+r+'"); }';i.insertRule(s,0)}return{custom:{families:[n]},active:function(){t.loader.nextFile(t,!0)},timeout:15e3}},t}(Phaser.Loader.File),gr=function(e){function t(){return e.apply(this,arguments)||this}return(0,o.Z)(t,e),t.prototype.addFont=function(e){var t=new vr(this.scene.load,e);this.scene.load.addFile(t)},t}(Phaser.Plugins.ScenePlugin),yr=gr,wr=n(416),Sr=function(e){function t(){return e.apply(this,arguments)||this}return(0,o.Z)(t,e),t.prototype.emit=function(t){return e.prototype.emit.call(this,t)},t}(Phaser.Events.EventEmitter),Er=Sr,br=function(e){function t(){for(var t,n,r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(n=e.call.apply(e,O()(t=[this]).call(t,a))||this).events=void 0,n.previousLayout=void 0,n.resizeEventData=void 0,n.portraitRatio=void 0,n.portraitWidth=void 0,n.portraitHeight=void 0,n.landscapeRatio=void 0,n.landscapeWidth=void 0,n.landscapeHeight=void 0,n.worldWidth=void 0,n.worldHeight=void 0,n.worldRatio=void 0,n.autoResize=void 0,n.disableLandscape=void 0,n.fullSizeOnLandscape=void 0,n.currentLayout=void 0,n.forcePixelRatio=void 0,n.handleResize=(0,wr.D)((function(){n.previousLayout=""+n.currentLayout,n.initWorldSize(),n.resize()}),300),n}(0,o.Z)(t,e);var n=t.prototype;return n.configure=function(e){this.events=new Er;var t=e.autoResize,n=e.portraitRatio,r=e.portraitWidth,a=e.portraitHeight,i=e.landscapeWidth,s=e.landscapeHeight,o=e.landscapeRatio,c=e.disableLandscape,u=e.fullSizeOnLandscape;this.autoResize=t,this.disableLandscape=c,this.fullSizeOnLandscape=u,this.portraitRatio=n,this.portraitWidth=r,this.portraitHeight=a,this.landscapeRatio=o,this.landscapeWidth=i,this.landscapeHeight=s,this.initWorldSize(),this.addEventResize()},n.resize=function(e){var t=this;e&&e>0&&(this.forcePixelRatio=e);var n=this.getCanvasSizeFixedRatio(this.worldRatio),r=n.width,a=n.height;this.resizeCanvas(r,a),this.game.scene.scenes.forEach((function(e){var n=e.cameras.main;if(n){var r=t.getZoomRatio(),a=t.getWorldSize(),i=a.width,s=a.height;n.setZoom(r),n.centerOn(i/2,s/2)}}));var i={width:this.worldWidth,height:this.worldHeight,isLayoutChanged:!1,newLayout:this.currentLayout};this.previousLayout!==this.currentLayout&&(i.isLayoutChanged=!0,i.newLayout=this.currentLayout),this.resizeEventData=i,this.events.emit(sn.Z.RESIZE,i)},n.getResizeEventData=function(){return this.resizeEventData},n.resizeCanvas=function(e,t){this.game.canvas.width=e,this.game.canvas.height=t,this.game.scale.resize(e,t)},n.getWorldSize=function(){return{width:this.worldWidth,height:this.worldHeight}},n.initWorldSize=function(){if(this.worldWidth=this.portraitWidth,this.worldHeight=this.portraitHeight,this.isScreenSmallerRatio(this.portraitRatio))this.worldHeight=this.worldWidth/this.getScreenRatio(),this.currentLayout="portrait";else if(!this.disableLandscape&&(this.worldWidth=this.landscapeWidth,this.worldHeight=this.landscapeHeight,this.currentLayout="landscape",this.fullSizeOnLandscape)){this.worldRatio=this.worldWidth/this.worldHeight,this.landscapeRatio=this.getScreenRatio();var e=this.getCanvasSizeFixedRatio(this.landscapeRatio),t=e.width,n=e.height,r=this.getZoomRatio();this.worldWidth=t/r,this.worldHeight=n/r}this.worldRatio=this.worldWidth/this.worldHeight,console.info("\ud83d\ude80 > this.worldRatio",this.worldRatio)},n.getZoomRatio=function(){var e=this.getWorldSize().width;return this.getCanvasSizeFixedRatio(this.worldRatio).width/e},n.getPixelRatio=function(){if(this.forcePixelRatio>0)return this.forcePixelRatio;if(GameCore.Utils.Device.isDesktop())return 2;var e=GameCore.Utils.Device.pixelRatio();return e>2&&(e=2),e},n.getPhysicPixels=function(e,t){return e*t},n.getCanvasSizeFixedRatio=function(e){var t=this.getPixelRatio(),n=this.getScreenWidth()*t,r=this.getScreenHeight()*t;return this.isScreenSmallerRatio(e)?r=n/e:n=r*e,{width:n,height:r}},n.getScreenRatio=function(){return this.getScreenWidth()/this.getScreenHeight()},n.getScreenHeight=function(){var e=document,t=e.body,n=e.documentElement,r=t.clientHeight,a=n.clientHeight;return Math.max(a,r)||0},n.getScreenWidth=function(){var e=document,t=e.body,n=e.documentElement,r=t.clientWidth,a=n.clientWidth;return Math.max(a,r)||0},n.isScreenSmallerRatio=function(e){return this.getScreenRatio()<e},n.addEventResize=function(){this.autoResize&&window.addEventListener("resize",this.handleResize)},n.isLandscape=function(){return!this.disableLandscape&&this.worldRatio>this.portraitRatio},t}(Phaser.Plugins.BasePlugin),kr=br,xr=function(){function e(e,t,n){this.contextId=void 0,this.contextType=void 0,this.entryPointData=void 0,this.contextId=e||Pn.contextId,this.contextType=t||Pn.contextType,this.entryPointData=n||Pn.entryPointData}return e.prototype.toObject=function(){return{contextId:this.contextId,contextType:this.contextType,entryPointData:this.entryPointData}},e}(),Ar=function(e){function t(t,n){var r;return(r=e.call(this,t,n)||this).name="InvalidPlayerId",r.message=t||"The playerId is not valid",r.payload=n,r}return(0,o.Z)(t,e),t}((0,Z.Z)(Error)),Cr="share_invite",Tr="matching_group_match",Pr=n(420),Ir=new st.Z("10","Your Friend",Pr.Z.AVATAR.FILE).toObject(),Or="single",Mr="challenge-friends",_r="tournaments",Lr=(0,fe.P1)([function(e){return e.context}],(function(e){return e})),Rr=(0,fe.P1)([function(e){return e.context.currentGameMode}],(function(e){return e})),Br=function(e){return function(t){t({type:mn.EH,payload:{gameMode:e}}),(0,r.sw)("game-mode",e)}},Dr={score:"score",settings:"settings",gameData:"gameData",userGuideDisplays:"userGuideDisplays",timeAddShortcut:"timeAddShortcut"},Nr=GameCore.Configs.SyncProfileFromAPI,Gr=function(e){var t=this;this.game=void 0,this.initContext=function(){var e=window.GameSDK.context.getID(),n=window.GameSDK.context.getType(),r=window.GameSDK.getEntryPointData(),a=new xr(e,n,r).toObject(),i=a.contextId,s=a.contextType,o=a.entryPointData;t.game.storage.dispatch(function(e,t,n){return{type:mn.kL,payload:{contextId:e,contextType:t,entryPointData:n}}}(i,s,o))},this.initPlayer=(0,s.Z)(h().mark((function e(){var n,r,a,i,s;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.game.player,r=t.getPlayerInfo(),a=Jn()(Dr),e.next=5,FBInstant.player.getDataAsync(a);case 5:return i=e.sent,console.info("\ud83d\ude80 > rawData",i),s=new Xe(i),console.info("\ud83d\ude80 > playerData",s),e.next=11,t.maintainDataStructure(s);case 11:return s=e.sent,!0===s.toObject().settings.music&&window.game.audio.playMusic(),e.next=16,n.receiveData(r,s.convertToPlayerData());case 16:case"end":return e.stop()}}),e)}))),this.maintainDataStructure=function(){var e=(0,s.Z)(h().mark((function e(t){var n,r,a,s;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,Nr){e.next=3;break}return e.abrupt("return",t);case 3:return e.next=5,FBInstant.player.getDataAsync(["isSynced","customFields"]);case 5:if(e.t0=e.sent,e.t0){e.next=8;break}e.t0={};case 8:if(n=e.t0,!0!==(n.isSynced||!1)){e.next=12;break}return e.abrupt("return",t);case 12:if(r=n.customFields||!1){e.next=15;break}return e.abrupt("return",t);case 15:return(a=t.convertToPlayerData()).customFields=r,s=new Xe({}).convertToFacebookData(a),e.next=20,FBInstant.player.setDataAsync((0,i.Z)({},s,{isSynced:!0}));case 20:return e.abrupt("return",new Xe(s));case 23:return e.prev=23,e.t1=e.catch(0),console.warn(e.t1),e.abrupt("return",t);case 27:case"end":return e.stop()}}),e,null,[[0,23]])})));return function(t){return e.apply(this,arguments)}}(),this.getPlayerInfo=function(){try{var e=window.GameSDK.player.getID(),t=window.GameSDK.player.getName(),n=window.GameSDK.player.getPhoto(),r=window.GameSDK.getLocale();if(!GameCore.Utils.Valid.isString(e))throw new Ar(null,{playerId:e});return GameCore.Utils.Valid.isString(t)||(t="You"),new st.Z(e,t,n,r).toObject()}catch(a){return new st.Z("123","You").toObject()}},this.game=e},Fr=n(429),Zr=function(e){function t(){for(var t,n,r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(n=e.call.apply(e,O()(t=[this]).call(t,a))||this).Text=void 0,n.Texture=void 0,n.currentLocale=void 0,n.supportedLanguages=void 0,n.data=void 0,n.options=void 0,n}(0,o.Z)(t,e);var n=t.prototype;return n.configure=function(e){this.applyOptions(e)},n.getCurrentLanguage=function(){return this.currentLocale},n.switchLanguage=function(e){void 0===e&&(e="en");var t=this.getCorrectLocale(e);this.currentLocale=t,this.Text=this.data[t].Text,this.Texture=this.data[t].Texture},n.getText=function(e){if("object"==typeof e){var t=e.key,n=e.variables,r=void 0===n?[]:n,a=e.locale,i=void 0===a?this.currentLocale:a,s=this.getCorrectLocale(i),o=this.data[s].Text[t];return this.replaceVariables(o,r)}return this.Text[e]},n.getTexture=function(e){if("object"==typeof e){var t=e.key,n=e.variables,r=void 0===n?[]:n,a=e.locale,i=void 0===a?this.currentLocale:a,s=this.getCorrectLocale(i),o=this.data[s].Texture[t];return this.replaceVariables(o,r)}return this.Texture[e]},n.isSupportLanguage=function(e){var t;return Ht()(t=this.supportedLanguages).call(t,e)>=0},n.applyOptions=function(e){this.options=(0,i.Z)({},e);var t=e.data,n=e.locale,r=void 0===n?"en":n,a=e.upperCaseText,s=void 0!==a&&a;this.data=t,this.supportedLanguages=te()(t);var o=this.getCorrectLocale(r);if(this.currentLocale=o,this.Text=t[o].Text,this.Texture=t[o].Texture,s)for(var c in this.Text)this.Text[c]=this.Text[c].toUpperCase()},n.makeText=function(e,t){var n,r=t.maxWidth,a=void 0===r?Phaser.Math.MAX_SAFE_INTEGER:r,i=t.maxHeight,s=void 0===i?Phaser.Math.MAX_SAFE_INTEGER:i,o=t.align,c=void 0===o?"center":o,u=t.drawMaxBoxDebug,l=void 0!==u&&u,h=e.make.bitmapText(t);for("center"===c?h.setCenterAlign():"left"===c?h.setLeftAlign():"right"===c&&h.setRightAlign(),Ht()(n=t.text||"").call(n," ")>=0&&h.setMaxWidth(a);h.width>a||h.height>=s;)h.setFontSize(.95*h.fontSize),console.log({t:t.text,w:h.width,h:h.height});if(l&&GameCore.Utils.Valid.isDebugger()){var d=e.game.globalScene.add.graphics({lineStyle:{width:2,color:16711680}});d.setDepth(Phaser.Math.MAX_SAFE_INTEGER),e.game.globalScene.events.on(Phaser.Scenes.Events.UPDATE,(function(){if(d.clear(),h&&h.visible&&h.active){var e=h.getWorldPosition(),t=e.x,n=e.y;d.strokeRect(t-.5*a+(.5-h.originX)*h.width,n-.5*s+(.5-h.originY)*h.height,a,s)}}))}return h},n.setFontSize=function(e,t,n){var r,a=t||Phaser.Math.MAX_SAFE_INTEGER,i=n||Phaser.Math.MAX_SAFE_INTEGER;for(Ht()(r=e.text||"").call(r," ")>=0&&e.setMaxWidth(a);e.width>a||e.height>=i;)e.setFontSize(.95*e.fontSize)},n.replaceVariables=function(e,t){var n=t.length;if(0==n)return e;var r=0;return e.replace(/{.*}/,(function(){return String(t[Math.min(r++,n-1)])}))},n.getCorrectLocale=function(e){var t=e;return this.isSupportLanguage(e)||(t="en"),t},t}(Phaser.Plugins.BasePlugin),Ur={en:JSON.parse('{"Text":{"empty_{X}":"empty_{X}"},"Texture":{"empty_2_{abc}":"empty_2_{abc}"}}')},Hr=function(e){function t(){return e.apply(this,arguments)||this}return(0,o.Z)(t,e),t.prototype.configure=function(t){e.prototype.configure.call(this,(0,i.Z)({data:Ur,locale:"en",upperCaseText:!1},t))},t}(Zr),Wr=Hr,Vr=GameCore.Ads.Types,Yr=[an._.SCREEN_OPEN],zr=(function(e){function t(t,n){var r;(r=e.call(this,"GoogleAnalytics",(0,i.Z)({},n),"#E35335")||this).game=void 0,r.currentPath="/",r.game=t;var a=(GameCore.Configs.Analytics.GoogleAnalytics||{}).consoleLog;return r.selfLog=!!a,r}(0,o.Z)(t,e);var n=t.prototype;n.processEvent=function(e,t,n){if(!(Ht()(Yr).call(Yr,e)>=0)){var r=this.formatEventName(e),a=t?(0,i.Z)({},t):{};a=n?(0,i.Z)({},a,{value:n}):a,a=(0,i.Z)({},a,{page_path:this.currentPath,send_to:"GA"}),gtag("event",r,a)}},n.processLevelStart=function(e,t,n){this.processEvent(an._.LEVEL_START,{level:e,score:t,level_name:n})},n.processLevelRescue=function(e,t,n){this.processEvent(an._.LEVEL_RESCUE,{level:e,score:t,level_name:n})},n.processLevelFail=function(e,t,n){this.processEvent(an._.LEVEL_END,{level:e,score:t,level_name:n,success:!1})},n.processLevelComplete=function(e,t,n){this.processEvent(an._.LEVEL_END,{level:e,score:t,level_name:n,success:!0})},n.processLoadPreRollAd=function(e){var t=this.getEdaType(Vr.PRE_ROLL);this.processEvent(an._.AD_LOAD,{ad_type:t,screen_name:""+e})},n.processShowPreRollAd=function(e){var t=this.getEdaType(Vr.PRE_ROLL);this.processEvent(an._.AD_SHOW,{ad_type:t,screen_name:""+e}),this.processEvent(an._.AD_IMPRESSION,{ad_format:t})},n.processLoadInterstitialAd=function(e){var t=this.getEdaType(Vr.INTERSTITIAL);this.processEvent(an._.AD_LOAD,{ad_type:t,screen_name:""+e})},n.processShowInterstitialAd=function(e){var t=this.getEdaType(Vr.INTERSTITIAL);this.processEvent(an._.AD_SHOW,{ad_type:t,screen_name:""+e}),this.processEvent(an._.AD_IMPRESSION,{ad_format:"Interstitial"})},n.processLoadRewardedVideoAd=function(e){var t=this.getEdaType(Vr.REWARDED);this.processEvent(an._.AD_LOAD,{ad_type:t,screen_name:""+e})},n.processShowRewardedVideoAd=function(e){var t=this.getEdaType(Vr.REWARDED);this.processEvent(an._.AD_SHOW,{ad_type:t,screen_name:""+e}),this.processEvent(an._.AD_IMPRESSION,{ad_format:"Rewarded"})},n.processShowBannerAd=function(e,t){var n=this.getEdaType(Vr.BANNER);this.processEvent(an._.AD_SHOW,{ad_type:n,banner_position:""+e,screen_name:""+t})},n.processLoadAdFail=function(e,t){var n=this.getEdaType(e);this.processEvent(an._.AD_LOAD_FAILED,{ad_type:n,screen_name:""+t})},n.processShowAdFail=function(e,t,n,r){var a=(null==n?void 0:n.code)||"unknown",i={ad_type:this.getEdaType(e),screen_name:""+t,code:""+a};e===Vr.BANNER&&(i.banner_position=""+r),this.processEvent(an._.AD_SHOW_FAILED,i)},n.processPageView=function(e){var t="/"+this.getGameplayMode()+"/"+e;this.currentPath=t,this.processEvent(an._.PAGE_VIEW)},n.getGameplayMode=function(){var e=this.game.storage.getState();return Rr(e)},n.formatEventName=function(e){return e.toLowerCase().replace(/:/g,"_")},n.formatPageTitle=function(e,t){return this.toUpperCamelCaseWithSpace(e)+"::"+this.toUpperCamelCaseWithSpace(t)},n.toUpperCamelCaseWithSpace=function(e){var t=e.replace(/[-_\s.]+(.)?/g,(function(e,t){return t?" "+t.toUpperCase():""}));return t.substr(0,1).toUpperCase()+t.substr(1)},n.getEdaType=function(e){switch(e){case Vr.INTERSTITIAL:return"interstitial";case Vr.PRE_ROLL:return"pre_roll";case Vr.REWARDED:return"rewarded_video";case Vr.BANNER:return"banner";default:return"unknown"}}}(GameCore.Analytics.BaseAnalytics),function(e){function t(){for(var t,n,a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];return(n=e.call.apply(e,O()(t=[this]).call(t,i))||this).startGame=(0,s.Z)(h().mark((function e(){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,n.auth.requestToken();case 3:return e.next=5,n.storage.syncStore();case 5:return n.configureSentry(),n.configureRollbar(),e.next=9,n.detectGameMode();case 9:n.initGoogleAnalytics(),n.analytics.event(an._.LOAD_START),n.scene.launch(Fr.C.GLOBAL_SCENE),n.scene.start(Fr.C.LOAD_SCENE),n.analytics.pageview(Fr.C.LOAD_SCENE),e.next=19;break;case 16:e.prev=16,e.t0=e.catch(0),(0,r.tO)(e.t0);case 19:return e.prev=19,n.facebook.progressLoading.finishLoadingProgressFbBootScene(),n.scene.sleep(Fr.C.BOOT_SCENE),e.finish(19);case 23:case"end":return e.stop()}}),e,null,[[0,16,19,23]])}))),n}(0,o.Z)(t,e);var n=t.prototype;return n.create=function(){this.facebook.progressLoading.loadingProgressFbBootScene(),this.startGame()},n.configureSentry=function(){var e=this.player.getPlayer();(0,r.Tv)({id:e.playerId,username:e.name})},n.configureRollbar=function(){if(this.rollbar){var e=this.player.getPlayer();this.rollbar.configure({payload:{person:{id:e.playerId,name:e.name}}})}},n.detectGameMode=function(){var e=(0,s.Z)(h().mark((function e(){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.storage.dispatch(function(){var e=(0,s.Z)(h().mark((function e(t,n){var r,a,i,s,o,c,u,l,d,p,f,m,v,g,y,w;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n(),i=Lr(a),s=window.game.player,o=s.getPlayerId(),c=i.contextId,u=i.entryPointData,d=(l=u||{}).type,p=l.matchId,f=l.playerId,m=l.opponentId,v=void 0===m?Ir.playerId:m,g=o===f,y=v===Ir.playerId||Ht()(r=[v,f]).call(r,o)>=0,w=Or,e.prev=9,e.next=12,window.game.facebook.getTournamentAsync();case 12:w=_r,e.next=17;break;case 15:e.prev=15,e.t0=e.catch(9);case 17:c&&d===Cr&&!g&&(w=Mr),p&&c&&y&&"challenge_friend_match"===d&&(w=Mr),c&&d===Tr&&(w="matching-group"),t(Br(w));case 21:case"end":return e.stop()}}),e,null,[[9,15]])})));return function(t,n){return e.apply(this,arguments)}}());case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.initGoogleAnalytics=function(){},t}(Phaser.Scene)),Kr=zr,jr=n(188),Xr=n(434),qr=n(199),Qr=n.n(qr),Jr=n(184),$r=function(){var e=GameCore.Utils.Device,t=window.navigator.vibrate;return e.isAndroid()&&"function"===typeof t||e.isMobileWeb()&&"function"===typeof t},ea=function(){var e=(0,s.Z)(h().mark((function e(t){var n,r,a,i,o;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=Math.round(t/80),r=0,a=function(){var e=(0,s.Z)(h().mark((function e(){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,FBInstant.performHapticFeedbackAsync();case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),console.log("can not haptic");case 8:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(){return e.apply(this,arguments)}}();case 3:if(!(r<n)){e.next=11;break}return i=a(),o=(0,Jr.qZ)(80),r+=1,e.next=9,u().all([i,o]);case 9:e.next=3;break;case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ta=function(e){window.navigator.vibrate(0),window.navigator.vibrate(e)},na=function(e){var t=window.game.player.getPlayerSettings().vibrate,n=void 0===t||t;if(!n)return!1;try{if(!$r())return!1;var r=GameCore.Utils.Device;r.isAndroid()||r.isMobileWeb()?ta(e):r.isIOS()&&ea(e).catch((function(e){return console.log(e)}))}catch(a){}},ra={TOP:{x:0,y:-.5},BOTTOM:{x:0,y:.5},LEFT:{x:-.5,y:0},RIGHT:{x:.5,y:0},TOP_LEFT:{x:-.5,y:-.5},TOP_RIGHT:{x:.5,y:-.5},BOTTOM_LEFT:{x:-.5,y:.5},BOTTOM_RIGHT:{x:.5,y:.5},CENTER:{x:0,y:0}},aa="return-cluster-id",ia=58.5,sa=114/110,oa=1.5,ca=n(431);function ua(e,t){return new(u())((function(n){e.add.tween((0,i.Z)({},t)).on(Phaser.Tweens.Events.TWEEN_COMPLETE,n)}))}var la=0;function ha(e,t){var n=e.add.tween((0,i.Z)({},t));la+=1,la%=1e5,n.name="tween-"+la;var r=new(u())((function(e,t){n.on(Phaser.Tweens.Events.TWEEN_COMPLETE,e),n.on(Phaser.Tweens.Events.TWEEN_STOP,t)}));return{tween:n,promise:r}}function da(e,t,n,r){return pa.apply(this,arguments)}function pa(){return(pa=(0,s.Z)(h().mark((function e(t,n,r,a){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return void 0===a&&(a=200),t.setScale(0),e.next=4,ua(t.scene,{targets:[t],duration:a,delay:r,props:{scale:{getStart:function(){return 0},getEnd:function(){return 1.2}},y:{getStart:function(){return n-80},getEnd:function(){return n+10}}},ease:Phaser.Math.Easing.Cubic.Out});case 4:return e.abrupt("return",ua(t.scene,{targets:[t],duration:a,props:{scale:{getEnd:function(){return 1}},y:{getEnd:function(){return n}}},ease:Phaser.Math.Easing.Cubic.Out}));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function fa(e,t,n,r,a){return ma.apply(this,arguments)}function ma(){return ma=(0,s.Z)(h().mark((function e(t,n,r,a,i){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return void 0===i&&(i=250),"left"===t?r.forEach((function(e){e.setX(-n.width/2-e.width/2)})):r.forEach((function(e){e.setX(n.width/2+e.width/2)})),e.abrupt("return",ua(r[0].scene,{targets:r,props:{x:{getEnd:function(e,t,n,r){return a[r]}}},duration:i,ease:Phaser.Math.Easing.Back.Out}));case 3:case"end":return e.stop()}}),e)}))),ma.apply(this,arguments)}function va(e,t,n,r){return ga.apply(this,arguments)}function ga(){return(ga=(0,s.Z)(h().mark((function e(t,n,r,a){var i;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return void 0===a&&(a=250),i=Ne()(r).call(r,(function(e){return n.width/2+e.width/2})),"left"===t&&(i=Ne()(r).call(r,(function(e){return-n.width/2-e.width/2}))),e.abrupt("return",ua(r[0].scene,{targets:r,props:{x:{getEnd:function(e,t,n,r){return i[r]}}},duration:a,ease:Phaser.Math.Easing.Back.In}));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ya(e,t,n,r,a){return wa.apply(this,arguments)}function wa(){return(wa=(0,s.Z)(h().mark((function e(t,n,r,a,i){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return void 0===n&&(n=300),void 0===r&&(r=0),void 0===a&&(a=1),void 0===i&&(i=!0),i&&t.forEach((function(e){e.setAlpha(0)})),e.abrupt("return",ua(t[0].scene,{targets:t,delay:r,duration:n,props:{alpha:{getEnd:function(){return a}}}}));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Sa(e,t,n,r){return Ea.apply(this,arguments)}function Ea(){return(Ea=(0,s.Z)(h().mark((function e(t,n,r,a){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return void 0===n&&(n=300),void 0===r&&(r=0),void 0===a&&(a=0),e.abrupt("return",ua(t[0].scene,{targets:t,delay:r,duration:n,props:{alpha:{getEnd:function(){return a}}}}));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ba(e,t,n,r){return ka.apply(this,arguments)}function ka(){return(ka=(0,s.Z)(h().mark((function e(t,n,r,a){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return void 0===n&&(n=300),void 0===r&&(r=0),void 0===a&&(a=1),t.forEach((function(e){e.setScale(0)})),e.abrupt("return",ua(t[0].scene,{targets:t,delay:r,duration:n,props:{scale:{getEnd:function(){return a}}},ease:Phaser.Math.Easing.Back.Out}));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function xa(e,t,n){return Aa.apply(this,arguments)}function Aa(){return(Aa=(0,s.Z)(h().mark((function e(t,n,r){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return void 0===n&&(n=300),void 0===r&&(r=0),e.abrupt("return",ua(t[0].scene,{targets:t,delay:r,duration:n,props:{scale:{getEnd:function(){return 0}}},ease:Phaser.Math.Easing.Cubic.In}));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ca(e,t,n,r){return Ta.apply(this,arguments)}function Ta(){return(Ta=(0,s.Z)(h().mark((function e(t,n,r,a){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return void 0===a&&(a=1),t.forEach((function(e){e.setScale(0)})),e.abrupt("return",ua(t[0].scene,{targets:t,delay:r,duration:n,props:{scale:{getEnd:function(){return a}}},ease:Phaser.Math.Easing.Cubic.Out}));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Pa=function(e){function t(t){var n;return(n=e.call(this,t)||this).cycleDuration=Phaser.Math.Between(300,400),n.scale=void 0,n.accelerationY=5,n}(0,o.Z)(t,e);var n=t.prototype;return n.update=function(t,n,r){var a=e.prototype.update.call(this,t,n,r);return this.updateScale(),a},n.setScale=function(e,t){this.scaleX=0,this.scaleY=0,this.scale=Phaser.Math.FloatBetween(e.min,e.max),this.cycleDuration=null!=t?t:this.cycleDuration},n.setDirection=function(e){this.velocityX="left"===e?Phaser.Math.Between(-5,-10):Phaser.Math.Between(5,10)},n.updateScale=function(){var e=1-this.lifeCurrent%this.cycleDuration/this.cycleDuration;this.scaleX=this.scale*Math.sin(e*Math.PI),this.scaleY=this.scale*Math.sin(e*Math.PI)},t}(Phaser.GameObjects.Particles.Particle),Ia=Pa;function Oa(e,t){return Ma.apply(this,arguments)}function Ma(){return Ma=(0,s.Z)(h().mark((function e(t,n){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new(u())((function(e){t.time.delayedCall(n,e)})));case 1:case"end":return e.stop()}}),e)}))),Ma.apply(this,arguments)}var _a=GameCore.Utils.Image.getImageScale(),La=function(e){function t(t,n){var r;return(r=e.call(this,t,ca.Z.EFFECTS.KEY,ca.Z.EFFECTS.FRAME.FX_STAR_WHITE)||this).twinkleStar=void 0,r.tile=void 0,r.tile=n,r.scene.add.existing((0,jr.Z)(r)),r.createTwinkleStar(),r}(0,o.Z)(t,e);var n=t.prototype;return n.show=function(){this.revive();var e=this.tile,t=e.x,n=e.y,r=e.displayWidth,a=e.displayHeight,i=new Phaser.Geom.Rectangle(t-r/2+5,n-a/2+3,r-10,a-10);this.twinkleStar.setEmitZone({type:"random",source:i,quantity:2}),this.twinkleStar.start()},n.stop=function(){var e=this;this.twinkleStar.stop(),this.scene.time.delayedCall(500,(function(){e.kill()}))},n.createTwinkleStar=function(){this.twinkleStar=this.createEmitter({on:!1,tint:[16761095],timeScale:1,lifespan:{min:300,max:400},quantity:2,frequency:50,particleClass:Ia,emitCallback:function(e){e.setScale({min:.7/_a,max:1/_a},Phaser.Math.Between(300,400))}})},n.waitFinish=function(){var e=(0,s.Z)(h().mark((function e(){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.twinkleStar.getAliveParticleCount()>0)){e.next=5;break}return e.next=3,Oa(this.scene,100);case 3:e.next=0;break;case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),t}(Phaser.GameObjects.Particles.ParticleEmitterManager),Ra=La,Ba=ca.Z.GAMEPLAY_COLORFUL,Da=Ba.KEY,Na=Ba.FRAME,Ga=.35,Fa=function(e){function t(t){var n;(n=e.call(this,t)||this).background=void 0,n.backGlow=void 0,n.frontGlow=void 0,n.bitmapTextIcon=void 0,n.imageIcon=void 0,n.overlay=void 0,n.magicGlow=void 0,n.tileVFX=void 0,n.createBackGlow();var r=n.createBackground(),a=r.width,i=r.height;return n.setSize(a,i),n.createImageIcon(),n.createOverlay(),n.createFrontGlow(),n.createMagicGlow(),n.createTileVFX(),n}(0,o.Z)(t,e);var n=t.prototype;return n.createTileVFX=function(){this.tileVFX=new Ra(this.scene,this.background),this.tileVFX.kill(),this.add(this.tileVFX)},n.updateTileSize=function(){this.setBackGlowSize();var e=this.setBackgroundSize(),t=e.width,n=e.height;this.setSize(t,n),this.setImageIconSize(),this.setOverlaySize(),this.setFrontGlowSize(),this.setMagicGlowSize()},n.setIcon=function(e){var t,n,r,a=Number(e)+1;a>=1&&a<=32?(null==(t=this.bitmapTextIcon)||t.kill(),this.imageIcon.revive(),this.imageIcon.setFrame("tiles/"+a),this.setImageIconSize()):(this.createBitmapTextIcon(),null==(n=this.bitmapTextIcon)||n.revive(),this.imageIcon.kill(),null==(r=this.bitmapTextIcon)||r.setText(e))},n.setImageIconSize=function(){this.imageIcon.setWorldSize(za.TILE_SIZE,za.TILE_SIZE*sa)},n.showOverlay=function(e){e?(this.overlay.setAlpha(Ga),this.overlay.revive()):this.overlay.kill()},n.hideOverlayAsync=function(){var e=(0,s.Z)(h().mark((function e(){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ua(this.scene,{targets:this.overlay,duration:500,props:{alpha:0}});case 2:this.overlay.kill();case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.showOverlayAsync=function(){var e=(0,s.Z)(h().mark((function e(t){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.overlay.revive(),e.abrupt("return",ua(this.scene,{targets:this.overlay,duration:t,props:{alpha:{from:0,to:Ga}}}));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),n.tweenOverlay=function(e,t,n){var r=0;"show"===e&&(r=Ga),this.scene.add.tween({targets:this.overlay,delay:t,alpha:r,duration:n,ease:Phaser.Math.Easing.Sine.InOut})},n.fadeIn=function(){var e=(0,s.Z)(h().mark((function e(){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.overlay.visible){e.next=2;break}return e.abrupt("return",u().resolve());case 2:return e.abrupt("return",ya([this.overlay],400,0,Ga));case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.runAnimationDestroy=function(e){var t=this;return new(u())((function(n){t.backGlow.revive(),t.frontGlow.revive(),t.frontGlow.setAlpha(0),t.scene.add.tween({targets:t.frontGlow,delay:e,duration:200,alpha:1,ease:Phaser.Math.Easing.Sine.Out}),t.scene.add.tween({targets:t,delay:e,duration:200,scaleX:1.2*t.scale,scaleY:1.2*t.scale,ease:Phaser.Math.Easing.Sine.Out,onComplete:function(){t.backGlow.kill(),t.frontGlow.kill(),n()}})}))},n.createBackGlow=function(){var e=this.scene.make.image({key:Da,frame:Na.BACK_GLOW});this.backGlow=e,this.setBackGlowSize(),e.setBlendMode(Phaser.BlendModes.ADD),this.add(e),this.backGlow.kill()},n.setBackGlowSize=function(){this.backGlow.setWorldSize(1.07*za.TILE_SIZE,za.TILE_SIZE*sa*1.07)},n.createBackground=function(){var e=this.scene.make.image({key:Da,frame:Na.EMPTY_TILE});this.background=e,e.setWorldSize(za.TILE_SIZE,za.TILE_SIZE*sa);var t=this.setBackgroundSize(),n=t.width,r=t.height;return this.add(e),{width:n,height:r}},n.setBackgroundSize=function(){this.background.setWorldSize(za.TILE_SIZE,za.TILE_SIZE*sa);var e=this.background;return{width:e.displayWidth,height:e.displayHeight}},n.createFrontGlow=function(){this.frontGlow=this.scene.make.image({key:Da,frame:Na.FRONT_GLOW}),this.frontGlow.setBlendMode(Phaser.BlendModes.ADD),this.setFrontGlowSize(),this.add(this.frontGlow),this.frontGlow.kill()},n.setFrontGlowSize=function(){var e=this.background,t=e.displayWidth,n=e.displayHeight;this.frontGlow.setWorldSize(t,n)},n.createMagicGlow=function(){var e=this.scene.make.image({key:Da,frame:Na.MAGIC_GLOW});this.add(e),this.magicGlow=e,this.setMagicGlowSize(),this.setMagicGlowAlpha(0)},n.setMagicGlowSize=function(){this.magicGlow.setSizeBasedOnDpr();var e=this.magicGlow,t=e.displayWidth,n=e.displayHeight,r=za.TILE_SIZE/55;this.magicGlow.setWorldSize(t*r,n*r)},n.createBitmapTextIcon=function(){if(!this.bitmapTextIcon){var e=this.scene.make.bitmapText({font:Ee.Z.NUMBERS.KEY,size:this.scene.fontSize(57),origin:{x:.5,y:.5},text:""});e.setTint(0),this.add(e),e.setY(-3),this.bitmapTextIcon=e}},n.createImageIcon=function(){var e=this.scene.make.image({key:Da,frame:Na.BLANK});this.imageIcon=e,this.setImageIconSize(),e.kill(),this.add(e)},n.createOverlay=function(){var e=this.scene.make.image({key:Da,frame:Na.EMPTY_TILE});this.overlay=e,this.setOverlaySize(),e.setTint(67681),e.setAlpha(Ga),this.add(e)},n.setOverlaySize=function(){var e=this.background,t=e.width,n=e.height;this.overlay.setWorldSize(t,n)},n.setMagicGlowAlpha=function(e){var t=Phaser.Math.Clamp(e,0,1);this.magicGlow.setAlpha(t),t>0?this.magicGlow.revive():this.magicGlow.kill()},n.showTileVFX=function(){this.tileVFX.revive(),this.tileVFX.show()},n.stopTileVFX=function(){var e=(0,s.Z)(h().mark((function e(){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.tileVFX.stop(),e.next=3,this.tileVFX.waitFinish();case 3:this.tileVFX.kill();case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),t}(Phaser.GameObjects.Container),Za=Fa,Ua=function(){function e(e){this.images=[],this.listDictTween={},this.images=e}var t=e.prototype;return t.refresh=function(){var e=this.images[0],t=e.scaleX,n=e.scaleY,r=e.angle,a=e.x,i=e.y;return this.stop(),this.images.forEach((function(e){e.setScale(1),e.setAngle(0),e.setX(0),e.setY(0)})),{scaleX:t,scaleY:n,angle:r,x:a,y:i}},t.tweenPointerDown=function(){this.stop(),this.runScale(this.images),this.runRotateLoop(this.images),this.runMoveLoop(this.images)},t.tweenPointerUpOutSide=function(){var e=(0,s.Z)(h().mark((function e(t){var n,r,a,i=this;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.stop(),n=1,r=.7,(a=Math.random())>.8?(n=1.05,r=.9):a>.6?(n=1.05,r=1.2):a>.4?(n=.7,r=1):a>.2&&(n=.8,r=.8),e.prev=5,e.next=8,this.runTween(this.images[0].scene,{duration:100,targets:this.images,props:{scaleX:{getStart:function(e,t,n,r){return i.images[r].scaleX},getEnd:function(){return 1},ease:Phaser.Math.Easing.Sine.Out},scaleY:{getStart:function(e,t,n,r){return i.images[r].scaleY},getEnd:function(){return 1},ease:Phaser.Math.Easing.Sine.Out},angle:0,y:0}},t);case 8:return e.next=10,this.runTween(this.images[0].scene,{duration:60,targets:this.images,props:{scaleX:{getStart:function(e,t,n,r){return i.images[r].scaleX},getEnd:function(){return n},ease:Phaser.Math.Easing.Cubic.Out},scaleY:{getStart:function(e,t,n,r){return i.images[r].scaleY},getEnd:function(){return r},ease:Phaser.Math.Easing.Cubic.Out},angle:0,y:0},onComplete:function(){t()}},t);case 10:return e.next=12,this.runTween(this.images[0].scene,{duration:140,targets:this.images,props:{scaleX:{getEnd:function(){return 1},ease:Phaser.Math.Easing.Cubic.Out},scaleY:{getEnd:function(){return 1},ease:Phaser.Math.Easing.Cubic.Out}}});case 12:e.next=16;break;case 14:e.prev=14,e.t0=e.catch(5);case 16:case"end":return e.stop()}}),e,this,[[5,14]])})));return function(t){return e.apply(this,arguments)}}(),t.shake=function(){var e=(0,s.Z)(h().mark((function e(t){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.stop(),e.prev=1,e.next=4,this.runTween(t[0].scene,{targets:t,duration:30,ease:Phaser.Math.Easing.Sine.InOut,props:{x:-4}});case 4:return e.next=6,this.runTween(t[0].scene,{targets:t,duration:70,ease:Phaser.Math.Easing.Sine.InOut,props:{x:3}});case 6:return e.next=8,this.runTween(t[0].scene,{targets:t,duration:170,ease:Phaser.Math.Easing.Sine.InOut,props:{x:-2}});case 8:return e.next=10,this.runTween(t[0].scene,{targets:t,duration:130,ease:Phaser.Math.Easing.Sine.InOut,props:{x:1}});case 10:return e.next=12,this.runTween(t[0].scene,{targets:t,duration:100,ease:Phaser.Math.Easing.Sine.InOut,props:{x:0}});case 12:e.next=16;break;case 14:e.prev=14,e.t0=e.catch(1);case 16:case"end":return e.stop()}}),e,this,[[1,14]])})));return function(t){return e.apply(this,arguments)}}(),t.stop=function(){for(var e in this.listDictTween){var t,n;this.listDictTween[e].tween.stop(),null==(t=(n=this.listDictTween[e]).onStop)||t.call(n),delete this.listDictTween[e]}},t.runScale=function(){var e=(0,s.Z)(h().mark((function e(t){var n,r,a;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.runTween(t[0].scene,{targets:t,duration:250,props:{scale:{getStart:function(e,n,r,a){return t[a].scale},getEnd:function(){return oa},ease:Phaser.Math.Easing.Back.Out}}});case 3:return n=oa,r=1.4249999999999998,(a=Math.random())>.7?(n=1.5750000000000002,r=1.35):a>.5?(n=oa,r=1.5750000000000002):a>.3&&(n=oa,r=oa),e.next=9,this.runTween(t[0].scene,{targets:t,duration:50,props:{scaleX:{getEnd:function(){return n},ease:Phaser.Math.Easing.Cubic.Out},scaleY:{getEnd:function(){return r},ease:Phaser.Math.Easing.Cubic.Out}}});case 9:return e.next=11,this.runTween(t[0].scene,{targets:t,duration:90,props:{scaleY:{getEnd:function(){return oa},ease:Phaser.Math.Easing.Cubic.In}}});case 11:e.next=15;break;case 13:e.prev=13,e.t0=e.catch(0);case 15:case"end":return e.stop()}}),e,this,[[0,13]])})));return function(t){return e.apply(this,arguments)}}(),t.runRotateLoop=function(){var e=(0,s.Z)(h().mark((function e(t){var n;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=!0;case 1:if(!n){e.next=12;break}return e.prev=2,e.next=5,this.runRotate(t);case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(2),n=!1;case 10:e.next=1;break;case 12:case"end":return e.stop()}}),e,this,[[2,7]])})));return function(t){return e.apply(this,arguments)}}(),t.runRotate=function(){var e=(0,s.Z)(h().mark((function e(t){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.runTween(t[0].scene,{targets:t,duration:550,props:{angle:{getStart:function(e,n,r,a){return t[a].angle},getEnd:function(){return-5}}}});case 2:return e.next=4,this.runTween(t[0].scene,{targets:t,duration:1400,props:{angle:{getEnd:function(){return 5}}}});case 4:return e.next=6,this.runTween(t[0].scene,{targets:t,duration:550,props:{angle:{getEnd:function(){return 0}}}});case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),t.runMoveLoop=function(){var e=(0,s.Z)(h().mark((function e(t){var n;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=!0;case 1:if(!n){e.next=12;break}return e.prev=2,e.next=5,this.runMove(t);case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(2),n=!1;case 10:e.next=1;break;case 12:case"end":return e.stop()}}),e,this,[[2,7]])})));return function(t){return e.apply(this,arguments)}}(),t.runMove=function(){var e=(0,s.Z)(h().mark((function e(t){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.runTween(t[0].scene,{targets:t,duration:1250,props:{y:{getStart:function(e,n,r,a){return t[a].y},getEnd:function(){return-8},ease:Phaser.Math.Easing.Sine.InOut}}});case 2:return e.next=4,this.runTween(t[0].scene,{targets:t,duration:1250,props:{y:{getEnd:function(){return 0},ease:Phaser.Math.Easing.Sine.InOut}}});case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),t.runTween=function(){var e=(0,s.Z)(h().mark((function e(t,n,r){var a,i,s;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=ha(t,n),i=a.tween,s=a.promise,this.listDictTween[i.name]={tween:i,onStop:r},e.next=4,s;case 4:delete this.listDictTween[i.name];case 5:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}(),e}(),Ha=Ua,Wa=function(){function e(e){this.tileImages=void 0,this.isPlaying=!1,this.tileImages=e}var t=e.prototype;return t.playAnimation=function(){var e=(0,s.Z)(h().mark((function e(){var t,n,r,a;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.isPlaying){e.next=2;break}return e.abrupt("return");case 2:return this.isPlaying=!0,t=this.tileImages,n=t.scaleX,r=t.scaleY,a={scaleX:n,scaleY:r},e.next=7,this.stretchHorizontally1(a);case 7:return e.next=9,this.stretchVertically(a);case 9:return e.next=11,this.stretchHorizontally2(a);case 11:return e.next=13,this.backToNormal(a);case 13:this.isPlaying=!1;case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),t.stretchHorizontally1=function(){var e=(0,s.Z)(h().mark((function e(t){var n;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.scene.add.tween({targets:this.tileImages,duration:34,ease:Phaser.Math.Easing.Linear,props:{scaleX:{value:127.5*t.scaleX/106},scaleY:{value:106*t.scaleY/117.3}}}),e.abrupt("return",n.waitForCompletion());case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),t.stretchVertically=function(){var e=(0,s.Z)(h().mark((function e(t){var n;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.scene.add.tween({targets:this.tileImages,duration:83,ease:Phaser.Math.Easing.Sine.In,props:{scaleX:{value:103.8*t.scaleX/106},scaleY:{value:141*t.scaleY/117.3}}}),e.abrupt("return",n.waitForCompletion());case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),t.stretchHorizontally2=function(){var e=(0,s.Z)(h().mark((function e(t){var n;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.scene.add.tween({targets:this.tileImages,duration:133,ease:Phaser.Math.Easing.Sine.InOut,props:{scaleX:{value:120*t.scaleX/106},scaleY:{value:t.scaleY}}}),e.abrupt("return",n.waitForCompletion());case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),t.backToNormal=function(){var e=(0,s.Z)(h().mark((function e(t){var n;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.scene.add.tween({targets:this.tileImages,duration:150,props:{scaleX:{value:t.scaleX,ease:Phaser.Math.Easing.Sine.InOut}}}),e.abrupt("return",n.waitForCompletion());case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),(0,le.Z)(e,[{key:"scene",get:function(){return this.tileImages.scene}}]),e}(),Va=Wa,Ya=function(e){function t(n,r){var a;return(a=e.call(this,n)||this).scene=void 0,a.tileModel=void 0,a.tileImages=void 0,a.tileImagesPointerTween=void 0,a.tileImagesWobbleAnimator=void 0,a.cluster=void 0,a.isPointerOutTileView=!1,a.isPointerDown=!1,a.isListeningPointerEvents=!1,a.listSyncs=[],a.backupDepth=void 0,a.handlePointerDown=function(){if(a.canClickBoardTileView()&&a.cluster&&!a.isPointerDown){if(!a.tileModel.canCollect())return a.scene.audio.playSound(tn.Z.TILE_SHAKE,{volume:.3}),void a.tileImagesPointerTween.shake([a.tileImages]);a.scene.gameplayParticleHandler.tileClickVFX.show((0,jr.Z)(a)),a.tileImagesPointerTween.stop(),a.isPointerOutTileView=!1,a.isPointerDown=!0,a.backupDepth=a.depth,a.depth=1e8,a.parentContainer.bringToTop((0,jr.Z)(a)),a.tileImagesPointerTween.tweenPointerDown();a.updateHitAreaScale({x:1.5,y:1.75},-2),na(100)}},a.handlePointerOut=function(){a.canClickBoardTileView()&&a.isPointerDown&&(a.isPointerOutTileView=!0)},a.handlePointerOver=function(){a.canClickBoardTileView()&&a.isPointerDown&&(a.isPointerOutTileView=!1)},a.handlePointerUpOutSideTileView=function(){var e=(0,s.Z)(h().mark((function e(t){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a.canClickBoardTileView()){e.next=2;break}return e.abrupt("return");case 2:if(a.isPointerDown){e.next=4;break}return e.abrupt("return");case 4:if(a.isPointerOutTileView){e.next=6;break}return e.abrupt("return");case 6:return a.tileImagesPointerTween.stop(),a.isPointerDown=!1,a.isPointerOutTileView=!0,a.scene.audio.playSound(tn.Z.TILE_DROP),a.resetHitAreaScale(),e.next=13,a.tileImagesPointerTween.tweenPointerUpOutSide((function(){a.depth=a.backupDepth,a.scene.gameManager.board.updateCorrectDepth((0,jr.Z)(a))}));case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a.handlePointerUpInsideTileView=function(){a.canClickBoardTileView()&&a.isPointerDown&&(a.isPointerOutTileView||(a.isPointerDown=!1,a.depth=a.backupDepth,a.handleOnClick()))},a.handleOnClick=function(){if(a.canClickBoardTileView()&&a.cluster){var e=(0,jr.Z)(a),t=e.tileModel,n=e.cluster;if(t.canCollect()){t.collect();var r=t.x,i=t.y,s=t.z,o=t.icon;console.log("collected",{x:r,y:i,z:s,icon:o}),a.scene.gameManager.moveTileViewToRack((0,jr.Z)(a)),n.getLowerTileViews(t).forEach((function(e){e.setUncovered(),e.addPointerEventListeners(),e.hideOverlayAsync()}))}else console.warn("cannot click",t)}},a.scene=n,a.tileModel=r,a.setSize(t.TILE_SIZE,t.TILE_SIZE),a.tileImages=new Za(n),a.add(a.tileImages),a.tileImagesPointerTween=new Ha([a.tileImages]),a.tileImagesWobbleAnimator=new Va(a.tileImages),a.resetProperty(),a}(0,o.Z)(t,e),t.setTileSize=function(e){t.tileSize=e};var n=t.prototype;return n.resetProperty=function(){this.setSize(t.TILE_SIZE,t.TILE_SIZE),this.tileImages.updateTileSize(),this.setTileViewScale(1),this.setAlpha(1),this.revive(),this.resetHitAreaScale()},n.addPointerEventListeners=function(){if(!this.isListeningPointerEvents){this.isListeningPointerEvents=!0,this.setInteractive({useHandCursor:!0});var e=(this.height-this.tileImages.height)/2;this.input.hitArea.setTo(0,e,this.width,this.height),this.on(Phaser.Input.Events.GAMEOBJECT_POINTER_DOWN,this.handlePointerDown),this.on(Phaser.Input.Events.GAMEOBJECT_POINTER_OUT,this.handlePointerOut),this.on(Phaser.Input.Events.GAMEOBJECT_POINTER_UP,this.handlePointerUpInsideTileView),this.on(Phaser.Input.Events.GAMEOBJECT_POINTER_OVER,this.handlePointerOver),this.scene.input.on(Phaser.Input.Events.POINTER_UP,this.handlePointerUpOutSideTileView)}},n.removePointerEventListeners=function(){this.isListeningPointerEvents&&(this.isListeningPointerEvents=!1,this.disableInteractive(),this.off(Phaser.Input.Events.GAMEOBJECT_POINTER_DOWN,this.handlePointerDown),this.off(Phaser.Input.Events.GAMEOBJECT_POINTER_OUT,this.handlePointerOut),this.off(Phaser.Input.Events.GAMEOBJECT_POINTER_UP,this.handlePointerUpInsideTileView),this.off(Phaser.Input.Events.GAMEOBJECT_POINTER_OVER,this.handlePointerOver),this.scene.input.off(Phaser.Input.Events.POINTER_UP,this.handlePointerUpOutSideTileView))},n.setTileModel=function(e){this.tileModel=e},n.setCluster=function(e){this.cluster=e},n.getCluster=function(){return this.cluster},n.setMatched3=function(){this.tileModel.setMatched3()},n.setCovered=function(){this.tileModel.setCovered()},n.setUncovered=function(){this.tileModel.setUncovered()},n.isMatched3=function(){var e;return null!=(e=this.tileModel.isMatched3())&&e},n.getRefreshPosition=function(){var e=this.cluster,n=this.tileModel;if(e){var r=n.x,a=n.y,i=n.z,s=e.getPos(),o=s.x,c=s.y,u=e.getDepthOffsetMultiplier(),l=u.x*i,h=u.y*i,d=0*r,p=-2*a,f=this.scene.gameManager.levelDataManager.getCoordsBounds(),m=f.top,v=(f.bottom+m)/2-4;return{x:o+r*t.TILE_SIZE+l+d,y:c+a*t.TILE_SIZE+h-4*t.TILE_SIZE-v*t.TILE_SIZE+p+0}}},n.refresh=function(e){this.isPointerDown=!1;var t=null!=e?e:{},n=t.positionRefresh,r=void 0===n||n,a=t.iconRefresh,i=void 0===a||a,s=t.overlayRefresh,o=void 0===s||s,c=this.tileModel.icon,u=this.tileModel.isCovered();if(this.tileImagesPointerTween.refresh(),r&&this.cluster){var l=this.getRefreshPosition();l&&this.setPosition(l.x,l.y)}else!this.cluster&&console.warn("Cannot refresh position if not have cluster",this.tileModel);return i&&this.tileImages.setIcon(c),o&&(u?this.tileImages.showOverlay(!0):(this.tileImages.showOverlay(!1),this.addPointerEventListeners())),!0},n.sync=function(e){var t=this,n=function(){if(t.parentContainer){var n=t.scale,r=t.getWorldPosition(),a=r.x,i=r.y,s=t.tileImages.scale;e.setScale(n*s),e.setPosition(a,i)}};this.scene.events.on(Phaser.Scenes.Events.POST_UPDATE,n),this.listSyncs.push({obj:e,callback:n})},n.unSync=function(e){var t,n,r,a=_()(t=this.listSyncs).call(t,(function(t){return t.obj===e}));a&&(Qr()(n=this.listSyncs).call(n,Ht()(r=this.listSyncs).call(r,a),1),this.scene.events.off(Phaser.Scenes.Events.POST_UPDATE,a.callback))},n.unSyncAll=function(){var e=this;this.listSyncs.forEach((function(t){e.scene.events.off(Phaser.Scenes.Events.POST_UPDATE,t.callback)})),this.listSyncs=[]},n.kill=function(){e.prototype.kill.call(this),this.unSyncAll()},n.updateHitAreaScale=function(e,t){if(void 0===t&&(t=0),this.input){var n=this.input.hitArea,r=(this.height-this.tileImages.height)/2+t,a="number"===typeof e?[e,e]:[e.x,e.y],i=a[0],s=a[1];n.setTo(-this.width*(i-1)/2,-this.height*(s-1)/2+r,this.width*i,this.height*s)}},n.swapPropsWithChild=function(){var e=this.tileImagesPointerTween.refresh(),t=e.angle,n=e.scaleX,r=e.scaleY,a=e.x,i=e.y;this.angle+=t,this.scaleX*=n,this.scaleY*=r,this.x+=a,this.y+=i},n.resetHitAreaScale=function(){this.updateHitAreaScale(1)},n.invokeCallback=function(){return this.handleOnClick()},n.canClickBoardTileView=function(){return this.scene.gameManager.canClickBoardTileView()},n.setTileViewScale=function(e){this.setScale(e)},n.playAnimationShuffleAsync=function(){var e=(0,s.Z)(h().mark((function e(t){var n,r,a,i,s,o,c,u,l,d,p,f,m,v,g,y,w,S,E,b,k,x=this;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.toX,r=t.toY,a=t.row,i=t.col,s=t.maxRow,o=t.maxCol,c=t.minRow,u=t.minCol,l=t.bonusSpace,d=t.maxScale,p=(this.tileImages.displayHeight-this.displayHeight)*d,f=(o+u)/2,m=(s+c)/2,v=this.tileImages.displayWidth*(d-1)+l,g=this.tileImages.displayHeight*(d-1)+l+p,y=n+(f-i)*-v,w=r+(m-a)*-g,S=n,E=r,b=this.scene.add.tween({targets:this,paused:!0,duration:150,scale:1,ease:Phaser.Math.Easing.Sine.InOut}),k=this.scene.add.tween({targets:this,paused:!0,delay:250,duration:150,scale:1.04,ease:Phaser.Math.Easing.Sine.InOut,onComplete:function(){x.tileImages.stopTileVFX(),b.play()}}),this.tileImages.tweenOverlay("hide",0,250),e.next=17,ua(this.scene,{targets:this,x:y,y:w,scale:{from:1,to:d,delay:200,duration:300},duration:500,ease:Phaser.Math.Easing.Quartic.Out});case 17:return k.play(),this.tileModel.isCovered()&&this.tileImages.tweenOverlay("show",450,200),e.abrupt("return",ua(this.scene,{targets:this,x:S,y:E,duration:200,scale:.95,ease:Phaser.Math.Easing.Quartic.In,onComplete:function(){x.tileImages.showTileVFX()}}));case 20:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),n.prepareFadeIn=function(){this.tileImages.showOverlay(!1)},n.fadeIn=function(){var e=(0,s.Z)(h().mark((function e(){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.refresh({iconRefresh:!1,positionRefresh:!1,overlayRefresh:!0}),e.abrupt("return",this.tileImages.fadeIn());case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.showOverlayAsync=function(){var e=(0,s.Z)(h().mark((function e(t){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.tileImages.showOverlayAsync(t));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),n.hideOverlayAsync=function(){var e=(0,s.Z)(h().mark((function e(){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.tileImages.hideOverlayAsync());case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.runAnimationDestroy=function(){var e=(0,s.Z)(h().mark((function e(t){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.tileImages.runAnimationDestroy(t));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),n.playWobbleAnimation=function(){var e=(0,s.Z)(h().mark((function e(){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.tileImagesWobbleAnimator.playAnimation());case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.setMagicGlowAlpha=function(e){this.tileImages.setMagicGlowAlpha(e)},(0,le.Z)(t,null,[{key:"TILE_SIZE",get:function(){return t.tileSize}}]),t}(Phaser.GameObjects.Container);Ya.tileSize=55;var za=Ya,Ka=function(){function e(e,t,n,r,a,i,s){this.id=void 0,this.x=void 0,this.y=void 0,this.z=void 0,this.icon=void 0,this.clusterId=void 0,this.state=void 0,this.id=e,this.x=t,this.y=n,this.z=r,this.icon=a,this.clusterId=i,this.state=s}var t=e.prototype;return t.sameIcon=function(e){return this.icon===e.icon},t.collect=function(){return!!this.canCollect()&&(this.state="collected",!0)},t.canCollect=function(){return"uncovered"===this.state},t.setIcon=function(e){e&&(this.icon=e)},t.setMatched3=function(){this.state="matched3"},t.isMatched3=function(){return"matched3"===this.state},t.setUncovered=function(){this.state="uncovered"},t.setCovered=function(){this.state="covered"},t.isCovered=function(){return"covered"===this.state},t.isUncovered=function(){return"uncovered"===this.state},t.isCollected=function(){return"collected"===this.state},t.getClone=function(){return new e(this.id,this.x,this.y,this.z,this.icon,this.clusterId,this.state)},e}();var ja={deepCopy:function(e){return Phaser.Utils.Objects.DeepCopy(e)},pickRandomElements:function(e,t){var n,r,a=x()(e,(function(e,t){return t})),i=er()(n=b()(r=Phaser.Math.RND.shuffle(a)).call(r,0,t)).call(n);return Ne()(i).call(i,(function(t){return e[t]}))},calculateStraightTweenDuration:function(e,t,n){return Phaser.Math.Distance.Between(e.x,e.y,t.x,t.y)/n}};function Xa(e,t){var n="undefined"!==typeof C()&&P()(e)||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=function(e,t){var n;if(!e)return;if("string"===typeof e)return qa(e,t);var r=b()(n=Object.prototype.toString.call(e)).call(n,8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return x()(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return qa(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0;return function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function qa(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Qa=function(e,t){return Number(e)-Number(t)},Ja=function(){function e(e){this.clusterData=void 0,this.gameManager=void 0,this.boardMap={},this.tileCount=0,this.maxZ=0,this.gameManager=e}var t=e.prototype;return t.setClusterData=function(e){this.clusterData=ja.deepCopy(e)},t.init=function(e){var t;this.setClusterData(e);for(var n,r=this.clusterData,a=r.tileMap,i=r.id,s=Xa(er()(t=te()(a)).call(t,Qa));!(n=s()).done;)for(var o,c,u=n.value,l=Xa(er()(o=te()(a[u])).call(o,Qa));!(c=l()).done;)for(var h,d,p=c.value,f=Xa(er()(h=te()(a[u][p])).call(h,Qa));!(d=f()).done;){var m=d.value,v=a[u][p][m],g=v.position,y=v.icon,w=g.x,S=g.y,E=g.z,b=w+","+S+","+E+","+y+","+i,k=this.existUpperTilesTileMap(g,a)?"covered":"uncovered",x=new Ka(b,w,S,E,y,i,k),A=this.gameManager.tilePool.spawnTileView(x);this.gameManager.board.add(A),A.setCluster(this),A.refresh(),this.addTileView(A),E>this.maxZ&&(this.maxZ=E)}},t.reset=function(){var e=this;this.forEach((function(t){e.detachTileView(t),e.gameManager.scene.gameManager.tilePool.hideTileView(t)})),this.tileCount=0,this.maxZ=0,this.boardMap={}},t.getMaxZ=function(){return this.maxZ},t.addTileView=function(e){var t=e.tileModel;if(t){var n=t.x,r=t.y,a=t.z,i=this.boardMap;i[a]||(i[a]={}),i[a][r]||(i[a][r]={}),i[a][r][n]=e,this.tileCount++}},t.getTileCount=function(){return this.tileCount},t.getPos=function(){var e=this.clusterData;return{x:e.x,y:e.y}},t.getId=function(){return this.clusterData.id},t.existPosition=function(e){var t,n=e.x,r=e.y,a=e.z;return!(null==(t=this.boardMap[a])||null==(t=t[r])||!t[n])},t.getTileViewByPosition=function(e){var t,n=e.x,r=e.y,a=e.z;return null==(t=this.boardMap[a])||null==(t=t[r])?void 0:t[n]},t.detachTileView=function(e){var t=e.tileModel;if(!t)return!1;var n=t.x,r=t.y,a=t.z;return!!this.existPosition({x:n,y:r,z:a})&&(delete this.boardMap[a][r][n],0===te()(this.boardMap[a][r]).length&&delete this.boardMap[a][r],0===te()(this.boardMap[a]).length&&delete this.boardMap[a],this.tileCount--,this.gameManager.board.remove(e),e.setCluster(void 0),!0)},t.getNewLayerZ=function(e){var t=e.x,n=e.y,r=this.boardMap,a=-1;for(var i in r){var s;if(null!=(s=r[i])&&null!=(s=s[n])&&s[t]){var o=Number(i);a<o&&(a=o)}}return a+1},t.getAllTiles=function(){for(var e,t=[],n=Xa(er()(r=te()(this.boardMap)).call(r,Qa));!(e=n()).done;)for(var r,a,i=e.value,s=Xa(er()(o=te()(this.boardMap[i])).call(o,Qa));!(a=s()).done;)for(var o,c,u=a.value,l=Xa(er()(h=te()(this.boardMap[i][u])).call(h,Qa));!(c=l()).done;){var h,d=c.value,p=this.boardMap[i][u][d];t.push(p)}return t},t.uncoverLowerTileViewsUnderTileViews=function(e){var t=this,n=this.createVisitedTileViewManager();e.forEach((function(e){var r=e.tileModel;r&&t.getLowerTileViews(r).forEach((function(e){n.has(e)||(e.setUncovered(),e.refresh(),n.add(e))}))}))},t.createVisitedTileViewManager=function(){var e={};return{has:function(t){var n,r=t.tileModel,a=r.x,i=r.y,s=r.z;return!(null==(n=e[s])||null==(n=n[i])||!n[a])},add:function(t){var n=t.tileModel,r=n.x,a=n.y,i=n.z;e[i]||(e[i]={}),e[i][a]||(e[i][a]={}),e[i][a][r]=t}}},t.forEach=function(e){for(var t in this.boardMap)for(var n in this.boardMap[t])for(var r in this.boardMap[t][n]){e(this.boardMap[t][n][r])}},e}(),$a=Ja,ei=function(e){function t(){return e.apply(this,arguments)||this}(0,o.Z)(t,e);var n=t.prototype;return n.existUpperTilesTileMap=function(e,t){var n,r=Ne()(n=te()(t)).call(n,Number),a=Math.max.apply(Math,r);return e.z<a},n.existUpperTiles=function(e){var t;if(!this.existPosition(e))return!1;var n=Ne()(t=te()(this.boardMap)).call(t,Number),r=Math.max.apply(Math,n);return e.z<r},n.getDepthOffsetMultiplier=function(){return{x:0,y:0}},n.getLowerTileViews=function(e){var t=this.getNearestLowerDepth(e),n=this.boardMap[t];if(!n)return[];var r=Jn()(n)[0];if(!r)return[];var a=Jn()(r)[0];if(!a)return[];var i=a.tileModel;return!this.existPosition(i)||this.existUpperTiles(i)?[]:[a]},n.getNearestLowerDepth=function(e,t){var n,r;void 0===t&&(t=this.boardMap);var a=Be()(n=Ne()(r=te()(t)).call(r,Number)).call(n,(function(t){return t<e.z}));return Math.max.apply(Math,a)},t}($a),ti=ei;function ni(e,t){var n="undefined"!==typeof C()&&P()(e)||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=function(e,t){var n;if(!e)return;if("string"===typeof e)return ri(e,t);var r=b()(n=Object.prototype.toString.call(e)).call(n,8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return x()(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return ri(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0;return function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function ri(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var ai=[ra.TOP_LEFT,ra.TOP_RIGHT,ra.BOTTOM_LEFT,ra.BOTTOM_RIGHT],ii=Jn()(ra),si=function(e){function t(){return e.apply(this,arguments)||this}(0,o.Z)(t,e);var n=t.prototype;return n.getDepthOffsetMultiplier=function(){return{x:0,y:0}},n.existUpperTiles=function(e){if(!this.existPosition(e))return!1;for(var t,n=ni(this.getAscendingUpperZs(e));!(t=n()).done;)for(var r,a=t.value,i=ni(ii);!(r=i()).done;){var s=r.value,o=e.x+s.x,c=e.y+s.y;if(this.existPosition({x:o,y:c,z:a}))return!0}return!1},n.existUpperTilesTileMap=function(e,t){for(var n,r=ni(this.getAscendingUpperZs(e,t));!(n=r()).done;)for(var a,i=n.value,s=ni(ii);!(a=s()).done;){var o,c=a.value,u=e.x+c.x,l=e.y+c.y;if(null!=(o=t[i])&&null!=(o=o[l])&&o[u])return!0}return!1},n.getLowerTileViews=function(e){for(var t,n=[],r=ni(this.getDescendingLowerZs(e));!(t=r()).done;){for(var a,i=t.value,s=0,o=ni(ii);!(a=o()).done;){var c=a.value,u={x:e.x+c.x,y:e.y+c.y,z:i};if(this.existPosition(u)&&!this.existUpperTiles(u)){var l=this.getTileViewByPosition(u);l&&(n.push(l),this.isCornerOffset(c)&&s++)}}if(s===ai.length)break}return n},n.getAscendingUpperZs=function(e,t){var n,r,a;return void 0===t&&(t=this.boardMap),er()(n=Be()(r=Ne()(a=te()(t)).call(a,Number)).call(r,(function(t){return t>e.z}))).call(n,(function(e,t){return e-t}))},n.getDescendingLowerZs=function(e,t){var n,r,a;return void 0===t&&(t=this.boardMap),er()(n=Be()(r=Ne()(a=te()(t)).call(a,Number)).call(r,(function(t){return t<e.z}))).call(n,(function(e,t){return t-e}))},n.isCornerOffset=function(e){return ai.some((function(t){return t.x===e.x&&t.y===e.y}))},t}($a),oi=si,ci={positionRefresh:!0,iconRefresh:!1,overlayRefresh:!1},ui=function(e){function t(){for(var t,n,r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(n=e.call.apply(e,O()(t=[this]).call(t,a))||this).multiplierY=5,n}(0,o.Z)(t,e);var n=t.prototype;return n.getDepthOffsetMultiplier=function(){return{x:0,y:this.multiplierY}},n.detachTileView=function(t){return!!e.prototype.detachTileView.call(this,t)&&(this.updateAlignment(),!0)},n.updateAlignment=function(){var e=this.getLayerCount(),t=this.getNewMultiplierYForLayerCount(e);if(t!==this.multiplierY){this.multiplierY=t;var n=this.boardMap;for(var r in n)for(var a in n[r])for(var i in n[r][a]){n[r][a][i].refresh(ci)}}},n.getLayerCount=function(){return te()(this.boardMap).length},n.getNewMultiplierYForLayerCount=function(e){return e<3?5:e<4?3:e<5?2:1},t}(oi),li=ui,hi=function(){function e(e){this.board=void 0,this.board=e}var t=e.prototype;return t.playUndoMoveAnimation=function(){var e=(0,s.Z)(h().mark((function e(t){var n,r,a;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.tileView,r=t.position,a=this.board.scene.add.tween({targets:n,duration:100,props:{x:{value:r.x,ease:Phaser.Math.Easing.Cubic.Out},y:{value:r.y,ease:Phaser.Math.Easing.Sine.Out}}}),e.abrupt("return",a.waitForCompletion());case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),t.playUndoScaleToNormalAnimation=function(){var e=(0,s.Z)(h().mark((function e(t){var n;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.board.scene.add.tween({targets:t,duration:50,props:{scale:1}}),e.abrupt("return",n.waitForCompletion());case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),t.playReturnAnimation=function(){var e=(0,s.Z)(h().mark((function e(t){var n,r,a=this;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.tileView,r=t.position,.5,e.abrupt("return",new(u())((function(e){a.board.scene.add.tween({targets:n,ease:Phaser.Math.Easing.Quadratic.InOut,duration:Phaser.Math.Distance.BetweenPoints(n,r)/.5,props:{x:r.x,y:r.y,scale:1},onComplete:function(){e()}})})));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),e}(),di=hi,pi=function(){function e(e){this.board=void 0,this.board=e}var t=e.prototype;return t.prepareFadeIn=function(){Jn()(this.clusters).forEach((function(e){e.forEach((function(e){e.setScale(0),e.prepareFadeIn()}))}))},t.playFadeInAnimation=function(){var e=(0,s.Z)(h().mark((function e(){var t,n,r,a;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=[],n=0,600,600,Jn()(this.clusters).forEach((function(e){n=Math.max(n,e.getMaxZ())})),r=600/(n+1),Jn()(this.clusters).forEach((function(e){e.forEach((function(e){var n=600+e.tileModel.z*r;t.push(Ca([e],r,n))}))})),e.next=9,u().all(t);case 9:return a=[],Jn()(this.clusters).forEach((function(e){e.forEach((function(e){t.push(e.fadeIn())}))})),e.abrupt("return",u().all(a));case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),(0,le.Z)(e,[{key:"clusters",get:function(){return this.board.clusters}}]),e}(),fi=pi,mi=function(){function e(e){this.fadeInAnimator=void 0,this.addAnimator=void 0,this.fadeInAnimator=new fi(e),this.addAnimator=new di(e)}var t=e.prototype;return t.prepareFadeIn=function(){this.fadeInAnimator.prepareFadeIn()},t.playFadeInAnimation=function(){var e=(0,s.Z)(h().mark((function e(){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.fadeInAnimator.playFadeInAnimation());case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),t.playAddAnimation=function(){var e=(0,s.Z)(h().mark((function e(t){var n,r,a,i,o=this;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.type,r=t.tileView,a=t.refreshPosition,"return"!==n){e.next=5;break}return e.next=4,this.addAnimator.playReturnAnimation({tileView:r,position:a});case 4:return e.abrupt("return",this.wobbleAndShowOverlays(t));case 5:return i=function(){var e=(0,s.Z)(h().mark((function e(){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.addAnimator.playUndoScaleToNormalAnimation(r);case 2:return e.abrupt("return",o.wobbleAndShowOverlays(t));case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),e.abrupt("return",u().all([this.addAnimator.playUndoMoveAnimation({tileView:r,position:a}),i()]));case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),t.wobbleAndShowOverlays=function(){var e=(0,s.Z)(h().mark((function e(t){var n,r,a,i;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.tileView,r=t.lowerTileViews,a=t.waitForWobble,i=u().all([n.playWobbleAnimation(),this.showTileViewOverlaysAsync(r,a?50:400)]),!a){e.next=4;break}return e.abrupt("return",i);case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),t.showTileViewOverlaysAsync=function(){var e=(0,s.Z)(h().mark((function e(t,n){var r;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==t.length){e.next=2;break}return e.abrupt("return");case 2:return r=Ne()(t).call(t,(function(e){return e.setCovered(),e.refresh(),e.showOverlayAsync(n)})),e.abrupt("return",u().all(r));case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),e}(),vi=mi,gi={positionRefresh:!0,iconRefresh:!0,overlayRefresh:!0},yi=function(e){function t(t){var n;return(n=e.call(this,t)||this).scene=void 0,n.clusters={},n.tileViewClickEnabled=!0,n.animator=new vi((0,jr.Z)(n)),n.scene=t,n}(0,o.Z)(t,e);var n=t.prototype;return n.prepareFadeIn=function(){this.animator.prepareFadeIn()},n.fadeIn=function(){var e=(0,s.Z)(h().mark((function e(){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.animator.playFadeInAnimation());case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.init=function(e){var t=this,n=this.scene.gameManager;Jn()(this.clusters).forEach((function(e){e.reset()})),this.clusters={},e.clusters.forEach((function(e){var r=e.id,a="3/40"===e.type?new ti(n):new oi(n);a.init(e),t.clusters[r]=a})),this.tileViewClickEnabled=!0},n.createReturnCluster=function(){var e=new li(this.scene.gameManager);e.setClusterData({id:aa,x:0,y:20,type:"compact",tileMap:{}}),this.clusters[aa]=e},n.getReturnCluster=function(){return this.clusters[aa]},n.isReturnClusterAvailable=function(){return!!this.getReturnCluster()},n.updateReturnClusterAlignment=function(){var e=this.getReturnCluster();e&&e.updateAlignment()},n.detachTileView=function(e){var t=e.getCluster();if(!t)return!1;var n=t.detachTileView(e);this.isBoardEmpty()&&this.scene.game.globalScene.disableInput();return n},n.detachMultipleTileViews=function(e){var t=this;e.forEach((function(e){t.detachTileView(e)}))},n.addTileViewAsync=function(){var e=(0,s.Z)(h().mark((function e(t,n,r,a){var s,o,c,u;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===a&&(a=!0),s=n.clusterId,o=this.clusters[s],c=o.getLowerTileViews(n),t.setTileModel(n),t.setCluster(o),o.addTileView(t),u=t.getRefreshPosition()){e.next=13;break}return console.warn("Cannot move tile"),this.addCorrectDepth(t),t.refresh(),e.abrupt("return");case 13:return t.refresh((0,i.Z)({},gi,{positionRefresh:!1})),this.scene.gameplayParticleHandler.tileReturnVFX.show(t),e.next=17,this.animator.playAddAnimation({type:r,tileView:t,refreshPosition:u,lowerTileViews:c,waitForWobble:a});case 17:this.scene.gameManager.topContainer.detachTileView(t),this.addCorrectDepth(t),t.refresh((0,i.Z)({},gi,{positionRefresh:!0}));case 20:case"end":return e.stop()}}),e,this)})));return function(t,n,r,a){return e.apply(this,arguments)}}(),n.updateCorrectDepth=function(e){this.remove(e),this.addCorrectDepth(e)},n.addCorrectDepth=function(e){var t=this.getAt(e.depth);if(t instanceof za||void 0===t)if(0===this.length)this.add(e);else if(void 0===t){if(1===this.length&&this.getAt(0).depth>e.depth)return void this.addAt(e,0);for(var n=this.length-1;n>=0;n--){if(!(this.getAt(n).depth>e.depth))return void this.addAt(e,n+1)}this.add(e)}else if(t.depth<e.depth){for(var r=e.depth+1;r<this.length;r++){if(!(this.getAt(r).depth<e.depth))return void this.addAt(e,r)}this.add(e)}else{for(var a=e.depth-1;a>=0;a--){if(!(this.getAt(a).depth>e.depth))return void this.addAt(e,a+1)}this.addAt(e,0)}else console.error("targetTileView is not TileView",t)},n.add=function(t){return e.prototype.add.call(this,t),t.depth=this.length-1,this},n.moveTo=function(t,n){return e.prototype.moveTo.call(this,t,n),this},n.uncoverLowerTileViewsUnderTileViews=function(e){if(0!==e.length){var t={};for(var n in e.forEach((function(e){var n=e.tileModel.clusterId;t[n]||(t[n]=[]),t[n].push(e)})),t){this.clusters[n].uncoverLowerTileViewsUnderTileViews(t[n])}}},n.getMagicTileViews=function(){var e=this.createMagicTileViewsBuilder();return Jn()(this.clusters).forEach((function(t){t.forEach((function(t){e.addTileView(t)}))})),e.getData()},n.createMagicTileViewsBuilder=function(){var e={};return{addTileView:function(t){var n=t.tileModel;if(n){var r=n.icon;e[r]||(e[r]={covered:[],uncovered:[]});var a=e[r],i=a.covered,s=a.uncovered;n.isCovered()?i.push(t):s.push(t)}},getData:function(){return e}}},n.enableTileViewClick=function(e){this.tileViewClickEnabled=e},n.canClickTileView=function(){return this.tileViewClickEnabled},n.isBoardEmpty=function(){return!this.hasMoreThanNTile(0)},n.hasMoreThan1Tile=function(){return this.hasMoreThanNTile(1)},n.getRemainingAmount=function(){for(var e=0,t=0,n=Jn()(this.clusters);t<n.length;t++){e+=n[t].getTileCount()}return e},n.hasMoreThanNTile=function(e){for(var t=0,n=0,r=Jn()(this.clusters);n<r.length;n++){if((t+=r[n].getTileCount())>e)break}return t>e},n.getAllTiles=function(){for(var e=[],t=0,n=Jn()(this.clusters);t<n.length;t++){var r=n[t];e.push.apply(e,r.getAllTiles())}return e},t}(Phaser.GameObjects.Container),wi=yi,Si=ca.Z.GAMEPLAY_COLORFUL,Ei=Si.KEY,bi=Si.FRAME,ki=function(e){function t(t,n){var r;return(r=e.call(this,t)||this).scene=void 0,r.tileModel=void 0,r.background=void 0,r.imageIcon=void 0,r.scene=t,r.tileModel=n,r.createBackground(),r.createIcon(),r.resetProperty(),r}(0,o.Z)(t,e);var n=t.prototype;return n.resetProperty=function(){this.setImageIconSize(),this.background.setWorldSize(t.TILE_SIZE,t.TILE_SIZE*sa),this.setSize(t.TILE_SIZE,t.TILE_SIZE),this.setScale(1),this.setAlpha(1),this.revive()},n.setTileModel=function(e){this.tileModel=e},n.refresh=function(e){var t=this.tileModel.icon;this.imageIcon.setFrame("tiles/"+t),this.setImageIconSize();var n=this.getRefreshPosition(e);this.setPosition(n.x,n.y)},n.getRefreshPosition=function(e){return{x:this.tileModel.x*t.TILE_SIZE+e.x,y:this.tileModel.y*t.TILE_SIZE+e.y+-2*this.tileModel.y}},n.setImageIconSize=function(){var e=t.TILE_SIZE/55;this.imageIcon.setSizeBasedOnDpr();var n=this.imageIcon,r=n.displayWidth,a=n.displayHeight;this.imageIcon.setWorldSize(r*e,a*e)},n.createBackground=function(){var e=this.scene.make.image({key:Ei,frame:bi.EMPTY_TILE});this.add(e),this.background=e},n.createIcon=function(){var e=this.scene.make.image({key:Ei,frame:bi.BLANK});this.add(e),this.imageIcon=e},t}(Phaser.GameObjects.Container);ki.TILE_SIZE=30;var xi=ki;function Ai(e,t){var n="undefined"!==typeof C()&&P()(e)||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=function(e,t){var n;if(!e)return;if("string"===typeof e)return Ci(e,t);var r=b()(n=Object.prototype.toString.call(e)).call(n,8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return x()(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Ci(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0;return function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Ci(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Ti=Jn()(ra),Pi=function(){function e(){this.levelConfig=void 0,this.boardData=void 0,this.bounds=void 0,this.levelTileCount=void 0}var t=e.prototype;return t.init=function(){this.updateTileCount()},t.updateTileCount=function(){var e=0;this.levelConfig.forEach((function(t){t.layers.forEach((function(t){e+=t.tiles.length}))})),this.levelTileCount=e},t.setLevelConfig=function(e){this.levelConfig=e,this.extractBoardData()},t.extractBoardData=function(){var e,t=this;this.bounds={top:1/0,bottom:-1/0,left:1/0,right:-1/0};var n=x()({length:32},(function(e,t){return t}));GameCore.Utils.Array.shuffle(n);var r=Ne()(e=this.levelConfig).call(e,(function(e,r){var a=e.layers,i=e.x,s=e.y,o=e.type;return{id:"cluster-"+r,tileMap:t.layerConfigsToTileMap(a,n),x:i,y:s,type:o}}));this.boardData={clusters:r}},t.getBoardData=function(){return this.boardData},t.getTutorialTripleTilePayloads=function(){var e=this,t={};this.boardData.clusters.forEach((function(n){e.getClickableTiles(n).forEach((function(e){var r=e.icon,a=e.position;t[r]||(t[r]=[]),t[r].push({position:a,clusterId:n.id})}))}));for(var n=0,r=Jn()(t);n<r.length;n++){var a,i=r[n];if(i.length>=3)return er()(a=b()(i).call(i,0,3)).call(a,(function(e,t){return t.position.y-e.position.y||t.position.x-e.position.x}))}return[]},t.getClickableTiles=function(e){var t,n,r=this,a=e.tileMap;if("3/40"===e.type){var i,s=Ne()(i=te()(a)).call(i,Number),o=Math.max.apply(Math,s),c=a[o],u=te()(c)[0],l=te()(c[u])[0];return[c[u][l]]}for(var h,d=function(e,t){return e-t},p=er()(t=Ne()(n=te()(a)).call(n,Number)).call(t,d),f=[],m=function(){for(var e,t,n,i=h.value,s=Be()(p).call(p,(function(e){return e>i})),o=Ai(er()(e=Ne()(t=te()(a[i])).call(t,Number)).call(e,d));!(n=o()).done;)for(var c,u,l,m=n.value,v=Ai(er()(c=Ne()(u=te()(a[i][m])).call(u,Number)).call(c,d));!(l=v()).done;){var g=l.value,y={x:g,y:m,z:i};r.existUpperTilesTileMap(y,a,s)||f.push(a[i][m][g])}},v=Ai(p);!(h=v()).done;)m();return f},t.existUpperTilesTileMap=function(e,t,n){for(var r,a=Ai(n);!(r=a()).done;)for(var i,s=r.value,o=Ai(Ti);!(i=o()).done;){var c,u=i.value,l=e.x+u.x,h=e.y+u.y;if(null!=(c=t[s])&&null!=(c=c[h])&&c[l])return!0}return!1},t.getTutorialBoardData=function(){for(var e=xi.TILE_SIZE,t=[],n=x()({length:20},(function(e,t){return(t+1).toString()})),r=ja.pickRandomElements(n,5),a=[],i=0;i<3;i++)for(var s=0;s<5;s++)a.push({x:s,y:i});GameCore.Utils.Array.shuffle(a);for(var o,c=Ai(r);!(o=c()).done;)for(var u=o.value,l=0;l<3;l++){var h=a.pop();h&&t.push({icon:u,position:h})}return{tiles:t,x:-2*e,y:-1*e-20}},t.getLevelTileCount=function(){return this.levelTileCount},t.getCoordsBounds=function(){return this.bounds},t.layerConfigsToTileMap=function(e,t){var n=this,r={};return e.forEach((function(e,a){e.tiles.forEach((function(e){var i=e.x,s=e.y,o=e.skinIdx;i<n.bounds.left&&(n.bounds.left=i),i>n.bounds.right&&(n.bounds.right=i),s<n.bounds.top&&(n.bounds.top=s),s>n.bounds.bottom&&(n.bounds.bottom=s);var c=o;t&&(c=t[o]),n.addTileMap(r,{position:{x:i,y:s,z:a},icon:c.toString()})}))})),r},t.addTileMap=function(e,t){var n=t.position,r=n.x,a=n.y,i=n.z;e[i]||(e[i]={}),e[i][a]||(e[i][a]={}),e[i][a][r]=t},e}(),Ii=n(582),Oi=n.n(Ii),Mi=n(583),_i=n.n(Mi),Li=function(e){this.scene=void 0,this.scene=e},Ri={SLIDE_COMPLETED:"slide-completed",MATCH_3_COMPLETED:"match-3-completed"};function Bi(e){var t,n,r,a=2;for("undefined"!=typeof C()&&(n=Oi(),r=_i());a--;){if(n&&null!=(t=e[n]))return t.call(e);if(r&&null!=(t=e[r]))return new Di(t.call(e));n="@@asyncIterator",r="@@iterator"}throw new TypeError("Object is not async iterable")}function Di(e){function t(e){if(Object(e)!==e)return u().reject(new TypeError(e+" is not an object."));var t=e.done;return u().resolve(e.value).then((function(e){return{value:e,done:t}}))}return Di=function(e){this.s=e,this.n=e.next},Di.prototype={s:null,n:null,next:function(){return t(this.n.apply(this.s,arguments))},return:function(e){var n=this.s.return;return void 0===n?u().resolve({value:e,done:!0}):t(n.apply(this.s,arguments))},throw:function(e){var n=this.s.return;return void 0===n?u().reject(e):t(n.apply(this.s,arguments))}},new Di(e)}var Ni=function(e){function t(){return e.apply(this,arguments)||this}(0,o.Z)(t,e);var n=t.prototype;return n.performMagicAsync=function(){var e=(0,s.Z)(h().mark((function e(t){var n;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.boardMagicTileViewsByIcon,e.next=3,this.moveTileViewsToRack(n);case 3:return e.next=5,this.waitForMatch3Completed(n);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),n.moveTileViewsToRack=function(){var e=(0,s.Z)(h().mark((function e(t){var n,r,a,i,s,o;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=!1,r=!1,e.prev=2,i=Bi(t);case 4:return e.next=6,i.next();case 6:if(!(n=!(s=e.sent).done)){e.next=16;break}if(o=s.value,this.moveTileViewToRack(o)){e.next=11;break}return e.abrupt("continue",13);case 11:return e.next=13,Oa(this.scene,200);case 13:n=!1,e.next=4;break;case 16:e.next=22;break;case 18:e.prev=18,e.t0=e.catch(2),r=!0,a=e.t0;case 22:if(e.prev=22,e.prev=23,!n||null==i.return){e.next=27;break}return e.next=27,i.return();case 27:if(e.prev=27,!r){e.next=30;break}throw a;case 30:return e.finish(27);case 31:return e.finish(22);case 32:case"end":return e.stop()}}),e,this,[[2,18,22,32],[23,,27,31]])})));return function(t){return e.apply(this,arguments)}}(),n.moveTileViewToRack=function(e){var t=e.getCluster();if(!t)return!1;var n=this.scene.gameManager,r=n.rack,a=n.board,i=r.getLocalPosition(e);return e.setPosition(i.x,i.y),!!a.detachTileView(e)&&(this.fadeInTileViewMagicGlow(e),r.addTileView(e),t.getLowerTileViews(e.tileModel).forEach((function(e){e.setUncovered(),e.addPointerEventListeners(),e.hideOverlayAsync()})),!0)},n.fadeInTileViewMagicGlow=function(){var e=(0,s.Z)(h().mark((function e(t){var n,r,a;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=function(e){t.setMagicGlowAlpha(e.getValue())},r=this.scene.tweens.addCounter({from:0,to:1,duration:68,onUpdate:n}),e.next=4,r.waitForCompletion();case 4:return a=this.scene.tweens.addCounter({from:1,to:0,duration:68,onUpdate:n}),e.next=7,a.waitForCompletion();case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),n.waitForMatch3Completed=function(){var e=(0,s.Z)(h().mark((function e(t){var n;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Ne()(t).call(t,(function(e){return new(u())((function(t){e.once(Ri.MATCH_3_COMPLETED,t)}))})),e.abrupt("return",u().all(n));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),t}(Li),Gi=Ni,Fi=function(){function e(e){this.scene=void 0,this.magicMoverHandler=void 0,this.scene=e,this.magicMoverHandler=new Gi(e)}var t=e.prototype;return t.moveTileViewBoardToRack=function(e){var t=e.tileModel;if(t){var n=this.scene.gameManager,r=n.rack,a=n.board,i=r.getLocalPosition(e);e.setPosition(i.x,i.y),a.detachTileView(e)&&(n.pushMoveBoardToRackData({tileView:e,tileModel:t}),r.addTileView(e))}},t.undoMoveAsync=function(){var e=(0,s.Z)(h().mark((function e(t,n){var r,a,i,s,o,c,l,d,p,f;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.tileView,a=t.tileModel,i=this.scene.gameManager,s=i.rack,o=i.board,c=i.topContainer,e.next=5,s.playScaleToNormalAnimation();case 5:return l=o.getLocalPosition(r),d=l.x,p=l.y,r.setPosition(d,p),s.detachTileViews([r]),(f=a.getClone()).setUncovered(),c.addTileViews([r]),this.scene.audio.playSound(tn.Z.TILE_DROP),e.next=14,u().all([o.addTileViewAsync(r,f,"undo",n),s.playRealignAnimationAsync()]);case 14:o.updateCorrectDepth(r),r.addPointerEventListeners();case 16:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}(),t.moveTileViewsRackToBoard=function(){var e=(0,s.Z)(h().mark((function e(t,n){var r,a,i,s,o;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=this.scene.gameManager,i=a.rack,s=a.board,o=a.topContainer,e.next=4,i.playScaleToNormalAnimation();case 4:return t.forEach((function(e){var t=o.getLocalPosition(e),n=t.x,r=t.y;e.setPosition(n,r)})),i.detachTileViews(t),o.addTileViews(t),e.abrupt("return",u().all(O()(r=[]).call(r,Ne()(t).call(t,(function(e,t){return s.addTileViewAsync(e,n[t],"return")})),[i.playRealignAnimationAsync()])));case 8:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}(),t.performMagicAsync=function(){var e=(0,s.Z)(h().mark((function e(t){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.magicMoverHandler.performMagicAsync(t));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),e}(),Zi=Fi,Ui=function(){function e(e){this.scene=void 0,this.undoAsyncState="ready",this.moveBoardToRackStack=[],this.scene=e}var t=e.prototype;return t.init=function(){this.undoAsyncState="ready",this.moveBoardToRackStack=[],this.scene.footer.undoItem.softDisableItem()},t.canUndo=function(){return!this.scene.gameManager.rack.isEmpty()&&("playing"!==this.undoAsyncState&&this.moveBoardToRackStack.length>0)},t.updateUndoItem=function(){var e=this.scene.footer.undoItem;this.canUndo()?e.updateStatusItemByAmount(!0):e.softDisableItem()},t.undoAsync=function(){var e=(0,s.Z)(h().mark((function e(t){var n,r,a,i;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(n=this.scene.gameManager).isRackPlayingLogicalTweens()){e.next=3;break}return e.abrupt("return");case 3:if(n.stopRackAlmostFullAnimation(),r=this.moveBoardToRackStack.pop()){e.next=7;break}return e.abrupt("return");case 7:return a=n.board,i=n.mover,this.scene.setGlobalSceneInputEnabled(!1),this.undoAsyncState="playing",e.next=12,i.undoMoveAsync(r,t);case 12:this.undoAsyncState="ready",a.updateReturnClusterAlignment(),n.tryWarningRackIsAlmostFull(),this.scene.setGlobalSceneInputEnabled(!0);case 16:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),t.pushMoveBoardToRackData=function(e){this.moveBoardToRackStack.push(e)},t.clearLastMatch3FromMoveStack=function(){this.moveBoardToRackStack=[]},t.removeTileViewsFromMoveStack=function(e){var t;this.moveBoardToRackStack=Be()(t=this.moveBoardToRackStack).call(t,(function(t){var n=t.tileView;return!y()(e).call(e,n)}))},e}(),Hi=Ui,Wi=function(){function e(e){this.scene=void 0,this.extraSlotClicked=!1,this.addExtraSlotAsyncState="ready",this.scene=e}var t=e.prototype;return t.init=function(){this.extraSlotClicked=!1,this.updateExtraSlotItem()},t.canAddExtraSlot=function(){return"playing"!==this.addExtraSlotAsyncState&&(!this.extraSlotClicked&&!this.scene.gameManager.rack.isExtra())},t.updateExtraSlotItem=function(){var e=this.scene.footer.extraSlotItem;this.canAddExtraSlot()?null==e||e.enableItem():null==e||e.softDisableItem()},t.addExtraSlotAsync=function(){var e=(0,s.Z)(h().mark((function e(){var t,n,r,a,i;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t=this.scene.gameManager).isRackPlayingLogicalTweens()){e.next=3;break}return e.abrupt("return");case 3:return n=t.rack,r=t.returnManager,a=t.undoManager,i=t.wieldMagicWandManager,this.scene.setGlobalSceneInputEnabled(!1),this.extraSlotClicked=!0,this.addExtraSlotAsyncState="playing",e.next=9,n.addExtraSlotAsync();case 9:this.addExtraSlotAsyncState="ready",this.updateExtraSlotItem(),r.updateReturnItem(),a.updateUndoItem(),i.updateMagicWandItem(),this.scene.setGlobalSceneInputEnabled(!0);case 15:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),e}(),Vi=Wi,Yi=function(){function e(e){this.scene=void 0,this.wieldAsyncState="ready",this.latestMagicData=void 0,this.scene=e}var t=e.prototype;return t.init=function(){this.wieldAsyncState="ready",this.updateMagicWandItem()},t.isPlaying=function(){return"playing"===this.wieldAsyncState},t.canWieldMagicWand=function(){return"playing"!==this.wieldAsyncState&&(this.updateLatestMagicWandData(),!!this.latestMagicData)},t.updateLatestMagicWandData=function(){var e=this.scene.gameManager,t=e.board,n=e.rack,r=t.getMagicTileViews();return n.isEmpty()?this.handleUpdateMagicDataWhenRackIsEmpty(r):this.handleUpdateMagicDataWhenRackIsNotEmpty(r)},t.handleUpdateMagicDataWhenRackIsEmpty=function(e){var t=[];for(var n in e){var r,a,i=e[n],s=i.uncovered,o=i.covered,c=b()(r=O()(a=[]).call(a,s,o)).call(r,0,3);3===c.length&&t.push({boardMagicTileViewsByIcon:c,rackMagicTileViewsByIcon:[],priority:Math.min(s.length,3)})}this.latestMagicData=this.getBestMagicData(t)},t.handleUpdateMagicDataWhenRackIsNotEmpty=function(e){var t=this.scene.gameManager.rack.getMagicTileViews(),n=[];for(var r in t){var a,i;if(r in e){var s=t[r],o=s.length,c=e[r],u=c.covered,l=c.uncovered,h=b()(a=O()(i=[]).call(i,l,u)).call(a,0,3-o);o+h.length<3||n.push({boardMagicTileViewsByIcon:h,rackMagicTileViewsByIcon:s,priority:s.length})}}this.latestMagicData=this.getBestMagicData(n)},t.getBestMagicData=function(e){if(0!==e.length)return er()(e).call(e,(function(e,t){return t.priority-e.priority})),e[0]},t.updateMagicWandItem=function(){var e=this.scene.footer.magicWandItem;this.canWieldMagicWand()?e.updateStatusItemByAmount():e.softDisableItem()},t.wieldMagicWandAsync=function(){var e=(0,s.Z)(h().mark((function e(){var t,n,r,a,i,s,o;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(n=this.scene.gameManager).isRackPlayingLogicalTweens()){e.next=3;break}return e.abrupt("return");case 3:if(this.latestMagicData){e.next=5;break}return e.abrupt("return");case 5:return n.stopRackAlmostFullAnimation(),r=this.latestMagicData,a=r.boardMagicTileViewsByIcon,i=r.rackMagicTileViewsByIcon,s=O()(t=[]).call(t,a,i),o=n.mover,this.setInputEnabled(!1),this.wieldAsyncState="playing",a.forEach((function(e){e.setUncovered(),e.refresh()})),e.next=14,o.performMagicAsync(this.latestMagicData);case 14:this.wieldAsyncState="ready",s.forEach((function(e){e.isMatched3()||(e.setMatched3(),n.increaseMatched3TileViewCount(1),n.tilePool.hideTileView(e))})),n.removeTileViewsFromMoveStack(s),this.setInputEnabled(!0),n.canWin()?n.win():n.tryWarningRackIsAlmostFull();case 19:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),t.setInputEnabled=function(e){this.scene.setGlobalSceneInputEnabled(e),this.scene.gameManager.enableBoardTileViewClick(e)},e}(),zi=Yi,Ki=function(){function e(e){this.scene=void 0,this.matched3TileViewCount=0,this.state="playing",this.scene=e}var t=e.prototype;return t.init=function(){this.matched3TileViewCount=0,this.state="playing"},t.increaseMatched3TileViewCount=function(e){this.matched3TileViewCount+=e},t.getRemainingCountToWin=function(){return this.scene.gameManager.levelDataManager.getLevelTileCount()-this.matched3TileViewCount},t.canWin=function(){var e=this.scene.gameManager.levelDataManager.getLevelTileCount();return this.matched3TileViewCount>=e},t.canLose=function(){var e=this.scene.gameManager.rack;return e.isFull()&&!e.isMatching3()},t.switchToWin=function(){this.state="win"},t.switchToLose=function(){this.state="lose"},t.switchToPlaying=function(){this.state="playing"},t.isPlaying=function(){return"playing"===this.state},t.isLosing=function(){return"lose"===this.state},e}(),ji=Ki,Xi=function(){function e(e){this.scene=void 0,this.tileViews=[],this.scene=e}var t=e.prototype;return t.spawnTileView=function(e){var t,n,r=_()(t=this.tileViews).call(t,(function(e){return!e.active}));if(r)(n=r).setTileModel(e),n.setCluster(void 0),n.resetProperty();else{var a=new za(this.scene,e);this.tileViews.push(a),n=a}return n.addPointerEventListeners(),n},t.hideTileView=function(e){var t;e.kill(),null==(t=e.parentContainer)||t.remove(e),e.removePointerEventListeners(),this.tileViews.some((function(t){return t===e}))||this.tileViews.push(e)},e}(),qi=Xi,Qi=ca.Z.GAMEPLAY_COLORFUL,Ji=Qi.KEY,$i=Qi.FRAME,es=function(e){function t(t){var n;return(n=e.call(this,t)||this).scene=void 0,n.bg=void 0,n.slotImages=[],n.scene=t,n.setSize(375,52),n.createBg(),n.createSlots(),n}(0,o.Z)(t,e);var n=t.prototype;return n.createBg=function(){var e=this.scene.make.image({key:Ji,frame:$i.TILE_CONTAINER});e.setSizeBasedOnDpr(),this.add(e),this.bg=e},n.createSlots=function(){var e=t.SLOT_DISTANCE,n=t.SLOT_COUNT;t.SLOT_SIZE;this.slotImages=x()({length:n},(function(t,r){return{x:e*(r-(n-1)/2)-.4,y:-6.5}}))},n.getBackgroundWidth=function(){return this.bg.displayWidth},(0,le.Z)(t,[{key:"availableSlotCount",get:function(){return t.SLOT_COUNT}}]),t}(Phaser.GameObjects.Container);es.SLOT_DISTANCE=49.6,es.SLOT_COUNT=7,es.SLOT_SIZE=48;var ts=es,ns=ca.Z.GAMEPLAY_COLORFUL,rs=ns.KEY,as=ns.FRAME,is=209.5,ss=function(e){function t(t){var n;return(n=e.call(this,t)||this).slices=[],n.middleSliceCropWidth=void 0,n.createSlices(),n.updateSize(),n}(0,o.Z)(t,e);var n=t.prototype;return n.createSlices=function(){var e=this,t=x()({length:4},(function(){var t=e.scene.make.image({key:rs,frame:as.TILE_CONTAINER});return t.setSizeBasedOnDpr(),t}));this.add(t);var n=t[0],r=t[1],a=t[2],i=t[3],s=i.width-is,o=49.5,c=n.height;this.setSliceCrop(n,0,0,160,c),this.setSliceCrop(i,is,0,s,c),this.setSliceCrop(r,160,0,o,c),this.setSliceCrop(a,160,0,o,c),a.setX(o),i.setX(o),t.forEach((function(e){e.x-=24.75})),this.slices=t,this.middleSliceCropWidth=o},n.updateSize=function(){var e=this.slices[0],t=e.displayWidth,n=e.displayHeight;this.setSize(t+this.middleSliceCropWidth,n)},n.setSliceCrop=function(e,t,n,r,a){var i=e.scaleX,s=e.scaleY;e.setCrop(t/i,n/s,r/i,a/s)},t}(Phaser.GameObjects.Container),os=ss,cs=n(439),us=n.n(cs),ls=0,hs=0,ds=!1;function ps(e){var t;window.game.analytics.event(an._.MATCH_START,{game_mode:GameCore.Utils.String.toUpperCamelCase(Or),level:e,level_name:"level_"+us()(t=GameCore.Utils.Number).call(t,e,6)}),ls=window.performance.now()}function fs(e){var t,n=(window.performance.now()-ls)/1e3;window.game.analytics.event(an._.MATCH_END,{game_mode:GameCore.Utils.String.toUpperCamelCase(Or),level:e,level_name:"level_"+us()(t=GameCore.Utils.Number).call(t,e,6),time_played:n}),ls=0}function ms(e){var t,n=window.game.player.getCustomData("items");window.game.analytics.event(an._.LEVEL_START,{level:e,score:window.game.player.getBestScore(),shuffle:n.shuffle,undo:n.undo,magic_wand:n.magicWand,level_name:"level_"+us()(t=GameCore.Utils.Number).call(t,e,6),is_default_generation:!window.game.level.isLevelDynamic(e),coins:window.game.player.getCustomData("coins")}),hs=window.performance.now()}function vs(e){var t;window.game.analytics.event(an._.LEVEL_STOP,{level:e,score:window.game.player.getBestScore(),level_name:"level_"+us()(t=GameCore.Utils.Number).call(t,e,6),is_default_generation:!window.game.level.isLevelDynamic(e)}),hs=0}function gs(e,t,n){var r,a=(window.performance.now()-hs)/1e3;window.game.analytics.event(an._.LEVEL_END,{level:e,score:window.game.player.getBestScore(),level_name:"level_"+us()(r=GameCore.Utils.Number).call(r,e,6),success:t,time_played:a,is_default_generation:!window.game.level.isLevelDynamic(e),coins:window.game.player.getCustomData("coins"),moves:n}),hs=0}function ys(){ds||(ds=!0,window.game.analytics.event(an._.TUTORIAL_BEGIN))}function ws(){ds&&(ds=!1,window.game.analytics.event(an._.TUTORIAL_COMPLETE))}function Ss(e){var t=window.game.player.getCustomData("items");window.game.analytics.event(an._.USE_ITEM,{item:e,remaining:t[e]})}function Es(e,t,n){window.game.analytics.event(an._.SHOW_ADS,{show_by:e,level:t,ad_type:n})}var bs,ks=GameCore.Configs.Network,xs=function(){var e=(0,s.Z)(h().mark((function e(t){var n,r,a,i,s,o;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=window,r=n.game,a=r.audio,i=r.globalScene,e.prev=2,i.screen.open(en.o4.NOTIFY_SCREEN,{message:"Loading ads...",duration:0,loading:!0}),a.pauseMusic(),a.muteAll(),e.next=8,new(u())((function(e,t){var n;null==(n=bs)||n.remove(),bs=i.time.delayedCall(ks.Timeout,t),i.ads.getAdStatus(GameCore.Ads.Types.REWARDED)===GameCore.Ads.Status.LOADING?i.ads.events.once(GameCore.Ads.Events.LOADED,e):i.ads.preloadRewardedVideoAsync().then(e).catch(t)}));case 8:return s=r.level.getLevel(),Es(t,s,"rewarded"),e.next=12,i.ads.showRewardedVideoAsync();case 12:return e.next=14,i.screen.closeAsync(en.o4.NOTIFY_SCREEN);case 14:return e.abrupt("return",!0);case 17:if(e.prev=17,e.t0=e.catch(2),!(e.t0 instanceof Object&&GameCore.Utils.Object.hasOwn(e.t0,"code"))){e.next=23;break}if("USER_INPUT"!==e.t0.code){e.next=23;break}return Ts(),e.abrupt("return",!1);case 23:return Cs(),e.abrupt("return",!1);case 25:return e.prev=25,null==(o=bs)||o.destroy(),a.unmuteAll(),a.playMusic(),i.ads.preloadRewardedVideoAsync().catch((function(e){})),e.finish(25);case 31:case"end":return e.stop()}}),e,null,[[2,17,25,31]])})));return function(t){return e.apply(this,arguments)}}(),As=function(){var e=(0,s.Z)(h().mark((function e(t){var n,r,a,i,s,o;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=window,r=n.game,a=r.globalScene,i=r.audio,s=r.ads,e.prev=2,s.canbeShowInterstitialAd()){e.next=5;break}return e.abrupt("return",!1);case 5:return i.pauseMusic(),i.muteAll(),a.screen.open(en.o4.NOTIFY_SCREEN,{message:"Loading ads...",loading:!0}),o=r.level.getLevel(),Es(t,o,"interstitial"),e.next=12,s.showInterstitialAdAsync();case 12:return e.abrupt("return",!0);case 15:return e.prev=15,e.t0=e.catch(2),e.abrupt("return",!1);case 18:return e.prev=18,e.next=21,a.screen.closeAsync(en.o4.NOTIFY_SCREEN);case 21:return s.preloadInterstitialAdAsync().catch((function(e){})),window.focus(),i.unmuteAll(),i.playMusic(),e.finish(18);case 26:case"end":return e.stop()}}),e,null,[[2,15,18,26]])})));return function(t){return e.apply(this,arguments)}}(),Cs=function(e){e&&e.name!==en.o4.NOTIFY_SCREEN||window.game.globalScene.screen.open(en.o4.NOTIFY_SCREEN,{message:"No ads to display!",duration:2e3,loading:!1})},Ts=function(){window.game.globalScene.screen.open(en.o4.NOTIFY_SCREEN,{message:"Sorry, No Rewards!\nYou have cancelled the ad!",duration:3e3,loading:!1})},Ps=n(588),Is={NMM_HOME:"NMM_HOME",NMM_REPLAY:"NMM_REPLAY",NMM_ONE_MORE_CHANCE:"NMM_ONE_MORE_CHANCE",DB_SETTING:"DB_SETTING",DB_THEME:"DB_THEME",DB_MISSION:"DB_MISSION",DB_LEVEL:"DB_LEVEL",DB_GIFT:"DB_GIFT",DB_LEADERBOARD:"DB_LEADERBOARD",DB_SHOP:"DB_SHOP",ITEM_UNDO:"ITEM_UNDO",ITEM_MAGIC_WAND:"ITEM_MAGIC_WAND",ITEM_SHUFFLE:"ITEM_SHUFFLE",RW_WATCH_AD:"RW_WATCH_AD",RW_CLOSE:"RW_CLOSE",RW_BG:"RW_BG",RESULT_LEVEL:"RESULT_LEVEL",RESULT_COLLECT:"RESULT_COLLECT",SETTINGS_MUSIC:"SETTINGS_MUSIC",SETTINGS_SOUND:"SETTINGS_SOUND",SETTINGS_VIBRATION:"SETTINGS_VIBRATION",SETTINGS_INVITE:"SETTINGS_INVITE",SETTINGS_BG:"SETTINGS_BG",SETTINGS_CLOSE:"SETTINGS_CLOSE",SHOP_ADS:"SHOP_ADS",SHOP_IAP:"SHOP_IAP",TUT_OK:"TUT_OK",EXTRA_SLOT_BTN:"EXTRA_SLOT_BTN",GP_BACK:"GP_BACK",GP_SETTINGS:"GP_SETTINGS",SHOP_BACK:"SHOP_BACK",MAP_BACK:"MAP_BACK"},Os=n(117),Ms=n.n(Os),_s=ca.Z.GAMEPLAY,Ls=_s.KEY,Rs=_s.FRAME,Bs=function(e){function t(t){var n;return(n=e.call(this,t,Ls,Rs.BLANK,40,30)||this).plusIcon=void 0,n.originalPlusIconScale=void 0,n.scaleDownTween=void 0,n.button.setAlpha(0),n.createPlusIcon(),n.setName(Is.EXTRA_SLOT_BTN),n}(0,o.Z)(t,e);var n=t.prototype;return n.init=function(){var e;null==(e=this.scaleDownTween)||e.remove(),this.plusIcon.setScale(this.originalPlusIconScale)},n.playScaleDownIconAnimation=function(){var e=(0,s.Z)(h().mark((function e(){var t;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return null==(t=this.scaleDownTween)||t.remove(),this.plusIcon.setScale(this.originalPlusIconScale),this.scaleDownTween=this.scene.tweens.add({targets:this.plusIcon,duration:500,props:{scale:{value:0,ease:Ms()(.15,-.24,.66,-.56)}}}),e.abrupt("return",this.scaleDownTween.waitForCompletion());case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.createPlusIcon=function(){var e=this.scene.make.image({key:Ls,frame:Rs.RACK_PLUS});e.setSizeBasedOnDpr(),this.add(e),this.plusIcon=e,this.originalPlusIconScale=e.scale},t}(Ps.Z),Ds=Bs,Ns=.85,Gs=function(e){function t(t){var n;return(n=e.call(this,t)||this).scene=void 0,n.slotImages=[],n.plusButton=void 0,n.adIcon=void 0,n.isLastSlotUnlocked=!1,n.isTryingToUnlockLastSlot=!1,n.background=void 0,n.handlePlusButtonClick=function(){n.tryToUnlockLastSlot()},n.scene=t,n.setSize(375,52),n.createBackground(),n.createSlots(),n.createPlusButton(),n.createAdIcon(),n}(0,o.Z)(t,e);var n=t.prototype;return n.init=function(){this.isLastSlotUnlocked=!1,this.plusButton.init(),this.plusButton.revive(),this.adIcon.revive(),this.isTryingToUnlockLastSlot=!1},n.createBackground=function(){var e=new os(this.scene);this.add(e),e.setScale(Ns),this.background=e},n.createSlots=function(){var e=t.SLOT_DISTANCE,n=t.SLOT_COUNT;this.slotImages=x()({length:n},(function(t,r){return{x:e*(r-(n-1)/2)-.4,y:-7.5}}))},n.createPlusButton=function(){var e=new Ds(this.scene);this.add(e);var t=this.slotImages[this.slotImages.length-1].x;e.setPosition(t,-3),e.onClick=this.handlePlusButtonClick,this.plusButton=e},n.createAdIcon=function(){var e=ca.Z.GAMEPLAY,t=e.KEY,n=e.FRAME,r=this.scene.make.image({key:t,frame:n.RACK_ICON_AD});r.setSizeBasedOnDpr(),this.add(r),Phaser.Display.Align.In.BottomRight(r,this,-7,-7),this.adIcon=r},n.playAnimationUnlockExtraSlot=function(){var e=(0,s.Z)(h().mark((function e(){var t,n,r;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.plusButton.getWorldPosition(),n=t.x,r=t.y,this.scene.gameplayParticleHandler.starMoveToCenter.createPath(n,r),this.scene.gameplayParticleHandler.starMoveToCenter.playAnimationMoveToCenter(),e.next=5,this.plusButton.playScaleDownIconAnimation();case 5:return this.scene.audio.playSound(tn.Z.MATCH_1,{volume:2}),e.next=8,this.scene.gameManager.rack.playTweenScaleUp();case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.tryToUnlockLastSlot=function(){var e=(0,s.Z)(h().mark((function e(){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.isLastSlotUnlocked){e.next=2;break}return e.abrupt("return");case 2:if(!this.isTryingToUnlockLastSlot){e.next=4;break}return e.abrupt("return");case 4:return this.isTryingToUnlockLastSlot=!0,this.scene.setGlobalSceneInputEnabled(!1),e.next=8,this.scene.gameManager.rack.playScaleToNormalAnimation();case 8:return e.next=10,xs(this.name);case 10:if(!e.sent){e.next=19;break}return this.isLastSlotUnlocked=!0,this.scene.gameManager.tryWarningRackIsAlmostFull(),this.adIcon.kill(),this.scene.audio.playSound(tn.Z.EXTRA_SLOT,{volume:2}),e.next=18,this.playAnimationUnlockExtraSlot();case 18:this.plusButton.kill();case 19:this.scene.setGlobalSceneInputEnabled(!0),this.isTryingToUnlockLastSlot=!1;case 21:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.getBackgroundWidth=function(){return this.background.displayWidth},(0,le.Z)(t,[{key:"availableSlotCount",get:function(){var e=t.SLOT_COUNT;return this.isLastSlotUnlocked?e:e-1}}]),t}(Phaser.GameObjects.Container);Gs.SLOT_DISTANCE=ts.SLOT_DISTANCE*Ns,Gs.SLOT_COUNT=8,Gs.SLOT_SIZE=ts.SLOT_SIZE*Ns;var Fs=Gs,Zs=[tn.Z.MATCH_1,tn.Z.MATCH_2,tn.Z.MATCH_3,tn.Z.MATCH_4,tn.Z.MATCH_5],Us=-1,Hs=function(){function e(e){this.parent=void 0,this.removed=!1,this.parent=e}var t=e.prototype;return t.remove=function(){this.removed=!0},t.playAnimation=function(){var e=(0,s.Z)(h().mark((function e(t){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.playFadeOutAnimation(t);case 2:this.remove();case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),t.playFadeOutAnimation=function(){var e=(0,s.Z)(h().mark((function e(t){var n,r=this;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.removed){e.next=2;break}return e.abrupt("return");case 2:return Us=(Us+1)%2,n=Ne()(t).call(t,function(){var e=(0,s.Z)(h().mark((function e(t,n){var a,i,s;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.parentContainer.bringToTop(t),n&&r.parent.segment.scene.audio.playSound(Zs[Us+n]),e.next=4,t.runAnimationDestroy(100*n);case 4:t.kill(),a=t.getWorldPosition(),i=a.x,s=a.y,r.parent.segment.scene.gameplayParticleHandler.tileMatchVFX.show(i,s);case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),e.next=6,u().all(n);case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),e}(),Ws=Hs,Vs=function(){function e(e){this.parent=void 0,this.tweens=[],this.removed=!1,this.parent=e}var t=e.prototype;return t.remove=function(){this.removed=!0,this.tweens.forEach((function(e){return e.remove()})),this.tweens=[]},t.playAnimation=function(){var e=(0,s.Z)(h().mark((function e(t){var n,r,a,i,s,o,c;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t[0],r=b()(t).call(t,1),a=n.x,n.parentContainer.bringToTop(n),e.next=5,u().all([this.playJumpingAnimation(n),this.playSlidingAnimation(r,a)]);case 5:return this.parent.segment.scene.audio.playSound(tn.Z.MATCH_1),this.parent.segment.scene.audio.playSound(tn.Z.MATCH_2),this.parent.segment.scene.audio.playSound(tn.Z.MATCH_3),this.parent.segment.scene.audio.playSound(tn.Z.MATCH_4),this.parent.segment.scene.audio.playSound(tn.Z.MATCH_5),e.next=12,this.playFadeOutAnimation(t);case 12:for(this.remove(),i=0;i<t.length;i++)s=t[i].getWorldPosition(),o=s.x,c=s.y,this.parent.segment.scene.gameplayParticleHandler.tileMatchVFX.show(o,c);case 14:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),t.playJumpingAnimation=function(){var e=(0,s.Z)(h().mark((function e(t){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",u().all([this.playRotatingAnimation(t),this.playVerticalMovingAnimation(t)]));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),t.playRotatingAnimation=function(){var e=(0,s.Z)(h().mark((function e(t){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.playTweenAsync({targets:t,duration:378,props:{angle:360},ease:Phaser.Math.Easing.Quadratic.Out});case 2:t.setAngle(0);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),t.playVerticalMovingAnimation=function(){var e=(0,s.Z)(h().mark((function e(t){var n;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.y,e.next=3,this.playMovingUpAnimation(t);case 3:return e.next=5,this.playMovingDownAnimation(t,n);case 5:na(50);case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),t.playMovingUpAnimation=function(){var e=(0,s.Z)(h().mark((function e(t){var n;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=3*t.displayHeight,e.abrupt("return",this.playTweenAsync({targets:t,ease:Phaser.Math.Easing.Quadratic.Out,duration:336,props:{y:-n}}));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),t.playMovingDownAnimation=function(){var e=(0,s.Z)(h().mark((function e(t,n){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.playTweenAsync({targets:t,ease:Phaser.Math.Easing.Quadratic.In,duration:260,props:{y:n}}));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}(),t.playSlidingAnimation=function(){var e=(0,s.Z)(h().mark((function e(t,n){var r,a,i,s,o=this;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Ne()(t).call(t,(function(e,t){var n=1===t?0:39,r=221-n;return o.playMovingRightAnimation(e,n,r)})),e.next=3,u().all(O()(r=[]).call(r,i,[this.playMultipleScaleXIncreasingAnimation(t)]));case 3:return s=Ne()(t).call(t,(function(e,t){var r=39*t,a=467-r;return o.playMovingLeftAnimation(e,r,a,n)})),e.next=6,u().all(O()(a=[]).call(a,s,[this.playMultipleScaleXDecreasingAnimation(t)]));case 6:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}(),t.playMultipleScaleXIncreasingAnimation=function(){var e=(0,s.Z)(h().mark((function e(t){var n=this;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",u().all(Ne()(t).call(t,(function(e){return n.playScaleXIncreasingAnimation(e)}))));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),t.playScaleXIncreasingAnimation=function(){var e=(0,s.Z)(h().mark((function e(t){var n;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.scaleX,e.abrupt("return",this.playTweenAsync({targets:t,duration:144,props:{scaleX:1.2*n}}));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),t.playMultipleScaleXDecreasingAnimation=function(){var e=(0,s.Z)(h().mark((function e(t){var n=this;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",u().all(Ne()(t).call(t,(function(e){return n.playScaleXDecreasingAnimation(e)}))));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),t.playScaleXDecreasingAnimation=function(){var e=(0,s.Z)(h().mark((function e(t){var n;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.scaleX,e.abrupt("return",this.playTweenAsync({targets:t,duration:84,props:{scaleX:n/1.2}}));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),t.playMovingRightAnimation=function(){var e=(0,s.Z)(h().mark((function e(t,n,r){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.playTweenAsync({targets:t,delay:n,duration:r,ease:Phaser.Math.Easing.Cubic.Out,props:{x:t.x+30}}));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}(),t.playMovingLeftAnimation=function(){var e=(0,s.Z)(h().mark((function e(t,n,r,a){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.playTweenAsync({targets:t,ease:Phaser.Math.Easing.Cubic.Out,delay:n,duration:r,props:{x:a}}));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n,r,a){return e.apply(this,arguments)}}(),t.playFadeOutAnimation=function(){var e=(0,s.Z)(h().mark((function e(t){var n;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.removed){e.next=2;break}return e.abrupt("return");case 2:return n=Ne()(t).call(t,(function(e){return e.runAnimationDestroy(0)})),e.next=5,u().all(n);case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),t.playTweenAsync=function(){var e=(0,s.Z)(h().mark((function e(t){var n=this;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.removed){e.next=2;break}return e.abrupt("return");case 2:return e.abrupt("return",new(u())((function(e){var r=n.parent.segment.scene.add.tween((0,i.Z)({},t,{onComplete:function(){e()}}));n.tweens.push(r)})));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),e}(),Ys=Vs,zs=function(){function e(e){this.segment=void 0,this.normalSubAnimator=void 0,this.specialSubAnimator=void 0,this.segment=e,this.normalSubAnimator=new Ws(this),this.specialSubAnimator=new Ys(this)}var t=e.prototype;return t.playNormalAnimation=function(){var e=(0,s.Z)(h().mark((function e(){var t;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.getTileViews(),e.abrupt("return",this.normalSubAnimator.playAnimation(t));case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),t.playSpecialAnimation=function(){var e=(0,s.Z)(h().mark((function e(){var t;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.getTileViews(),e.abrupt("return",this.specialSubAnimator.playAnimation(t));case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),t.remove=function(){this.normalSubAnimator.remove(),this.specialSubAnimator.remove()},t.getTileViews=function(){var e;return Ne()(e=this.segment.tileViewRackPayloads).call(e,(function(e){return e.tileView}))},e}(),Ks=zs,js=function(){function e(e){this.segment=void 0,this.segment=e}var t=e.prototype;return t.addSlideFallTween=function(e){var t=this,n=e.targets,r=e.props,a=e.onComplete,i=[30,-3,3,0];n.x<r.x&&(i=[-30,3,-3,0]);var o=this.segment.scene.tweens.createTimeline();return o.add({targets:n,duration:200,props:{x:r.x,y:r.y,scale:r.scale},ease:Phaser.Math.Easing.Quartic.Out}),o.on(Phaser.Tweens.Events.TIMELINE_START,(0,s.Z)(h().mark((function e(){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.segment.scene.tweens.add({targets:n,duration:50,angle:{getEnd:function(){return i[0]}},ease:Phaser.Math.Easing.Quartic.Out}).waitForCompletion();case 2:return e.next=4,t.segment.scene.tweens.add({targets:n,duration:150,angle:{getEnd:function(){return i[1]}},ease:Phaser.Math.Easing.Quartic.Out}).waitForCompletion();case 4:case"end":return e.stop()}}),e)})))),o.on(Phaser.Tweens.Events.TIMELINE_COMPLETE,(function(){a(),t.segment.scene.tweens.add({targets:n,duration:30,props:{angle:i[2]}}),t.segment.scene.tweens.add({targets:n,delay:30,duration:30,props:{angle:i[3]}})})),o.play(),o},t.addNormalFallTween=function(e){return e.targets.tileModel.clusterId===aa?this.playReturnClusterCurveFallTween(e):this.playNormalClusterFallTween(e)},t.playNormalClusterFallTween=function(e){var t=this,n=e.targets,r=e.props,a=e.onComplete;e.targets.swapPropsWithChild();var i=140*Math.abs(1.5-e.targets.scale)/.5,o=Phaser.Math.Clamp(i,0,140),c=[30,-3,3,0];n.x<r.x&&(c=[-30,3,-3,0]);var u=this.segment.scene.tweens.createTimeline();return u.add({targets:n,duration:o,props:{scaleX:1.5,scaleY:1.5},ease:Phaser.Math.Easing.Cubic.Out,onComplete:function(){var e=(0,s.Z)(h().mark((function e(){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.segment.scene.tweens.add({targets:n,duration:50,angle:{getEnd:function(){return c[0]}},ease:Phaser.Math.Easing.Quartic.Out}).waitForCompletion();case 2:return e.next=4,t.segment.scene.tweens.add({targets:n,duration:150,angle:{getEnd:function(){return c[1]}},ease:Phaser.Math.Easing.Quartic.Out}).waitForCompletion();case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()}),u.add({targets:n,duration:200,props:{x:r.x,y:r.y,scale:r.scale},ease:Phaser.Math.Easing.Quartic.Out}),u.on(Phaser.Tweens.Events.TIMELINE_COMPLETE,(function(){a(),n.resetHitAreaScale(),t.segment.scene.tweens.add({targets:n,duration:30,props:{angle:c[2]}}),t.segment.scene.tweens.add({targets:n,delay:30,duration:30,props:{angle:c[3]}})})),u.play(),u},t.playReturnClusterCurveFallTween=function(e){var t=e.targets,n=e.props,r=e.onComplete;return e.targets.swapPropsWithChild(),this.segment.scene.add.tween({targets:t,duration:250,props:{x:{from:t.x,to:n.x,ease:Phaser.Math.Easing.Quartic.In},y:{from:t.y,to:n.y,ease:Phaser.Math.Easing.Back.In},scale:n.scale,angle:0},onComplete:function(){r(),t.resetHitAreaScale()}})},e}(),Xs=js,qs=function(e){function t(t,n){var r;return(r=e.call(this)||this).gameManager=void 0,r.icon=void 0,r.tileViewRackPayloads=[],r.match3State="none",r.onCompleteAddTileView=void 0,r.match3Animator=new Ks((0,jr.Z)(r)),r.fallAnimator=new Xs((0,jr.Z)(r)),r.gameManager=t,r.icon=n,r}(0,o.Z)(t,e);var n=t.prototype;return n.isEmpty=function(){return 0===this.tileViewRackPayloads.length},n.isPlayingTweens=function(){return!!this.isMatching3()||this.tileViewRackPayloads.some((function(e){var t=e.moveData;return"fall"===(null==t?void 0:t.type)||"slide"===(null==t?void 0:t.type)}))},n.isMatching3=function(){return"playing"===this.match3State||"ready"===this.match3State},n.canAddTileView=function(e){var t=e.tileModel;return!!t&&(this.icon===t.icon&&"none"===this.match3State)},n.addTileView=function(e,t,n){var r=this.tileViewRackPayloads,a={tileView:e,slotIdx:t,isFallCompleted:!1};r.push(a),3===r.length&&(this.match3State="ready"),this.scene.audio.playSound(tn.Z.TILE_TAP),this.onCompleteAddTileView=n,this.updateNewFallData(!1,a)},n.getRightMostPayload=function(){var e=this.tileViewRackPayloads;if(0!==e.length)return e[e.length-1]},n.getLeftMostPayload=function(){return this.tileViewRackPayloads[0]},n.updateNewFallData=function(e,t){var n,r=this,a=t.tileView,i=t.slotIdx,s=this.gameManager.rack;null==(n=t.moveData)||n.tween.stop(),delete t.moveData;var o=s.getSlotPosition(i),c={targets:a,props:{x:o.x,y:o.y,scale:ao.getCurTileScale()},onComplete:function(){delete t.moveData,t.isFallCompleted=!0,null==r.onCompleteAddTileView||r.onCompleteAddTileView(r)}},u=e?this.fallAnimator.addSlideFallTween(c):this.fallAnimator.addNormalFallTween(c);t.moveData={tween:u,targetSlotIdx:i,type:"fall"}},n.getCompletedFallCount=function(){var e=0;return this.tileViewRackPayloads.forEach((function(t){t.isFallCompleted&&e++})),e},n.canMatch3AfterFallCompleted=function(){return 3===this.getCompletedFallCount()},n.slideHorizontally=function(e){var t,n=this;0!==e&&this.tileViewRackPayloads.forEach((function(r,a){var i,s,o,c;if("slide"===(null==(i=r.moveData)?void 0:i.type)){var u=r.moveData,l=u.tween,h=u.targetSlotIdx;l.stop(),o=Math.max(h+e,0)}else o=Math.max(r.slotIdx+e,0);if(0===a?(c=o,t=o):c=t+a,"fall"===(null==(s=r.moveData)?void 0:s.type))return r.slotIdx=c,void n.updateNewFallData(!0,r);n.updateNewSlideData(r,c)}))},n.updateNewSlideData=function(e,t){var n,r=this,a=e.tileView;null==(n=e.moveData)||n.tween.stop(),delete e.moveData;var i=this.gameManager.rack.getSlotPosition(t),s=this.scene.tweens.add({targets:a,duration:300,ease:Phaser.Math.Easing.Quadratic.Out,props:{x:i.x,y:i.y},onComplete:function(){e.slotIdx=t,delete e.moveData,r.emit(Ri.SLIDE_COMPLETED)}});e.moveData={tween:s,targetSlotIdx:t,type:"slide"}},n.clear=function(){var e=this;this.tileViewRackPayloads.forEach((function(t){var n,r=t.tileView,a=t.moveData;null==a||null==(n=a.tween)||n.stop(),r.setMatched3(),e.scene.gameManager.tilePool.hideTileView(r)})),this.tileViewRackPayloads=[]},n.playNormalMatch3Animation=function(){return this.match3Animator.playNormalAnimation()},n.playSpecialMatch3Animation=function(){var e=(0,s.Z)(h().mark((function e(){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.match3Animator.playSpecialAnimation());case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.waitForSlidingCompleted=function(){var e=(0,s.Z)(h().mark((function e(){var t,n,r=this;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Ne()(t=this.tileViewRackPayloads).call(t,(function(e){var t=e.moveData;return"slide"!==(null==t?void 0:t.type)?u().resolve():new(u())((function(e){r.once(Ri.SLIDE_COMPLETED,e)}))})),e.abrupt("return",u().all(n));case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.removeTileViewsFromPayloads=function(e){var t;this.tileViewRackPayloads=Be()(t=this.tileViewRackPayloads).call(t,(function(t){var n=t.tileView;return!y()(e).call(e,n)}))},n.remove=function(){var e=this.scene.gameManager.tilePool;this.match3Animator.remove(),this.tileViewRackPayloads.forEach((function(t){var n=t.tileView,r=t.moveData;null==r||r.tween.stop(),e.hideTileView(n)})),this.tileViewRackPayloads=[],this.destroy()},(0,le.Z)(t,[{key:"scene",get:function(){return this.gameManager.scene}}]),t}(Phaser.Events.EventEmitter),Qs=qs,Js=function(){function e(e){this.gameManager=void 0,this.segments=[],this.isRealigning=!1,this.gameManager=e}var t=e.prototype;return t.init=function(){this.segments.forEach((function(e){e.remove()})),this.segments=[],this.isRealigning=!1},t.addTileView=function(e){var t=e.tileModel;if(t){e.removePointerEventListeners();for(var n=t.icon,r=0;r<this.segments.length;r++){var a,i=this.segments[r];if(i.canAddTileView(e))return this.addTileViewToSegment(e,i),void b()(a=this.segments).call(a,r+1).forEach((function(e){e.slideHorizontally(1)}))}var s=new Qs(this.gameManager,n);this.segments.push(s),this.addTileViewToSegment(e,s)}},t.addTileViewToSegment=function(e,t){var n=this.getNewSlotIdx(t);t.addTileView(e,n,this.handleNewSegmentFallCompleted.bind(this)),this.gameManager.canLose()&&this.gameManager.enableBoardTileViewClick(!1)},t.getNewSlotIdx=function(e){var t=e.getRightMostPayload();if(t)return this.getCorrectSlotIdx(t)+1;var n=this.getLeftSegment(e);if(!n)return 0;var r=n.getRightMostPayload();return r?this.getCorrectSlotIdx(r)+1:0},t.getCorrectSlotIdx=function(e){var t=e.slotIdx,n=e.moveData;return n?n.targetSlotIdx:t},t.removeTileViews=function(e){var t;0!==e.length&&(this.segments.forEach((function(t){t.removeTileViewsFromPayloads(e)})),this.segments=Be()(t=this.segments).call(t,(function(e){return!e.isEmpty()})))},t.isPlayingTweens=function(){return!!this.isRealigning||this.segments.some((function(e){return e.isPlayingTweens()}))},t.isMatching3=function(){return this.segments.some((function(e){return e.isMatching3()}))},t.playRealignAnimationAsync=function(){var e=(0,s.Z)(h().mark((function e(){var t,n,r=this;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.isRealigning=!0,t=0,n=[],this.segments.forEach((function(e){e.tileViewRackPayloads.forEach((function(e){var a,i=r.gameManager.rack.getSlotPosition(t);null==(a=e.moveData)||null==(a=a.tween)||a.stop(),delete e.moveData,e.slotIdx=t;var s=r.moveTileViewToPosition(e.tileView,i);n.push(s),t++}))})),e.next=6,u().all(n);case 6:this.isRealigning=!1;case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),t.moveTileViewToPosition=function(){var e=(0,s.Z)(h().mark((function e(t,n){var r;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=this.gameManager.scene.add.tween({targets:t,duration:200,ease:Phaser.Math.Easing.Quadratic.InOut,props:{x:n.x,y:n.y}}),e.abrupt("return",r.waitForCompletion());case 2:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}(),t.getLeftSegment=function(e){var t,n=Ht()(t=this.segments).call(t,e);if(-1!==n)return this.segments[n-1]},t.getRightSegments=function(e){var t,n,r=Ht()(t=this.segments).call(t,e);return-1===r?[]:b()(n=this.segments).call(n,r+1)},t.removeSegment=function(e){var t,n,r=Ht()(t=this.segments).call(t,e);-1!==r&&Qr()(n=this.segments).call(n,r,1)},t.setRackJustMatched3=function(e){this.gameManager.rack.justMatched3=e},t.handleNewSegmentFallCompleted=function(){var e=(0,s.Z)(h().mark((function e(t){var n,r,a,i,s;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.canMatch3AfterFallCompleted()){e.next=6;break}return this.setRackJustMatched3(!1),this.gameManager.updateFooterItems(),this.gameManager.tryEndGame(),this.gameManager.tryWarningRackIsAlmostFull(),e.abrupt("return");case 6:if(this.setRackJustMatched3(!0),this.gameManager.increaseMatched3TileViewCount(3),r=0===this.gameManager.getRemainingCountToWin(),t.match3State="playing",!r){e.next=17;break}return e.next=13,this.prepareSpecialMatch3Animation(t);case 13:return e.next=15,t.playSpecialMatch3Animation();case 15:e.next=20;break;case 17:return na(50),e.next=20,t.playNormalMatch3Animation();case 20:a=Ne()(n=t.tileViewRackPayloads).call(n,(function(e){return e.tileView})),t.clear(),t.match3State="done",this.gameManager.removeTileViewsFromMoveStack(a),this.gameManager.updateFooterItems(),this.gameManager.tryEndGame(),i=this.getRightSegments(t),s=this.getLeftSegment(t),this.removeSegment(t),this.slideSegmentsToTheLeft(s,i),t.emit(Ri.MATCH_3_COMPLETED),a.forEach((function(e){e.emit(Ri.MATCH_3_COMPLETED)}));case 32:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),t.prepareSpecialMatch3Animation=function(){var e=(0,s.Z)(h().mark((function e(t){var n;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==(n=this.getLeftSegment(t))||!n.isMatching3()){e.next=4;break}return e.next=4,new(u())((function(e){n.once(Ri.MATCH_3_COMPLETED,e)}));case 4:return e.next=6,Oa(this.gameManager.scene,0);case 6:return e.next=8,t.waitForSlidingCompleted();case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),t.slideSegmentsToTheLeft=function(e,t){if(0!==t.length){var n=t[0],r=-(this.getEndSlotIdx(n,"leftEnd")-this.getEndSlotIdx(e,"rightEnd")-1);t.forEach((function(e){e.slideHorizontally(r)}))}},t.getEndSlotIdx=function(e,t){if(!e)return-1;var n="leftEnd"===t?e.getLeftMostPayload():e.getRightMostPayload();return n?this.getCorrectSlotIdx(n):-1},(0,le.Z)(e,[{key:"tileViews",get:function(){var e=[];return this.segments.forEach((function(t){t.tileViewRackPayloads.forEach((function(t){var n=t.tileView;e.push(n)}))})),e}},{key:"tileViewCount",get:function(){var e=0;return this.segments.forEach((function(t){var n=t.tileViewRackPayloads;e+=n.length})),e}}]),e}(),$s=Js,eo=Math.abs(1.05-1)/300,to=function(){function e(e){var t=this;this.rack=void 0,this.timeEvent=void 0,this.scaleTween=void 0,this.timeEventCallback=function(){var e;null==(e=t.scaleTween)||e.remove(),t.scaleTween=t.rack.scene.add.tween({targets:t.rack,duration:300,ease:Phaser.Math.Easing.Cubic.Out,props:{scale:{from:1,to:1.05}},yoyo:!0,repeat:1})},this.rack=e}var t=e.prototype;return t.playAlmostFullAnimator=function(){var e,t;null==(e=this.timeEvent)||e.remove(),null==(t=this.scaleTween)||t.remove(),this.timeEvent=this.rack.scene.time.addEvent({delay:3200,loop:!0,callback:this.timeEventCallback})},t.playScaleToNormalAnimation=function(){var e=(0,s.Z)(h().mark((function e(){var t,n,r;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==(t=this.timeEvent)||t.remove(),null==(n=this.scaleTween)||n.remove(),1!==this.rack.scale){e.next=4;break}return e.abrupt("return");case 4:return r=Phaser.Math.Clamp(Math.abs(this.rack.scale-1)/eo,0,100),this.scaleTween=this.rack.scene.add.tween({targets:this.rack,duration:r,ease:Phaser.Math.Easing.Cubic.Out,props:{scale:1}}),e.abrupt("return",this.scaleTween.waitForCompletion());case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),t.destroy=function(){var e,t;null==(e=this.timeEvent)||e.remove(),null==(t=this.scaleTween)||t.remove(),this.rack.setScale(1)},e}(),no=to,ro=function(e){function t(t){var n;return(n=e.call(this,t)||this).scene=void 0,n.normalSlotGroup=void 0,n.extraSlotGroup=void 0,n.segmentManager=void 0,n.justMatched3=!1,n.slotGroupType=void 0,n.switchToExtraSlotGroupTween=void 0,n.almostFullAnimator=new no((0,jr.Z)(n)),n.scene=t,n.setSize(375,52),n.createNormalSlotGroup(),n.createExtraRackSlotGroup(),n.createSegmentManager(),n.setSlotGroupType("normal"),n}(0,o.Z)(t,e);var n=t.prototype;return n.prepareFadeIn=function(){this.normalSlotGroup.setAlpha(0),this.extraSlotGroup.setAlpha(0),this.tileViews.forEach((function(e){e.revive(),e.setScale(0)})),this.stopAlmostFullAnimation()},n.fadeIn=function(){var e=(0,s.Z)(h().mark((function e(){var n;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=[ya([this.normalSlotGroup,this.extraSlotGroup],500,300)],this.isEmpty()||n.push(Ca(this.tileViews,150,1200,t.getCurTileScale())),e.abrupt("return",u().all(n));case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.prepareFadeOut=function(){this.tileViews.forEach((function(e){e.kill()})),this.stopAlmostFullAnimation()},n.fadeOut=function(){var e=(0,s.Z)(h().mark((function e(){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Sa([this.normalSlotGroup,this.extraSlotGroup],400,0));case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),t.getCurTileScale=function(){return this.slotSize/za.TILE_SIZE},n.isPlayingLogicalTweens=function(){var e;return!!this.segmentManager.isPlayingTweens()||!(null==(e=this.switchToExtraSlotGroupTween)||!e.isPlaying())},n.isMatching3=function(){return this.segmentManager.isMatching3()},n.createNormalSlotGroup=function(){var e=new ts(this.scene);e.kill(),this.add(e),this.normalSlotGroup=e},n.createExtraRackSlotGroup=function(){var e=new Fs(this.scene);e.kill(),this.add(e),this.extraSlotGroup=e},n.createSegmentManager=function(){this.segmentManager=new $s(this.scene.gameManager)},n.setSlotGroupType=function(){var e=(0,s.Z)(h().mark((function e(t){var n;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.slotGroupType!==t){e.next=2;break}return e.abrupt("return");case 2:return n=this.slotGroupType,this.slotGroupType=t,e.abrupt("return",this.handleSlotGroupTypeChange(n,t));case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),n.handleSlotGroupTypeChange=function(){var e=(0,s.Z)(h().mark((function e(n,r){var a,i,s,o=this;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:null==(a=this.switchToExtraSlotGroupTween)||a.remove(),i=!1,e.t0=r,e.next="normal"===e.t0?5:"extra"===e.t0?11:17;break;case 5:return this.normalSlotGroup.revive(),this.extraSlotGroup.kill(),this.normalSlotGroup.setY(2),this.extraSlotGroup.setY(5),t.slotSize=ts.SLOT_SIZE,e.abrupt("break",17);case 11:return this.extraSlotGroup.revive(),this.normalSlotGroup.kill(),this.normalSlotGroup.setY(2),t.slotSize=Fs.SLOT_SIZE,i=!0,e.abrupt("break",17);case 17:if(s=t.getCurTileScale(),this.tileViews.forEach((function(e,t){o.updateTileViewSlotIdx(e,t),e.setTileViewScale(s)})),!i){e.next=21;break}return e.abrupt("return",this.playSwitchSlotGroupTween());case 21:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}(),n.playSwitchSlotGroupTween=function(){var e,t,n=this;null==(e=this.switchToExtraSlotGroupTween)||e.remove();var r=O()(t=[this.slotGroup]).call(t,this.tileViews);return new(u())((function(e){n.switchToExtraSlotGroupTween=n.scene.add.tween({targets:r,duration:100,props:{y:{from:-5,to:0}},onComplete:function(){n.switchToExtraSlotGroupTween=void 0,e()}})}))},n.init=function(){this.segmentManager.init(),this.justMatched3=!1,this.almostFullAnimator.destroy(),this.setSlotGroupType("normal"),this.extraSlotGroup.init()},n.isExtra=function(){return"extra"===this.slotGroupType},n.isFull=function(){return this.segmentManager.tileViewCount>=this.availableSlotCount},n.isEmpty=function(){return 0===this.segmentManager.tileViewCount},n.isAlmostFull=function(){return this.segmentManager.tileViewCount>=this.availableSlotCount-2},n.getSlotPosition=function(e){var n=this.slotImages[e];if(n)return{x:n.x,y:n.y};var r=this.slotImages.length-1,a=this.slotImages[r];return{x:a.x+t.slotSize*(e-r),y:a.y}},n.updateTileViewSlotIdx=function(e,t){var n=this.getSlotPosition(t);e.setPosition(n.x,n.y)},n.addTileView=function(e){e.tileModel&&(this.playScaleToNormalAnimation(),this.add(e),this.segmentManager.addTileView(e))},n.detachTileViews=function(e){0!==e.length&&(this.remove(e),this.segmentManager.removeTileViews(e))},n.playRealignAnimationAsync=function(){var e=(0,s.Z)(h().mark((function e(){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.segmentManager.playRealignAnimationAsync());case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.addExtraSlotAsync=function(){var e=(0,s.Z)(h().mark((function e(){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.setSlotGroupType("extra"));case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.getMagicTileViews=function(){var e={};return this.tileViews.forEach((function(t){var n=t.tileModel;if(n&&n.isCollected()){var r=n.icon;e[r]||(e[r]=[]),e[r].push(t)}})),e},n.playAlmostFullAnimation=function(){this.almostFullAnimator.playAlmostFullAnimator()},n.playScaleToNormalAnimation=function(){var e=(0,s.Z)(h().mark((function e(){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.almostFullAnimator.playScaleToNormalAnimation());case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.stopAlmostFullAnimation=function(){this.almostFullAnimator.destroy()},n.playTweenScaleUp=function(){var e=(0,s.Z)(h().mark((function e(){var t,n,r,a,i,s;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ua(this.scene,{targets:this,props:{scale:1.1},duration:150,ease:Phaser.Math.Easing.Quadratic.In});case 2:return e.next=4,ua(this.scene,{targets:this,props:{scale:.95},duration:150,ease:Phaser.Math.Easing.Quadratic.Out});case 4:return t=this.extraSlotGroup,n=t.displayWidth,r=t.displayHeight,a=this.getWorldPosition(),i=a.x,s=a.y,this.scene.gameplayParticleHandler.unlockExtraSlotVFX.show(i,s,n,r),e.abrupt("return",ua(this.scene,{targets:this,props:{scale:1},duration:150,ease:Phaser.Math.Easing.Quadratic.In}));case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),(0,le.Z)(t,[{key:"tileViews",get:function(){return this.segmentManager.tileViews}},{key:"slotGroup",get:function(){return"extra"===this.slotGroupType?this.extraSlotGroup:this.normalSlotGroup}},{key:"slotImages",get:function(){return this.slotGroup.slotImages}},{key:"availableSlotCount",get:function(){return this.slotGroup.availableSlotCount}}]),t}(Phaser.GameObjects.Container);ro.slotSize=ts.SLOT_SIZE;var ao=ro,io=function(){function e(e){this.scene=void 0,this.returnAsyncState="ready",this.scene=e}var t=e.prototype;return t.init=function(){var e;this.returnAsyncState="ready",null==(e=this.scene.footer.returnItem)||e.softDisableItem()},t.canReturn=function(){if("playing"===this.returnAsyncState)return!1;var e=this.scene.gameManager.rack;return!e.isEmpty()&&!e.tileViews.some((function(e){return e.isMatched3()}))},t.updateReturnItem=function(){var e=this.scene.footer.returnItem;this.canReturn()?null==e||e.enableItem():null==e||e.softDisableItem()},t.getRandomTileViewsFromRack=function(){var e=this.scene.gameManager.rack.tileViews;return ja.pickRandomElements(e,3)},t.returnAsync=function(){var e=(0,s.Z)(h().mark((function e(){var t,n,r,a,i,s,o,c,u;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t=this.scene.gameManager).isRackPlayingLogicalTweens()){e.next=3;break}return e.abrupt("return");case 3:return this.scene.setGlobalSceneInputEnabled(!1),n=t.mover,r=t.board,a=t.undoManager,i=t.addExtraSlotManager,s=t.wieldMagicWandManager,o=this.getRandomTileViewsFromRack(),c=r.isReturnClusterAvailable(),a.removeTileViewsFromMoveStack(o),c||r.createReturnCluster(),u=this.getTileModelsToReturnCluster(o),this.returnAsyncState="playing",e.next=13,n.moveTileViewsRackToBoard(o,u);case 13:this.returnAsyncState="ready",this.updateReturnItem(),a.updateUndoItem(),i.updateExtraSlotItem(),s.updateMagicWandItem(),r.updateReturnClusterAlignment(),this.scene.setGlobalSceneInputEnabled(!0),o.forEach((function(e){return e.addPointerEventListeners()}));case 21:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),t.getTileModelsToReturnCluster=function(e){var t=[],n=this.scene.gameManager.board.getReturnCluster(),r=n.getId();return e.forEach((function(e,a){var i=e.tileModel;if(i){var s=i.id,o=i.icon,c=2+a,u=n.getNewLayerZ({x:c,y:9}),l=new Ka(s,c,9,u,o,r,"uncovered");t.push(l)}})),t},e}(),so=io,oo=n(190),co=function(){function e(e){this.scene=void 0,this.rescued=!1,this.scene=e}var t=e.prototype;return t.init=function(){},t.rescueAsync=function(){var e=(0,s.Z)(h().mark((function e(){var t,n,r;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=this.scene.gameManager,this.scene.setGlobalSceneInputEnabled(!1),t.enableBoardTileViewClick(!1),this.setRescued(!0),n=0;case 5:if(!(n<5)){e.next=14;break}if(t.canUndo()){e.next=8;break}return e.abrupt("break",14);case 8:return r=4===n,e.next=11,t.undoAsync(r);case 11:n++,e.next=5;break;case 14:return e.next=16,t.handleClickShuffleItem();case 16:this.scene.setGlobalSceneInputEnabled(!0),t.enableBoardTileViewClick(!0);case 18:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),t.canShowRescueButton=function(){return!this.rescued},t.setRescued=function(e){this.rescued=e},t.getRescued=function(){return this.rescued},e}(),uo=co,lo={MOVE_TILE_TO_RACK:"move-tile-to-rack"},ho=function(){function e(e){this.scene=void 0,this._topContainer=void 0,this.tilePool=void 0,this.board=void 0,this.levelDataManager=void 0,this.rack=void 0,this.mover=void 0,this.undoManager=void 0,this.returnManager=void 0,this.addExtraSlotManager=void 0,this.wieldMagicWandManager=void 0,this.winLoseManager=void 0,this.rescueManager=void 0,this.waitRackToLoseEvent=void 0,this.scene=e}var t=e.prototype;return t.create=function(){this.createBoardGame(),this.createRack(),this.createTopContainer(),this.board.kill(),this.rack.kill(),this.levelDataManager=new Pi,this.tilePool=new qi(this.scene),this.mover=new Zi(this.scene),this.undoManager=new Hi(this.scene),this.returnManager=new so(this.scene),this.addExtraSlotManager=new Vi(this.scene),this.wieldMagicWandManager=new zi(this.scene),this.winLoseManager=new ji(this.scene),this.rescueManager=new uo(this.scene)},t.init=function(){var e;this.levelDataManager.init(),this.rack.init(),this.initBoard(),this.undoManager.init(),this.returnManager.init(),this.addExtraSlotManager.init(),this.wieldMagicWandManager.init(),this.winLoseManager.init(),this.rescueManager.init(),this.scene.footer.shuffleItem.updateStatusItemByAmount(),null==(e=this.waitRackToLoseEvent)||e.remove()},t.createTopContainer=function(){var e=this.scene.add.container();e.setDepth(oo.Z.TOP_CONTAINER),this._topContainer=e},t.createBoardGame=function(){this.board=new wi(this.scene),this.scene.add.existing(this.board),this.board.setDepth(oo.Z.BOARD)},t.createRack=function(){this.rack=new ao(this.scene),this.rack.setDepth(oo.Z.RACK),this.scene.add.existing(this.rack);var e=this.scene.ads.getBannerHeight();Phaser.Display.Align.In.BottomCenter(this.rack,this.scene.gameZone,0,-80-e)},t.getBottomHeight=function(){return 152+this.scene.ads.getBannerHeight()},t.setRealTileViewSizeBaseOnLevel=function(){var e=this.levelDataManager.getCoordsBounds(),t=e.top,n=e.bottom,r=e.left,a=e.right,i=n-t,s=a-r,o=0*i/2,c=-2*i/2,u=this.scene.gameZone,l=u.width,h=55,d=u.height-this.getBottomHeight()-ia-34,p=l-6;h=Math.min((p-o)/(s+1),h),h=Math.min((d-c)/(i+1),h),console.log("%c Use Tile Size Zoom: ","background-color: #33A5FF;",h,6),za.setTileSize(h);return{width:za.TILE_SIZE*(s+1)+o,height:za.TILE_SIZE*(i+1)+c}},t.initBoard=function(){var e=this.levelDataManager.getBoardData();this.zoomBoardTileSizeBaseOnLevel(),this.board.init(e)},t.zoomBoardTileSizeBaseOnLevel=function(){var e=this.setRealTileViewSizeBaseOnLevel(),t=e.width,n=e.height;this.board.setSize(t,n),Phaser.Display.Align.In.Center(this.board,this.scene.gameZone);var r=this.scene.gameZone,a=r.width,i=(92.5+(r.height-this.getBottomHeight()))/2;this.board.setPosition(a/2,i);var s=this.board.x;this._topContainer.setSize(t,n),this._topContainer.setPosition(s,i),this.scene.tutorialHandler.setHandContainerPosition(s,i)},t.moveTileViewToRack=function(e){this.mover.moveTileViewBoardToRack(e),this.board.emit(lo.MOVE_TILE_TO_RACK),this.scene.logStepProgress()},t.updateFooterItems=function(){this.wieldMagicWandManager.isPlaying()||(this.undoManager.updateUndoItem(),this.returnManager.updateReturnItem(),this.addExtraSlotManager.updateExtraSlotItem(),this.wieldMagicWandManager.updateMagicWandItem(),this.checkStatusShuffleItem())},t.tryEndGame=function(){return this.canWin()?(this.win(),!0):!!this.canLose()&&(this.lose(),!0)},t.checkStatusShuffleItem=function(){var e=this.scene.footer.shuffleItem;this.board.hasMoreThan1Tile()?e.updateStatusItemByAmount():e.softDisableItem()},t.win=function(){var e=(0,s.Z)(h().mark((function e(){var t,n,r,a,i,s,o;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.winLoseManager.isPlaying()){e.next=3;break}return e.abrupt("return");case 3:return t=this.scene.gameManager.levelDataManager.getLevelTileCount(),window.game.analytics.event(an._.WINNING),gs(this.scene.level.getLevel(),!0,t),n=this.scene.player.getCustomData("level"),r=this.scene.level.getMaxLevel(),(a=n===r+1)||this.updateWisdom(),this.winLoseManager.switchToWin(),this.rescueManager.setRescued(!1),e.next=14,this.waitForRackFinishPlayingTweens();case 14:return i=this.scene.level.getLevel(),this.scene.level.nextLevel(),s=this.scene.level.getLevel(),i==s&&(s+=1),e.next=20,this.scene.updatePlayerLevel(s);case 20:return o=this.scene.game.globalScene,e.next=23,Oa(this.scene,1e3);case 23:return this.scene.audio.playSound(tn.Z.WIN,{volume:.5}),o.disableInput(),e.next=27,u().all([this.loadNextLevelAsync(),this.scene.fadeOut(!1),this.scene.navigation.fadeOut(),this.scene.tutorialHandler.fadeOut()]);case 27:return this.scene.addShortcut(),e.next=30,this.scene.screen.openAsync(en.o4.WELL_DONE_SCREEN,{level:s});case 30:return this.scene.screen.close(en.o4.WELL_DONE_SCREEN),e.next=33,this.waitUntilResultResourcesLoaded();case 33:return e.next=35,this.scene.screen.openAsync(en.o4.RESULT_SCREEN,{hasPreviouslyFinishAllLevel:a,level:s});case 35:o.enableInput();case 36:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),t.waitUntilResultResourcesLoaded=function(){var e=(0,s.Z)(h().mark((function e(){var t,n;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.scene.scene.get(Fr.C.LOAD_SCENE),n=this.scene.game.globalScene,!t.importantLazyResourcesLoaded){e.next=4;break}return e.abrupt("return");case 4:return n.screen.open(en.o4.NOTIFY_SCREEN,{message:"Loading...",loading:!0}),e.next=7,t.waitUntilImportantLazyResourcesLoaded();case 7:n.screen.close(en.o4.NOTIFY_SCREEN);case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),t.updateWisdom=function(){var e=GameCore.Configs.Level.wisdomPerLevel,t=this.scene.player.getBestScore(),n=e;this.scene.player.setBestScore(t+n)},t.loadNextLevelAsync=function(){var e=(0,s.Z)(h().mark((function e(){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.scene.level.getLevelData()){e.next=3;break}return e.abrupt("return");case 3:return e.prev=3,e.next=6,this.scene.level.preloadLevelDataAsync();case 6:if(void 0!==e.sent){e.next=9;break}throw new Error("Can not load new level!");case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(3),console.warn("Error loading next level",e.t0);case 14:case"end":return e.stop()}}),e,this,[[3,11]])})));return function(){return e.apply(this,arguments)}}(),t.lose=function(){var e=(0,s.Z)(h().mark((function e(){var t;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((t=this.winLoseManager).isPlaying()){e.next=3;break}return e.abrupt("return");case 3:return window.game.analytics.event(an._.LOSING),t.switchToLose(),e.next=7,this.waitForRackFinishPlayingTweens();case 7:this.scene.tutorialHandler.fadeOut(),this.scene.screen.open(en.o4.NO_MORE_MOVES_SCREEN);case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),t.waitForRackFinishPlayingTweens=function(){var e=(0,s.Z)(h().mark((function e(){var t,n=this;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==(t=this.waitRackToLoseEvent)||t.remove(),this.isRackPlayingLogicalTweens()){e.next=3;break}return e.abrupt("return");case 3:return e.abrupt("return",new(u())((function(e){n.waitRackToLoseEvent=n.scene.time.addEvent({delay:100,callback:function(){var t;n.isRackPlayingLogicalTweens()||(null==(t=n.waitRackToLoseEvent)||t.remove(),e())},loop:!0})})));case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),t.buildLevel=function(e){this.levelDataManager.setLevelConfig(e),this.init()},t.canUndo=function(){return this.undoManager.canUndo()},t.undoAsync=function(){var e=(0,s.Z)(h().mark((function e(t){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return void 0===t&&(t=!0),e.abrupt("return",this.undoManager.undoAsync(t));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),t.removeTileViewsFromMoveStack=function(e){this.undoManager.removeTileViewsFromMoveStack(e)},t.pushMoveBoardToRackData=function(e){this.undoManager.pushMoveBoardToRackData(e)},t.canReturn=function(){return this.returnManager.canReturn()},t.returnAsync=function(){var e=(0,s.Z)(h().mark((function e(){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.returnManager.returnAsync());case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),t.canAddExtraSlot=function(){return this.addExtraSlotManager.canAddExtraSlot()},t.addExtraSlotAsync=function(){var e=(0,s.Z)(h().mark((function e(){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.addExtraSlotManager.addExtraSlotAsync());case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),t.canWieldMagicWand=function(){return this.wieldMagicWandManager.canWieldMagicWand()},t.wieldMagicWandAsync=function(){var e=(0,s.Z)(h().mark((function e(){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.wieldMagicWandManager.wieldMagicWandAsync());case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),t.rescueAsync=function(){return function(e){var t;window.game.analytics.event(an._.LEVEL_RESCUE,{level:e,score:window.game.player.getBestScore(),level_name:"level_"+us()(t=GameCore.Utils.Number).call(t,e,6),is_default_generation:!window.game.level.isLevelDynamic(e)})}(this.scene.level.getLevel()),function(e){var t;window.game.analytics.event(an._.MATCH_RESCUE,{game_mode:GameCore.Utils.String.toUpperCamelCase(Or),level:e,level_name:"level_"+us()(t=GameCore.Utils.Number).call(t,e,6)})}(this.scene.level.getLevel()),this.winLoseManager.switchToPlaying(),this.rescueManager.rescueAsync()},t.setRescued=function(e){this.rescueManager.setRescued(e)},t.getRescued=function(){return this.rescueManager.getRescued()},t.canShowRescueButton=function(){return this.rescueManager.canShowRescueButton()},t.canWin=function(){return this.winLoseManager.canWin()},t.canLose=function(){return this.winLoseManager.canLose()},t.increaseMatched3TileViewCount=function(e){return this.winLoseManager.increaseMatched3TileViewCount(e)},t.isRackPlayingLogicalTweens=function(){return this.rack.isPlayingLogicalTweens()},t.enableBoardTileViewClick=function(e){this.board.enableTileViewClick(e)},t.canClickBoardTileView=function(){var e=this.board,t=this.winLoseManager;return e.canClickTileView()&&t.isPlaying()},t.isPlaying=function(){return this.winLoseManager.isPlaying()},t.isLosing=function(){return this.winLoseManager.isLosing()},t.handleClickShuffleItem=function(){var e=(0,s.Z)(h().mark((function e(){var t,n,r,a,i,s,o,c,l,d,p,f=this;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.isPlaying()){e.next=2;break}return e.abrupt("return");case 2:if(!this.isRackPlayingLogicalTweens()){e.next=4;break}return e.abrupt("return");case 4:return this.board.setDepth(oo.Z.RACK+1),this.scene.setGlobalSceneInputEnabled(!1),r=this.getShuffleConfig(),a=r.config,i=r.maxRow,s=r.maxCol,o=r.minRow,c=r.minCol,l=r.bonusSpace,d=r.maxScale,er()(t=O()(n=[]).call(n,a)).call(t,(function(e,t){return e.depth-t.depth})).forEach((function(e){var t=e.applyFor;f.scene.gameManager.board.bringToTop(t)})),p=[],a.forEach((function(e){var t=e.applyFor,n=e.toX,r=e.toY,a=e.endIcon,u=e.row,h=e.col,f=t.playAnimationShuffleAsync({toX:n,toY:r,endIcon:a,row:u,col:h,maxRow:i,maxCol:s,minRow:o,minCol:c,bonusSpace:l,maxScale:d});p.push(f)})),this.scene.audio.playSound(tn.Z.SHUFFLE_START),e.next=14,u().all(p);case 14:return a.forEach((function(e){var t=e.applyFor,n=e.endIcon;t.tileModel.setIcon(n),t.refresh({positionRefresh:!0,iconRefresh:!0,overlayRefresh:!1}),f.scene.gameManager.board.bringToTop(t)})),this.scene.audio.playSound(tn.Z.TILE_DROP),e.next=18,Oa(this.scene,350);case 18:this.scene.setGlobalSceneInputEnabled(!0),this.board.setDepth(oo.Z.BOARD);case 20:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),t.getShuffleConfig=function(){var e,t=this.board.getAllTiles(),n=O()(e=[]).call(e,t);GameCore.Utils.Array.shuffle(n);var r=[],a=-1,i=-1,s=100,o=100,c=0;t.forEach((function(e,u){var l,h=n[u].tileModel;if(!h)return r.push({toX:0,toY:0,depth:0,endIcon:"",applyFor:e,row:-1,col:-1}),void console.error("tileModel is undefined");c||(c=e.displayWidth);var d=n[u],p=d.x,f=d.y,m=h.x,v=h.y,g=h.z,y=Ht()(n).call(n,e),w=(null==(l=t[y].tileModel)?void 0:l.icon)||"";v>a&&(a=v),m>i&&(i=m),v<s&&(s=v),m<o&&(o=m),r.push({toX:p,toY:f,depth:g,endIcon:w,applyFor:e,row:v,col:m})}));for(var u=i-o+1,l=1.2,h=this.scene.gameZone.width-u*(c+2)*l-10;h<0;)l=parseFloat((l-.01).toFixed(2)),h=this.scene.gameZone.width-u*(c+2)*l-10;return{config:r,maxRow:a,maxCol:i,minRow:s,minCol:o,bonusSpace:2,maxScale:l}},t.getRemainingCountToWin=function(){return this.winLoseManager.getRemainingCountToWin()},t.prepareFadeIn=function(){[this.rack,this.board].forEach((function(e){e.revive(),e.prepareFadeIn()})),this._topContainer.revive()},t.fadeIn=function(){var e=(0,s.Z)(h().mark((function e(){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u().all([this.rack.fadeIn(),this.board.fadeIn()]);case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),t.fadeOut=function(){var e=(0,s.Z)(h().mark((function e(){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.board.kill(),this.rack.prepareFadeOut(),this._topContainer.kill(),e.next=5,this.rack.fadeOut();case 5:this.rack.kill();case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),t.tryWarningRackIsAlmostFull=function(){var e=this.rack;this.isPlaying()&&e.isAlmostFull()&&(e.isMatching3()||e.playAlmostFullAnimation())},t.stopRackAlmostFullAnimation=function(){this.rack.stopAlmostFullAnimation()},(0,le.Z)(e,[{key:"topContainer",get:function(){return{addTileViews:this._topContainer.add.bind(this._topContainer),detachTileView:this._topContainer.remove.bind(this._topContainer),getLocalPosition:this._topContainer.getLocalPosition.bind(this._topContainer)}}}]),e}(),po=ho,fo=ca.Z.DEFAULT,mo=fo.KEY,vo=fo.FRAME,go=function(e){function t(t){var n;return(n=e.call(this,t)||this).icon=void 0,n.text=void 0,n.createIcon(),n.createText(),n.alignIconAndText(),n}(0,o.Z)(t,e);var n=t.prototype;return n.createIcon=function(){var e=this.scene.make.image({key:mo,frame:vo.SHOP_SCREEN_COIN});e.setWorldSize(14,15),this.add(e),this.icon=e},n.createText=function(){var e=this.scene.make.text({style:{fontFamily:Ee.Z.FONT_FAMILY,fontSize:"13px"},text:"150"});e.setHighQuality(),e.setOrigin(.5,.5),this.add(e);var t=e.context.createLinearGradient(0,0,0,e.height);t.addColorStop(0,"#ffffff"),t.addColorStop(1,"#cce5f9"),e.setFill(t),e.setShadow(0,6,"#0000003F",0,!1,!0),this.text=e},n.setText=function(e){this.text.setText("x "+e),this.alignIconAndText()},n.alignIconAndText=function(){var e=this.icon.width,t=this.text.displayWidth,n=e+t;Phaser.Display.Align.In.Center(this.text,this,-n/2+t/2-.5,-1),Phaser.Display.Align.In.Center(this.icon,this,n/2-e/2+.5)},t}(Phaser.GameObjects.Container),yo=go,wo=n(407),So=new(n.n(wo)()),Eo={USING_COINS:"using-coins",UPDATE_STATUS_ITEM:"update-status-item",UPDATE_ITEM_AMOUNT:"update-item-amount"},bo=ca.Z.GAMEPLAY,ko=bo.KEY,xo=bo.FRAME,Ao=function(e){function t(t,n){var r;return(r=e.call(this,t,ko,xo.BTN_CIRCLE,67.5,68.5)||this).icon=void 0,r.itemScale=void 0,r.coinPrice=void 0,r.offsetX=void 0,r.offsetY=void 0,r.price=150,r.amount=void 0,r.amountItem=void 0,r.amountText=void 0,r.amountBg=void 0,r.adText=void 0,r.createIcon(n),r.createAmountText(),r.createCoinPrice(),r.createAdText(),r.updateAmount(),r.listenEvent(),r}(0,o.Z)(t,e);var n=t.prototype;return n.listenEvent=function(){So.on(Eo.UPDATE_STATUS_ITEM,this.updateStatusItemByAmount.bind(this)),So.on(Eo.UPDATE_ITEM_AMOUNT,this.updateAmount.bind(this))},n.createIcon=function(e){var t=e.key,n=e.frame,r=e.worldSize,a=e.x,i=e.y,s=this.scene.make.image({key:t,frame:n});if(r){var o=r.width,c=r.height;s.setWorldSize(o,c)}else s.setSizeBasedOnDpr();this.add(s),this.offsetX=a||0,this.offsetY=i||0,s.setPosition(a,i),this.itemScale=s.scale,this.icon=s},n.createAmountText=function(){this.amountItem=this.scene.add.container(),this.amountText=this.scene.make.bitmapText({font:Ee.Z.NUMBERS.KEY,size:this.scene.fontSize(37),origin:{x:.5,y:.5}}),this.amountText.setCenterAlign(),this.amountBg=this.scene.make.image({key:ko,frame:xo.BUTTON_BLUE_CIRCLE_SMALL}),this.amountBg.setWorldSize(22,22),this.amountBg.setTintFill(10616832),Phaser.Display.Align.In.Center(this.amountText,this.amountBg,0,0),this.amountItem.add([this.amountBg,this.amountText]),Phaser.Display.Align.In.BottomRight(this.amountItem,this,-14,-14),this.add(this.amountItem)},n.createCoinPrice=function(){this.coinPrice=new yo(this.scene),this.coinPrice.setVisible(!1),this.add(this.coinPrice),Phaser.Display.Align.In.Center(this.coinPrice,this,0,13)},n.createAdText=function(){var e=this.scene.make.text({style:{fontFamily:Ee.Z.FONT_FAMILY,fontSize:"13px"},text:"AD"});e.setHighQuality(),e.setOrigin(.5,.5);var t=e.context.createLinearGradient(0,0,0,e.height);t.addColorStop(0,"#ffffff"),t.addColorStop(1,"#cce5f9"),e.setFill(t),e.setShadow(0,6,"#0000003F",0,!1,!0),this.adText=e,this.add(this.adText),Phaser.Display.Align.In.Center(this.adText,this,0,13)},n.enableItem=function(){this.scene.tutorialHandler.isGameInTutorialLevels()||this.setDisabled(!1)},n.disableItem=function(){this.setDisabled(!0),this.setAlpha(1)},n.softDisableItem=function(){this.setDisabled(!0)},n.updateAmount=function(){},n.decreaseAmount=function(){this.setAmount(this.amount-1)},n.setAmount=function(e){this.amount=e;var t=e.toString();this.amountText.setText(t),this.updateStatusItemByAmount()},n.updateStatusItemByAmount=function(){(this.enableItem(),0==this.amount)?this.scene.player.getCustomData("coins")<this.price?(this.hideCoinPrice(),this.showAdText()):(this.hideAdText(),this.showCoinPrice()):(this.hideCoinPrice(),this.hideAdText())},n.showCoinPrice=function(){this.icon.setScale(.7*this.itemScale),this.coinPrice.setVisible(!0),this.amountItem.setVisible(!1),this.icon.setY(-11)},n.hideCoinPrice=function(){this.icon.setScale(this.itemScale),this.coinPrice.setVisible(!1),this.amountItem.setVisible(!0),this.alignItem()},n.showAdText=function(){this.icon.setScale(.7*this.itemScale),this.coinPrice.setVisible(!1),this.amountItem.setVisible(!1),this.adText.setVisible(!0),this.icon.setY(-11)},n.hideAdText=function(){this.icon.setScale(this.itemScale),this.coinPrice.setVisible(!1),this.amountItem.setVisible(!0),this.adText.setVisible(!1),this.alignItem()},n.alignItem=function(){this.icon.setPosition(this.offsetX,this.offsetY)},n.processCallback=function(){var e=(0,s.Z)(h().mark((function e(t){var n,r,a;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:null==(n=this.upAnimation)||n.stop(),null==(r=this.downAnimation)||r.stop(),null==(a=this.scene)||a.tweens.killTweensOf(this),-1!==this.scaleUp&&this.setScale(this.scaleUp),t();case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),n.useItem=function(){var e=(0,s.Z)(h().mark((function e(){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.adText.visible){e.next=8;break}return e.next=3,xs(this.name);case 3:if(!e.sent){e.next=7;break}return this.updateStatusItemByAmount(),e.abrupt("return",!0);case 7:return e.abrupt("return",!1);case 8:if(!this.coinPrice.visible){e.next=12;break}return So.emit(Eo.USING_COINS,this.price),this.updateStatusItemByAmount(),e.abrupt("return",!0);case 12:return this.decreaseAmount(),e.abrupt("return",!0);case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),t}(Ps.Z),Co=Ao,To=function(e){function t(t,n){var r,a=n.key,i=n.frame,s=n.x,o=n.y;return(r=e.call(this,t,{key:a,frame:i,x:s,y:o})||this).setName(Is.ITEM_SHUFFLE),r}(0,o.Z)(t,e);var n=t.prototype;return n.updateAmount=function(){var e=this.scene.player.getCustomData("items");this.amount=e.shuffle,this.setAmount(this.amount)},n.decreaseAmount=function(){e.prototype.decreaseAmount.call(this),this.scene.player.setMultiCustomData({items:{shuffle:this.amount}})},t}(Co),Po=To,Io=function(e){function t(t,n){var r,a=n.key,i=n.frame,s=n.x,o=n.y;return(r=e.call(this,t,{key:a,frame:i,x:s,y:o})||this).notification=void 0,r.setName(Is.ITEM_MAGIC_WAND),r}(0,o.Z)(t,e);var n=t.prototype;return n.updateAmount=function(){var e=this.scene.player.getCustomData("items");this.amount=e.magicWand,this.setAmount(this.amount)},n.decreaseAmount=function(){e.prototype.decreaseAmount.call(this),this.scene.player.setMultiCustomData({items:{magicWand:this.amount}})},t}(Co),Oo=Io,Mo=function(e){function t(t,n){var r,a=n.key,i=n.frame,s=n.x,o=n.y;return(r=e.call(this,t,{key:a,frame:i,x:s,y:o})||this).setName(Is.ITEM_UNDO),r}(0,o.Z)(t,e);var n=t.prototype;return n.updateAmount=function(){var e=this.scene.player.getCustomData("items");this.amount=e.undo,this.setAmount(this.amount)},n.decreaseAmount=function(){e.prototype.decreaseAmount.call(this),this.scene.player.setMultiCustomData({items:{undo:this.amount}})},n.updateStatusItemByAmount=function(t){(void 0===t&&(t=!1),1==this.alpha||t)?e.prototype.updateStatusItemByAmount.call(this):0==this.amount?this.scene.player.getCustomData("coins")<this.price?(this.hideCoinPrice(),this.showAdText()):(this.hideAdText(),this.showCoinPrice()):(this.hideCoinPrice(),this.hideAdText())},t}(Co),_o=Mo,Lo=ca.Z.GAMEPLAY,Ro=Lo.KEY,Bo=Lo.FRAME,Do=function(e){function t(t){var n;return(n=e.call(this,t)||this).scene=void 0,n.undoItem=void 0,n.magicWandItem=void 0,n.shuffleItem=void 0,n.extraSlotItem=void 0,n.returnItem=void 0,n.handleUndoClick=(0,s.Z)(h().mark((function e(){var t;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.isGamePlaying()){e.next=2;break}return e.abrupt("return");case 2:if(!(t=n.scene.gameManager).isRackPlayingLogicalTweens()){e.next=5;break}return e.abrupt("return");case 5:if(!t.canUndo()){e.next=18;break}return e.next=8,n.undoItem.useItem();case 8:if(e.sent){e.next=11;break}return e.abrupt("return");case 11:return n.fadeOutItems(100,0),e.next=14,t.undoAsync();case 14:return e.next=16,n.fadeInItems(100,0);case 16:t.updateFooterItems(),Ss("undo");case 18:case"end":return e.stop()}}),e)}))),n.handleClickShuffleItem=(0,s.Z)(h().mark((function e(){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.isGamePlaying()){e.next=2;break}return e.abrupt("return");case 2:if(!n.scene.gameManager.isRackPlayingLogicalTweens()){e.next=5;break}return e.abrupt("return");case 5:return e.next=7,n.shuffleItem.useItem();case 7:if(e.sent){e.next=10;break}return e.abrupt("return");case 10:return n.fadeOutItems(100,0),e.next=13,n.scene.gameManager.handleClickShuffleItem();case 13:return e.next=15,n.fadeInItems(100,0);case 15:n.scene.gameManager.updateFooterItems(),Ss("shuffle");case 17:case"end":return e.stop()}}),e)}))),n.handleMagicWandClick=(0,s.Z)(h().mark((function e(){var t;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.isGamePlaying()){e.next=2;break}return e.abrupt("return");case 2:if(!(t=n.scene.gameManager).isRackPlayingLogicalTweens()){e.next=5;break}return e.abrupt("return");case 5:if(!t.canWieldMagicWand()){e.next=19;break}return e.next=8,n.magicWandItem.useItem();case 8:if(e.sent){e.next=11;break}return e.abrupt("return");case 11:return n.fadeOutItems(100,0),e.next=14,t.wieldMagicWandAsync();case 14:return e.next=16,n.fadeInItems(100,0);case 16:t.updateFooterItems(),Ss("magicWand"),n.scene.logStepProgress();case 19:case"end":return e.stop()}}),e)}))),n.scene=t,n.setSize(375,80),n.setDepth(oo.Z.FOOTER),n.createMagicWandItem(),n.createUndoItem(),n.createShuffleItem(),t.add.existing((0,jr.Z)(n)),n}(0,o.Z)(t,e);var n=t.prototype;return n.prepareFadeIn=function(){[this.shuffleItem,this.undoItem,this.magicWandItem].forEach((function(e){e.setAlpha(.3),e.setScale(0)}))},n.fadeIn=function(){var e=(0,s.Z)(h().mark((function e(){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u().all([ba([this.shuffleItem],250,500),ba([this.undoItem],250,530),ba([this.magicWandItem],250,560)]);case 2:return e.next=4,this.fadeInItems(300,400);case 4:return e.abrupt("return",u().resolve());case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.fadeInItems=function(){var e=(0,s.Z)(h().mark((function e(t,n){var r,a,i,s,o,c,l,d,p;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=[],a=this.scene.gameManager,i=a.undoManager,s=a.wieldMagicWandManager,o=a.board,c=this.scene.tutorialHandler.isGameInTutorialLevels(),l=i.canUndo()&&!c?1:.5,d=s.canWieldMagicWand()&&!c?1:.5,p=o.hasMoreThan1Tile()&&!c?1:.5,r.push(ya([this.undoItem],t,n,l,!1)),r.push(ya([this.magicWandItem],t,n,d,!1)),r.push(ya([this.shuffleItem],t,n,p,!1)),e.abrupt("return",u().all(r));case 10:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}(),n.fadeOutItems=function(){var e=(0,s.Z)(h().mark((function e(t,n){var r;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(r=[]).push(ya([this.undoItem],t,n,.5,!1)),r.push(ya([this.magicWandItem],t,n,.5,!1)),r.push(ya([this.shuffleItem],t,n,.5,!1)),e.abrupt("return",u().all(r));case 5:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}(),n.fadeOut=function(){var e=(0,s.Z)(h().mark((function e(){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Sa([this.shuffleItem,this.undoItem,this.magicWandItem],230,0,.3);case 2:return e.next=4,u().all([xa([this.shuffleItem],220,0),xa([this.undoItem],240,0),xa([this.magicWandItem],220,50)]);case 4:return e.abrupt("return",u().resolve());case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.createUndoItem=function(){var e=new _o(this.scene,{key:Ro,frame:Bo.ICON_UNDO,x:0,y:-1});e.onClick=this.handleUndoClick,this.add(e),e.setX(-85),this.undoItem=e},n.createShuffleItem=function(){this.shuffleItem=new Po(this.scene,{key:Ro,frame:Bo.ICON_SHUFFLE,x:0,y:-2}),this.shuffleItem.onClick=this.handleClickShuffleItem,this.add(this.shuffleItem),this.shuffleItem.setX(85)},n.createMagicWandItem=function(){var e=new Oo(this.scene,{key:Ro,frame:Bo.ICON_HELP,x:2.5,y:-1});e.onClick=this.handleMagicWandClick,this.add(e),this.magicWandItem=e},n.isGamePlaying=function(){return this.scene.gameManager.isPlaying()},t}(Phaser.GameObjects.Container),No=Do,Go=ca.Z.DEFAULT.KEY,Fo=function(e){function t(t,n){var r;return(r=e.call(this,t,Go,n.backgroundOn)||this).options=void 0,r.icon=void 0,r.getFrameByStatus=function(){var e=r.options,t=e.enable,n=e.frameOn,a=e.frameOff;return t?n:a},r.getBackgroundByStatus=function(){var e=r.options,t=e.enable,n=e.backgroundOn,a=e.backgroundOff;return t?n:a},r.createButton=function(e){var t=r.getBackgroundByStatus();r.button=r.scene.add.image(0,0,e,t),r.add(r.button)},r.options=n,r.createIcon(),r.soundKey=void 0,r}(0,o.Z)(t,e);var n=t.prototype;return n.processCallback=function(e){var t=this.options.enable;this.scene.audio.playSound(tn.Z.SWITCH,{volume:.5}),this.updateStatus(!t),e(!t)},n.updateStatus=function(e){this.options.enable=e;var t=this.getFrameByStatus();this.icon.setFrame(t);var n=this.getBackgroundByStatus();this.button.setFrame(n)},n.createIcon=function(){var e=this.getFrameByStatus();this.icon=this.scene.make.image({key:Go,frame:e}),this.add(this.icon),Phaser.Display.Align.In.Center(this.icon,this.button)},n.logButtonEvent=function(){var e=this.getParentName(),t=this.name,n=!this.options.enable;this.scene.analytics.event(an._.BUTTON_CLICK,{button_name:t,screen_name:e,enable:n})},t}(Ps.Z),Zo=Fo,Uo=ca.Z.DEFAULT.FRAME,Ho=function(e){function t(t){var n;return(n=e.call(this,t,{enable:!0,frameOn:Uo.SETTINGS_SCREEN_S_ON,frameOff:Uo.SETTINGS_SCREEN_S_OFF,backgroundOn:Uo.SETTINGS_SCREEN_SWITCH_FRAME,backgroundOff:Uo.SETTINGS_SCREEN_SWITCH_FRAME})||this).slideAnimation=void 0,n.setSize(60,27.5),n.icon.setSizeBasedOnDpr(),n.bringToTop(n.icon),n}(0,o.Z)(t,e);var n=t.prototype;return n.updateStatus=function(t){e.prototype.updateStatus.call(this,t),this.alignSwitch()},n.setStatus=function(e){var t;this.updateStatus(e),null==(t=this.slideAnimation)||t.remove(),this.icon.setX(e?16:-16)},n.updateSize=function(){this.button.setWorldSize(60,27.5),e.prototype.updateSize.call(this)},n.alignSwitch=function(){var e=this.options.enable;this.runSlideAnimation(e?16:-16)},n.runSlideAnimation=function(){var e=(0,s.Z)(h().mark((function e(t){var n;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return null==(n=this.slideAnimation)||n.remove(),this.slideAnimation=this.scene.tweens.add({targets:this.icon,x:t,duration:300,ease:Phaser.Math.Easing.Cubic.InOut}),e.next=4,this.slideAnimation.waitForCompletion();case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),t}(Zo),Wo=Ho;function Vo(e,t){var n="undefined"!==typeof C()&&P()(e)||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=function(e,t){var n;if(!e)return;if("string"===typeof e)return Yo(e,t);var r=b()(n=Object.prototype.toString.call(e)).call(n,8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return x()(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Yo(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0;return function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Yo(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var zo=ca.Z.GAMEPLAY,Ko=zo.KEY,jo=zo.FRAME,Xo=function(e){function t(t){var n;return(n=e.call(this,t)||this).scene=void 0,n.buttonAutoPlay=void 0,n.buttonNextStep=void 0,n.buttonUseItems=void 0,n.textAutoPlay=void 0,n.textNextStep=void 0,n.enableAutoPlay=!1,n.enableUseItems=!1,n.nextStepTimer=void 0,n.skipTimeUseItem=0,n.handleClickAutoPlay=function(){console.log("auto play"),n.enableAutoPlay?(n.enableAutoPlay=!1,n.textAutoPlay.clearTint(),n.nextStepTimer.remove()):(n.enableAutoPlay=!0,n.textAutoPlay.setTint(16711680),n.autoPlay())},n.nextStep=function(){var e=n.scene.gameManager.board.clusters,t=n.scene.gameManager.rack.tileViews,r=[];for(var a in e){var i="1/2";e[a]instanceof ti&&(i="3/40");var s=n.convertBoardMapToTileMap(e[a].boardMap,i);r.push(s)}for(var o=[],c=0;c<t.length;c++){var u=t[c].tileModel;if(!u.isMatched3()){var l=u.icon;o.push(l)}}var h=n.getTilesCollectable(r);if(0!=h.length){for(var d=h[Math.floor(Math.random()*h.length)],p=[],f=function(){var e=h[m];2==Be()(o).call(o,(function(t){return t==e.icon})).length&&p.push(e)},m=0;m<h.length;m++)f();if(0==p.length)for(var v=0;v<h.length;v++){var g=h[v],w=ja.deepCopy(r),S=w[g.inUsedTileMapIndex||0];n.detachTileView(g,S);for(var E=n.getTilesCollectable(w),b=function(){var e=E[k];2==Be()(o).call(o,(function(t){return t==e.icon})).length&&p.push(g)},k=0;k<E.length;k++)b()}if(0==p.length){for(var x=[],A=0;A<h.length;A++){var C=h[A];y()(o).call(o,C.icon)&&x.push(C)}x.length>0&&(d=x[Math.floor(Math.random()*x.length)])}else d=p[Math.floor(Math.random()*p.length)];o.push(d.icon);var T=d.position,P=T.x,I=T.y,O=T.z,M=d.key;M&&(e[M]||(M="return-cluster-id"));var _=e[M||"return-cluster-id"].boardMap[O][I][P];_&&_.handleOnClick(),o=n.checkRack(o)}},n.handleClickNextStep=function(){console.log("next step"),n.enableAutoPlay||(Math.random()<.2&&n.enableUseItems?n.useRandomItem():n.nextStep())},n.handleClickUseItems=function(){n.enableUseItems?n.enableUseItems=!1:n.enableUseItems=!0},n.scene=t,n.setSize(64,30),n.createButtonAutoPlay(),n.createButtonNextStep(),n.createButtonUseIcon(),n}(0,o.Z)(t,e);var n=t.prototype;return n.createButtonAutoPlay=function(){this.buttonAutoPlay=new Ps.Z(this.scene,Ko,jo.NO_MORE_SCREEN_BTN_BLUE,64,30);var e=this.scene.make.text({style:{fontFamily:Ee.Z.FONT_FAMILY,fontSize:"15px"},text:"Auto Play"});e.setHighQuality(),e.setOrigin(.5,.5),this.textAutoPlay=e,this.buttonAutoPlay.add(this.textAutoPlay),this.buttonAutoPlay.onClick=this.handleClickAutoPlay,this.add(this.buttonAutoPlay),Phaser.Display.Align.In.Center(this.buttonAutoPlay,this,-65,0)},n.createButtonNextStep=function(){this.buttonNextStep=new Ps.Z(this.scene,Ko,jo.NO_MORE_SCREEN_BTN_BLUE,64,30);var e=this.scene.make.text({style:{fontFamily:Ee.Z.FONT_FAMILY,fontSize:"15px"},text:"Next Step"});e.setHighQuality(),e.setOrigin(.5,.5),this.textNextStep=e,this.buttonNextStep.add(this.textNextStep),this.buttonNextStep.onClick=this.handleClickNextStep,this.add(this.buttonNextStep),Phaser.Display.Align.In.Center(this.buttonNextStep,this,0,0)},n.createButtonUseIcon=function(){var e=this.scene.add.container();this.buttonUseItems=new Wo(this.scene),this.buttonUseItems.updateStatus(this.enableAutoPlay);var t=this.scene.make.text({style:{fontFamily:Ee.Z.FONT_FAMILY,fontSize:"10px"},text:"Use Items"});t.setHighQuality(),t.setOrigin(.5,.5),t.setTint(2381475),this.buttonUseItems.add(t),this.buttonUseItems.onClick=this.handleClickUseItems,e.add([this.buttonUseItems,t]),this.buttonUseItems.setY(-3),t.setY(14),this.add(e),e.setScale(.8),Phaser.Display.Align.In.Center(e,this,60,0)},n.autoPlay=function(){var e=this,t={delay:100,loop:!0,callback:function(){var t=(0,s.Z)(h().mark((function t(){return h().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.scene.gameManager.canWin()&&!e.scene.gameManager.canLose()){t.next=4;break}return e.handleClickAutoPlay(),e.nextStepTimer.remove(),t.abrupt("return");case 4:if(!(e.skipTimeUseItem>0)){t.next=7;break}return e.skipTimeUseItem--,t.abrupt("return");case 7:Math.random()<.2&&e.enableUseItems?e.useRandomItem():(e.nextStep(),e.skipTimeUseItem=Phaser.Math.Between(4,5));case 8:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}()};this.nextStepTimer=this.scene.time.addEvent(t)},n.useRandomItem=function(){var e=this.scene.footer,t=[e.undoItem,e.shuffleItem,e.magicWandItem],n=t[Math.floor(Math.random()*t.length)];n&&n.callback&&(this.skipTimeUseItem=10,n.callback(),"ShuffleItem"==n.name&&(this.skipTimeUseItem=15))},n.convertBoardMapToTileMap=function(e,t){var n={};for(var r in e){var a=e[r];if(a){var i=Number(r);for(var s in n[i]||(n[i]={}),a){var o=a[s];if(o){var c=Number(s);for(var u in n[i][c]||(n[i][c]={}),o){var l=o[u];if(l){var h=Number(u);n[i][c][h]={position:{x:h,y:c,z:i},icon:l.tileModel.icon,inUsedTileMapIndex:0,type:t,key:""}}}}}}}return n},n.checkRack=function(e){for(var t=e[e.length-1],n=0,r=0;r<e.length-1;r++){e[r]===t&&n++}return 2==n&&(e=Be()(e).call(e,(function(e){return e!==t}))),e},n.detachTileView=function(e,t){if(!e)return!1;var n=e.position,r=n.x,a=n.y,i=n.z;return!!this.existPosition({x:r,y:a,z:i},t)&&(delete t[i][a][r],!0)},n.getTilesCollectable=function(e){for(var t=[],n=0;n<e.length;n++){var r=e[n];for(var a in r){var i=r[a];if(i)for(var s in i){var o=i[s];if(o)for(var c in o){var u=o[c];if(u){var l=u.position,h=u.type,d=void 0===h?"1/2":h,p=!this.existUpperTiles(l,r,d);u.inUsedTileMapIndex=n,u.key="cluster-"+n,p&&t.push(u)}}}}}return t},n.existUpperTiles=function(e,t,n){if(!this.existPosition(e,t))return!1;if("3/40"==n){var r,a=Ne()(r=te()(t)).call(r,Number),i=Math.max.apply(Math,a);return e.z<i}for(var s,o,c,u,l=er()(s=Be()(o=Ne()(c=te()(t)).call(c,Number)).call(o,(function(t){return t>e.z}))).call(s,(function(e,t){return e-t})),h=Jn()(ra),d=Vo(l);!(u=d()).done;)for(var p,f=u.value,m=Vo(h);!(p=m()).done;){var v,g=p.value,y=e.x+g.x,w=e.y+g.y;if(null!=(v=t[f])&&null!=(v=v[w])&&v[y])return!0}return!1},n.existPosition=function(e,t){var n,r=e.x,a=e.y;return!(null==(n=t[e.z])||null==(n=n[a])||!n[r])},t}(Phaser.GameObjects.Container),qo=Xo,Qo=ca.Z.GAMEPLAY,Jo=Qo.KEY,$o=Qo.FRAME,ec=function(e){function t(t){var n;return(n=e.call(this,t)||this).scene=void 0,n.backButton=void 0,n.winButton=void 0,n.loseButton=void 0,n.clearDataButton=void 0,n.numpadButton=void 0,n.handleBackButtonClick=function(){var e=Phaser.Math.Clamp(n.scene.level.getLevel()-1,1,GameCore.Configs.Level.maxLevel);n.setPlayerLevel(e),n.scene.level.preloadLevelDataAsync().then((function(){n.scene.startLevel()}))},n.handleWinButtonClick=function(){var e=Phaser.Math.Clamp(n.scene.level.getLevel()+1,1,GameCore.Configs.Level.maxLevel);n.setPlayerLevel(e),n.scene.level.preloadLevelDataAsync().then((function(){n.scene.startLevel()}))},n.handleLoseButtonClick=function(){n.scene.gameManager.lose()},n.handleClearDataButtonClick=(0,s.Z)(h().mark((function e(){var t;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=new Xe({}).toObject(),e.abrupt("return",FBInstant.player.setDataAsync(t));case 2:case"end":return e.stop()}}),e)}))),n.handleNumpadButtonClick=function(){n.scene.screen.open("NUMPAD_SCREEN")},n.scene=t,n.setSize(100,25),n.createButtons(),n.alignComponents(),n}(0,o.Z)(t,e);var n=t.prototype;return n.createButtons=function(){this.backButton=this.createButton(this.handleBackButtonClick,"B"),this.winButton=this.createButton(this.handleWinButtonClick,"W"),this.loseButton=this.createButton(this.handleLoseButtonClick,"L"),this.clearDataButton=this.createButton(this.handleClearDataButtonClick,"C"),this.numpadButton=this.createButton(this.handleNumpadButtonClick,"N")},n.createButton=function(e,t){var n=new Ps.Z(this.scene,Jo,$o.BUTTON_BLUE_CIRCLE_SMALL,20,20);this.add(n);var r=this.scene.make.text({style:{fontFamily:Ee.Z.FONT_FAMILY,fontSize:"10px"},text:t});return r.setHighQuality(),r.setOrigin(.5,.5),n.add(r),r.setY(-1),n.onClick=e,n},n.setPlayerLevel=function(){var e=(0,s.Z)(h().mark((function e(t){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.scene.level.setLevel(t),e.abrupt("return",this.scene.player.setCustomData("level",t));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),n.alignComponents=function(){var e=this,t=[this.backButton,this.loseButton,this.winButton,this.clearDataButton,this.numpadButton];t.forEach((function(n,r){Phaser.Display.Align.In.BottomCenter(n,e,30*(r-t.length/2+.5))}))},t}(Phaser.GameObjects.Container),tc=ec,nc="Enter level",rc=ca.Z.DEFAULT,ac=rc.KEY,ic=rc.FRAME,sc=function(e){function t(t,n,r,a){var i;return(i=e.call(this,t,n,r,a)||this).scene=void 0,i.preview=void 0,i.stack=[],i.scene=t,i.setDepth(en.Ks.PRIORITY),i.background.setAlpha(.8),i.createCloseButton(),i.createPreview(),i.createClearButton(),i.createEnterButton(),i.createBackspaceButton(),i.createNumpad(),i}(0,o.Z)(t,e);var n=t.prototype;return n.createCloseButton=function(){var e=this,t=this.getNewButton("X",20,20,1);t.onClick=function(){e.scene.screen.close(e.name)},this.add(t),Phaser.Display.Align.In.TopRight(t,this,-10,-10)},n.createNumpad=function(){var e=this;x()({length:12}).forEach((function(t,n){var r=n+1;switch(n){case 9:case 11:return;case 10:r=0}var a=e.getNewButton(""+r,50,50,1);a.onClick=function(){console.log("Button "+r+" clicked"),0===e.stack.length&&0==r||(e.stack.push(r),e.updatePreview())},e.add(a);var i=Math.floor(n/3),s=n%3;a.setPosition(60*s-60,a.height/2+60*i+35)}))},n.createClearButton=function(){var e=this,t=this.getNewButton("\ud83e\uddf9",50,50,1);t.onClick=function(){console.log("Clear button clicked"),e.stack=[],e.updatePreview()},this.add(t),t.setX(-60)},n.createEnterButton=function(){var e=this,t=this.getNewButton("\u23ce",50,50,1),n=!1;t.onClick=(0,s.Z)(h().mark((function t(){var r;return h().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(console.log("Check button clicked"),!n){t.next=3;break}return t.abrupt("return");case 3:if(r=parseInt(e.preview.text),!(isNaN(r)||r>2e4)){t.next=7;break}return e.preview.setText("Invalid level"),t.abrupt("return");case 7:return console.log("success",r),n=!0,e.scene.level.setLevel(r),e.scene.updatePlayerLevel(r),t.next=13,e.scene.level.preloadLevelDataAsync();case 13:e.scene.startLevel(),n=!1;case 15:case"end":return t.stop()}}),t)}))),this.add(t)},n.createBackspaceButton=function(){var e=this,t=this.getNewButton("\u2b05\ufe0f",50,50,1);t.onClick=function(){console.log("Backspace button clicked"),e.stack.pop(),e.updatePreview()},this.add(t),t.setX(60)},n.createPreview=function(){var e=this.scene.make.bitmapText({size:this.scene.fontSize(100),font:Ee.Z.NUMBERS.KEY,origin:{x:.5,y:.5},text:nc});this.add(e),e.setY(-100),this.preview=e},n.updatePreview=function(){var e="";this.stack.forEach((function(t){e+=t.toString()})),""===e&&(e=nc),this.preview.setText(e)},n.getNewButton=function(e,t,n,r){void 0===t&&(t=50),void 0===n&&(n=50),void 0===r&&(r=1);var a=new Ps.Z(this.scene,ac,ic.BLANK,t,n);a.button.setAlpha(r);var i=this.scene.add.text(0,0,e,{fontSize:"15px",color:"#000000",align:"center",resolution:4});return i.setOrigin(.5,.5),a.add(i),a},t}(GameCore.Screen),oc=sc,cc=function(e){function t(t){var n;return(n=e.call(this,t)||this).scene=void 0,n.levelButtonContainer=void 0,n.scene=t,n.setSize(375,100),n.setDepth(oo.Z.DEBUG),n.createLevelButtonContainer(),n.createToolAutoPlay(),n.createNumpadScreen(),n.scene.add.existing((0,jr.Z)(n)),n}(0,o.Z)(t,e);var n=t.prototype;return n.createLevelButtonContainer=function(){this.levelButtonContainer=new tc(this.scene),this.add(this.levelButtonContainer),Phaser.Display.Align.In.TopCenter(this.levelButtonContainer,this,0,0)},n.createToolAutoPlay=function(){var e=new qo(this.scene);this.add(e),Phaser.Display.Align.To.BottomCenter(e,this.levelButtonContainer,20,0)},n.createNumpadScreen=function(){this.scene.screen.add("NUMPAD_SCREEN",oc)},t}(Phaser.GameObjects.Container),uc=cc,lc=function(e){function t(){for(var t,n,r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(n=e.call.apply(e,O()(t=[this]).call(t,a))||this).config=void 0,n}(0,o.Z)(t,e);var n=t.prototype;return n.init=function(e){this.config=e,this.fluctuateInitPos(),this.modifyStartScale(),this.modifyRotation(),this.modifySpeed()},n.fluctuateInitPos=function(){var e=this.config,t=e.xCenter,n=e.yCenter,r=e.fluctuateInitPos;if(r){var a=r.min,i=r.max,s=Math.atan2(n-this.y,t-this.x),o=Phaser.Math.Between(a,i),c=t-o*Math.cos(s),u=n-o*Math.sin(s);this.x=c,this.y=u}},n.modifyStartScale=function(){var e=this.config.randomScale;if(e){var t=e.min,n=e.max,r=Phaser.Math.FloatBetween(t,n);this.data.scaleX&&(this.data.scaleX.min=r,this.scaleX=r),this.data.scaleY&&(this.data.scaleY.min=r,this.scaleY=r)}},n.modifyRotation=function(){if(this.config.randomRotation&&this.data.rotate){var e=Phaser.Math.Between(-45,45),t=e+e/Math.abs(e)*100;this.data.rotate.min=e,this.data.rotate.max=t,this.angle=e}},n.modifySpeed=function(){var e=this.config,t=e.xCenter,n=e.yCenter,r=e.randomSpeed;if(r){var a=r.min,i=r.max,s=Math.atan2(n-this.y,t-this.x),o=Phaser.Math.Between(a,i),c=-o*Math.cos(s),u=-o*Math.sin(s);this.velocityX=c,this.velocityY=u}},t}(Phaser.GameObjects.Particles.Particle),hc=lc,dc=ca.Z.EFFECTS.FRAME,pc=GameCore.Utils.Image.getImageScale(),fc=function(){function e(e){this.particleManager=void 0,this.currentEmitX=0,this.currentEmitY=0,this.whiteStar=void 0,this.greenSmoke=void 0,this.orangeStar=void 0,this.twinkleStar=void 0,this.particleManager=e,this.createWhiteStar(),this.createGreenSmoke(),this.createOrangeStar(),this.createTwinkleStar()}var t=e.prototype;return t.createWhiteStar=function(){var e=this;this.whiteStar=this.particleManager.createEmitter({frame:dc.FX_STAR_WHITE,lifespan:{min:300,max:500},quantity:30,scaleX:{start:1/0,end:0,ease:Phaser.Math.Easing.Expo.In},scaleY:{start:1/0,end:0,ease:Phaser.Math.Easing.Expo.In},rotate:{start:1/0,end:1/0},alpha:{start:2,end:.3,ease:Phaser.Math.Easing.Expo.In},accelerationX:20,accelerationY:20,blendMode:Phaser.BlendModes.ADD,particleClass:hc,emitCallback:function(t){t.init({xCenter:e.currentEmitX,yCenter:e.currentEmitY,fluctuateInitPos:{min:12,max:20},randomScale:{min:.6/pc,max:1/pc},randomRotation:!0,randomSpeed:{min:0,max:70}})},on:!1})},t.createGreenSmoke=function(){var e=this;this.greenSmoke=this.particleManager.createEmitter({frame:dc.FX_FIREWORKS_SOAR_CIRCLE,lifespan:{min:300,max:500},quantity:4,alpha:{start:.6,end:.3},scale:{start:1.4/pc,end:0},blendMode:Phaser.BlendModes.ADD,tint:5624136,particleClass:hc,emitCallback:function(t){t.init({xCenter:e.currentEmitX,yCenter:e.currentEmitY,randomSpeed:{min:20,max:25}})},on:!1})},t.createOrangeStar=function(){var e=this;this.orangeStar=this.particleManager.createEmitter({frame:dc.SOAR_CIRCLE_WHITE,lifespan:{min:300,max:500},quantity:8,scale:{start:1/pc,end:0},tint:[16776960,16753920],particleClass:hc,emitCallback:function(t){t.init({xCenter:e.currentEmitX,yCenter:e.currentEmitY,fluctuateInitPos:{min:5,max:10},randomSpeed:{min:25,max:40}})},on:!1})},t.createTwinkleStar=function(){this.twinkleStar=this.particleManager.createEmitter({on:!1,frame:dc.FX_STAR_WHITE,timeScale:1,lifespan:{min:750,max:1500},particleClass:Ia,speedY:{min:-9,max:-13},accelerationY:{min:-5,max:-10},emitCallback:function(e){e.setScale({min:.25/pc,max:1/pc},Phaser.Math.Between(400,600))}})},t.show=function(e,t){this.currentEmitX=e,this.currentEmitY=t;var n=za.TILE_SIZE*ao.getCurTileScale(),r=new Phaser.Geom.Rectangle(e-n/2,t-n/2,n,n);this.whiteStar.setEmitZone({type:"edge",source:r,quantity:20});var a=new Phaser.Geom.Rectangle(e-n/4,t-n/4,n/2,n/4);this.greenSmoke.setEmitZone({type:"random",source:a,quantity:32});var i=new Phaser.Geom.Rectangle(e-n/3,t-n/3,n/1.5,n/1.5);this.orangeStar.setEmitZone({type:"edge",source:i,quantity:20}),this.twinkleStar.setEmitZone({type:"random",source:i,quantity:8}),this.whiteStar.explode(20,0,0),this.greenSmoke.explode(8,0,0),this.orangeStar.explode(20,0,0),this.twinkleStar.explode(5,0,0)},e}(),mc=function(e){function t(t){var n;return(n=e.call(this,t)||this).cycleDuration=Phaser.Math.Between(300,400),n.customAlpha=void 0,n.accelerationY=5,n}(0,o.Z)(t,e);var n=t.prototype;return n.update=function(t,n,r){var a=e.prototype.update.call(this,t,n,r);return this.updateAlpha(),a},n.setAlpha=function(e,t){this.alpha=0,this.scaleY=0,this.customAlpha=Phaser.Math.FloatBetween(e.min,e.max),this.cycleDuration=null!=t?t:this.cycleDuration},n.setDirection=function(e){this.velocityX="left"===e?Phaser.Math.Between(-5,-10):Phaser.Math.Between(5,10)},n.updateAlpha=function(){var e=1-this.lifeCurrent%this.cycleDuration/this.cycleDuration;this.alpha=this.customAlpha*Math.sin(e*Math.PI)},t}(Phaser.GameObjects.Particles.Particle),vc=mc,gc=ca.Z.EFFECTS,yc=gc.KEY,wc=gc.FRAME,Sc=GameCore.Utils.Image.getImageScale(),Ec=function(e){function t(t){var n;return(n=e.call(this,t,yc,wc.FX_STAR_WHITE)||this).soapBubble=void 0,n.brightParticle=void 0,n.brightDustFlying=void 0,n.setDepth(oo.Z.GAMEPLAY_PARTICLE),n.createSoapBubble(),n.createBrightParticle(),n.createBrightDustFlying(),n}(0,o.Z)(t,e);var n=t.prototype;return n.show=function(){var e=(0,s.Z)(h().mark((function e(t){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.sync(this),e.next=3,u().all([this.runSoapBubble(),this.runBrightParticle(),this.runBrightDustFlying()]);case 3:return e.next=5,this.waitFinish();case 5:t.unSync(this);case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),n.runSoapBubble=function(){var e=(0,s.Z)(h().mark((function e(){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.soapBubble.start(),e.next=3,Oa(this.scene,1e3);case 3:this.soapBubble.stop();case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.runBrightParticle=function(){var e=(0,s.Z)(h().mark((function e(){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.brightParticle.start(),e.next=3,Oa(this.scene,200);case 3:this.brightParticle.stop();case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.runBrightDustFlying=function(){var e=(0,s.Z)(h().mark((function e(){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.brightDustFlying.start(),e.next=3,Oa(this.scene,200);case 3:this.brightDustFlying.stop();case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.waitFinish=function(){var e=(0,s.Z)(h().mark((function e(){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.soapBubble.getAliveParticleCount()>0||this.brightParticle.getAliveParticleCount()>0)){e.next=5;break}return e.next=3,Oa(this.scene,100);case 3:e.next=0;break;case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.createSoapBubble=function(){var e=za.TILE_SIZE*ao.getCurTileScale(),t=new Phaser.Geom.Rectangle(-e/3,-e/3,e/1.5,e/1.5);this.soapBubble=this.createEmitter({on:!1,frame:wc.SOAP,frequency:500,tint:[16753920],lifespan:{min:1200,max:1500},particleClass:Ia,speedY:{min:-30,max:-35},blendMode:Phaser.BlendModes.ADD,alpha:.5,emitZone:{type:"random",source:t,quantity:8},emitCallback:function(e){var n=t.x,r=t.width;e.x<n+r/2?e.setDirection("left"):e.setDirection("right"),e.setScale({min:.7/Sc,max:1/Sc},e.life)}})},n.createBrightParticle=function(){var e=za.TILE_SIZE*ao.getCurTileScale(),t=new Phaser.Geom.Rectangle(-e/4,e/4,e/2,e/8);this.brightParticle=this.createEmitter({on:!1,frame:wc.BRIGHT_DUST,frequency:100,lifespan:{min:1200,max:1500},particleClass:Ia,speedY:{min:-5,max:-10},blendMode:Phaser.BlendModes.SCREEN,emitZone:{type:"random",source:t,quantity:8},emitCallback:function(e){e.setScale({min:1.5/Sc,max:1.5/Sc},e.life)}})},n.createBrightDustFlying=function(){var e=za.TILE_SIZE*ao.getCurTileScale(),t=new Phaser.Geom.Rectangle(-e/4,-e/16,e/2,e/8);this.brightDustFlying=this.createEmitter({on:!1,tint:[2125055,4963574],frame:wc.BRIGHT_DUST,frequency:100,lifespan:{min:1200,max:1500},scale:1.2/Sc,particleClass:vc,speedY:{min:-20,max:-50},blendMode:Phaser.BlendModes.ADD,emitZone:{type:"random",source:t,quantity:8},emitCallback:function(e){e.setAlpha({min:1,max:1},e.life)}})},t}(Phaser.GameObjects.Particles.ParticleEmitterManager),bc=Ec,kc=function(){function e(e){this.scene=void 0,this.pool=[],this.activeManagers=[],this.scene=e}var t=e.prototype;return t.show=function(){var e=(0,s.Z)(h().mark((function e(t){var n,r;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=this.getFreeManager(),this.activeManagers.push(r),r.revive(),e.next=5,r.show(t);case 5:r.kill(),this.activeManagers=Be()(n=this.activeManagers).call(n,(function(e){return e.active}));case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),t.stopAll=function(){this.activeManagers.forEach((function(e){return e.setVisible(!1)}))},t.getFreeManager=function(){var e,t=_()(e=this.pool).call(e,(function(e){return!e.active}));if(t)return t.setScale(1),t.setPosition(0,0),t;var n=new bc(this.scene);return this.scene.add.existing(n),this.pool.push(n),n},e}(),xc=kc,Ac=ca.Z.EFFECTS,Cc=Ac.KEY,Tc=Ac.FRAME,Pc=GameCore.Utils.Image.getImageScale(),Ic=function(e){function t(t){var n;return(n=e.call(this,t,Cc,Tc.FX_STAR_WHITE)||this).brightDustCloudLanding=void 0,n.setDepth(oo.Z.BOARD+1),n.createBrightDustCloudLanding(),n}(0,o.Z)(t,e);var n=t.prototype;return n.show=function(){var e=(0,s.Z)(h().mark((function e(t){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.sync(this),this.runBrightDustCloudLanding(),e.next=4,this.waitFinish();case 4:t.unSync(this);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),n.runBrightDustCloudLanding=function(){var e=(0,s.Z)(h().mark((function e(){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.brightDustCloudLanding.explode(36,0,0);case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.waitFinish=function(){var e=(0,s.Z)(h().mark((function e(){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.brightDustCloudLanding.getAliveParticleCount()>0)){e.next=5;break}return e.next=3,Oa(this.scene,100);case 3:e.next=0;break;case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.createBrightDustCloudLanding=function(){this.brightDustCloudLanding=this.createEmitter({on:!1,frame:Tc.BRIGHT_DUST,quantity:72,lifespan:500,scale:1/Pc,angle:{min:0,max:360,steps:5},particleClass:vc,speed:80,blendMode:Phaser.BlendModes.OVERLAY,emitCallback:function(e){e.setAlpha({min:1,max:1},e.life)}})},t}(Phaser.GameObjects.Particles.ParticleEmitterManager),Oc=Ic,Mc=function(){function e(e){this.scene=void 0,this.pool=[],this.activeManagers=[],this.scene=e}var t=e.prototype;return t.show=function(){var e=(0,s.Z)(h().mark((function e(t){var n,r;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=this.getFreeManager(),this.activeManagers.push(r),r.revive(),e.next=5,r.show(t);case 5:r.kill(),this.activeManagers=Be()(n=this.activeManagers).call(n,(function(e){return e.active}));case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),t.stopAll=function(){this.activeManagers.forEach((function(e){return e.setVisible(!1)}))},t.getFreeManager=function(){var e,t=_()(e=this.pool).call(e,(function(e){return!e.active}));if(t)return t.setScale(1),t.setPosition(0,0),t;var n=new Oc(this.scene);return this.scene.add.existing(n),this.pool.push(n),n},e}(),_c=Mc,Lc=n(342),Rc=n.n(Lc),Bc=ca.Z.EFFECTS,Dc=Bc.KEY,Nc=Bc.FRAME,Gc=GameCore.Utils.Image.getImageScale(),Fc=function(){function e(e){this.scene=void 0,this.particleManager=void 0,this.imageWhiteStar=void 0,this.path=void 0,this.emitter=void 0,this.scene=e.scene,this.particleManager=e,this.path=new Phaser.Curves.Path,this.createWhiteStarFollow(),this.createWhiteStar()}var t=e.prototype;return t.createWhiteStarFollow=function(){this.emitter=this.particleManager.createEmitter({frame:[Nc.BRIGHT],speed:10,lifespan:100,scale:{start:1,end:0},scaleX:1/Gc,scaleY:1/Gc,on:!1})},t.createWhiteStar=function(){this.imageWhiteStar=this.scene.make.image({key:Dc,frame:Nc.BRIGHT}),this.imageWhiteStar.setSizeBasedOnDpr(),this.imageWhiteStar.setVisible(!1),this.imageWhiteStar.setDepth(oo.Z.RACK+1)},t.createPath=function(e,t){if(!(this.path.curves.length>0)){for(var n=[],r=0,a=0,i=0;i<100;i++){a+=Math.PI/16;var s=e+(r+=.15)*Math.cos(a),o=t+r*Math.sin(a);n.push(new Phaser.Math.Vector2(s,o))}this.path.startPoint=new Phaser.Math.Vector2(n[n.length-1].x,n[n.length-1].y),this.path.splineTo(Rc()(n).call(n))}},t.playAnimationMoveToCenter=function(){var e=this;return this.imageWhiteStar.setVisible(!0),this.emitter.start(),this.emitter.startFollow(this.imageWhiteStar),ua(this.scene,{targets:this.path,t:{from:0,to:1},ease:Phaser.Math.Easing.Sine.InOut,duration:500,onUpdate:function(t){var n=t.getValue(0),r=e.path.getPoint(n);e.imageWhiteStar.setPosition(r.x,r.y)},onComplete:function(){e.imageWhiteStar.setVisible(!1),e.emitter.stop()}})},e}(),Zc=function(e){function t(){for(var t,n,r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(n=e.call.apply(e,O()(t=[this]).call(t,a))||this).config=void 0,n.isChangeSpeed=!1,n}(0,o.Z)(t,e);var n=t.prototype;return n.init=function(e){this.config=e,this.modifyStartScale(),this.modifyRotation(),this.modifySpeed()},n.update=function(t,n,r){var a=e.prototype.update.call(this,t,n,r);return this.changeSpeed(),a},n.changeSpeed=function(){this.lifeCurrent%this.life/this.life<=.5&&!this.isChangeSpeed&&(this.velocityX/=2,this.velocityY/=2,this.isChangeSpeed=!0)},n.modifyStartScale=function(){var e=this.config.randomScale;if(e){var t=e.min,n=e.max,r=Phaser.Math.FloatBetween(t,n);this.data.scaleX&&(this.data.scaleX.min=r,this.scaleX=r),this.data.scaleY&&(this.data.scaleY.min=r,this.scaleY=r)}},n.modifyRotation=function(){if(this.config.randomRotation&&this.data.rotate){var e=Phaser.Math.Between(-45,45),t=e+e/Math.abs(e)*100;this.data.rotate.min=e,this.data.rotate.max=t,this.angle=e}},n.modifySpeed=function(){var e=this.config,t=e.xCenter,n=e.randomSpeed;if(n){this.isChangeSpeed=!1;var r=n.min,a=n.max,i=Phaser.Math.Between(r,a),s=0;s=this.x<t?-i:i,this.velocityX=s}},t}(Phaser.GameObjects.Particles.Particle),Uc=Zc,Hc=function(e){function t(){for(var t,n,r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(n=e.call.apply(e,O()(t=[this]).call(t,a))||this).config=void 0,n.isChangeSpeed=!1,n}(0,o.Z)(t,e);var n=t.prototype;return n.init=function(e){this.config=e,this.modifyStartScale(),this.modifyRotation(),this.modifySpeed()},n.update=function(t,n,r){var a=e.prototype.update.call(this,t,n,r);return this.changeSpeed(),a},n.changeSpeed=function(){this.lifeCurrent%this.life/this.life<=.5&&!this.isChangeSpeed&&(this.velocityX/=2,this.velocityY/=2,this.isChangeSpeed=!0)},n.modifyStartScale=function(){var e=this.config.randomScale;if(e){var t=e.min,n=e.max,r=Phaser.Math.FloatBetween(t,n);this.data.scaleX&&(this.data.scaleX.min=r,this.scaleX=r),this.data.scaleY&&(this.data.scaleY.min=r,this.scaleY=r)}},n.modifyRotation=function(){if(this.config.randomRotation&&this.data.rotate){var e=Phaser.Math.Between(-45,45),t=e+e/Math.abs(e)*100;this.data.rotate.min=e,this.data.rotate.max=t,this.angle=e}},n.modifySpeed=function(){var e=this.config,t=e.yCenter,n=e.randomSpeed;if(n){this.isChangeSpeed=!1;var r=n.min,a=n.max,i=Phaser.Math.Between(r,a),s=0;s=this.y<t?-i:i,this.velocityY=s}},t}(Phaser.GameObjects.Particles.Particle),Wc=Hc,Vc=ca.Z.EFFECTS.FRAME,Yc=GameCore.Utils.Image.getImageScale(),zc=function(){function e(e){this.particleManager=void 0,this.currentEmitX=0,this.currentEmitY=0,this.lineTopWhiteStar=void 0,this.lineBottomWhiteStar=void 0,this.lineLeftWhiteStar=void 0,this.lineRightWhiteStar=void 0,this.particleManager=e,this.createLineTopWhiteStar(),this.createLineBottomWhiteStar(),this.createLineLeftWhiteStar(),this.createLineRightWhiteStar()}var t=e.prototype;return t.createLineTopWhiteStar=function(){var e=this;this.lineTopWhiteStar=this.particleManager.createEmitter({frame:Vc.FX_STAR_WHITE,lifespan:{min:400,max:700},scaleX:{start:1/0,end:0,ease:Phaser.Math.Easing.Quartic.In},scaleY:{start:1/0,end:0,ease:Phaser.Math.Easing.Quartic.In},rotate:{start:1/0,end:1/0},accelerationX:20,accelerationY:20,blendMode:Phaser.BlendModes.ADD,particleClass:Wc,emitCallback:function(t){t.init({xCenter:e.currentEmitX,yCenter:e.currentEmitY,randomScale:{min:.6/Yc,max:1/Yc},randomRotation:!0,randomSpeed:{min:30,max:50}})},on:!1})},t.createLineBottomWhiteStar=function(){var e=this;this.lineBottomWhiteStar=this.particleManager.createEmitter({frame:Vc.FX_STAR_WHITE,lifespan:{min:400,max:700},scaleX:{start:1/0,end:0,ease:Phaser.Math.Easing.Quartic.In},scaleY:{start:1/0,end:0,ease:Phaser.Math.Easing.Quartic.In},rotate:{start:1/0,end:1/0},accelerationX:20,accelerationY:20,blendMode:Phaser.BlendModes.ADD,particleClass:Wc,emitCallback:function(t){t.init({xCenter:e.currentEmitX,yCenter:e.currentEmitY,randomScale:{min:.6/Yc,max:1/Yc},randomRotation:!0,randomSpeed:{min:30,max:50}})},on:!1})},t.createLineLeftWhiteStar=function(){var e=this;this.lineLeftWhiteStar=this.particleManager.createEmitter({frame:Vc.FX_STAR_WHITE,lifespan:{min:400,max:700},scaleX:{start:1/0,end:0,ease:Phaser.Math.Easing.Quartic.In},scaleY:{start:1/0,end:0,ease:Phaser.Math.Easing.Quartic.In},rotate:{start:1/0,end:1/0},accelerationX:20,accelerationY:20,blendMode:Phaser.BlendModes.ADD,particleClass:Uc,emitCallback:function(t){t.init({xCenter:e.currentEmitX,yCenter:e.currentEmitY,randomScale:{min:.6/Yc,max:1/Yc},randomRotation:!0,randomSpeed:{min:30,max:50}})},on:!1})},t.createLineRightWhiteStar=function(){var e=this;this.lineRightWhiteStar=this.particleManager.createEmitter({frame:Vc.FX_STAR_WHITE,lifespan:{min:400,max:700},scaleX:{start:1/0,end:0,ease:Phaser.Math.Easing.Quartic.In},scaleY:{start:1/0,end:0,ease:Phaser.Math.Easing.Quartic.In},rotate:{start:1/0,end:1/0},accelerationX:20,accelerationY:20,blendMode:Phaser.BlendModes.ADD,particleClass:Uc,emitCallback:function(t){t.init({xCenter:e.currentEmitX,yCenter:e.currentEmitY,randomScale:{min:.6/Yc,max:1/Yc},randomRotation:!0,randomSpeed:{min:30,max:50}})},on:!1})},t.show=function(e,t,n,r){this.currentEmitX=e,this.currentEmitY=t;var a=this.particleManager.scene.gameZone.width,i=new Phaser.Geom.Rectangle(e-a/2,t-r/2,a,10);this.lineTopWhiteStar.setEmitZone({type:"random",source:i,quantity:150}),this.lineTopWhiteStar.explode(150,0,0);var s=new Phaser.Geom.Rectangle(e-a/2,t+r/2-20,a,10);this.lineBottomWhiteStar.setEmitZone({type:"random",source:s,quantity:150}),this.lineBottomWhiteStar.explode(150,0,0);var o=new Phaser.Geom.Rectangle(e-n/2+15,t-r/2,10,r);this.lineLeftWhiteStar.setEmitZone({type:"random",source:o,quantity:50}),this.lineLeftWhiteStar.explode(50,0,0);var c=new Phaser.Geom.Rectangle(e+n/2-25,t-r/2,10,r);this.lineRightWhiteStar.setEmitZone({type:"random",source:c,quantity:50}),this.lineRightWhiteStar.explode(50,0,0)},e}(),Kc=ca.Z.EFFECTS,jc=Kc.KEY,Xc=Kc.FRAME,qc=function(){function e(e){this.scene=void 0,this.particleManager=void 0,this.particleManagerUnderRack=void 0,this.particleManagerOnRack=void 0,this.starMoveToCenter=void 0,this.unlockExtraSlotVFX=void 0,this.tileMatchVFX=void 0,this.tileClickVFX=void 0,this.tileReturnVFX=void 0,this.scene=e,this.createParticle(),this.tileMatchVFX=new fc(this.particleManager),this.tileClickVFX=new xc(this.scene),this.tileReturnVFX=new _c(this.scene),this.unlockExtraSlotVFX=new zc(this.particleManagerUnderRack),this.starMoveToCenter=new Fc(this.particleManagerOnRack)}var t=e.prototype;return t.showEmittingParticles=function(){this.particleManager.setVisible(!0)},t.hideEmittingParticles=function(){this.particleManager.setVisible(!1),this.tileClickVFX.stopAll()},t.createParticle=function(){this.particleManager=this.scene.add.particles(jc,Xc.FX_STAR_WHITE),this.particleManager.setDepth(oo.Z.GAMEPLAY_PARTICLE),this.particleManagerUnderRack=this.scene.add.particles(jc,Xc.FX_STAR_WHITE),this.particleManagerUnderRack.setDepth(oo.Z.RACK-1),this.particleManagerOnRack=this.scene.add.particles(jc,Xc.FX_STAR_WHITE),this.particleManagerOnRack.setDepth(oo.Z.RACK+1)},e}(),Qc=qc,Jc=n(118),$c=n.n(Jc),eu=n(94),tu=n.n(eu);function nu(e,t){var n="undefined"!==typeof C()&&P()(e)||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=function(e,t){var n;if(!e)return;if("string"===typeof e)return ru(e,t);var r=b()(n=Object.prototype.toString.call(e)).call(n,8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return x()(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return ru(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0;return function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function ru(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var au=function(e){function t(t,n){var r,a;(a=e.call(this,t)||this).config=void 0,a.isEnable=void 0,a.minValue=void 0,a.maxValue=void 0,a.isScrolling=void 0,a.boundTop=void 0,a.boundBottom=void 0,a.maskGraphics=void 0,a.objects=void 0,a._value=0,a.velocity=0,a.isScrollingSmooth=void 0,a.lastScrollY=void 0,a.isScrollingBack=void 0,a.scrollingBackTo=void 0,a.lastScrollYCount=0,a.scrollBackTween=void 0,a.onScrollEvents=[],a.updateObjectVisible=(0,wr.D)((function(){for(var e=a.objects.getChildren(),t=0;t<e.length;t++){var n=e[t];n.y+n.height<-a.height||n.y-n.height>a.height?n.setVisible(!1):n.active&&n.setVisible(!0)}}),100,{maxWait:100}),a.update=function(e,t){a.isScrollingSmooth&&a.velocity&&a.scrollingSmooth(t)},a.checkReachBound=function(){return a.isReachTop()||a.isReachBottom()},a.onMouseScroll=(0,wr.D)((function(e,t,n){if(a.isEnable){var r;if(a.isScrolling=!0,a.checkReachBound())return a.lastScrollY=Ne()(r=a.lastScrollY).call(r,(function(){return 0})),void(a.isScrolling=!1);a.stopScrollingBack(),a.startScrollSmooth(-n*a.scrollSmooth/15)}}),100,{isImmediate:!0,maxWait:100}),a.onTouchScroll=function(e){if(a.isEnable){a.velocity&&a.stopScrollSmooth(),a.stopScrollingBack(),a.isScrolling=!0;var t=a.scene.game.world.getZoomRatio(),n=e.position,r=e.prevPosition,i=(n.y-r.y)/t,s=a.height*a.maxScrollOver,o=1;if(a.lastScrollY[++a.lastScrollYCount%a.lastScrollY.length]=i,a.isReachTop()&&i>=0){var c=(s+(-a.minValue-a.value))/s;o=Math.min(o,c)}if(a.isReachBottom()&&i<=0){var u=(s-(-a.maxValue-a.value))/s;o=Math.min(o,u)}var l=i*o,h=a.maxScrollOver*a.height;a.value+l>-a.minValue+h?a.value=-a.minValue+h:a.value+l<-a.maxValue-h?a.value=-a.maxValue-h:a.value+=l,a.callOnScrollEvents(a.value,l)}},a.onTouchDown=function(){a.isEnable&&(a.velocity&&a.stopScrollSmooth(),a.stopScrollingBack())},a.onTouchEnd=function(){var e,t;if(a.input.enabled&&(a.isReachTop()&&(a.startScrollingBack(-a.minValue),a.stopScrollSmooth()),a.isReachBottom()&&(a.startScrollingBack(-a.maxValue),a.stopScrollSmooth()),a.isScrolling)){var n=tu()(e=a.lastScrollY).call(e,(function(e,t){return e+t}))/a.lastScrollY.length;a.startScrollSmooth(n*a.scrollSmooth),a.lastScrollY=Ne()(t=a.lastScrollY).call(t,(function(){return 0}))}},a.config=(0,i.Z)({marginTop:0,marginBottom:0,maxScrollOver:.15,acceleration:.05,scrollSmooth:45,scrollingBackRate:5},n);var s=n.width,o=n.height;return a.isEnable=!1,a.minValue=-a.config.marginTop,a.maxValue=a.minValue,a.lastScrollY=$c()(r=new Array(3)).call(r,0),a.setSize(s,o),a.createGroup(),a.createInput(),a.createEvents(),a.scene.add.existing((0,jr.Z)(a)),a}(0,o.Z)(t,e);var n=t.prototype;return n.onScroll=function(e){this.onScrollEvents.push(e)},n.gotoTop=function(){this.value=this.config.marginTop},n.reset=function(){this.minValue=-this.config.marginTop,this.maxValue=this.minValue,this.isScrolling=!1,this.isScrollingBack=!1,this.isScrollingSmooth=!1,this.gotoTop(),this.setEnable(!1)},n.createDebug=function(){var e=this.drawDebugBox(16711680,.8);console.log(null==e?void 0:e.x,null==e?void 0:e.y,null==e?void 0:e.displayWidth,null==e?void 0:e.displayHeight)},n.setEnable=function(e){this.isEnable=e,e?this.setInteractive({draggable:!0,useHandCursor:!0}):this.disableInteractive()},n.addItem=function(e){this.addAt(e),this.objects.add(e);var t=e.y,n=e.height,r=t-n/2-this.marginTop+this.height/2,a=t+n/2+this.marginBottom-this.height/2;this.minValue=Math.min(this.minValue,r,0),this.maxValue=Math.max(this.maxValue,a,0),this.updateObjectVisible()},n.addItems=function(e){var t=this;this.addAt(e),this.objects.addMultiple(e);var n=Ne()(e).call(e,(function(e){return e.y-e.height/2-t.marginBottom+t.height/2})),r=Ne()(e).call(e,(function(e){return e.y+e.height/2+t.marginBottom-t.height/2}));this.minValue=Math.min(this.minValue,Math.max.apply(Math,n),0),this.maxValue=Math.max(this.maxValue,Math.max.apply(Math,r),0),this.updateObjectVisible()},n.clearItem=function(){this.objects.clear(!0,!0),this.reset()},n.getChildren=function(){var e;return Be()(e=this.objects.getChildren()).call(e,(function(e){return e.active}))},n.createBound=function(e,t,n,r){this.boundTop=this.scene.make.image({key:e,frame:t}),this.boundBottom=this.scene.make.image({key:e,frame:t}),this.boundTop.setTint(r),this.boundBottom.setTint(r),this.boundTop.setAlpha(1,1,0,0),this.boundBottom.setAlpha(0,0,1,1),this.boundTop.setDepth(oo.Z.PRIORITY),this.boundBottom.setDepth(oo.Z.PRIORITY);var a=this.width,i=n,s=this.getWorldPosition(),o=s.x,c=s.y;this.boundTop.setDisplaySize(a,i),this.boundBottom.setDisplaySize(a,i),this.boundTop.setY(-this.displayHeight/2+i/2+c-this.y-1),this.boundBottom.setY(this.displayHeight/2-i/2+c-this.y+1),this.boundTop.setX(o-this.x),this.boundBottom.setX(o-this.x),this.add([this.boundTop,this.boundBottom])},n.createMask=function(){var e;null==(e=this.maskGraphics)||e.destroy(),this.maskGraphics=this.scene.make.graphics({fillStyle:{color:255,alpha:1},visible:!0}),this.maskGraphics.setName("MaskGraphics");var t=this.width,n=this.height;this.maskGraphics.fillRoundedRect(0-t/2,0-n/2,t,n,0),this.setMask(this.maskGraphics.createGeometryMask()),this.scene.events.off(Phaser.Scenes.Events.UPDATE,this.updateMask,this),this.scene.events.on(Phaser.Scenes.Events.UPDATE,this.updateMask,this)},n.updateMask=function(){var e=this.getWorldPosition(),t=e.x,n=e.y;this.maskGraphics.setPosition(t,n)},n.createGroup=function(){this.objects=this.scene.make.group({})},n.updateObject=function(e){this.objects.incY(e),this.updateObjectVisible()},n.createInput=function(){this.setInteractive({draggable:!0,useHandCursor:!0}),this.on(Phaser.Input.Events.POINTER_WHEEL,this.onMouseScroll),this.on(Phaser.Input.Events.GAMEOBJECT_DRAG,this.onTouchScroll),this.on(Phaser.Input.Events.GAMEOBJECT_POINTER_DOWN,this.onTouchDown),this.scene.input.on(Phaser.Input.Events.POINTER_UP,this.onTouchEnd,this)},n.createEvents=function(){this.scene.events.on(Phaser.Scenes.Events.UPDATE,this.update)},n.callOnScrollEvents=function(e,t){for(var n,r=nu(this.onScrollEvents);!(n=r()).done;){(0,n.value)(this,e,t)}},n.startScrollingBack=function(e){var t,n=this;this.isScrollingBack=!0,this.scrollingBackTo=e,null!=(t=this.scrollBackTween)&&t.isPlaying()||(this.scrollBackTween=this.scene.tweens.addCounter({from:this.value,to:e,duration:333,ease:Phaser.Math.Easing.Cubic.Out,onUpdate:function(e){var t=e.getValue(),r=t-n.value;n.value=t,n.callOnScrollEvents(n.value,r)},onComplete:function(){var t=e-n.value;n.isScrollingBack=!1,n.value=e,n.callOnScrollEvents(n.value,t)}}))},n.stopScrollingBack=function(){var e;this.isScrollingBack=!1,null==(e=this.scrollBackTween)||e.remove(),this.scrollBackTween=void 0},n.scrollingSmooth=function(e){var t=this.velocity*e/1e3;this.value+=t;var n=Math.abs(this.velocity)/this.velocity;this.isReachTop()&&(this.startScrollingBack(-this.minValue),this.stopScrollSmooth()),this.isReachBottom()&&(this.startScrollingBack(-this.maxValue),this.stopScrollSmooth()),this.callOnScrollEvents(this.value,t),Math.abs(this.velocity)<1?this.stopScrollSmooth():this.velocity-=Math.abs(this.velocity)*this.acceleration*n},n.startScrollSmooth=function(e){this.isScrollingSmooth=!0,e&&(e*this.velocity>0?this.velocity+=e:this.velocity=e)},n.stopScrollSmooth=function(){this.isScrollingSmooth=!1,this.isScrolling=!1,this.velocity=0,this.callOnScrollEvents(this.value,0)},n.stopScrolling=function(){this.stopScrollSmooth(),this.stopScrollingBack()},n.isReachTop=function(){return this.value>-this.minValue},n.isReachBottom=function(){return-this.value>this.maxValue},(0,le.Z)(t,[{key:"marginTop",get:function(){return this.config.marginTop}},{key:"marginBottom",get:function(){return this.config.marginBottom}},{key:"acceleration",get:function(){return this.config.acceleration}},{key:"maxScrollOver",get:function(){return this.config.maxScrollOver}},{key:"scrollSmooth",get:function(){return this.config.scrollSmooth}},{key:"scrollingBackRate",get:function(){return this.config.scrollingBackRate}},{key:"value",get:function(){return this._value},set:function(e){var t=e-this._value;this._value=e,this.updateObject(t)}}]),t}(Phaser.GameObjects.Container),iu=au,su=(function(e){function t(t){var n;return(n=e.call(this,t,"UpdateAbleObject")||this).updateInfo=void 0,n}(0,o.Z)(t,e)}(Phaser.GameObjects.GameObject),function(e){function t(t,n){var r;return(r=e.call(this,t,n)||this).classType=void 0,r.listConfigs=void 0,r.padding=void 0,r.startObjectIndex=void 0,r.endObjectIndex=void 0,r.listObjects=void 0,r.classType=n.classType,r.listConfigs=n.listConfigs,r.padding=n.padding?n.padding:0,r.objects.classType=r.classType,r.updateConfig(r.listConfigs),r}(0,o.Z)(t,e);var n=t.prototype;return n.reset=function(){e.prototype.reset.call(this),this.killAndHideAll()},n.getChildren=function(){var e;return Be()(e=this.listObjects).call(e,(function(e){return void 0!=e&&e.active}))},n.updateConfig=function(e){var t;this.reset(),this.listConfigs=e,this.listObjects=$c()(t=new Array(e.length)).call(t,void 0),this.addObjectIndex(0,0);var n=this.getEndObjectIndex();this.addObjectIndex(1,n),this.startObjectIndex=this.getStartObjectIndex(),this.endObjectIndex=this.getEndObjectIndex(),this.updateMaxHeight(),this.value=this.marginTop},n.killAndHideAll=function(){var e,t=this;this.listObjects instanceof Array&&Ne()(e=this.listObjects).call(e,(function(e){void 0!==e&&t.objects.killAndHide(e)}))},n.setItemPosition=function(e,t){var n=e.height;e.setPosition(0,n/2+(n+this.padding)*t-this.height/2)},n.updateMaxHeight=function(){return this.maxValue=Math.max(this.listConfigs.length*(this.objHeight+this.padding)-this.padding+this.marginBottom-this.height,0)},n.updateObject=function(t){e.prototype.updateObject.call(this,t);for(var n=this.getStartObjectIndex(),r=this.getEndObjectIndex(),a=this.startObjectIndex;a<=this.endObjectIndex;a++)(a<n||a>r)&&this.killObjectIndex(a,a);for(var i=n;i<=r;i++)(i<this.startObjectIndex||i>this.endObjectIndex)&&this.addObjectIndex(i,i);this.startObjectIndex=n,this.endObjectIndex=r},n.killObjectIndex=function(e,t){for(var n=e;n<=t;n++){var r=this.listObjects[n];r&&(this.objects.killAndHide(r),this.listObjects[n]=void 0)}},n.addObjectIndex=function(e,t){for(var n=e;n<=t;n++){var r=this.padding,a=this.listConfigs;if(n>=a.length)return;var i=this.objects.getFirstDead(!0),s=i.height,o=s/2+(s+r)*n+this.value-this.height/2;i.updateInfo(a[n]),i.setPosition(0,o),i.setActive(!0),i.setVisible(!0),this.addAt(i),this.listObjects[n]=i}},n.getStartObjectIndex=function(){var e=this.objHeight,t=this.padding;return Math.max(Math.floor((0-this.value)/(e+t)),0)},n.getEndObjectIndex=function(){var e=this.objHeight,t=this.padding,n=this.listConfigs,r=e+t;return Math.min(Math.floor((this.height-this.value)/r),n.length)},(0,le.Z)(t,[{key:"objHeight",get:function(){var e=this.objects.getChildren();return 0==e.length?this.maxValue=0:e[0].height}}]),t}(iu)),ou=Ms()(.38,1.37,.64,1),cu=function(e){function t(t){var n;return(n=e.call(this,t)||this).scene=void 0,n.inside=void 0,n.showHideAnimation=void 0,n.scene=t,n.updateSize(),n.createInside(),n}(0,o.Z)(t,e);var n=t.prototype;return n.updateInfo=function(e){var t,n,r=e.id,a=Ne()(this.scene).getScrollerBlockPayload(r),i=a.title,s=a.startLevel,o=a.endLevel,c=a.textures,u=a.backgroundCardPayloads,l=c.key,h=c.frame;this.inside.setTitleText(i),this.inside.setSubtitleText("Level "+s+" - "+o),this.inside.setNewBackground(l,h);var d=b()(t=this.inside.backgroundCards).call(t,0,u.length);b()(n=this.inside.backgroundCards).call(n,u.length).forEach((function(e){e.kill()})),d.forEach((function(e,t){e.revive(),e.updatePayload(u[t])})),this.inside.alignCards(d),this.playShowUpAnimation()},n.updateSize=function(){this.setSize(t.WIDTH,t.HEIGHT)},n.createInside=function(){var e=this.scene.screen.get(en.o4.MAP_SCREEN);this.inside=e.spawnMapBlockInside(),this.inside.setScale(0),this.add(this.inside)},n.playShowUpAnimation=function(){var e;null==(e=this.showHideAnimation)||e.remove(),this.inside.setScale(0),this.showHideAnimation=this.scene.tweens.add({targets:this.inside,duration:587,ease:ou,props:{scale:1}})},n.playHideAnimation=function(){var e=(0,s.Z)(h().mark((function e(){var t,n;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return null==(t=this.showHideAnimation)||t.remove(),this.showHideAnimation=this.scene.tweens.add({targets:this.inside,duration:100,ease:Phaser.Math.Easing.Cubic.In,props:{scale:0}}),e.abrupt("return",null==(n=this.showHideAnimation)?void 0:n.waitForCompletion());case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),t}(Phaser.GameObjects.Container);cu.WIDTH=357.5,cu.HEIGHT=197;var uu=cu,lu=function(e){function t(t,n,r){var a;return(a=e.call(this,t,{classType:uu,listConfigs:[],padding:10,width:n,height:r,marginTop:10,marginBottom:10+t.ads.getBannerHeight(),maxScrollOver:.3})||this).createMask(),a.setEnable(!0),a}(0,o.Z)(t,e);var n=t.prototype;return n.updateAllMapBlockInfo=function(e){this.updateConfig(e)},n.getChildren=function(){return e.prototype.getChildren.call(this)},n.moveToIdx=function(e){var t=-(uu.HEIGHT+this.padding)*e+this.height/2-uu.HEIGHT/2;this.value=Phaser.Math.Clamp(t,-this.maxValue,-this.minValue)},t}(su),hu=lu,du=ca.Z.DEFAULT,pu=du.KEY,fu=du.FRAME,mu=function(e){function t(t){var n;return(n=e.call(this,t)||this).background=void 0,n.updateSize(),n.createBackground(),n}(0,o.Z)(t,e);var n=t.prototype;return n.updatePayload=function(e){var t=this.background;if(e.locked)t.setTexture(pu,fu.CARDS.LOCKED_CARD);else{var n=e.texture,r=n.key,a=n.frame;t.setTexture(r,a)}var i=this.width,s=this.height;t.setWorldSize(i,s)},n.updateSize=function(){this.setSize(66,133)},n.createBackground=function(){var e=this.width,t=this.height,n=this.scene.make.image({key:pu,frame:fu.CARDS.LOCKED_CARD});n.setWorldSize(e,t),this.add(n),this.background=n},t}(Phaser.GameObjects.Container),vu=mu,gu=ca.Z.DEFAULT,yu=gu.KEY,wu=gu.FRAME,Su=function(e){function t(t){var n;return(n=e.call(this,t)||this).background=void 0,n.title=void 0,n.subtitle=void 0,n.backgroundCards=[],n.updateSize(),n.createBackground(),n.createTitle(),n.createSubtitle(),n.createBackgroundCards(),n.alignComponents(),n}(0,o.Z)(t,e);var n=t.prototype;return n.setTitleText=function(e){this.title.setText(e);var t=23;for(this.title.setFontSize(t+"px");this.title.width>uu.WIDTH-10;)t--,this.title.setFontSize(t+"px")},n.setSubtitleText=function(e){this.subtitle.setText(e)},n.updateSize=function(){this.setSize(uu.WIDTH,uu.HEIGHT)},n.createBackground=function(){var e=this.scene.make.image({key:yu,frame:wu.GRADIENT_FRAMES.GREEN});e.setWorldSize(uu.WIDTH,uu.HEIGHT),this.add(e),this.background=e},n.setNewBackground=function(e,t){this.background.setTexture(e,t),this.background.setWorldSize(uu.WIDTH,uu.HEIGHT)},n.createTitle=function(){var e=this.scene.make.text({text:"Title",style:{fontFamily:Ee.Z.FONT_FAMILY,fontSize:"23px"},origin:{x:.5,y:.5}});e.setHighQuality();var t=e.context.createLinearGradient(0,0,0,e.height);t.addColorStop(0,"#ffffff"),t.addColorStop(1,"#cce5f9"),e.setFill(t),e.setShadow(0,6,"#0000003F",0,!1,!0),this.add(e),this.title=e},n.createSubtitle=function(){var e=this.scene.make.text({text:"Subtitle",style:{fontFamily:Ee.Z.FONT_FAMILY,fontSize:"14px"},origin:{x:.5,y:.5}});e.setHighQuality();var t=e.context.createLinearGradient(0,0,0,e.height);t.addColorStop(0,"#ffffff"),t.addColorStop(1,"#cce5f9"),e.setFill(t),e.setShadow(0,6,"#0000003F",0,!1,!0),this.add(e),this.subtitle=e},n.createBackgroundCards=function(){var e=this,t=x()({length:5},(function(){return new vu(e.scene)}));this.add(t),this.backgroundCards=t},n.alignComponents=function(){this.title.setY(-77),this.subtitle.setY(-58),this.alignCards(this.backgroundCards)},n.alignCards=function(e){e.forEach((function(e,t,n){var r=n.length;e.setPosition(69*(t-(r-1)/2),26)}))},t}(Phaser.GameObjects.Container),Eu=Su,bu=function(){function e(e){this.scene=void 0,this.insides=[],this.scene=e,this.createReadyInsides()}var t=e.prototype;return t.createReadyInsides=function(){var e=this;this.insides=x()({length:5},(function(){var t=new Eu(e.scene);return t.kill(),t}))},t.spawn=function(){var e,t=_()(e=this.insides).call(e,(function(e){return!e.active}));if(t)return t.revive(),t;var n=new Eu(this.scene);return this.insides.push(n),n},e}(),ku=bu,xu=ca.Z.DEFAULT,Au=xu.KEY,Cu=xu.FRAME,Tu=function(e){function t(t,n,r,a){var i;return(i=e.call(this,t,n,r,a)||this).scene=void 0,i.blockInsidePool=void 0,i.blueBackground=void 0,i.scroller=void 0,i.title=void 0,i.blackBackgroundAnimation=void 0,i.blueBackgroundAnimation=void 0,i.titleAnimation=void 0,i.scene=t,i.initBackBackground(),i.createTitle(),i.createBlockInsidePool(),i.createBlueBackground(),i.createScroller(),i.setDepth(en.Ks.POPUP),i}(0,o.Z)(t,e);var n=t.prototype;return n.open=function(){var t=(0,s.Z)(h().mark((function t(n){return h().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.prototype.open.call(this,n),this.scroller.stopScrolling(),t.next=4,u().all([this.playBlackBackgroundEntranceAnimation(),this.playBlueBackgroundEntranceAnimation()]);case 4:this.playTitleEntranceAnimation(),this.updateScroller();case 6:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),n.close=function(){var t=(0,s.Z)(h().mark((function t(){var n,r,a,i,s,o,c,l;return h().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.scroller.stopScrolling(),this.scroller.setEnable(!1),s=Ne()(n=this.scroller.getChildren()).call(n,(function(e){return e.playHideAnimation()})),t.next=5,u().all(O()(r=[]).call(r,s,[this.playTitleExitAnimation(),this.scene.navigation.fadeOut()]));case 5:return t.next=7,u().all([this.playBlackBackgroundExitAnimation(),this.playBlueBackgroundExitAnimation()]);case 7:o=this.scene.screen.get(en.o4.DASHBOARD_SCREEN),c=o.isOpening,l=null!=(a=null==(i=this.scene.screen.get(en.o4.RESULT_SCREEN))?void 0:i.visible)&&a,c?(o.fadeIn(),this.fadeInDashboardNavigation()):l?this.fadeInDashboardNavigation():this.scene.navigation.fadeIn("Gameplay",!1),e.prototype.close.call(this);case 12:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),n.fadeInDashboardNavigation=function(){return this.scene.navigation.fadeIn("Dashboard",!1)},n.initBackBackground=function(){this.background.setAlpha(0)},n.createBlockInsidePool=function(){var e=new ku(this.scene);this.blockInsidePool=e},n.createBlueBackground=function(){var e=this.scene.make.image({key:Au,frame:Cu.BLANK});e.setTintFill(3048429),e.setAlpha(0),e.setWorldSize(this.width,this.height-57),this.add(e),Phaser.Display.Align.In.BottomCenter(e,this),this.blueBackground=e},n.createScroller=function(){var e=new hu(this.scene,this.width,this.height-57);this.add(e),Phaser.Display.Align.In.BottomCenter(e,this),this.scroller=e},n.createTitle=function(){var e=this.scene.make.text({text:"THEMES",style:{fontFamily:Ee.Z.FONT_FAMILY,fontSize:"30px"},origin:{x:.5,y:.5}});e.setHighQuality();var t=e.context.createLinearGradient(0,0,0,e.height);t.addColorStop(0,"#ffffff"),t.addColorStop(1,"#cce5f9"),e.setFill(t),e.setShadow(0,6,"#0000003F",0,!1,!0),this.add(e),e.setY(-this.height/2+28.5),e.setScale(0),this.title=e},n.playBlackBackgroundEntranceAnimation=function(){var e=(0,s.Z)(h().mark((function e(){var t,n;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return null==(t=this.blackBackgroundAnimation)||t.remove(),this.blackBackgroundAnimation=this.scene.tweens.add({targets:this.background,duration:100,props:{alpha:{from:0,to:.6}}}),e.abrupt("return",null==(n=this.blackBackgroundAnimation)?void 0:n.waitForCompletion());case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.playBlueBackgroundEntranceAnimation=function(){var e=(0,s.Z)(h().mark((function e(){var t,n;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return null==(t=this.blueBackgroundAnimation)||t.remove(),this.blueBackgroundAnimation=this.scene.tweens.add({targets:this.blueBackground,duration:100,props:{alpha:{from:0,to:1}}}),e.abrupt("return",null==(n=this.blueBackgroundAnimation)?void 0:n.waitForCompletion());case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.playBlackBackgroundExitAnimation=function(){var e=(0,s.Z)(h().mark((function e(){var t,n;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return null==(t=this.blackBackgroundAnimation)||t.remove(),this.blackBackgroundAnimation=this.scene.tweens.add({targets:this.background,duration:200,props:{alpha:0}}),e.abrupt("return",null==(n=this.blackBackgroundAnimation)?void 0:n.waitForCompletion());case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.playBlueBackgroundExitAnimation=function(){var e=(0,s.Z)(h().mark((function e(){var t,n;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return null==(t=this.blueBackgroundAnimation)||t.remove(),this.blueBackgroundAnimation=this.scene.tweens.add({targets:this.blueBackground,duration:200,props:{alpha:0}}),e.abrupt("return",null==(n=this.blueBackgroundAnimation)?void 0:n.waitForCompletion());case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.updateScroller=function(){var e=Ne()(this.scene).getAllScrollerBlockInfo(),t=Ne()(this.scene).getCurrentBlockId();this.scroller.updateAllMapBlockInfo(e),this.scroller.setEnable(!0),this.scroller.moveToIdx(Number(t))},n.playTitleEntranceAnimation=function(){var e;null==(e=this.titleAnimation)||e.remove(),this.title.setScale(0),this.title.setAlpha(1),this.titleAnimation=this.scene.add.tween({targets:this.title,duration:300,ease:Ms()(.38,1.37,.64,1),props:{scale:1}})},n.playTitleExitAnimation=function(){var e=(0,s.Z)(h().mark((function e(){var t,n;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return null==(t=this.titleAnimation)||t.remove(),this.titleAnimation=this.scene.add.tween({targets:this.title,duration:200,props:{alpha:0}}),e.abrupt("return",null==(n=this.titleAnimation)?void 0:n.waitForCompletion());case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.spawnMapBlockInside=function(){return this.blockInsidePool.spawn()},t}(GameCore.Screen),Pu=Tu,Iu={COIN_BLOCK:"COIN_BLOCK",WISDOM_BLOCK:"WISDOM_BLOCK",LOGO:"LOGO",PROGRESS_BAR:"PROGRESS_BAR"},Ou=ca.Z.DEFAULT,Mu=Ou.KEY,_u=Ou.FRAME,Lu=function(e){function t(t){var n;return(n=e.call(this,t)||this).wisdomImage=void 0,n.sunImage=void 0,n.sunRayImages=void 0,n.ribbonImage=void 0,n.sunRayContainer=void 0,n.sunRayContainer2=void 0,n.ribbonContainer=void 0,n.sunRayScale=void 0,n.textWisdom=void 0,n.setName(Iu.WISDOM_BLOCK),n.setSize(212,146),n.createSunRay(),n.createSun(),n.createRibbon(),n.createWisdom(),n.createTextWisdom(),n}(0,o.Z)(t,e);var n=t.prototype;return n.createSunRay=function(){this.sunRayImages=[],this.sunRayContainer=this.scene.add.container(),this.sunRayContainer2=this.scene.add.container();for(var e=[{x:-40,y:0},{x:-32,y:-40},{x:-15,y:-45},{x:30,y:-40},{x:50,y:-29},{x:40,y:0}],t=0;t<6;t++){var n=this.scene.make.image({key:Mu,frame:_u.DASHBOARD_SCREEN_SUN_RAY_PREFIX+(t+1)});n.setSizeBasedOnDpr(),n.setPosition(e[t].x,e[t].y),this.sunRayScale||(this.sunRayScale=n.scale),this.sunRayImages.push(n),this.sunRayContainer.add(n);var r=this.scene.make.image({key:Mu,frame:_u.DASHBOARD_SCREEN_SUN_RAY_PREFIX+(t+1)});r.setSizeBasedOnDpr(),r.setPosition(e[t].x,e[t].y),this.sunRayImages.push(r),this.sunRayContainer2.add(r)}this.add(this.sunRayContainer),this.add(this.sunRayContainer2),this.sunRayContainer2.setAngle(180)},n.createSun=function(){this.sunImage=this.scene.make.image({key:Mu,frame:_u.DASHBOARD_SCREEN_SUN}),this.sunImage.setSizeBasedOnDpr(),this.add(this.sunImage),Phaser.Display.Align.In.TopCenter(this.sunImage,this)},n.createRibbon=function(){this.ribbonContainer=this.scene.add.container(),this.ribbonImage=this.scene.make.image({key:Mu,frame:_u.DASHBOARD_SCREEN_RIBBON}),this.ribbonImage.setSizeBasedOnDpr(),this.ribbonContainer.add(this.ribbonImage),this.add(this.ribbonContainer),Phaser.Display.Align.In.Center(this.ribbonImage,this,0,14)},n.createWisdom=function(){this.wisdomImage=this.scene.make.image({key:Mu,frame:_u.DASHBOARD_SCREEN_WISDOM}),this.wisdomImage.setSizeBasedOnDpr(),this.ribbonContainer.add(this.wisdomImage),Phaser.Display.Align.In.Center(this.wisdomImage,this.ribbonImage,0,-2)},n.createTextWisdom=function(){this.textWisdom=this.scene.make.bitmapText({font:Ee.Z.NUMBERS_ORANGE.KEY,size:20,origin:{x:.5,y:.5},text:"444"}),this.textWisdom.setLetterSpacing(7),this.add(this.textWisdom),Phaser.Display.Align.In.Center(this.textWisdom,this.sunImage,0,5)},n.setWisdom=function(e){this.textWisdom.setText(e.toString()),this.configWidthText(55)},n.configWidthText=function(e){for(;this.textWisdom.width>e;)this.textWisdom.setFontSize(.95*this.textWisdom.fontSize)},n.playAnimationSunRay=function(){this.scene.tweens.add({targets:[this.sunRayContainer,this.sunRayContainer2],angle:"+=360",duration:3e4,repeat:-1}),this.scene.tweens.add({targets:[this.sunRayContainer,this.sunRayContainer2],scale:{from:1,to:.8},ease:Phaser.Math.Easing.Cubic.InOut,duration:2e3,repeat:-1,yoyo:!0,repeatDelay:1e3}),this.scene.tweens.add({targets:this.sunRayImages,alpha:{from:1,to:.8},ease:Phaser.Math.Easing.Sine.InOut,duration:600,yoyo:!0,repeat:-1,delay:this.scene.tweens.stagger(100,{start:0})}),this.scene.tweens.add({targets:this.ribbonContainer,scale:1.1,duration:1e3,yoyo:!0,ease:Phaser.Math.Easing.Quadratic.InOut,delay:2500,repeat:-1,repeatDelay:3e3})},n.runAnimation=function(){this.sunRayContainer.setScale(1),this.sunRayContainer2.setScale(1),this.ribbonContainer.setScale(1),this.playAnimationSunRay()},n.stopAnimation=function(){this.scene.tweens.killTweensOf(this.sunRayContainer),this.scene.tweens.killTweensOf(this.sunRayContainer2),this.scene.tweens.killTweensOf(this.sunRayImages),this.scene.tweens.killTweensOf(this.ribbonContainer)},t}(Phaser.GameObjects.Container),Ru=Lu,Bu=n(189),Du=Ms()(.55,.47,.43,.91),Nu={targets:[],yoyo:!0,repeat:-1,duration:600,repeatDelay:50,ease:Du,easeParams:[0,.9],props:{scale:{from:1,to:1.2}}},Gu=function(e){function t(t){return e.call(this,Nu,t)||this}return(0,o.Z)(t,e),t}(Bu.Z),Fu=function(e){function t(t,n,r,a,i,s){var o;return(o=e.call(this,t,n,r,a,i,s)||this).animation=void 0,o.pointerDownCallback=function(){var e;null==(e=o.animation)||e.stop()},o.createAnimation(),o}(0,o.Z)(t,e);var n=t.prototype;return n.createAnimation=function(){var e=this;this.animation=new Gu({targets:[this],props:{scale:{from:1,to:1.05}}}),this.callbackPointerUpOut=function(){var t,n;null!=(t=e.animation.tween)&&t.isPlaying()||null==(n=e.animation)||n.play()}},n.runAnimation=function(){var e;null==(e=this.animation)||e.play(),this.hitZone.on(Phaser.Input.Events.GAMEOBJECT_POINTER_DOWN,this.pointerDownCallback)},n.stopAnimation=function(){var e;null==(e=this.animation)||e.stop(),this.hitZone.off(Phaser.Input.Events.GAMEOBJECT_POINTER_DOWN,this.pointerDownCallback)},t}(Ps.Z),Zu=Fu,Uu=ca.Z.DEFAULT,Hu=Uu.KEY,Wu=Uu.FRAME,Vu=GameCore.Utils.Image.getImageScale(),Yu=function(e){function t(t){var n;return(n=e.call(this,t,Hu,Wu.BUTTON_BLUE_LONG_2,229,68)||this).textLevel=void 0,n.textNumberLevel=void 0,n.particleManager=void 0,n.particle=void 0,n.scene=t,n.setName(Is.DB_LEVEL),n.createTextLevel(),n.createTextNumberLevel(),n.createParticle(),n.alignUI(),n}(0,o.Z)(t,e);var n=t.prototype;return n.createTextLevel=function(){this.textLevel=this.scene.make.image({key:Hu,frame:Wu.TEXT_LEVEL}),this.textLevel.setSizeBasedOnDpr(),this.add(this.textLevel)},n.createTextNumberLevel=function(){this.textNumberLevel=this.scene.make.bitmapText({font:Ee.Z.NUMBERS.KEY,size:this.scene.fontSize(85),origin:{x:.5,y:.5},text:"12"}),this.add(this.textNumberLevel)},n.createParticle=function(){this.particleManager=this.scene.add.particles(ca.Z.EFFECTS.KEY,ca.Z.EFFECTS.FRAME.FX_STAR_WHITE),this.particleManager.setDepth(oo.Z.ON_TOP),this.add(this.particleManager);var e=new Phaser.Geom.Rectangle(-this.width/1.5/2,-this.height/1.5/2,this.width/1.5,this.height/1.5);this.particle=this.particleManager.createEmitter({on:!1,frame:ca.Z.EFFECTS.FRAME.FX_STAR_WHITE,lifespan:{min:1e3,max:1500},frequency:500,quantity:1,maxParticles:10,rotate:{start:1/0,end:0},alpha:{start:2,end:.3,ease:Phaser.Math.Easing.Expo.In},accelerationY:-20,blendMode:Phaser.BlendModes.ADD,particleClass:Ia,emitZone:{type:"random",source:e,quantity:1},emitCallback:function(e){e.scaleX=0,e.scaleY=0;var t=Math.random()>.5?1:-1;e.data.rotate.min=180*t,e.setScale({min:1/Vu,max:1.3/Vu},e.life)}})},n.alignUI=function(){var e=this.textLevel.width,t=this.textNumberLevel.width,n=e+t;this.textLevel.setPosition(-n/2+e/2-3,0),this.textNumberLevel.setPosition(n/2-t/2+3,1)},n.updateTextLevel=function(e){this.textNumberLevel.setText(""+e),this.alignUI()},n.emitParticle=function(){var e=this;this.particle.start(),this.scene.time.delayedCall(2e3,(function(){e.particle.stop()}))},t}(Zu),zu=Yu,Ku=ca.Z.DEFAULT,ju=Ku.KEY,Xu=Ku.FRAME,qu=function(e){function t(t){var n;(n=e.call(this,t)||this).background=void 0,n.logoAnimation=void 0,n.setName(Iu.LOGO);var r=n.createBackground(),a=r.width,i=r.height;return n.setSize(a,i),n.runLogoAnimation(),n}(0,o.Z)(t,e);var n=t.prototype;return n.createBackground=function(){this.background=this.scene.make.image({key:ju,frame:Xu.LOGO}),this.background.setSizeBasedOnDpr(),this.add(this.background);var e=this.background;return{width:e.displayWidth,height:e.displayHeight}},n.runLogoAnimation=function(){this.logoAnimation||(this.logoAnimation=new Gu({targets:[this.background],duration:1400,repeatDelay:200,props:{scale:"+=0.03"}})),this.logoAnimation.play()},t}(Phaser.GameObjects.Container),Qu=qu,Ju=function(e){function t(t,n,r,a){var i;return(i=e.call(this,t,n,r,a)||this).scene=void 0,i.bg=void 0,i.levelButton=void 0,i.logo=void 0,i.wisdomBlock=void 0,i.originalYs=[],i.shouldResetDepth=!1,i.isOpening=!1,i.handleClickLevelButton=(0,s.Z)(h().mark((function e(){var t,n;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(t=i.scene.game.globalScene).disableInput(),i.scene.gameManager.isLosing()&&i.scene.restartLevel(),ps(n=i.scene.level.getLevel()),ms(n),i.scene.stepLogHandler.reset(n),i.scene.logStepProgress(!0),i.scene.prepareFadeIn(),e.next=11,u().all([i.scene.navigation.fadeOut(),i.closeAsync()]);case 11:return e.next=13,u().all([i.scene.navigation.fadeIn("Gameplay"),i.scene.fadeIn()]);case 13:return i.scene.gameManager.tryWarningRackIsAlmostFull(),e.next=16,i.scene.tutorialHandler.showTutorialLate();case 16:t.enableInput();case 17:case"end":return e.stop()}}),e)}))),i.scene=t,i.setDepth(en.Ks.POPUP),i.background.setAlpha(0),i.createBackground(),i.createButtons(),i.createLogo(),i.createWisdomBlock(),i.alignUI(),i.listenInput(),i}(0,o.Z)(t,e);var n=t.prototype;return n.createBackground=function(){var e=this.scene.make.image({key:Pr.Z.DB_BACKGROUND.KEY});e.setWorldSize(this.width,this.height),this.add(e),this.bg=e},n.createButtons=function(){this.createLevelButton()},n.createLogo=function(){this.logo=new Qu(this.scene),this.add(this.logo)},n.createWisdomBlock=function(){this.wisdomBlock=new Ru(this.scene),this.add(this.wisdomBlock)},n.createLevelButton=function(){this.levelButton=new zu(this.scene),this.add(this.levelButton)},n.alignUI=function(){var e=this.scene.ads.getBannerHeight();Phaser.Display.Align.In.BottomCenter(this.logo,this,0,-364-e),Phaser.Display.Align.In.BottomCenter(this.wisdomBlock,this,0,-225-e),Phaser.Display.Align.In.BottomCenter(this.levelButton,this,0,-123-e),this.originalYs=[this.wisdomBlock.y,this.levelButton.y]},n.prepareFadeInFromGameplay=function(){this.revive(),this.setDepth(-1),this.bg.setAlpha(1),this.shouldResetDepth=!0,this.logo.kill(),this.wisdomBlock.kill(),this.levelButton.kill()},n.open=function(){var t=(0,s.Z)(h().mark((function t(n){var r,a;return h().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.shouldResetDepth&&(this.setDepth(en.Ks.POPUP),this.shouldResetDepth=!1),e.prototype.open.call(this,n),this.scene.audio.playMusic("db",{volume:.4}),r=this.scene.player.getBestScore(),this.wisdomBlock.setWisdom(r),a=this.scene.level.getLevel(),this.levelButton.updateTextLevel(a),this.isOpening=!0,t.next=10,this.fadeIn();case 10:this.emitOpenCompleted();case 11:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),n.close=function(){e.prototype.close.call(this),this.isOpening=!1},n.listenInput=function(){this.levelButton.onClick=this.handleClickLevelButton},n.closeAsync=function(){var e=(0,s.Z)(h().mark((function e(){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.fadeOut();case 2:this.scene.screen.close(this.name);case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.fadeIn=function(){var e=(0,s.Z)(h().mark((function e(){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.revive(),this.logo.revive(),this.wisdomBlock.revive(),this.levelButton.revive(),this.levelButton.stopAnimation(),this.wisdomBlock.runAnimation(),this.bg.setAlpha(1),e.next=9,this.runPopupFadeIn();case 9:this.levelButton.runAnimation(),this.levelButton.emitParticle();case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.runPopupFadeIn=function(){var e=(0,s.Z)(h().mark((function e(){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",u().all([this.tweenAlphaIn([this.logo,this.wisdomBlock,this.levelButton]),da(this.wisdomBlock,this.originalYs[0],0),da(this.levelButton,this.originalYs[1],200)]));case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.softFadeOut=function(){var e=(0,s.Z)(h().mark((function e(){var t;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=[this.logo,this.wisdomBlock,this.levelButton],this.levelButton.stopAnimation(),this.wisdomBlock.stopAnimation(),e.next=5,this.tweenAlphaOut(t);case 5:t.forEach((function(e){return e.kill()}));case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.fadeOut=function(){var e=(0,s.Z)(h().mark((function e(){var t;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=[this.logo,this.wisdomBlock,this.levelButton],this.levelButton.stopAnimation(),this.wisdomBlock.stopAnimation(),e.next=5,u().all([this.tweenAlphaOut(t),Sa([this.bg],300,200)]);case 5:t.forEach((function(e){return e.kill()}));case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.tweenAlphaOut=function(){var e=(0,s.Z)(h().mark((function e(t){var n;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.scene.add.tween({targets:t,duration:300,props:{alpha:0},ease:Phaser.Math.Easing.Cubic.In}),e.abrupt("return",n.waitForCompletion());case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),n.tweenAlphaIn=function(){var e=(0,s.Z)(h().mark((function e(t){var n;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.scene.add.tween({targets:t,duration:300,props:{alpha:{from:0,to:1}},ease:Phaser.Math.Easing.Cubic.In}),e.abrupt("return",n.waitForCompletion());case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),t}(GameCore.Screen),$u=Ju,el=ca.Z.GAMEPLAY,tl=el.KEY,nl=el.FRAME,rl=function(e){function t(t,n){var r;return(r=e.call(this,t,tl,nl.NO_MORE_SCREEN_BTN_BLUE,136,39)||this).createIcon(n),r.createText(n),r}(0,o.Z)(t,e);var n=t.prototype;return n.createIcon=function(e){var t=e.iconKey,n=e.iconFrame,r=e.iconOffsetX,a=void 0===r?0:r,i=e.iconOffsetY,s=void 0===i?0:i,o=this.scene.make.image({key:t,frame:n});o.setSizeBasedOnDpr(),this.add(o),Phaser.Display.Align.In.Center(o,this,a,s)},n.createText=function(e){var t=e.textKey,n=e.textFrame,r=e.textOffsetX,a=void 0===r?0:r,i=e.textOffsetY,s=void 0===i?0:i,o=this.scene.make.image({key:t,frame:n});o.setSizeBasedOnDpr(),this.add(o),Phaser.Display.Align.In.Center(o,this,a,s)},n.setDisabled=function(t){e.prototype.setDisabled.call(this,t),this.setAlpha(1)},t}(Ps.Z),al=rl,il=ca.Z.GAMEPLAY,sl=il.KEY,ol=il.FRAME,cl=function(e){function t(t){var n;return(n=e.call(this,t,sl,ol.NO_MORE_SCREEN_BTN_ORANGE,292.5,58)||this).animation=void 0,n.pointerDownCallback=function(){var e;null==(e=n.animation)||e.stop()},n.setName(Is.NMM_ONE_MORE_CHANCE),n.createIcon(),n.createBigText(),n.createSmallText(),n.createAnimation(),n}(0,o.Z)(t,e);var n=t.prototype;return n.createIcon=function(){var e=this.scene.make.image({key:sl,frame:ol.NO_MORE_SCREEN_ICON_AD});e.setSizeBasedOnDpr(),this.add(e),Phaser.Display.Align.In.Center(e,this,-95,0)},n.createBigText=function(){var e=this.scene.make.image({key:sl,frame:ol.NO_MORE_SCREEN_ONE_MORE_CHANCE});e.setSizeBasedOnDpr(),this.add(e),Phaser.Display.Align.In.Center(e,this,24,-8)},n.createSmallText=function(){var e=this.scene.make.image({key:sl,frame:ol.NO_MORE_SCREEN_WATCH_AN_AD});e.setSizeBasedOnDpr(),this.add(e),Phaser.Display.Align.In.Center(e,this,-32,10)},n.setDisabled=function(t){e.prototype.setDisabled.call(this,t),this.setAlpha(1)},n.createAnimation=function(){var e=this;this.animation=new Gu({targets:[this],props:{scale:{from:1,to:1.05}}}),this.callbackPointerUpOut=function(){var t,n;null!=(t=e.animation.tween)&&t.isPlaying()||null==(n=e.animation)||n.play()}},n.runAnimation=function(){var e;null==(e=this.animation)||e.play(),this.hitZone.on(Phaser.Input.Events.GAMEOBJECT_POINTER_DOWN,this.pointerDownCallback)},n.stopAnimation=function(){var e;null==(e=this.animation)||e.stop(),this.hitZone.off(Phaser.Input.Events.GAMEOBJECT_POINTER_DOWN,this.pointerDownCallback)},t}(Ps.Z),ul=cl,ll=ca.Z.GAMEPLAY,hl=ll.KEY,dl=ll.FRAME,pl=function(e){function t(t){var n,r=(n=e.call(this,t)||this).createRibbon(),a=r.width,i=r.height;return n.setSize(a,i),n.createText(),n}(0,o.Z)(t,e);var n=t.prototype;return n.createRibbon=function(){var e=this.scene.make.image({key:hl,frame:dl.NO_MORE_SCREEN_RIBBON_RED});return e.setSizeBasedOnDpr(),this.add(e),{width:e.displayWidth,height:e.displayHeight}},n.createText=function(){var e=this.scene.make.text({style:{fontFamily:Ee.Z.FONT_FAMILY,fontSize:"26px"},text:"NO MORE MOVES"});e.setHighQuality(),this.add(e);var t=e.context.createLinearGradient(0,0,0,e.height);t.addColorStop(0,"#ffffff"),t.addColorStop(1,"#cce5f9"),e.setFill(t),e.setShadow(0,6,"#0000003F",0,!1,!0),Phaser.Display.Align.In.Center(e,this,0,-9)},t}(Phaser.GameObjects.Container),fl=pl,ml=ca.Z.GAMEPLAY,vl=ml.KEY,gl=ml.FRAME,yl=function(e){function t(t){var n;(n=e.call(this,t)||this).picture=void 0,n.createGlow(),n.createCardPicture();var r=n.createThemeCard(),a=r.width,i=r.height;return n.setSize(a,i),n}(0,o.Z)(t,e);var n=t.prototype;return n.setPicture=function(e){this.picture.setTexture(e),this.picture.setWorldSize(this.width-8,this.height-10),this.picture.setY(-1)},n.createGlow=function(){var e=this.scene.make.image({key:vl,frame:gl.NO_MORE_SCREEN_SUN_RAY});e.setSizeBasedOnDpr(),this.add(e)},n.createThemeCard=function(){var e=this.scene.make.image({key:vl,frame:gl.NO_MORE_SCREEN_CARD_FRAME});return e.setSizeBasedOnDpr(),this.add(e),{width:e.displayWidth,height:e.displayHeight}},n.createCardPicture=function(){var e=this.scene.make.image({});this.add(e),this.picture=e},t}(Phaser.GameObjects.Container),wl=yl,Sl=function(e){function t(t,n){var r;return(r=e.call(this,t)||this).options=void 0,r.top=void 0,r.middle=void 0,r.originalMiddleDisplayHeight=void 0,r.bottom=void 0,r.options=n,r.createTop(),r.createMiddle(),r.createBottom(),r.initSize(),r}(0,o.Z)(t,e);var n=t.prototype;return n.createTop=function(){var e=this.options.sliceTextures.top,t=e.key,n=e.frame,r=this.scene.make.image({key:t,frame:n});r.setSizeBasedOnDpr(),this.add(r),this.top=r},n.createMiddle=function(){var e=this.options.sliceTextures.middle,t=e.key,n=e.frame,r=this.scene.make.image({key:t,frame:n});r.setSizeBasedOnDpr(),this.add(r),this.middle=r,this.originalMiddleDisplayHeight=r.displayHeight},n.createBottom=function(){var e=this.options.sliceTextures.bottom,t=e.key,n=e.frame,r=this.scene.make.image({key:t,frame:n});r.setSizeBasedOnDpr(),this.add(r),this.bottom=r},n.initSize=function(){this.setSize(this.getMinWidth(),this.options.initialHeight)},n.setSize=function(t,n){var r=Math.max(t,this.getMinWidth()),a=Math.max(n,this.getMinHeight());e.prototype.setSize.call(this,r,a);var i=Math.max(a-this.top.displayHeight-this.bottom.displayHeight,0);return this.middle.setWorldSize(this.middle.width,i),Phaser.Display.Align.In.TopCenter(this.top,this),Phaser.Display.Align.In.BottomCenter(this.bottom,this),Phaser.Display.Align.To.BottomCenter(this.middle,this.top),this},n.getMinWidth=function(){return this.top.displayWidth},n.getMinHeight=function(){return this.top.displayHeight+this.originalMiddleDisplayHeight+this.bottom.displayHeight},t}(Phaser.GameObjects.Container),El=Sl,bl=ca.Z.GAMEPLAY,kl=bl.KEY,xl=bl.FRAME,Al=function(e){function t(t){var n;(n=e.call(this,t)||this).bg=void 0,n.ribbon=void 0,n.themeCard=void 0,n.btnHome=void 0,n.btnRetry=void 0,n.btnOneMoreChance=void 0;var r=n.createBackground(),a=r.width,i=r.height;return n.setSize(a,i),n.createRibbon(),n.createThemeCard(),n.createBtnHome(),n.createBtnRetry(),n.createBtnOneMoreChance(),n.alignUI(),n}(0,o.Z)(t,e);var n=t.prototype;return n.setThemeCard=function(e){this.themeCard.setPicture(e)},n.createBackground=function(){var e=kl,t=new El(this.scene,{initialHeight:405.5,sliceTextures:{top:{key:e,frame:xl.NO_MORE_SCREEN_POPUP_TOP},middle:{key:e,frame:xl.NO_MORE_SCREEN_POPUP_MIDDLE},bottom:{key:e,frame:xl.NO_MORE_SCREEN_POPUP_BOTTOM}}}),n=t.displayWidth,r=t.displayHeight;return this.add(t),this.bg=t,{width:n,height:r}},n.createRibbon=function(){var e=new fl(this.scene);this.add(e),this.ribbon=e},n.createThemeCard=function(){var e=new wl(this.scene);this.add(e),this.themeCard=e},n.createBtnHome=function(){var e=new al(this.scene,{iconKey:kl,iconFrame:xl.NO_MORE_SCREEN_ICON_HOME,textKey:kl,textFrame:xl.NO_MORE_SCREEN_HOME,iconOffsetX:-28,iconOffsetY:-1,textOffsetX:13,textOffsetY:-1});e.setName(Is.NMM_HOME),this.add(e),this.btnHome=e},n.createBtnRetry=function(){var e=new al(this.scene,{iconKey:kl,iconFrame:xl.NO_MORE_SCREEN_ICON_RETRY,textKey:kl,textFrame:xl.NO_MORE_SCREEN_RETRY,iconOffsetX:-28,iconOffsetY:.5,textOffsetX:14.5,textOffsetY:1.5});e.setName(Is.NMM_REPLAY),this.add(e),this.btnRetry=e},n.createBtnOneMoreChance=function(){var e=new ul(this.scene);this.add(e),this.btnOneMoreChance=e},n.alignUI=function(){var e=this.bg,t=this.ribbon,n=this.themeCard,r=this.btnHome,a=this.btnRetry,i=this.btnOneMoreChance;Phaser.Display.Align.In.TopCenter(t,e,0,t.displayHeight/2-12),Phaser.Display.Align.In.TopCenter(n,e,0,-n.displayHeight/2+40),Phaser.Display.Align.In.TopLeft(r,e,-15,-275),Phaser.Display.Align.In.TopRight(a,e,-13,-275),Phaser.Display.Align.In.BottomCenter(i,e,0,-15)},n.showOneMoreChanceButton=function(){this.btnOneMoreChance.visible||(this.btnOneMoreChance.revive(),this.btnOneMoreChance.stopAnimation(),this.bg.setSize(this.bg.displayWidth,405.5),this.alignUI())},n.hideOneMoreChanceButton=function(){this.btnOneMoreChance.visible&&(this.btnOneMoreChance.stopAnimation(),this.btnOneMoreChance.kill(),this.bg.setSize(this.bg.displayWidth,330),this.alignUI())},n.setOneMoreChanceButtonEnabled=function(e){this.btnOneMoreChance.setDisabled(!e)},n.setHomeButtonEnabled=function(e){this.btnHome.setDisabled(!e)},n.setRetryButtonEnabled=function(e){this.btnRetry.setDisabled(!e)},n.prepareCardEntranceAnimation=function(){this.themeCard.setScale(0),this.scene.tweens.killTweensOf(this.themeCard)},n.prepareButtonOneMoreChangeEntranceAnimation=function(){this.btnOneMoreChance.setScale(1),this.btnOneMoreChance.stopAnimation()},n.runCardEntranceAnimation=function(){var e=(0,s.Z)(h().mark((function e(){var t;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.scene.tweens.add({targets:this.themeCard,duration:300,delay:100,props:{scale:{from:0,to:1,ease:Phaser.Math.Easing.Back.Out}}}),e.abrupt("return",t.waitForCompletion());case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.runOneMoreChanceButtonAnimation=function(){var e;null==(e=this.btnOneMoreChance)||e.runAnimation()},n.runCardPulsateAnimation=function(){this.scene.tweens.add({targets:this.themeCard,duration:1400,delay:100,yoyo:!0,repeat:-1,repeatDelay:200,ease:Du,easeParams:[0,.9],props:{scale:{from:1,to:1.03}}})},n.fadeOutCard=function(){this.scene.tweens.killTweensOf(this.themeCard)},(0,le.Z)(t,[{key:"onHomeClick",set:function(e){this.btnHome.onClick=e}},{key:"onRetryClick",set:function(e){this.btnRetry.onClick=e}},{key:"onOneMoreChanceClick",set:function(e){this.btnOneMoreChance.onClick=e}}]),t}(Phaser.GameObjects.Container),Cl=Al,Tl=function(e){function t(t,n,r,a){var i;return(i=e.call(this,t,n,r,a)||this).popup=void 0,i.screenAnimation=void 0,i.popupAnimation=void 0,i._canClickButtons=!1,i.handleTryClick=(0,s.Z)(h().mark((function e(){var t,n;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i.canClickButtons){e.next=2;break}return e.abrupt("return");case 2:return i.canClickButtons=!1,t=i.scene.gameManager.levelDataManager.getLevelTileCount(),n=i.scene.gameManager.board.getRemainingAmount(),i.scene.stepLogHandler.logAllRemainingSteps(),gs(i.scene.level.getLevel(),!1,t-n),e.next=9,As(i.name);case 9:i.restartLevel();case 10:case"end":return e.stop()}}),e)}))),i.handleHomeClick=function(){i.canClickButtons&&(i.canClickButtons=!1,i.goToHome())},i.handleOneMoreChanceClick=function(){i.canClickButtons&&(i.canClickButtons=!1,i.tryRescue())},i.setDepth(en.Ks.POPUP),i.background.setAlpha(.7),i.createPopup(),i}(0,o.Z)(t,e);var n=t.prototype;return n.open=function(){var t=(0,s.Z)(h().mark((function t(n){var r,a;return h().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.prototype.open.call(this,n),r=this.scene.gameManager.canShowRescueButton(),this.canClickButtons=!1,a=Ne()(this.scene).getCurBgKeyOfCurrentBlock(),this.popup.setThemeCard(a),r?this.popup.showOneMoreChanceButton():this.popup.hideOneMoreChanceButton(),this.popup.prepareCardEntranceAnimation(),this.popup.prepareButtonOneMoreChangeEntranceAnimation(),t.next=10,u().all([this.scene.navigation.fadeIn("NoMoreMoves"),this.runScreenEntranceAnimation(),this.runPopupEntranceAnimation(),this.popup.runCardEntranceAnimation()]);case 10:this.popup.runCardPulsateAnimation(),this.popup.runOneMoreChanceButtonAnimation(),this.canClickButtons=!0;case 13:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),n.runScreenEntranceAnimation=function(){var e=(0,s.Z)(h().mark((function e(){var t,n;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return null==(t=this.screenAnimation)||t.remove(),this.screenAnimation=this.scene.tweens.add({targets:this,duration:250,props:{alpha:{from:0,to:1}}}),e.abrupt("return",null==(n=this.screenAnimation)?void 0:n.waitForCompletion());case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.runPopupEntranceAnimation=function(){var e=(0,s.Z)(h().mark((function e(){var t,n;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return null==(t=this.popupAnimation)||t.remove(),this.popupAnimation=this.scene.tweens.add({targets:this.popup,duration:300,props:{scale:{from:.5,to:1,ease:Phaser.Math.Easing.Back.Out,easeParams:[1.5]}}}),e.abrupt("return",null==(n=this.popupAnimation)?void 0:n.waitForCompletion());case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.close=function(){var t=(0,s.Z)(h().mark((function t(){return h().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.canClickButtons=!1,t.next=3,this.runExitAnimation();case 3:e.prototype.close.call(this);case 4:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),n.runExitAnimation=function(){var e=(0,s.Z)(h().mark((function e(){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u().all([this.runScreenExitAnimation(),this.runPopupExitAnimation()]);case 2:this.popup.fadeOutCard();case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.runScreenExitAnimation=function(){var e=(0,s.Z)(h().mark((function e(){var t,n;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return null==(t=this.screenAnimation)||t.remove(),this.screenAnimation=this.scene.tweens.add({targets:this,duration:250,props:{alpha:0}}),e.abrupt("return",null==(n=this.screenAnimation)?void 0:n.waitForCompletion());case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.runPopupExitAnimation=function(){var e=(0,s.Z)(h().mark((function e(){var t,n;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return null==(t=this.popupAnimation)||t.remove(),this.popupAnimation=this.scene.tweens.add({targets:this.popup,duration:300,props:{scale:{value:.5,ease:Phaser.Math.Easing.Back.In}}}),e.abrupt("return",null==(n=this.popupAnimation)?void 0:n.waitForCompletion());case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.createPopup=function(){this.popup=new Cl(this.scene),this.add(this.popup),this.popup.onRetryClick=this.handleTryClick,this.popup.onHomeClick=this.handleHomeClick,this.popup.onOneMoreChanceClick=this.handleOneMoreChanceClick},n.restartLevel=function(){var e=(0,s.Z)(h().mark((function e(){var t;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return ms(this.scene.level.getLevel()),this.scene.stepLogHandler.reset(this.scene.level.getLevel()),(t=this.scene.game.globalScene).disableInput(),this.scene.restartLevel(),this.scene.prepareFadeIn(),e.next=8,u().all([this.scene.fadeIn(),this.scene.navigation.fadeIn("Gameplay"),this.closeAsync()]);case 8:return this.scene.addShortcut(),e.next=11,this.scene.tutorialHandler.showTutorialLate();case 11:t.enableInput();case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.goToHome=function(){var e=(0,s.Z)(h().mark((function e(){var t,n;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.scene.gameManager.levelDataManager.getLevelTileCount(),n=this.scene.gameManager.board.getRemainingAmount(),this.scene.stepLogHandler.logAllRemainingSteps(),gs(this.scene.level.getLevel(),!1,t-n),fs(this.scene.level.getLevel()),this.scene.setGlobalSceneInputEnabled(!1),e.next=8,this.closeAsync();case 8:return e.next=10,u().all([this.scene.screen.openAsync(en.o4.DASHBOARD_SCREEN),this.scene.navigation.fadeIn("Dashboard")]);case 10:this.scene.setGlobalSceneInputEnabled(!0);case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.tryRescue=function(){var e=(0,s.Z)(h().mark((function e(){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.scene.setGlobalSceneInputEnabled(!1),e.next=3,xs(this.name);case 3:if(!e.sent){e.next=12;break}return e.next=7,u().all([this.closeAsync(),this.scene.navigation.fadeIn("Gameplay")]);case 7:return e.next=9,this.scene.gameManager.rescueAsync();case 9:this.popup.hideOneMoreChanceButton(),e.next=14;break;case 12:this.canClickButtons=!0,this.popup.runOneMoreChanceButtonAnimation();case 14:this.scene.setGlobalSceneInputEnabled(!0);case 15:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.closeAsync=function(){var e=(0,s.Z)(h().mark((function e(){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.scene.screen.closeAsync(this.name));case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),(0,le.Z)(t,[{key:"canClickButtons",get:function(){return this._canClickButtons},set:function(e){this._canClickButtons=e,this.popup.setHomeButtonEnabled(e),this.popup.setRetryButtonEnabled(e),this.popup.setOneMoreChanceButtonEnabled(e)}}]),t}(GameCore.Screen),Pl=Tl,Il=ca.Z.GAMEPLAY,Ol=Il.KEY,Ml=Il.FRAME,_l=function(e){function t(t){var n,r=(n=e.call(this,t)||this).createRibbon(),a=r.width,i=r.height;return n.setSize(a,i),n.createText(),n}(0,o.Z)(t,e);var n=t.prototype;return n.createRibbon=function(){var e=this.scene.make.image({key:Ol,frame:Ml.NO_MORE_SCREEN_RIBBON_RED});return e.setSizeBasedOnDpr(),this.add(e),{width:e.displayWidth,height:e.displayHeight}},n.createText=function(){var e=this.scene.make.text({style:{fontFamily:Ee.Z.FONT_FAMILY,fontSize:"26px"},text:"WELL DONE!"});e.setHighQuality(),this.add(e);var t=e.context.createLinearGradient(0,0,0,e.height);t.addColorStop(0,"#ffffff"),t.addColorStop(1,"#cce5f9"),e.setFill(t),e.setLineSpacing,e.setShadow(0,6,"#0000003F",0,!1,!0),Phaser.Display.Align.In.Center(e,this,0,-8.5)},t}(Phaser.GameObjects.Container),Ll=_l,Rl=ca.Z.GAMEPLAY,Bl=Rl.KEY,Dl=Rl.FRAME,Nl=function(e){function t(t){var n;(n=e.call(this,t)||this).textLevel=void 0;var r=n.createRibbon(),a=r.width,i=r.height;return n.setSize(a,i),n.createText(),n}(0,o.Z)(t,e);var n=t.prototype;return n.createRibbon=function(){var e=this.scene.make.image({key:Bl,frame:Dl.TUTORIAL_SCREEN_RIBBON_TURQUOISE});return e.setSizeBasedOnDpr(),this.add(e),{width:e.displayWidth,height:e.displayHeight}},n.createText=function(){var e=this.scene.make.text({style:{fontFamily:Ee.Z.FONT_FAMILY,fontSize:"23px"},text:"LEVEL 11 COMPLETED"});e.setHighQuality(),e.setOrigin(.5,.5),this.add(e);var t=e.context.createLinearGradient(0,0,0,e.height);t.addColorStop(0,"#ffffff"),t.addColorStop(1,"#cce5f9"),e.setFill(t),e.setLineSpacing,e.setShadow(0,6,"#0000003F",0,!1,!0),Phaser.Display.Align.In.Center(e,this,0,-4.5),this.textLevel=e},n.updateLevel=function(e){this.textLevel.setText("LEVEL "+e+" COMPLETED")},t}(Phaser.GameObjects.Container),Gl=Nl,Fl=function(e){function t(t,n,r,a){var i;return(i=e.call(this,t,n,r,a)||this).scene=void 0,i.ribbonWellDone=void 0,i.ribbonTurquoise=void 0,i.open=function(){var t=(0,s.Z)(h().mark((function t(n){var r,a,s;return h().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.prototype.open.call((0,jr.Z)(i),n),r=i.getData(["level"]),a=r[0],s=void 0===a?0:a,i.ribbonTurquoise.updateLevel(s-1),t.next=5,i.runOpenAnimation();case 5:i.emitOpenCompleted();case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),i.scene=t,i.setDepth(en.Ks.POPUP),i.background.setAlpha(0),i.createRibbonWellDone(),i.createRibbonTurquoise(),i.alignUI(),i}(0,o.Z)(t,e);var n=t.prototype;return n.createRibbonWellDone=function(){this.ribbonWellDone=new Ll(this.scene),this.add(this.ribbonWellDone)},n.createRibbonTurquoise=function(){this.ribbonTurquoise=new Gl(this.scene),this.add(this.ribbonTurquoise)},n.alignUI=function(){var e=this.scene.ads.getBannerHeight();Phaser.Display.Align.In.Center(this.ribbonWellDone,this,0,-e/2),Phaser.Display.Align.In.TopCenter(this.ribbonTurquoise,this,0,-105)},n.runOpenAnimation=function(){var e=(0,s.Z)(h().mark((function e(){var t;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.ribbonWellDone.setAlpha(0),this.ribbonWellDone.setScale(.5),this.ribbonTurquoise.setScale(0),e.next=5,(0,Jr.qZ)(300);case 5:return t=this.ribbonWellDone.y,e.next=8,this.showRibbonWellDone();case 8:return e.next=10,As(this.name);case 10:return e.abrupt("return",u().all([this.hideRibbonWellDone(t),this.runPopupFadeIn()]));case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.showRibbonWellDone=function(){var e=(0,s.Z)(h().mark((function e(){var t,n;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Oa(this.scene,50);case 2:return t=this.ribbonWellDone.y,this.ribbonWellDone.setAlpha(1),n=this.scene.add.tween({targets:this.ribbonWellDone,scale:{from:.5,to:1,duration:150,ease:Phaser.Math.Easing.Cubic.Out},y:{from:t,to:t+10,duration:500,delay:300},ease:Phaser.Math.Easing.Sine.Out}),e.abrupt("return",n.waitForCompletion());case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.hideRibbonWellDone=function(){var e=(0,s.Z)(h().mark((function e(t){var n,r=this;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.scene.add.tween({targets:this.ribbonWellDone,duration:450,alpha:{from:1,to:.1},ease:Phaser.Math.Easing.Circular.Out,onStart:function(){r.scene.audio.playSound(tn.Z.STAR_1,{volume:.6})},onComplete:function(){r.ribbonWellDone.setY(t),r.ribbonWellDone.setAlpha(0)}}),e.abrupt("return",n.waitForCompletion());case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),n.runPopupFadeIn=function(){var e=(0,s.Z)(h().mark((function e(){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",u().all([da(this.ribbonTurquoise,this.ribbonTurquoise.y,100,250)]));case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),t}(GameCore.Screen),Zl=Fl,Ul=ca.Z.DEFAULT,Hl=Ul.KEY,Wl=Ul.FRAME,Vl=ca.Z.EFFECTS,Yl=Vl.KEY,zl=Vl.FRAME,Kl=function(e){function t(t){var n;(n=e.call(this,t)||this).background=void 0,n.textWisdom=void 0,n.glowSun=void 0,n.rotateTween=void 0,n.scaleGlowSun=void 0;var r=n.createBackground(),a=r.width,i=r.height;return n.createGlowSun(),n.setName(Iu.WISDOM_BLOCK),n.setSize(a,i),n.createTextWisdom(),n}(0,o.Z)(t,e);var n=t.prototype;return n.createBackground=function(){this.background=this.scene.make.image({key:Hl,frame:Wl.RESULT_SCREEN_WISDOM}),this.background.setSizeBasedOnDpr(),this.add(this.background);var e=this.background;return{width:e.displayWidth,height:e.displayHeight}},n.createGlowSun=function(){var e=this.scene.make.image({key:Yl,frame:zl.GLOW_SUN});e.setSizeBasedOnDpr(),this.scaleGlowSun=e.scale,this.add(e),this.moveBelow(e,this.background),Phaser.Display.Align.In.Center(e,this.background,0,30),this.glowSun=e},n.createTextWisdom=function(){this.textWisdom=this.scene.make.bitmapText({font:Ee.Z.NUMBERS_ORANGE.KEY,size:37,origin:{x:.5,y:.5},text:"0"}),this.textWisdom.setLetterSpacing(12),this.add(this.textWisdom),Phaser.Display.Align.In.Center(this.textWisdom,this.background,0,30)},n.setTextWisdom=function(e){this.textWisdom.setText(e.toString()),this.configWidthText(100)},n.configWidthText=function(e){for(;this.textWisdom.width>e;)this.textWisdom.setFontSize(.95*this.textWisdom.fontSize)},n.prepareForAnimation=function(){this.glowSun.setScale(0),this.glowSun.setAngle(0)},n.playAnimationRotateGlow=function(){var e=this,t=this.scene.tweens.add({targets:this.glowSun,scale:{from:this.scaleGlowSun,to:this.scaleGlowSun},duration:275,ease:Phaser.Math.Easing.Back.Out,onComplete:function(){t.remove(),e.rotateTween.play()}});this.rotateTween=this.scene.tweens.add({paused:!0,targets:this.glowSun,angle:360,duration:14400,repeat:-1})},n.stopAnimationRotateGlow=function(){this.rotateTween.remove()},t}(Phaser.GameObjects.Container),jl=Kl,Xl=function(e){function t(t){var n;return(n=e.call(this,t)||this).text=void 0,n.createText(),n}(0,o.Z)(t,e);var n=t.prototype;return n.createText=function(){var e=this.scene.make.text({style:{fontFamily:Ee.Z.FONT_FAMILY,fontSize:"23px"},text:"Development 1/8"});e.setHighQuality(),e.setOrigin(.5,.5),this.add(e);var t=e.context.createLinearGradient(0,0,0,e.height);t.addColorStop(0,"#ffffff"),t.addColorStop(1,"#cce5f9"),e.setFill(t),e.setLineSpacing,e.setShadow(0,6,"#0000003F",0,!1,!0),Phaser.Display.Align.In.Center(e,this,0,-4.5),this.text=e},n.setText=function(e){this.text.setText(e)},t}(Phaser.GameObjects.Container),ql=Xl,Ql=ca.Z.DEFAULT,Jl=Ql.KEY,$l=Ql.FRAME,eh=function(e){function t(t){var n;return(n=e.call(this,t)||this).icon=void 0,n.text=void 0,n.createIcon(),n.createText(),n.alignIconAndText(),n}(0,o.Z)(t,e);var n=t.prototype;return n.createIcon=function(){var e=this.scene.make.image({key:Jl,frame:$l.SHOP_SCREEN_COIN});e.setSizeBasedOnDpr(),this.add(e),this.icon=e},n.createText=function(){var e=this.scene.make.text({style:{fontFamily:Ee.Z.FONT_FAMILY,fontSize:"23px"},text:"x 25"});e.setHighQuality(),e.setOrigin(.5,.5),this.add(e);var t=e.context.createLinearGradient(0,0,0,e.height);t.addColorStop(0,"#ffffff"),t.addColorStop(1,"#cce5f9"),e.setFill(t),e.setLineSpacing(10),e.setShadow(0,6,"#0000003F",0,!1,!0),this.text=e},n.setText=function(e){this.text.setText("x "+e),this.alignIconAndText()},n.alignIconAndText=function(){var e=this.icon.width,t=this.text.displayWidth,n=e+t;this.icon.setPosition(-n/2+e/2-3,0),this.text.setPosition(n/2-t/2+3,-3.5)},t}(Phaser.GameObjects.Container),th=eh,nh=function(e){function t(t){var n;return(n=e.call(this,t)||this).scale=1,n.alpha0=1,n.accelerationY=5,n}(0,o.Z)(t,e);var n=t.prototype;return n.update=function(t,n,r){var a=e.prototype.update.call(this,t,n,r);return this.updateScale(),this.updateAlpha(),a},n.updateScale=function(){var e=1-this.lifeCurrent%this.life/this.life;this.scaleX=.5*this.scale*Math.sin(e*Math.PI),this.scaleY=.5*this.scale*Math.sin(e*Math.PI)},n.updateAlpha=function(){var e=1-this.lifeCurrent%this.life/this.life;this.alpha=this.alpha0*Math.sin(e*Math.PI)},n.init=function(){this.alpha=0,Phaser.Math.Between(0,1)&&(this.data.rotate.max=-180)},t}(Phaser.GameObjects.Particles.Particle),rh=nh,ah=function(e){function t(t,n){var r;return(r=e.call(this,t,ca.Z.EFFECTS.KEY,ca.Z.EFFECTS.FRAME.FX_STAR_WHITE)||this).twinkleStar=void 0,r.gift=void 0,r.gift=n,r.scene.add.existing((0,jr.Z)(r)),r.createTwinkleStar(),r}(0,o.Z)(t,e);var n=t.prototype;return n.show=function(){this.revive();var e=this.gift,t=e.x,n=e.y,r=e.displayWidth,a=e.displayHeight,i=new Phaser.Geom.Rectangle(t-r/3,n-a/3,r/1.5,a/3);this.twinkleStar.setEmitZone({type:"random",source:i,quantity:8}),this.twinkleStar.start()},n.stop=function(){this.twinkleStar.stop(),this.kill()},n.createTwinkleStar=function(){this.twinkleStar=this.createEmitter({on:!1,timeScale:1,lifespan:{min:800,max:1e3},quantity:1,frequency:800,particleClass:rh,speedY:{min:-9,max:-13},rotate:{start:0,end:180},accelerationY:{min:-5,max:-10},emitCallback:function(e){e.init()}})},t}(Phaser.GameObjects.Particles.ParticleEmitterManager),ih=ah,sh=ca.Z.DEFAULT,oh=sh.KEY,ch=sh.FRAME,uh=function(e){function t(t){var n;(n=e.call(this,t)||this).scene=void 0,n.development=void 0,n.progressBackground=void 0,n.progressFill=void 0,n.rightProgress=void 0,n.percent=void 0,n.gift=void 0,n.rewardCoins=void 0,n.giftScale=void 0,n.giftX=void 0,n.giftY=void 0,n.giftVFX=void 0,n.maskGraphics=void 0,n.scene=t;var r=n.createBackground(),a=r.width,i=r.height;return n.setName(Iu.PROGRESS_BAR),n.setSize(a,i),n.createDevelopment(),n.createProgressFill(),n.createRightProgress(),n.createGift(),n.createGiftVFX(),n.createRewardCoin(),n.scene.add.existing((0,jr.Z)(n)),n}(0,o.Z)(t,e);var n=t.prototype;return n.setRewardCoins=function(e){this.rewardCoins.setText(e)},n.createBackground=function(){var e=this.scene.make.image({key:oh,frame:ch.RESULT_SCREEN_PROGRESS_BAR_OUTSIDE});e.setSizeBasedOnDpr(),this.add(e);var t=e.displayWidth,n=e.displayHeight;return e.setX(-12),this.progressBackground=e,{width:t,height:n}},n.createDevelopment=function(){this.development=new ql(this.scene),this.add(this.development),Phaser.Display.Align.In.Center(this.development,this,0,-44)},n.createProgressFill=function(){this.progressFill=this.scene.make.image({key:oh,frame:ch.RESULT_SCREEN_PROGRESS_BAR_INSIDE}),this.progressFill.setSizeBasedOnDpr(),this.add(this.progressFill),this.progressFill.setX(-12),this.progressFill.setY(-1)},n.createRightProgress=function(){this.rightProgress=this.scene.make.image({key:oh,frame:ch.RESULT_SCREEN_PROGRESS_RIGHT});var e=this.rightProgress,t=e.width,n=e.height,r=t*this.progressFill.displayHeight/n;this.rightProgress.setWorldSize(r,this.progressFill.displayHeight),this.rightProgress.setVisible(!1),this.add(this.rightProgress),Phaser.Display.Align.In.LeftCenter(this.rightProgress,this.progressFill,0,0)},n.setMaskRightProgress=function(){if(this.maskGraphics){var e=this.maskGraphics.createGeometryMask();this.rightProgress.setMask(e)}else{this.maskGraphics=this.scene.make.graphics({visible:!1});var t=this.progressFill.getWorldPosition(),n=t.x,r=t.y;this.maskGraphics.fillRoundedRect(n-this.progressFill.displayWidth/2+1,r-this.progressFill.displayHeight/2,this.progressFill.displayWidth-1,this.progressFill.displayHeight,9);var a=this.maskGraphics.createGeometryMask();this.rightProgress.setMask(a)}},n.createGift=function(){this.gift=this.scene.make.image({key:oh,frame:ch.RESULT_SCREEN_ICON_GIFT_ACTIVE}),this.gift.setSizeBasedOnDpr(),this.giftScale=this.gift.scale,this.add(this.gift),Phaser.Display.Align.In.RightCenter(this.gift,this,30,-9),this.giftX=this.gift.x,this.giftY=this.gift.y},n.createGiftVFX=function(){this.giftVFX=new ih(this.scene,this.gift),this.add(this.giftVFX)},n.createRewardCoin=function(){this.rewardCoins=new th(this.scene),this.add(this.rewardCoins),this.rewardCoins.kill()},n.setPercent=function(e){e>=1&&(e=1),this.percent=e;var t=this.progressFill.scaleX,n=this.progressFill.scaleY,r=this.rightProgress.displayWidth;if(1==e&&(r=0),this.progressFill.setCrop(0,0,e*(this.progressFill.displayWidth-r)/t,this.progressFill.displayHeight/n),0!=e&&1!=e){var a=e*(this.progressFill.displayWidth-r),i=this.progressFill.displayWidth;this.rightProgress.setVisible(!0),this.rightProgress.x=this.progressFill.x-i/2+this.rightProgress.displayWidth/2+a}else this.rightProgress.setVisible(!1)},n.resetStateProgress=function(){var e;this.gift.setPosition(this.giftX,this.giftY),this.gift.setAlpha(1).setScale(this.giftScale),this.progressBackground.setAlpha(1),this.progressFill.setAlpha(1),this.development.setAlpha(1),null==(e=this.rewardCoins)||e.kill(),this.rightProgress.clearMask()},n.playAnimation=function(){var e=(0,s.Z)(h().mark((function e(t){var n=this;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.rightProgress.clearMask(),this.setMaskRightProgress(),e.abrupt("return",new(u())((function(e){var r=n.scene.tweens.addCounter({from:n.percent,to:t,duration:300,ease:Phaser.Math.Easing.Sine.In,onUpdate:function(e){var t=e.getValue();n.setPercent(t)},onComplete:function(){n.setPercent(t),e(),null==r||r.remove()}})})));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),n.setTextDevelopment=function(e){this.development.setText(e)},n.getTopY=function(){return this.development.y-this.development.displayHeight/2},n.showGiftVFX=function(){this.giftVFX.show()},n.stopGiftVFX=function(){this.giftVFX.stop()},n.playAnimationFadeOutProgress=function(){var e=(0,s.Z)(h().mark((function e(){var t;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.scene.add.tween({targets:[this.progressBackground,this.progressFill,this.development],alpha:0,duration:450,ease:Phaser.Math.Easing.Cubic.Out}),e.abrupt("return",t.waitForCompletion());case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.playAnimationMoveCenterGift=function(){var e=(0,s.Z)(h().mark((function e(){var t;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.scene.add.tween({targets:this.gift,x:0,y:-20,duration:450,scale:1.1*this.giftScale,ease:Phaser.Math.Easing.Quadratic.In}),e.abrupt("return",t.waitForCompletion());case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.playAnimationScaleUpGift=function(){var e=(0,s.Z)(h().mark((function e(){var t;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.scene.add.tween({targets:this.gift,scale:1.5*this.giftScale,y:-40,duration:600,ease:Phaser.Math.Easing.Sine.Out}),e.abrupt("return",t.waitForCompletion());case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.playAnimationFadeInRewardCoin=function(){var e=(0,s.Z)(h().mark((function e(){var t;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.scene.add.tween({targets:this.rewardCoins,alpha:{from:.5,to:1,duration:300},y:{from:-30,to:-70,delay:200},scale:{from:.5,to:1,delay:200},duration:600,ease:Phaser.Math.Easing.Sine.InOut}),e.abrupt("return",t.waitForCompletion());case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.playAnimationFadeOutGift=function(){var e=(0,s.Z)(h().mark((function e(){var t;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.scene.add.tween({targets:this.gift,alpha:0,duration:250,ease:Phaser.Math.Easing.Sine.In}),e.abrupt("return",t.waitForCompletion());case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.playAnimationScaleUpRewardCoin=function(){var e=(0,s.Z)(h().mark((function e(){var t;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.scene.add.tween({targets:this.rewardCoins,y:{from:-70,to:-30},scale:{from:1,to:1.2,duration:150,ease:Phaser.Math.Easing.Cubic.Out},duration:500,ease:Phaser.Math.Easing.Expo.In}),e.abrupt("return",t.waitForCompletion());case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.runAnimationOpenGift=function(){var e=(0,s.Z)(h().mark((function e(){var t,n,r;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.rewardCoins.revive(),this.rewardCoins.setAlpha(0),this.rewardCoins.setY(-30),this.rewardCoins.setScale(.5),e.next=6,u().all([this.playAnimationFadeOutProgress(),this.playAnimationMoveCenterGift()]);case 6:return e.next=8,this.playAnimationScaleUpGift();case 8:return t=this.gift.getWorldPosition(),n=t.x,r=t.y,this.scene.screenParticleHandler.effectCollectCoin.handleShowStarFirework(n,r),this.scene.audio.playSound(tn.Z.OPEN_CHEST),e.next=13,u().all([this.playAnimationFadeInRewardCoin(),this.playAnimationFadeOutGift()]);case 13:return e.next=15,Oa(this.scene,200);case 15:return e.abrupt("return",this.playAnimationScaleUpRewardCoin());case 16:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.getRewardCoinsPosition=function(){return this.rewardCoins.getWorldPosition()},t}(Phaser.GameObjects.Container),lh=ca.Z.DEFAULT,hh=lh.KEY,dh=lh.FRAME,ph=function(e){function t(t){var n;return(n=e.call(this,t,hh,dh.RESULT_SCREEN_BTN_BLUE,229,68)||this).textLevel=void 0,n.textNumberLevel=void 0,n.animation=void 0,n.pointerDownCallback=function(){var e;null==(e=n.animation)||e.stop()},n.scene=t,n.setName(Is.RESULT_LEVEL),n.createTextLevel(),n.createTextNumberLevel(),n.createAnimation(),n.alignUI(),n}(0,o.Z)(t,e);var n=t.prototype;return n.createTextLevel=function(){this.textLevel=this.scene.make.image({key:hh,frame:dh.TEXT_LEVEL}),this.textLevel.setSizeBasedOnDpr(),this.add(this.textLevel)},n.createTextNumberLevel=function(){this.textNumberLevel=this.scene.make.bitmapText({font:Ee.Z.NUMBERS.KEY,size:this.scene.fontSize(85),origin:{x:.5,y:.5},text:"12"}),this.add(this.textNumberLevel)},n.alignUI=function(){var e=this.textLevel.width,t=this.textNumberLevel.width,n=e+t;this.textLevel.setPosition(-n/2+e/2-3,0),this.textNumberLevel.setPosition(n/2-t/2+3,1)},n.updateTextLevel=function(e){this.textNumberLevel.setText(""+e),this.alignUI()},n.createAnimation=function(){var e=this;this.animation=new Gu({targets:[this],props:{scale:{from:1,to:1.05}}}),this.callbackPointerUpOut=function(){var t,n;null!=(t=e.animation.tween)&&t.isPlaying()||null==(n=e.animation)||n.play()}},n.runAnimation=function(){var e;null==(e=this.animation)||e.play(),this.hitZone.on(Phaser.Input.Events.GAMEOBJECT_POINTER_DOWN,this.pointerDownCallback)},n.stopAnimation=function(){var e;null==(e=this.animation)||e.stop(),this.hitZone.off(Phaser.Input.Events.GAMEOBJECT_POINTER_DOWN,this.pointerDownCallback)},t}(Ps.Z),fh=ph,mh=ca.Z.DEFAULT,vh=mh.KEY,gh=mh.FRAME,yh=function(e){function t(t){var n;return(n=e.call(this,t,vh,gh.RESULT_SCREEN_BTN_BLUE,229,68)||this).scene=t,n.setName(Is.RESULT_COLLECT),n.createText(),n}return(0,o.Z)(t,e),t.prototype.createText=function(){var e=this.scene.make.text({style:{fontFamily:Ee.Z.FONT_FAMILY,fontSize:"35px"},text:"COLLECT"});e.setHighQuality(),e.setOrigin(.5,.5);var t=e.context.createLinearGradient(0,0,0,e.height);t.addColorStop(0,"#ffffff"),t.addColorStop(1,"#cce5f9"),e.setFill(t),e.setShadow(0,6,"#0000003F",0,!1,!0),this.add(e)},t}(Ps.Z),wh=yh,Sh=GameCore.Configs.Level.wisdomPerLevel,Eh=function(e){function t(t,n,r,a){var i;return(i=e.call(this,t,n,r,a)||this).scene=void 0,i.ribbonTurquoise=void 0,i.wisdomBlock=void 0,i.progressBar=void 0,i.levelButton=void 0,i.collectButton=void 0,i.rewardCoin=100,i.hasPreviouslyFinishAllLevel=void 0,i.level=void 0,i.open=function(){var t=(0,s.Z)(h().mark((function t(n){var r,a,s,o,c;return h().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.prototype.open.call((0,jr.Z)(i),n),i.scene.audio.playMusic("win_music",{volume:.1}),r=i.getData(["hasPreviouslyFinishAllLevel","level"]),a=r[0],s=void 0!==a&&a,o=r[1],c=void 0===o?0:o,i.hasPreviouslyFinishAllLevel=s,i.level=c,i.prepareFadeIn(),t.next=8,i.fadeIn();case 8:i.emitOpenCompleted();case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),i.handleClickLevelButton=(0,s.Z)(h().mark((function e(){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i.scene.setGlobalSceneInputEnabled(!1),e.next=3,i.loadLevelWithRetryAsync();case 3:if(e.sent){e.next=8;break}return i.levelButton.runAnimation(),i.scene.setGlobalSceneInputEnabled(!0),e.abrupt("return");case 8:return i.progressBar.stopGiftVFX(),i.scene.levelUp(),i.scene.prepareFadeIn(),ms(i.scene.level.getLevel()),i.scene.stepLogHandler.reset(i.scene.level.getLevel()),e.next=15,u().all([i.handleClosePopup(),i.scene.navigation.fadeOut()]);case 15:return e.next=17,u().all([i.scene.fadeIn(),i.scene.navigation.fadeIn("Gameplay")]);case 17:i.scene.setGlobalSceneInputEnabled(!0);case 18:case"end":return e.stop()}}),e)}))),i.handleClickCollectButton=(0,s.Z)(h().mark((function e(){var t,n,r,a,s;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i.scene.setGlobalSceneInputEnabled(!1),e.next=3,i.loadLevelWithRetryAsync();case 3:if(e.sent){e.next=8;break}return i.levelButton.runAnimation(),i.scene.setGlobalSceneInputEnabled(!0),e.abrupt("return");case 8:if(t=i.scene.player.getCustomData("coins"),n=t+i.rewardCoin,i.scene.player.setCustomData("coins",n),r=i.progressBar.getRewardCoinsPosition(),a=r.x,s=r.y,i.scene.navigation.runCoinAnimToCurData(a,s),i.progressBar.stopGiftVFX(),!(i.level>i.scene.level.getMaxLevel())){e.next=22;break}return i.scene.setGlobalSceneInputEnabled(!0),i.progressBar.setScale(0),i.collectButton.setScale(0),i.progressBar.showGiftVFX(),e.next=21,i.animationShowLevelButton();case 21:return e.abrupt("return");case 22:return i.scene.navigation.fadeOut(),e.next=25,i.fadeOut();case 25:return e.next=27,Oa(i.scene,950);case 27:return i.scene.screen.close(i.name),e.next=30,i.scene.screen.openAsync(en.o4.SWITCH_MAP_SCREEN);case 30:return e.next=32,Oa(i.scene,1750);case 32:return e.next=34,i.scene.screen.closeAsync(en.o4.SWITCH_MAP_SCREEN);case 34:return i.scene.levelUp(),i.scene.prepareFadeIn(),ms(i.scene.level.getLevel()),i.scene.stepLogHandler.reset(i.scene.level.getLevel()),e.next=40,u().all([i.scene.fadeIn(),i.scene.navigation.fadeIn("Gameplay")]);case 40:i.scene.setGlobalSceneInputEnabled(!0);case 41:case"end":return e.stop()}}),e)}))),i.handleClosePopup=(0,s.Z)(h().mark((function e(){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.fadeOut();case 2:i.scene.screen.close(i.name);case 3:case"end":return e.stop()}}),e)}))),i.scene=t,i.setDepth(en.Ks.POPUP),i.background.setAlpha(0),i.createButtons(),i.createRibbonTurquoise(),i.createWisdomBlock(),i.createProgressBar(),i.alignUI(),i.listenInput(),i}(0,o.Z)(t,e);var n=t.prototype;return n.createButtons=function(){this.createLevelButton(),this.createCollectButton()},n.createRibbonTurquoise=function(){this.ribbonTurquoise=new Gl(this.scene),this.add(this.ribbonTurquoise)},n.createWisdomBlock=function(){this.wisdomBlock=new jl(this.scene),this.add(this.wisdomBlock)},n.createProgressBar=function(){this.progressBar=new uh(this.scene),this.add(this.progressBar)},n.createLevelButton=function(){this.levelButton=new fh(this.scene),this.add(this.levelButton)},n.createCollectButton=function(){this.collectButton=new wh(this.scene),this.add(this.collectButton)},n.alignUI=function(){var e=this.scene.ads.getBannerHeight(),t=0;this.scene.gameZone.height<667&&(t=20),Phaser.Display.Align.In.TopCenter(this.ribbonTurquoise,this,0,-105),Phaser.Display.Align.In.BottomCenter(this.wisdomBlock,this,0,-380-e),Phaser.Display.Align.In.BottomCenter(this.progressBar,this,0,-153-e+t),Phaser.Display.Align.In.BottomCenter(this.levelButton,this,0,-73-e+t),Phaser.Display.Align.In.BottomCenter(this.collectButton,this,0,-73-e+t);var n=this.ribbonTurquoise.y+this.ribbonTurquoise.displayHeight/2,r=this.progressBar.getTopY();this.wisdomBlock.setY((n+r)/2)},n.listenInput=function(){this.levelButton.onClick=this.handleClickLevelButton,this.collectButton.onClick=this.handleClickCollectButton},n.loadLevelWithRetryAsync=function(){var e=(0,s.Z)(h().mark((function e(t,n){var r,a;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===t&&(t=1e3),void 0===n&&(n=500),!this.scene.level.hasLevelData()){e.next=4;break}return e.abrupt("return",!0);case 4:r=this.scene.game.globalScene,a=1,t>0&&(a+=t),r.screen.open(en.o4.NOTIFY_SCREEN,{message:"\nRetrieving puzzle data.\nThis may take a bit longer\non slower networks.",duration:0,loading:!0});case 8:if(!(a>0)){e.next=26;break}return e.prev=9,e.next=12,this.scene.level.preloadLevelDataAsync();case 12:if(this.scene.level.hasLevelData()){e.next=14;break}throw new Error("Failed");case 14:return r.screen.close(en.o4.NOTIFY_SCREEN),e.abrupt("return",!0);case 18:e.prev=18,e.t0=e.catch(9),a--;case 21:if(!(a>0)){e.next=24;break}return e.next=24,new(u())((function(e){return setTimeout(e,n)}));case 24:e.next=8;break;case 26:return r.screen.open(en.o4.NOTIFY_SCREEN,{message:"\nOops!\nSomething went wrong.\nLet's try again soon!",duration:3e3}),e.abrupt("return",!1);case 28:case"end":return e.stop()}}),e,this,[[9,18]])})));return function(t,n){return e.apply(this,arguments)}}(),n.fadeIn=function(){var e=(0,s.Z)(h().mark((function e(){var t,n,r,a,i,s;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.getMapInfo(),n=t.subTitle,r=t.startProgress,a=t.endProgress,i=this.scene.player.getBestScore(),s=Sh,this.hasPreviouslyFinishAllLevel&&(s=0),this.wisdomBlock.prepareForAnimation(),this.wisdomBlock.setTextWisdom(i-s),this.ribbonTurquoise.updateLevel(this.level-1),this.levelButton.updateTextLevel(this.level-1),this.hasPreviouslyFinishAllLevel?this.progressBar.kill():this.progressBar.revive(),this.progressBar.resetStateProgress(),this.progressBar.setPercent((r-1)/a),this.progressBar.setTextDevelopment(n+" "+(r-1)+"/"+a),this.scene.audio.playSound(tn.Z.STAR_2,{volume:.6}),e.next=15,this.playTweenShowWisdomBlock();case 15:if(this.hasPreviouslyFinishAllLevel){e.next=21;break}return this.scene.audio.playSound(tn.Z.STAR_3,{volume:.6}),e.next=19,this.playTweenShowProgressBar();case 19:return e.next=21,Oa(this.scene,650);case 21:return e.next=23,this.playTweenIncreaseWisdom(i-s,i);case 23:return e.next=25,Oa(this.scene,300);case 25:if(!this.progressBar.active){e.next=30;break}return this.progressBar.setTextDevelopment(n+" "+r+"/"+a),this.scene.audio.playSound(tn.Z.BOOST,{volume:.6}),e.next=30,this.progressBar.playAnimation(r/a);case 30:if(r==a&&!this.hasPreviouslyFinishAllLevel){e.next=37;break}return this.progressBar.showGiftVFX(),e.next=34,this.animationShowLevelButton();case 34:this.levelButton.runAnimation(),e.next=42;break;case 37:return e.next=39,this.progressBar.runAnimationOpenGift();case 39:return this.scene.audio.playSound(tn.Z.CHEST_DROP),e.next=42,this.animationShowCollectButton();case 42:return e.next=44,Oa(this.scene,225);case 44:return e.abrupt("return",u().all([this.runPopupFadeIn(),this.scene.navigation.fadeIn("Dashboard")]));case 45:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.prepareFadeIn=function(){this.wisdomBlock.revive(),this.levelButton.revive(),this.levelButton.stopAnimation(),this.ribbonTurquoise.setScale(1),this.wisdomBlock.setScale(0),this.progressBar.setScale(0),this.levelButton.setScale(0),this.collectButton.setScale(0),this.progressBar.setRewardCoins(this.rewardCoin)},n.getMapInfo=function(){for(var e=this.level-1,t=Ne()(this.scene).getBlockIdByLevel(e),n=Ne()(this.scene).getScrollerBlockPayload(t).backgroundCardPayloads,r="",a=0,i=0,s=0;s<n.length;s++){var o=n[s],c=o.startLevel,u=o.endLevel,l=o.title;if(e>=c&&e<=u){r=l,a=e-c+1,i=u-c+1;break}}return{subTitle:r,startProgress:a,endProgress:i}},n.animationShowLevelButton=function(){var e=(0,s.Z)(h().mark((function e(){var t,n,r,a,i,s,o=this;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.levelButton.getWorldPosition(),n=t.x,r=t.y,a=this.levelButton.button,i=a.displayWidth,s=a.displayHeight,this.scene.time.delayedCall(100,(function(){o.scene.screenParticleHandler.resultEffect.handleShowMoveToCenterEffect(n,r,o.scene.gameZone.width,2*s)})),e.next=5,this.playTweenShowLevelButton();case 5:return e.next=7,Oa(this.scene,400);case 7:return this.scene.screenParticleHandler.resultEffect.stopMoveToCenterEffect(),this.scene.screenParticleHandler.resultEffect.handleShowMoveOutCenterEffect(n,r,i,s),this.levelButton.updateTextLevel(this.level>this.scene.level.getMaxLevel()?this.scene.level.getMaxLevel():this.level),this.scene.audio.playSound(tn.Z.LEVEL_BTN_APPEAR,{volume:.6}),e.next=13,this.playTweenShowLevelButton2();case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.animationShowCollectButton=function(){var e=(0,s.Z)(h().mark((function e(){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ua(this.scene,{targets:[this.collectButton],duration:125,props:{scale:{getStart:function(){return 0},getEnd:function(){return 1.2}}},ease:Phaser.Math.Easing.Cubic.Out});case 2:return e.abrupt("return",ua(this.scene,{targets:[this.collectButton],duration:125,props:{scale:{getEnd:function(){return 1}}},ease:Phaser.Math.Easing.Cubic.Out}));case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.playTweenShowWisdomBlock=function(){var e=(0,s.Z)(h().mark((function e(){var t=this;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new(u())((function(e){var n=t.scene.add.tween({targets:t.wisdomBlock,duration:350,scale:{from:0,to:.8},ease:Phaser.Math.Easing.Back.Out,onComplete:function(){n.remove(),e()}})})));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),n.playTweenShowProgressBar=function(){var e=(0,s.Z)(h().mark((function e(){var t=this;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new(u())((function(e){var n=t.scene.add.tween({targets:t.progressBar,duration:350,scale:{from:0,to:1},ease:Phaser.Math.Easing.Back.Out,onComplete:function(){n.remove(),e()}})})));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),n.playTweenIncreaseWisdom=function(){var e=(0,s.Z)(h().mark((function e(t,n){var r=this;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new(u())((function(e){r.wisdomBlock.playAnimationRotateGlow();var a=r.scene.add.tween({targets:r.wisdomBlock,duration:275,scale:{from:.8,to:1.2},ease:Phaser.Math.Easing.Cubic.Out,onComplete:function(){a.remove(),i.play()}}),i=r.scene.add.tween({targets:r.wisdomBlock,duration:275,scale:{from:1.2,to:1},paused:!0,ease:Phaser.Math.Easing.Cubic.Out,onComplete:function(){i.remove()}}),s=!1,o=1,c=0,u=r.scene.tweens.addCounter({from:t,to:n,duration:550,ease:Phaser.Math.Easing.Sine.In,onUpdate:function(e){var t=Math.floor(e.getValue());if(r.wisdomBlock.setTextWisdom(t),!s){if(o+=e.progress-c,c=e.progress,e.progress>.8)return s=!0,void r.scene.audio.playSound(tn.Z.SCORE_INCREASE_END,{volume:.3});o>.2&&(o=0,r.scene.audio.playSound(tn.Z.SCORE_INCREASE_SINGLE,{volume:.5}))}},onComplete:function(){u.remove(),e()}})})));case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),n.playTweenShowLevelButton=function(){var e=(0,s.Z)(h().mark((function e(){var t=this;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new(u())((function(e){var n=t.scene.add.tween({targets:t.levelButton,duration:250,scale:{from:0,to:1},ease:Phaser.Math.Easing.Back.Out,onComplete:function(){n.remove(),e()}})})));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),n.playTweenShowLevelButton2=function(){var e=(0,s.Z)(h().mark((function e(){var t=this;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new(u())((function(e){var n=t.scene.add.tween({targets:t.levelButton,duration:144,scale:{from:1,to:1.2},yoyo:!0,ease:Phaser.Math.Easing.Sine.InOut,onComplete:function(){n.remove(),e()}})})));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),n.runPopupFadeIn=function(){var e=(0,s.Z)(h().mark((function e(){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),n.fadeOut=function(){var e=(0,s.Z)(h().mark((function e(){var t,n;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.wisdomBlock.stopAnimationRotateGlow(),this.levelButton.stopAnimation(),t=[this.ribbonTurquoise,this.wisdomBlock,this.progressBar,this.levelButton,this.collectButton],n=this.scene.add.tween({targets:t,duration:200,ease:Phaser.Math.Easing.Cubic.In,scale:0}),e.next=6,n.waitForCompletion();case 6:this.wisdomBlock.kill(),this.levelButton.kill();case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),t}(GameCore.Screen),bh=Eh,kh=ca.Z.GAMEPLAY,xh=kh.KEY,Ah=kh.FRAME,Ch=function(e){function t(t){var n;return(n=e.call(this,t,xh,Ah.BUTTON_BLUE_CIRCLE_SMALL,43,43)||this).scene=t,n}return(0,o.Z)(t,e),t.prototype.setIcon=function(e,t,n,r){var a=this.scene.make.image({key:e,frame:t});a.setSizeBasedOnDpr(),this.add(a),a.setPosition(n,r)},t}(Ps.Z),Th=Ch,Ph=ca.Z.GAMEPLAY,Ih=Ph.KEY,Oh=Ph.FRAME,Mh=function(){function e(e){var t=this;this.navigation=void 0,this.settingButton=void 0,this.themeButton=void 0,this.originalX=void 0,this.handleSettingButtonClick=(0,s.Z)(h().mark((function e(){var n,r,a;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=t.navigation.scene).setGlobalSceneInputEnabled(!1),r=[t.navigation.fadeOutHybrid(),t.navigation.fadeOut()],(a=t.getDashboardScreen()).isOpening&&r.push(a.softFadeOut()),e.next=7,u().all(r);case 7:return e.next=9,u().all([n.screen.openAsync(en.o4.SETTINGS_SCREEN),t.navigation.fadeIn("SettingsScreen",!1)]);case 9:n.setGlobalSceneInputEnabled(!0);case 10:case"end":return e.stop()}}),e)}))),this.handleThemeButtonClick=(0,s.Z)(h().mark((function e(){var n,r,a;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=t.navigation.scene).setGlobalSceneInputEnabled(!1),r=[t.navigation.fadeOutHybrid(),t.navigation.fadeOut()],(a=t.getDashboardScreen()).isOpening&&r.push(a.softFadeOut()),e.next=7,u().all(r);case 7:return n.screen.open(en.o4.MAP_SCREEN),e.next=10,t.navigation.fadeIn("Map",!1);case 10:n.setGlobalSceneInputEnabled(!0);case 11:case"end":return e.stop()}}),e)}))),this.navigation=e,this.createSettingButton(),this.createThemeButton(),this.alignUI()}var t=e.prototype;return t.killAll=function(){this.settingButton.kill(),this.themeButton.kill()},t.fadeOut=function(){var e=(0,s.Z)(h().mark((function e(){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u().all([va("left",this.navigation,[this.settingButton],250),Sa([this.themeButton],250)]);case 2:return e.abrupt("return",u().resolve());case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),t.fadeIn=function(){var e=(0,s.Z)(h().mark((function e(){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.settingButton.revive(),this.themeButton.revive(),e.next=4,u().all([fa("left",this.navigation,[this.settingButton],[this.originalX,this.originalX],250),ya([this.themeButton],250)]);case 4:return e.abrupt("return",u().resolve());case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),t.createSettingButton=function(){var e=new Th(this.navigation.scene);e.setIcon(Ih,Oh.DASHBOARD_ICON_SETTING,0,-1),e.setName(Is.DB_SETTING),e.onClick=this.handleSettingButtonClick,this.navigation.add(e),this.settingButton=e},t.createThemeButton=function(){var e=new Th(this.navigation.scene);e.setIcon(Ih,Oh.ICON_THEME,0,-1),e.setName(Is.DB_THEME),e.onClick=this.handleThemeButtonClick,this.navigation.add(e),this.themeButton=e},t.alignUI=function(){Phaser.Display.Align.In.TopLeft(this.settingButton,this.navigation,-6,-6);var e=this.settingButton,t=e.x,n=e.y,r=e.displayWidth;e.displayHeight;this.themeButton.x=t+r+0,this.themeButton.y=n,this.originalX=t},t.getDashboardScreen=function(){return this.navigation.scene.screen.get(en.o4.DASHBOARD_SCREEN)},e}(),_h=Mh,Lh=ca.Z.GAMEPLAY,Rh=Lh.KEY,Bh=Lh.FRAME,Dh=function(){function e(e){var t=this;this.navigation=void 0,this.backButton=void 0,this.settingButton=void 0,this.originalX=void 0,this.canShowSettingsButton=!0,this.handleClickBackButton=(0,s.Z)(h().mark((function e(){var n;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.waitUntilDashboardResourcesLoaded();case 2:if((n=t.navigation.scene.screen.get(en.o4.DASHBOARD_SCREEN))instanceof $u){e.next=6;break}return console.error("Dashboard screen is not found"),e.abrupt("return");case 6:return ws(),vs(t.navigation.scene.level.getLevel()),fs(t.navigation.scene.level.getLevel()),t.navigation.scene.setGlobalSceneInputEnabled(!1),n.prepareFadeInFromGameplay(),e.next=13,u().all([t.navigation.fadeOut(),t.navigation.scene.fadeOut(),t.navigation.scene.tutorialHandler.fadeOut()]);case 13:return t.navigation.scene.screen.open(en.o4.DASHBOARD_SCREEN),e.next=16,t.navigation.fadeIn("Dashboard");case 16:t.navigation.scene.setGlobalSceneInputEnabled(!0);case 17:case"end":return e.stop()}}),e)}))),this.handleSettingButtonClick=(0,s.Z)(h().mark((function e(){var n;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=t.navigation.scene).setGlobalSceneInputEnabled(!1),e.next=4,u().all([t.navigation.fadeOutHybrid(),t.navigation.fadeOut()]);case 4:return e.next=6,u().all([n.screen.openAsync(en.o4.SETTINGS_SCREEN),t.navigation.fadeIn("SettingsScreen",!1)]);case 6:n.setGlobalSceneInputEnabled(!0);case 7:case"end":return e.stop()}}),e)}))),this.navigation=e,this.createBackButton(),this.createSettingsButton(),this.alignUI(),this.setCanShowSettings(!0)}var t=e.prototype;return t.killAll=function(){this.backButton.kill(),this.settingButton.kill()},t.fadeOut=function(){var e=(0,s.Z)(h().mark((function e(){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u().all([va("left",this.navigation,[this.backButton],250),Sa([this.settingButton],250)]);case 2:return e.abrupt("return",u().resolve());case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),t.fadeIn=function(){var e=(0,s.Z)(h().mark((function e(){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.backButton.revive(),this.canShowSettingsButton?this.settingButton.revive():this.settingButton.kill(),e.next=4,u().all([fa("left",this.navigation,[this.backButton],[this.originalX],200),ya([this.settingButton],250)]);case 4:return e.abrupt("return",u().resolve());case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),t.setCanShowSettings=function(e){this.canShowSettingsButton!==e&&(this.canShowSettingsButton=e,e?this.settingButton.revive():this.settingButton.kill())},t.createBackButton=function(){var e=new Th(this.navigation.scene);e.setIcon(Rh,Bh.ICON_BACK,0,-1),e.setName(Is.GP_BACK),e.onClick=this.handleClickBackButton,this.navigation.add(e),this.backButton=e},t.createSettingsButton=function(){var e=new Th(this.navigation.scene);e.setIcon(Rh,Bh.ICON_SETTING,0,-1),e.setName(Is.GP_SETTINGS),e.onClick=this.handleSettingButtonClick,this.navigation.add(e),this.settingButton=e},t.alignUI=function(){Phaser.Display.Align.In.TopLeft(this.backButton,this.navigation,-6,-6);var e=this.backButton,t=e.x,n=e.y,r=e.displayWidth;this.settingButton.x=t+r+0,this.settingButton.y=n,this.originalX=t},t.waitUntilDashboardResourcesLoaded=function(){var e=(0,s.Z)(h().mark((function e(){var t,n;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.navigation.scene.scene.get(Fr.C.LOAD_SCENE),n=this.navigation.scene.game.globalScene,!t.dashboardResourcesLoaded){e.next=4;break}return e.abrupt("return");case 4:return n.screen.open(en.o4.NOTIFY_SCREEN,{message:"Loading...",loading:!0}),e.next=7,t.waitUntilDashboardResourcesLoaded();case 7:n.screen.close(en.o4.NOTIFY_SCREEN);case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),e}(),Nh=Dh,Gh=ca.Z.GAMEPLAY,Fh=Gh.KEY,Zh=Gh.FRAME,Uh=function(e){function t(t){var n;return(n=e.call(this,t)||this).background=void 0,n.panelRightEdge=void 0,n.panelMiddlePart=void 0,n.panelLeftEdge=void 0,n.coinIcon=void 0,n.coinText=void 0,n.coinWithPlusContainer=void 0,n.plusIcon=void 0,n.plusIconOriginalScale=void 0,n.scaleCoinIcon=void 0,n.bubbleCoinAnimation=void 0,n.plusIconAnimationIsPlaying=void 0,n.setName(Iu.COIN_BLOCK),n.createBackground(),n.createPanelRightEdge(),n.createPanelMiddlePart(),n.createPanelLeftEdge(),n.createTextCoin(),n.createCoinWithPlusContainer(),n.calculateSize(),n.alignCoinWithPlusContainer(),n}(0,o.Z)(t,e);var n=t.prototype;return n.createBackground=function(){this.background=this.scene.make.image({key:Fh,frame:Zh.BLANK}),this.background.setWorldSize(99,30),this.background.kill(),this.add(this.background)},n.createPanelRightEdge=function(){var e=this.scene.make.image({key:Fh,frame:Zh.COIN_PANEL_LEFT});e.setSizeBasedOnDpr(),e.setFlipX(!0),this.add(e),this.panelRightEdge=e},n.createPanelMiddlePart=function(){var e=this.scene.make.image({key:Fh,frame:Zh.COIN_PANEL_MIDDLE});e.setSizeBasedOnDpr(),this.add(e),this.panelMiddlePart=e},n.createPanelLeftEdge=function(){var e=this.scene.make.image({key:Fh,frame:Zh.COIN_PANEL_LEFT});e.setSizeBasedOnDpr(),this.add(e),this.panelLeftEdge=e},n.createTextCoin=function(){this.coinText=this.scene.make.bitmapText({font:Ee.Z.NUMBERS.KEY,size:this.scene.fontSize(50),origin:{x:0,y:.5},text:"0"}),this.add(this.coinText)},n.createCoinWithPlusContainer=function(){var e=this.scene.add.container();this.coinIcon=this.scene.make.image({key:Fh,frame:Zh.ICON_COIN});var t=this.scene.make.image({key:Fh,frame:Zh.ICON_PLUS});this.coinIcon.setSizeBasedOnDpr();var n=this.coinIcon,r=n.width,a=n.height;e.setSize(r,a),t.setSizeBasedOnDpr(),this.scaleCoinIcon=this.coinIcon.scale,e.add([this.coinIcon,t]),Phaser.Display.Align.In.BottomRight(t,e,0,3),this.add(e),this.coinWithPlusContainer=e,this.plusIcon=t,this.plusIconOriginalScale=t.scale},n.calculateSize=function(){this.setSize(this.background.displayWidth+this.coinWithPlusContainer.displayWidth,this.coinWithPlusContainer.displayHeight)},n.alignCoinWithPlusContainer=function(){Phaser.Display.Align.In.RightCenter(this.coinWithPlusContainer,this.background,this.coinWithPlusContainer.displayWidth/2,0)},n.alignThreeSlices=function(){Phaser.Display.Align.In.RightCenter(this.panelRightEdge,this.background),Phaser.Display.Align.To.LeftCenter(this.panelMiddlePart,this.panelRightEdge),Phaser.Display.Align.To.LeftCenter(this.panelLeftEdge,this.panelMiddlePart)},n.alignCoinText=function(){this.coinText.setX(this.panelLeftEdge.x+3)},n.getRealWidth=function(){var e=this.panelLeftEdge.x-this.panelLeftEdge.displayWidth/2,t=this.coinWithPlusContainer.x+this.coinWithPlusContainer.displayWidth/2;return Math.abs(t-e)},n.setCoinCount=function(e){this.coinText.setText(e.toString())},n.getCoinPosition=function(){return this.coinWithPlusContainer.getWorldPosition()},n.playBubbleCoinAnimation=function(){var e;null==(e=this.bubbleCoinAnimation)||e.remove(),this.bubbleCoinAnimation=this.scene.tweens.add({targets:this.coinIcon,duration:100,scaleX:{from:this.scaleCoinIcon,to:1.1*this.scaleCoinIcon},scaleY:{from:this.scaleCoinIcon,to:1.1*this.scaleCoinIcon,delay:100},yoyo:!0,repeat:-1})},n.stopBubbleCoinAnimation=function(){var e;null==(e=this.bubbleCoinAnimation)||e.remove(),this.bubbleCoinAnimation=this.scene.tweens.add({targets:this.coinIcon,duration:100,scaleX:this.scaleCoinIcon,scaleY:this.scaleCoinIcon})},n.playAnimationPlusIcon=function(e){void 0===e&&(e=0);var t=this.scene.tweens.add({targets:this.plusIcon,paused:!0,duration:400,scale:{from:this.plusIconOriginalScale,to:1.1*this.plusIconOriginalScale},yoyo:!0,ease:Phaser.Math.Easing.Quadratic.Out,loop:1,loopDelay:200,completeDelay:1e3,onComplete:function(){n.play()}}),n=this.scene.tweens.add({targets:this.plusIcon,paused:!0,duration:400,scale:{from:this.plusIconOriginalScale,to:1.1*this.plusIconOriginalScale},yoyo:!0,ease:Phaser.Math.Easing.Quadratic.Out,loop:1,loopDelay:200,completeDelay:1e3,onComplete:function(){t.play()}});this.plusIconAnimationIsPlaying||(this.plusIconAnimationIsPlaying=!0,this.scene.time.delayedCall(e,(function(){return t.play()})))},n.stopAnimationPlusIcon=function(){this.plusIconAnimationIsPlaying=!1,this.scene.tweens.killTweensOf(this.plusIcon),this.plusIcon.setScale(this.plusIconOriginalScale)},t}(Phaser.GameObjects.Container),Hh=Uh,Wh=ca.Z.GAMEPLAY,Vh=Wh.KEY,Yh=Wh.FRAME,zh=function(e){function t(t){var n;return(n=e.call(this,t,Vh,Yh.BLANK,43,43)||this).block=void 0,n.currentCoinCount=0,n.plusIconTween=void 0,n.threeSlicesAnimationData=void 0,n.scoreCounterAnimationData=void 0,n.setDepth(oo.Z.TEMP_ON_TOP),n.button.kill(),n.setName(Is.DB_SHOP),n.createBlock(),n.updateCoin(),n.initComponents(),n}(0,o.Z)(t,e);var n=t.prototype;return n.updateCoin=function(){this.currentCoinCount=this.scene.player.getCustomData("coins"),this.block.setCoinCount(this.currentCoinCount)},n.createBlock=function(){var e=new Hh(this.scene);this.add(e),Phaser.Display.Align.In.RightCenter(e,this.button),this.block=e},n.initComponents=function(){var e=this.getNewPanelMiddlePartWidth(this.currentCoinCount);this.block.setCoinCount(this.currentCoinCount),this.setBlockMiddlePartWidth(e),this.alignComponents()},n.getNewPanelMiddlePartWidth=function(e){return 9*e.toString().length},n.enablePlusIconAsync=function(){var e=(0,s.Z)(h().mark((function e(t){var n,r=this;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return null==(n=this.plusIconTween)||n.remove(),t||this.block.stopAnimationPlusIcon(),e.abrupt("return",new(u())((function(e){r.plusIconTween=r.scene.add.tween({targets:r.block.plusIcon,duration:200,ease:Phaser.Math.Easing.Back.Out,props:{scale:t?r.block.plusIconOriginalScale:0},onComplete:function(){t&&r.block.playAnimationPlusIcon(500),e()}})})));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),n.updateCoinCountWithAnimation=function(){var e=(0,s.Z)(h().mark((function e(t,n,r){var a;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return void 0===r&&(r=!0),a=this.getNewPanelMiddlePartWidth(t),this.runThreeSlicesAnimation(a,n,r),e.next=5,this.runCoinCounterAnimation(t);case 5:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}(),n.runThreeSlicesAnimation=function(e,t,n){var r,a,i=this;if(void 0===n&&(n=!0),(null==(r=this.threeSlicesAnimationData)?void 0:r.width)!==e){null==(a=this.threeSlicesAnimationData)||null==(a=a.tween)||a.remove();var s=this.block.panelMiddlePart;n&&this.block.playBubbleCoinAnimation();var o=this.scene.tweens.addCounter({from:s.displayWidth,to:e,duration:500,ease:Phaser.Math.Easing.Back.Out,onUpdate:function(e){var n=e.getValue();i.setBlockMiddlePartWidth(n),i.alignComponents(),null==t||t()},onComplete:function(){n&&i.block.stopBubbleCoinAnimation(),delete i.threeSlicesAnimationData}});this.threeSlicesAnimationData={width:e,tween:o}}},n.setBlockMiddlePartWidth=function(e){this.block.panelMiddlePart.setWorldSize(e,this.block.panelMiddlePart.displayHeight)},n.alignComponents=function(){this.block.alignThreeSlices(),this.block.alignCoinText();var e=this.block.getRealWidth();this.button.setWorldSize(e,this.button.height),this.updateSize(),Phaser.Display.Align.In.RightCenter(this.block,this.button)},n.runCoinCounterAnimation=function(){var e=(0,s.Z)(h().mark((function e(t){var n,r,a=this;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((null==(n=this.scoreCounterAnimationData)?void 0:n.value)!==t){e.next=2;break}return e.abrupt("return");case 2:return null==(r=this.scoreCounterAnimationData)||r.tween.remove(),e.abrupt("return",new(u())((function(e){var n=a.scene.tweens.addCounter({from:a.currentCoinCount,to:t,duration:500,onUpdate:function(e){a.currentCoinCount=Math.floor(e.getValue()),a.block.setCoinCount(a.currentCoinCount)},onComplete:function(){e(),a.currentCoinCount=t,delete a.scoreCounterAnimationData}});a.scoreCounterAnimationData={value:t,tween:n}})));case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),n.getCoinPosition=function(){return this.block.getCoinPosition()},n.playTweenScaleUp=function(){var e=(0,s.Z)(h().mark((function e(t){var n,r;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=1,null!=(r=this.scene.screen.get(en.o4.REWARD_SCREEN))&&r.visible&&(n=.5),this.setAlpha(n),e.abrupt("return",ua(this.scene,{targets:[this],props:{scale:{from:1,to:1.05},alpha:1},duration:300,onUpdate:function(){null==t||t()},ease:Phaser.Math.Easing.Cubic.Out}));case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),n.playTweenScaleDown=function(){var e=(0,s.Z)(h().mark((function e(t){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ua(this.scene,{targets:this,props:{scale:{from:1.05,to:1}},duration:300,onUpdate:function(){null==t||t()},ease:Phaser.Math.Easing.Cubic.In}));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),t}(Ps.Z),Kh=zh;function jh(e){for(var t=e.length-1;t>0;t--){var n=e[t],r=e[t-1];if(n.v!=r.v||"stepped"!==r.curve&&"linear"!==r.curve)break;e.pop()}return e}function Xh(e,t,n,r,a,i){return{curve:r==n?0:(e[4*t+0]-n)/(r-n)||0,c2:i==a?0:(e[4*t+1]-a)/(i-a)||0,c3:r==n?0:(e[4*t+2]-n)/(r-n)||1,c4:i==a?0:(e[4*t+3]-a)/(i-a)||1}}var qh=function(e){var t=e.target;return(0,i.Z)({},function(e,t){void 0===t&&(t=[]);function n(e){e=e.replace(/^#/,"");var t=parseInt(e,16);return{r:t>>24&255,g:t>>16&255,b:t>>8&255,a:255&t}}for(var r=e.tint||16777215,a=Phaser.Display.Color.ColorToRGBA(r),s=a.r,o=a.g,c=a.b,u=(a.a,e.alpha),l=[],h=[],d=[],p=[],f=0;f<t.length;f++){var m=t[f],v=u,g=s,y=o,w=c;if(m.color){var S=n(m.color);v=S.a/255,g=S.r,y=S.g,w=S.b}var E={curve:"linear",c2:0,c3:1,c4:1},b={curve:"linear",c2:0,c3:1,c4:1},k={curve:"linear",c2:0,c3:1,c4:1},x={curve:"linear",c2:0,c3:1,c4:1};if(m.curve instanceof Array){f===t.length-1&&console.warn("WTF here? Why the last keyframe's curve is an array?");var A=t[f+1],C=u,T=s,P=o,I=c;if(A.color){var O=n(A.color);C=O.a/255,T=O.r,P=O.g,I=O.b}var M=m.time||0,_=A.time||1,L=g,R=T,B=y,D=P,N=w,G=I,F=v,Z=C;E=Xh(m.curve,0,M,_,L,R),b=Xh(m.curve,1,M,_,B,D),k=Xh(m.curve,2,M,_,N,G),x=Xh(m.curve,3,M,_,F,Z)}else b=E=(0,i.Z)({},E,m,{curve:void 0===m.curve?E.curve:m.curve}),k=E,x=E;p.push((0,i.Z)({time:0,v:v},m,x)),l.push((0,i.Z)({time:0,v:g},m,E)),h.push((0,i.Z)({time:0,v:y},m,b)),d.push((0,i.Z)({time:0,v:w},m,k))}jh(p);var U=e.setTint;return U&&"function"===typeof U?{tintR:l,tintG:h,tintB:d,alpha:p}:{tintR:[],tintB:[],tintG:[],alpha:p}}(t,e.color||e.rgba),function(e,t){void 0===t&&(t=[]);for(var n=e.scaleX,r=e.scaleY,a=[],s=[],o=0;o<t.length;o++){var c=t[o],u={curve:"linear",c2:0,c3:1,c4:1},l={curve:"linear",c2:0,c3:1,c4:1};if(c.curve instanceof Array){o===t.length-1&&console.warn("WTF here? Why the last keyframe's curve is an array?");var h=t[o+1],d=c.time||0,p=h.time||1,f=c.x||0,m=h.x||0,v=c.y||0,g=h.y||0;u=Xh(c.curve,0,d,p,f,m),l=Xh(c.curve,1,d,p,v,g)}else l=u=(0,i.Z)({},u,c,{curve:void 0===c.curve?u.curve:c.curve});a.push((0,i.Z)({time:0,v:void 0==c.x?n:c.x*n},c,u)),s.push((0,i.Z)({time:0,v:void 0==c.y?r:c.y*r},c,l))}return jh(a),jh(s),{scaleX:a,scaleY:s}}(t,e.scale),function(e,t,n){void 0===t&&(t=[]);for(var r=e.x,a=e.y,s=[],o=[],c=(null==n?void 0:n.translate)||"default",u=vd.WORLD_SCALE,l=0;l<t.length;l++){var h=t[l],d={curve:"linear",c2:0,c3:1,c4:1},p={curve:"linear",c2:0,c3:1,c4:1};if(h.curve instanceof Array){l===t.length-1&&console.warn("WTF here? Why the last keyframe's curve is an array?");var f=t[l+1],m=h.time||0,v=f.time||1,g=h.x||0,y=f.x||0,w=h.y||0,S=f.y||0;d=Xh(h.curve,0,m,v,g,y),p=Xh(h.curve,1,m,v,w,S)}else p=d=(0,i.Z)({},d,h,{curve:void 0===h.curve?d.curve:h.curve});switch(c){case"default":s.push((0,i.Z)({time:0,v:void 0==h.x?r:h.x*u+r},h,d)),o.push((0,i.Z)({time:0,v:void 0==h.y?a:-h.y*u+a},h,p));break;case"correctPosition":s.push((0,i.Z)({time:0,v:void 0==h.x?r:h.x},h,d)),o.push((0,i.Z)({time:0,v:void 0==h.y?a:h.y},h,p))}}return jh(s),jh(o),{x:s,y:o}}(t,e.translate,e.mode),function(e,t){void 0===t&&(t=[]);for(var n=e.angle,r=[],a=0;a<t.length;a++){var s=t[a],o={curve:"linear",c2:0,c3:1,c4:1};if(s.curve instanceof Array){a===t.length-1&&console.warn("WTF here? Why the last keyframe's curve is an array?");var c=t[a+1],u=s.time||0,l=c.time||1,h=s.angle||s.value||0,d=c.angle||c.value||0;o=Xh(s.curve,0,u,l,h,d)}else o=(0,i.Z)({},o,s,{curve:void 0===s.curve?o.curve:s.curve});r.push((0,i.Z)({time:0,v:void 0==s.angle?void 0==s.value?n:-s.value:-s.angle},s,o))}return jh(r),{angle:r}}(t,e.rotate),function(e,t){void 0===t&&(t=[]);e.angle;var n=[],r=e.spineConfig;if(void 0===r)return{deform:[]};for(var a=r.vertices,s=function(){var e=t[o],r=e.vertices,s=e.offset||0,c={curve:"linear",c2:0,c3:1,c4:1};if(e.curve instanceof Array){o===t.length-1&&console.warn("WTF here? Why the last keyframe's curve is an array?");var u=t[o+1],l=e.time||0,h=u.time||1,d=0,p=1;c=Xh(e.curve,0,l,h,d,p)}else c=(0,i.Z)({},c,e,{curve:void 0===e.curve?c.curve:e.curve});n.push((0,i.Z)({time:0,v:void 0==r?a:Ne()(a).call(a,(function(e,t){return t<s?e:e+(r[t-s]||0)}))},e,c))},o=0;o<t.length;o++)s();return function(e){for(var t=function(e,t){if(e.length!==t.length)return!1;for(var n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0},n=e.length-1;n>0;n--){var r=e[n],a=e[n-1];if(!t(r.v,a.v)||"stepped"!==a.curve&&"linear"!==a.curve)break;e.pop()}1===e.length&&e.pop()}(n),{deform:n}}(t,e.deform),function(e,t){void 0===t&&(t=[]);for(var n=e.shearX,r=e.shearY,a=[],s=[],o=0;o<t.length;o++){var c=t[o],u={curve:"linear",c2:0,c3:1,c4:1},l={curve:"linear",c2:0,c3:1,c4:1};if(c.curve instanceof Array){o===t.length-1&&console.warn("WTF here? Why the last keyframe's curve is an array?");var h=t[o+1],d=c.time||0,p=h.time||1,f=c.x||0,m=h.x||0,v=c.y||0,g=h.y||0;u=Xh(c.curve,0,d,p,f,m),l=Xh(c.curve,1,d,p,v,g)}else l=u=(0,i.Z)({},u,c,{curve:void 0===c.curve?u.curve:c.curve});a.push((0,i.Z)({time:0,v:void 0==c.x?n:c.x},c,u)),s.push((0,i.Z)({time:0,v:void 0==c.y?r:c.y},c,l))}return jh(a),jh(s),{shearX:a,shearY:s}}(t,e.shear),function(e,t){void 0===t&&(t=[]);for(var n=0,r=[],a=0;a<t.length;a++){var s=t[a],o={curve:"linear",c2:0,c3:1,c4:1};if(s.curve instanceof Array){a===t.length-1&&console.warn("WTF here? Why the last keyframe's curve is an array?");var c=t[a+1],u=s.time||0,l=c.time||1,h=0,d=1;o=Xh(s.curve,0,u,l,h,d)}else o=(0,i.Z)({},o,s,{curve:void 0===s.curve?o.curve:s.curve});r.push((0,i.Z)({time:0,v:void 0==s.position?n:s.position},s,o))}return jh(r),{position:r}}(0,e.position),function(e,t){void 0===t&&(t=[]);if(e instanceof Phaser.GameObjects.Image){for(var n=e.frame.name,r=Number(n.match(/\d+/))||1,a=[],s=0;s<t.length;s++){var o,c=t[s],u=Number(null==(o=c.name)?void 0:o.match(/\d+/))||r;a.push((0,i.Z)({time:0,v:u},c,{curve:"stepped",c2:0,c3:1,c4:1}))}return jh(a),{attachment:a}}return{attachment:[]}}(t,e.attachment))};function Qh(e,t){return void 0===t&&(t=!1),function(n){var r,a,i=n/1e3;if(i<e[0].time)return e[0].v;for(var s=0;s<e.length-1;s++)if(i>=e[s].time&&i<=e[s+1].time){r=e[s],a=e[s+1];break}if(t&&console.log({keyframe1:r,keyframe2:a}),r&&a){if("stepped"===r.curve)return r.v;var o=(i-r.time)/(a.time-r.time),c="linear"===r.curve?o:Ms()(Phaser.Math.Clamp(r.curve,0,1),r.c2,Phaser.Math.Clamp(r.c3,0,1),r.c4)(o);return r.v+(a.v-r.v)*c}return e[e.length-1].v}}var Jh={tintR:[],tintG:[],tintB:[],alpha:[],scaleX:[],scaleY:[],x:[],y:[],angle:[],deform:[],shearX:[],shearY:[],position:[],attachment:[]},$h=function(){function e(e,t){this.gameObject=void 0,this.tweenAnimationGraph=void 0,this.minTime=void 0,this.maxTime=void 0,this.gameObject=e,this.tweenAnimationGraph=t||Jh}var t=e.prototype;return t.start=function(){},t.update=function(e){},t.complete=function(){},t.applyMinMaxTime=function(e){if(1===e.length)return this.minTime=0,void(this.maxTime=0);for(var t=0;t<e.length;t++){var n=e[t];(void 0===this.minTime||this.minTime>n.time)&&(this.minTime=n.time),(void 0===this.maxTime||this.maxTime<n.time)&&(this.maxTime=n.time)}},e}(),ed=function(e){function t(t,n){var r;return(r=e.call(this,t,n)||this).curve=void 0,r.curve=Qh(n.alpha),r.applyMinMaxTime(n.alpha),r}return(0,o.Z)(t,e),t.prototype.update=function(e){var t=this.curve(e);this.gameObject.alpha=t},t}($h);function td(e,t){return void 0===t&&(t=!1),function(n){var r,a,i=n/1e3;if(i<e[0].time)return e[0].v;for(var s=0;s<e.length-1;s++)if(i>=e[s].time&&i<=e[s+1].time){r=e[s],a=e[s+1];break}if(t&&console.log({keyframe1:r,keyframe2:a}),r&&a){if("stepped"===r.curve)return r.v;var o=(i-r.time)/(a.time-r.time),c="linear"===r.curve?o:Ms()(Phaser.Math.Clamp(r.curve,0,1),r.c2,Phaser.Math.Clamp(r.c3,0,1),r.c4)(o),u=a.v,l=r.v,h=u-l;return h<-180?h+=360:h>180&&(h-=360),l+h*c}return e[e.length-1].v}}var nd=function(e){function t(t,n){var r;return(r=e.call(this,t,n)||this).curve=void 0,r.curve=td(n.angle),r.applyMinMaxTime(n.angle),r}return(0,o.Z)(t,e),t.prototype.update=function(e){var t=this.curve(e);this.gameObject.angle=t},t}($h),rd=function(e){function t(t,n){var r;return(r=e.call(this,t,n)||this).curve=void 0,r.curve=Qh(n.attachment),r.applyMinMaxTime(n.attachment),r}return(0,o.Z)(t,e),t.prototype.update=function(e){var t=Math.ceil(this.curve(e));if(this.gameObject instanceof Phaser.GameObjects.Image){var n=this.gameObject.frame.name.split("-")[0];this.gameObject.setFrame(n+"-"+t,!1,!1)}},t}($h);var ad=function(e){function t(t,n){var r,a,i;return(r=e.call(this,t,n)||this).curve=void 0,r.curve=(a=n.deform,void 0===i&&(i=!1),function(e){var t,n,r=e/1e3;if(r<a[0].time)return a[0].v;for(var s=0;s<a.length-1;s++)if(r>=a[s].time&&r<=a[s+1].time){t=a[s],n=a[s+1];break}if(i&&console.log({keyframe1:t,keyframe2:n}),t&&n){if("stepped"===t.curve)return t.v;for(var o=(r-t.time)/(n.time-t.time),c="linear"===t.curve?o:Ms()(Phaser.Math.Clamp(t.curve,0,1),t.c2,Phaser.Math.Clamp(t.c3,0,1),t.c4)(o),u=[],l=0;l<t.v.length;l++){var h=t.v[l]+(n.v[l]-t.v[l])*c;u.push(h)}return u}return a[a.length-1].v}),r.applyMinMaxTime(n.deform),r}return(0,o.Z)(t,e),t.prototype.update=function(e){var t=this.gameObject.setVertices;if(t&&"function"===typeof t){var n=this.curve(e);t.bind(this.gameObject)(n)}},t}($h),id=function(e){function t(t,n){var r;return(r=e.call(this,t.gameObject)||this).lastT=void 0,r.eventKeyFrames=void 0,r.currentIndex=0,r.animation=void 0,r.eventKeyFrames=n,r.animation=t,r.applyMinMaxTimeEvent(n),r}(0,o.Z)(t,e);var n=t.prototype;return n.start=function(){this.lastT=void 0,this.currentIndex=0},n.update=function(e){void 0===this.lastT&&(this.lastT=e,e+=1e-8);for(var t=this.currentIndex;t<this.eventKeyFrames.length;t++){var n=this.eventKeyFrames[t],r=1e3*n.time;this.lastT<=r&&e>r&&(this.animation.events.emit(n.eventName),this.animation.parent&&this.animation.parent.emitEvent(n.eventName),this.currentIndex=t+1)}this.lastT=e},n.complete=function(){if(this.currentIndex<this.eventKeyFrames.length)for(var e=this.currentIndex;e<this.eventKeyFrames.length;e++){var t=this.eventKeyFrames[e];this.animation.events.emit(t.eventName),this.animation.parent&&this.animation.parent.emitEvent(t.eventName),this.currentIndex=e+1}},n.applyMinMaxTimeEvent=function(e){for(var t=0;t<e.length;t++){var n=e[t];(void 0===this.minTime||this.minTime>n.time)&&(this.minTime=n.time),(void 0===this.maxTime||this.maxTime<n.time)&&(this.maxTime=n.time)}},t}($h),sd=function(e){function t(t,n,r){var a;return(a=e.call(this,t,n)||this).curve=void 0,a.path=void 0,a.path=r,a.curve=Qh(n.position),a.applyMinMaxTime(n.position),a}return(0,o.Z)(t,e),t.prototype.update=function(e){var t=Phaser.Math.Clamp(this.curve(e),0,1),n=this.path.getPoint(t);this.gameObject.x=n.x,this.gameObject.y=n.y},t}($h),od=function(e){function t(t,n){var r;return(r=e.call(this,t,n)||this).curve=void 0,r.curve=Qh(n.scaleX),r.applyMinMaxTime(n.scaleX),r}return(0,o.Z)(t,e),t.prototype.update=function(e){var t=this.curve(e);this.gameObject.scaleX=t},t}($h),cd=function(e){function t(t,n){var r;return(r=e.call(this,t,n)||this).curve=void 0,r.curve=Qh(n.scaleY),r.applyMinMaxTime(n.scaleY),r}return(0,o.Z)(t,e),t.prototype.update=function(e){var t=this.curve(e);this.gameObject.scaleY=t},t}($h),ud=function(e){function t(t,n){var r;return(r=e.call(this,t,n)||this).curve=void 0,r.curve=td(n.shearX),r.applyMinMaxTime(n.shearX),r}return(0,o.Z)(t,e),t.prototype.update=function(e){var t=this.curve(e);this.gameObject.shearX=t},t}($h),ld=function(e){function t(t,n){var r;return(r=e.call(this,t,n)||this).curve=void 0,r.curve=td(n.shearY),r.applyMinMaxTime(n.shearY),r}return(0,o.Z)(t,e),t.prototype.update=function(e){var t=this.curve(e);this.gameObject.shearY=t},t}($h),hd=function(e){function t(t,n){var r;return(r=e.call(this,t,n)||this).curveR=void 0,r.curveG=void 0,r.curveB=void 0,r.curveR=Qh(n.tintR),r.curveG=Qh(n.tintG),r.curveB=Qh(n.tintB),r.applyMinMaxTime(n.tintR),r.applyMinMaxTime(n.tintG),r.applyMinMaxTime(n.tintB),r}return(0,o.Z)(t,e),t.prototype.update=function(e){var t=this.gameObject.setTint;if(t&&"function"===typeof t){var n=this.curveR(e),r=this.curveG(e),a=this.curveB(e);t.bind(this.gameObject)(Phaser.Display.Color.GetColor(n,r,a))}},t}($h),dd=function(e){function t(t,n){var r;return(r=e.call(this,t,n)||this).curve=void 0,r.curve=Qh(n.x),r.applyMinMaxTime(n.x),r}return(0,o.Z)(t,e),t.prototype.update=function(e){var t=this.curve(e);this.gameObject.x=t},t}($h),pd=function(e){function t(t,n){var r;return(r=e.call(this,t,n)||this).curve=void 0,r.curve=Qh(n.y),r.applyMinMaxTime(n.y),r}return(0,o.Z)(t,e),t.prototype.update=function(e){var t=this.curve(e);this.gameObject.y=t},t}($h),fd=function(){function e(e){this.scene=void 0,this.events=void 0,this.parent=void 0,this.gameObject=void 0,this.spineGraph=void 0,this.tweenGraph=void 0,this.updateBehaviours=[],this.tween=void 0,this.duration=0,this.timeScale=1,this.delay=0;var t=e.target;this.events=new Phaser.Events.EventEmitter,this.scene=t.scene,this.gameObject=t,this.spineGraph=e,this.tweenGraph=qh(e),this.addBehaviours(),this.setDelay(this.spineGraph.delay)}var t=e.prototype;return t.addBehaviours=function(){var e,t=this.gameObject,n=this.tweenGraph;this.tweenGraph.alpha.length>=1&&this.updateBehaviours.push(new ed(t,n)),this.tweenGraph.angle.length>=1&&this.updateBehaviours.push(new nd(t,n)),this.tweenGraph.scaleX.length>=1&&this.updateBehaviours.push(new od(t,n)),this.tweenGraph.scaleY.length>=1&&this.updateBehaviours.push(new cd(t,n)),(this.tweenGraph.tintR.length>=1||this.tweenGraph.tintG.length>=1||this.tweenGraph.tintB.length>=1)&&this.updateBehaviours.push(new hd(t,n)),this.tweenGraph.x.length>=1&&this.updateBehaviours.push(new dd(t,n)),this.tweenGraph.y.length>=1&&this.updateBehaviours.push(new pd(t,n)),this.tweenGraph.deform.length>=1&&this.updateBehaviours.push(new ad(t,n)),this.spineGraph.event&&this.spineGraph.event.length>=1&&this.updateBehaviours.push(new id(this,this.spineGraph.event)),this.tweenGraph.shearX.length>=1&&this.updateBehaviours.push(new ud(t,n)),this.tweenGraph.shearY.length>=1&&this.updateBehaviours.push(new ld(t,n)),this.tweenGraph.position.length>=1&&this.spineGraph.path&&this.updateBehaviours.push(new sd(t,n,this.spineGraph.path)),this.tweenGraph.attachment.length>=1&&this.updateBehaviours.push(new rd(t,n)),this.duration=1e3*Math.max.apply(Math,Ne()(e=this.updateBehaviours).call(e,(function(e){return e.maxTime})))},t.start=function(){var e=this;return new(u())((function(t){e.stop();var n=e.delay||0;e.events.emit("start");for(var r=0;r<e.updateBehaviours.length;r++)e.updateBehaviours[r].start(),e.updateBehaviours[r].update(-n);var a=!1,i=e.scene.tweens.addCounter({from:-n,to:e.duration,duration:e.duration+n,onUpdate:function(t){var n=t.getValue();!a&&n>=0&&(e.events.emit("startDelay"),e.parent&&e.parent.emitEvent("startDelay"),a=!0);for(var r=0;r<e.updateBehaviours.length;r++)e.updateBehaviours[r].update(n);e.spineGraph.onUpdate&&e.spineGraph.onUpdate(n)},loop:e.spineGraph.loop,onComplete:function(){e.events.emit("complete"),e.tween=void 0;for(var n=0;n<e.updateBehaviours.length;n++)e.updateBehaviours[n].complete();t()}});i.setTimeScale(e.timeScale),e.tween=i}))},t.stop=function(){this.tween&&(this.events.emit("stop"),this.tween.complete())},t.seek=function(e){for(var t,n=Be()(t=this.updateBehaviours).call(t,(function(e){return!(e instanceof id)})),r=0;r<n.length;r++)this.updateBehaviours[r].update(e)},t.setTimeScale=function(e){void 0===e&&(e=1),this.timeScale=e},t.setDelay=function(e){this.delay=e||0},(0,le.Z)(e,[{key:"isPlaying",get:function(){return!!this.tween}}]),e}(),md=function(){function e(e){this.events=void 0,this.parent=void 0,this.children=[],this.timeScale=1,this.loop=0,this.tweenLoopAnimation=void 0,this.events=new Phaser.Events.EventEmitter,this.createAnimation(e)}var t=e.prototype;return t.createAnimation=function(e){for(var t=0;t<e.length;t++){var n=e[t].target;Array.isArray(n)||(n=[n]);for(var r=0;r<n.length;r++){var a=e[t].delay||0;"function"===typeof a&&(a=a(n[r],"",0,r,n.length)),this.addAnimation(new fd((0,i.Z)({},e[t],{target:n[r],delay:a})))}}},t.addAnimationGraph=function(e){this.createAnimation(e)},t.addAnimation=function(e){var t,n=this;this.children.push(e),this.children=Be()(t=this.children).call(t,(function(e,t){var r;return Ht()(r=n.children).call(r,e)===t})),e.parent=this},t.removeAnimation=function(e){var t;this.children=Be()(t=this.children).call(t,(function(t,n){return t!==e})),e.parent=void 0},t.start=function(){var e,t=this;return null==(e=this.tweenLoopAnimation)||e.complete(),0===this.loop?this.startAnimation():new(u())((function(e){var n=t.children[0].scene;t.tweenLoopAnimation=n.tweens.addCounter({from:0,to:1,duration:t.duration,loop:t.loop,onStart:function(){t.startAnimation()},onLoop:function(){t.startAnimation()},onComplete:function(){e()}})}))},t.startAnimation=function(){var e=this;return 0===this.children.length?u().resolve():new(u())((function(t){var n;e.events.emit("start");var r=Ne()(n=e.children).call(n,(function(t){return t.setTimeScale(e.timeScale),t.start()}));u().all(r).then((function(){e.events.emit("complete"),t()}))}))},t.stop=function(){this.events.emit("stop"),this.children.forEach((function(e){e.stop()}))},t.emitEvent=function(e){for(var t,n,r,a,i=arguments.length,s=new Array(i>1?i-1:0),o=1;o<i;o++)s[o-1]=arguments[o];((t=this.events).emit.apply(t,O()(n=[e]).call(n,s)),this.parent)&&(r=this.parent).emitEvent.apply(r,O()(a=[e]).call(a,s))},t.seek=function(e){this.children.forEach((function(t){t.seek(e)}))},t.seekPercent=function(e){var t=this.duration*e;this.seek(t)},t.setTimeScale=function(e){void 0===e&&(e=1),this.timeScale=e},t.setDelay=function(e){this.children.forEach((function(t){t.setDelay(e)}))},t.setLoop=function(e){this.loop=e},(0,le.Z)(e,[{key:"scene",get:function(){return this.children[0].scene}},{key:"duration",get:function(){var e;return Math.max.apply(Math,Ne()(e=this.children).call(e,(function(e){return e.duration})))}},{key:"isPlaying",get:function(){return this.children.some((function(e){return e.isPlaying}))}}]),e}();md.WORLD_SCALE=1/2.88;var vd=md,gd=function(e){function t(t){var n;return(n=e.call(this)||this).matrix=void 0,n.config=void 0,n.matrix=new Phaser.GameObjects.Components.TransformMatrix,n.resetFromJSON(t),n}(0,o.Z)(t,e);var n=t.prototype;return n.setStartEndPoint=function(e,t){this.config.startPoint=e,this.config.endPoint=t,this.resetFromJSON(this.config)},n.resetFromJSON=function(e){this.config=(0,i.Z)({},e);var t=e.vertices||[],n=e.isClose||!1,r=e.flipX,a=void 0!==r&&r,s=e.flipY,o=void 0===s||s;if(!(t.length<6)){var c=Ne()(t).call(t,(function(e,t){return t%2==0?a?-e:e:o?-e:e})),u=c.length,l=[c[2],c[3]],h=[c[u-2-2],c[u-1-2]],d=e.startPoint||l,p=e.endPoint||h,f=Math.sqrt(Math.pow(p[0]-d[0],2)+Math.pow(p[1]-d[1],2)),m=Math.sqrt(Math.pow(h[0]-l[0],2)+Math.pow(h[1]-l[1],2)),v=[d[0]-l[0],d[1]-l[1]],g=Phaser.Math.Angle.Between(d[0],d[1],p[0],p[1])-Phaser.Math.Angle.Between(l[0],l[1],h[0],h[1]),y=f/m;this.matrix.applyITRS(d[0],d[1],g,y,y);for(var w=[],S=0;S<u;S+=2){var E=c[S]-l[0],b=c[S+1]-l[1],k=this.matrix.getX(E,b),x=this.matrix.getY(E,b);w.push(k,x)}console.log({a1:Phaser.Math.Angle.Between(d[0],d[1],p[0],p[1]),a2:Phaser.Math.Angle.Between(l[0],l[1],h[0],h[1]),angle:180*g/Math.PI,path:c,scale:y,translate:v,correctPath:w,startPoint:d,endPoint:p,bStartPoint:l,bEndPoint:h,matrix:this.matrix}),this.moveTo(d[0],d[1]);for(var A=4;A<u-6;A+=6)this.cubicBezierTo(w[A+4],w[A+5],w[A],w[A+1],w[A+2],w[A+3]);return n&&this.cubicBezierTo(d[0],d[1],w[u-2],w[u-1],w[0],w[1]),this}},n.deform=function(e){var t=this.config.vertices,n=Ne()(t).call(t,(function(t,n){return t+(e[n]||0)}));this.curves=[],this.cacheLengths=[],this.resetFromJSON((0,i.Z)({},this.config,{vertices:n}))},n.setDebug=function(e,t){var n=this;void 0===t&&(t=16711680);var r=e.add.graphics();e.events.on("update",(function(){r.clear(),r.lineStyle(1,t,1);for(var e=0;e<n.curves.length;e++){var a=n.curves[e];a.draw&&a.draw(r)}}))},t}(Phaser.Curves.Path),yd=gd,wd={position:[{time:.5,curve:.25,c3:.75},{time:.6667,position:.4663,curve:.131,c2:.11,c3:.982,c4:.73},{time:.7833,position:1}],color:[{color:"ffffff00",curve:.156,c2:.76,c3:.75},{time:.2333,color:"ffffffff",curve:"stepped"},{time:.7667,color:"ffffffff"}],rotate:[{angle:26.11,curve:0,c2:.6,c3:.682,c4:.83},{time:.4,angle:-8.57,curve:.25,c3:.75},{time:.6667}],scale:[{x:0,y:0,curve:.049,c2:.82,c3:.75},{time:.2333,x:1.497,y:1.497,curve:.241,c2:.02,c4:.86},{time:.5,x:.861,y:.861,curve:.25,c3:.75},{time:.65,x:1.261,y:1.261},{time:.7667,x:.552,y:.552}]},Sd=ca.Z.GAMEPLAY,Ed=Sd.KEY,bd=Sd.FRAME,kd=function(e){function t(t){var n;(n=e.call(this,t)||this).icon=void 0,n.amountText=void 0,n.animIconPool=[],n.countText=void 0,n.iconOriginScaleX=void 0,n.iconOriginScaleY=void 0,n.toLeft=!0;var r=n.createBg(),a=r.width,i=r.height;return n.setSize(a,i),n.createIcon(),n.createAmountText(),n.createCountText(),n}(0,o.Z)(t,e);var n=t.prototype;return n.setIcon=function(e,t,n,r){this.icon.setTexture(Ed,e),this.icon.setSizeBasedOnDpr(),this.icon.setPosition(n,r),this.iconOriginScaleX=this.icon.scaleX,this.iconOriginScaleY=this.icon.scaleY,this.amountText.setText(""+t)},n.runIncreaseAnim=function(){var e=(0,s.Z)(h().mark((function e(t,n){var r,a,i,s,o,c=this;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Number(this.amountText.text),a=this.scaleX,i=this.scaleY,s=!0,o=this.scene.tweens.add({paused:!0,targets:this,duration:100,scaleX:1.1*a,scaleY:{value:1.1*i,delay:100},yoyo:!0,repeat:-1}),e.next=6,this.runMultipleIconsAnimation(t-r,n,(function(){c.amountText.setText(""+(Number(c.amountText.text)+1)),na(50),s&&(o.play(),s=!1)}));case 6:return e.next=8,Oa(this.scene,300);case 8:return o.remove(),e.abrupt("return",this.scene.tweens.add({targets:this.icon,duration:100,scaleX:this.iconOriginScaleX,scaleY:this.iconOriginScaleY}).waitForCompletion());case 10:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}(),n.runMultipleIconsAnimation=function(e,t,n){var r=this;if(void 0===e&&(e=1),void 0===t&&(t=0),e<1){for(var a=0;a<e;a++)n&&n();return u().resolve()}var s=this.requestAnimIcons(e),o=this.getWorldPosition(),c=o.x,l=o.y,h=this.toLeft?-1:1,d=c+50*h,p=l,f={x:c+80*h,y:l},m=this.getWorldPosition(),v=m.x,g=m.y;return new(u())((function(a){e>0?(r.countText.setText("x"+e),r.runCountTextAnimation(f,600,t)):r.countText.kill(),e>s.length&&(e=s.length);for(var o=function(o){var c={x:d+o*h*5,y:p-5*o};s[o].setPosition(c.x,c.y),s[o].setDepth(oo.Z.SPECIAL_ANIM),s[o].revive(),s[o].setAlpha(0),s[o].setScale(.5*r.iconOriginScaleX);var u=new yd({vertices:[-211.5,40.29,-186.35,97.94,-156.05,167.39,-78.09,171.9,-28.95,87.7,2.75,33.38],startPoint:[c.x,c.y],endPoint:[v+10*h,g]}),l=new vd([(0,i.Z)({},wd,{target:s[o],delay:t+75*o,path:u})]);0===o&&l.events.on("startDelay",(function(){r.scene.audio.playSound(tn.Z.ITEM_RECEIVE,{volume:.3})})),o===e-1&&l.events.on("complete",(function(){a()})),l.events.on("complete",(function(){r.scene.audio.playSound(tn.Z.ITEM_APPEAR),r.scene.screenParticleHandler.receiveEffect.explode("white",v,g,r.displayWidth/3,r.displayHeight/3),n&&n(),s[o].kill(),s[o].scale=r.iconOriginScaleX})),l.start()},c=e-1;c>=0;c--)o(c)}))},n.runCountTextAnimation=function(e,t,n){var r=this,a=this.countText.scale;this.scene.tweens.add({targets:this.countText,ease:Phaser.Math.Easing.Back.Out,props:{alpha:{start:0,from:0,to:1},scale:{from:a,to:1.5*a}},duration:400,delay:n,completeDelay:400,onStart:function(){r.countText.setDepth(oo.Z.SPECIAL_ANIM),r.countText.setPosition(e.x,e.y),r.countText.revive()},onComplete:function(){r.scene.tweens.add({targets:r.countText,ease:Phaser.Math.Easing.Back.Out,props:{alpha:{start:1,from:1,to:0},y:"-=20"},duration:t,onComplete:function(){r.countText.kill(),r.countText.setScale(a)}})}})},n.requestAnimIcons=function(e){var t=this.animIconPool;if(t.length<e)for(var n=t.length;n<e;n++){var r=this.scene.make.image({key:Ed,frame:this.icon.frame.name});r.setSizeBasedOnDpr(),r.setDepth(oo.Z.SPECIAL_ANIM),r.kill(),t.push(r),this.scene.add.existing(r)}return t},n.createBg=function(){var e=this.scene.make.image({key:Ed,frame:bd.BTN_CIRCLE});return e.setSizeBasedOnDpr(),this.add(e),{width:e.displayWidth,height:e.displayHeight}},n.createIcon=function(){var e=this.scene.make.image({});this.add(e),this.icon=e},n.createAmountText=function(){var e=this.scene.add.container();this.amountText=this.scene.make.bitmapText({font:Ee.Z.NUMBERS.KEY,size:this.scene.fontSize(57),origin:{x:.5,y:.5}});var t=this.scene.make.image({key:Ed,frame:bd.BUTTON_BLUE_CIRCLE_SMALL});t.setWorldSize(30,30),t.setTintFill(10616832),Phaser.Display.Align.In.Center(this.amountText,t,0,0),e.add([t,this.amountText]),Phaser.Display.Align.In.BottomRight(e,this,-14,-14),this.add(e)},n.createCountText=function(){var e=this.scene.make.text({style:{fontFamily:Ee.Z.FONT_FAMILY,fontSize:"10px"},text:"x1"});e.setHighQuality(),e.setOrigin(.5,.5);var t=e.context.createLinearGradient(0,0,0,e.height);t.addColorStop(0,"#ffffff"),t.addColorStop(1,"#cce5f9"),e.setFill(t),e.setShadow(0,6,"#0000003F",0,!1,!0),this.scene.add.existing(e),this.countText=e,this.countText.kill()},t}(Phaser.GameObjects.Container),xd=kd;function Ad(e,t){var n="undefined"!==typeof C()&&P()(e)||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=function(e,t){var n;if(!e)return;if("string"===typeof e)return Cd(e,t);var r=b()(n=Object.prototype.toString.call(e)).call(n,8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return x()(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Cd(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0;return function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Cd(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Td=function(e){function t(t){var n;return(n=e.call(this,t)||this).poolItemObjects=[],n.listItems=void 0,n.animObjs=void 0,n.setSize(30,30),n}(0,o.Z)(t,e);var n=t.prototype;return n.prepareFadeIn=function(e,t){for(var n,r=[],a=Ad(ie()(t));!(n=a()).done;){var i=n.value,s=i[0],o=i[1],c=e[s];o>c&&r.push({item:s,from:c,to:o})}this.sortItemArray(r);var u=this.requestItemObjs(r);u.forEach((function(e,t){e.setX(100),e.y=40*t,e.setScale(.5)})),this.listItems=r,this.animObjs=u},n.sortItemArray=function(e){return er()(e).call(e,(function(e,t){var n=0;"undo"===e.item?n=3:"magicWand"===e.item?n=2:"shuffle"===e.item&&(n=1);var r=0;return"undo"===t.item?r=3:"magicWand"===t.item?r=2:"shuffle"===t.item&&(r=1),r-n}))},n.fadeIn=function(){var e=(0,s.Z)(h().mark((function e(){var t;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.scene.tweens.add({targets:this.animObjs,delay:this.scene.tweens.stagger(100,{start:0}),props:{x:0},duration:250,ease:Phaser.Math.Easing.Back.Out}),e.abrupt("return",t.waitForCompletion());case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.runReceiveAnim=function(){var e=(0,s.Z)(h().mark((function e(){var t,n,r=this;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Ne()(t=this.animObjs).call(t,(function(e,t){return e.runIncreaseAnim(r.listItems[t].to,300*t)})),e.next=3,u().all(n);case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.fadeOut=function(){var e=(0,s.Z)(h().mark((function e(){var t;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.scene.tweens.add({targets:this.animObjs,delay:this.scene.tweens.stagger(100,{start:0}),props:{x:100},duration:250,ease:Phaser.Math.Easing.Back.In}),e.abrupt("return",t.waitForCompletion());case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.requestItemObjs=function(e){var t=this,n=Ne()(e).call(e,(function(e){var n=e.item,r=e.from,a=t.getFreeObj();a.revive();var i="",s=0,o=0;return"undo"===n?(i=ca.Z.GAMEPLAY.FRAME.ICON_UNDO,s=0,o=-1):"magicWand"===n?(i=ca.Z.GAMEPLAY.FRAME.ICON_HELP,s=2.5,o=1):"shuffle"===n&&(i=ca.Z.GAMEPLAY.FRAME.ICON_SHUFFLE,s=0,o=-2),a.setIcon(i,r,s,o),a}));return n},n.getFreeObj=function(){var e,t=_()(e=this.poolItemObjects).call(e,(function(e){return!e.active}));if(t)return t;var n=new xd(this.scene);return this.add(n),this.poolItemObjects.push(n),n},t}(Phaser.GameObjects.Container),Pd=Td,Id=function(){function e(e){var t=this;this.navigation=void 0,this.commonContainer=void 0,this.coinBar=void 0,this.animItems=void 0,this.originalX=void 0,this.handleCoinBarButtonClick=(0,s.Z)(h().mark((function e(){var n,r,a,i;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.navigation.scene.screen.get(en.o4.SHOP_SCREEN)){e.next=3;break}return e.abrupt("return");case 3:if(!n.visible){e.next=5;break}return e.abrupt("return");case 5:return(r=t.navigation.scene).setGlobalSceneInputEnabled(!1),a=[t.navigation.fadeOut()],(i=r.screen.get(en.o4.DASHBOARD_SCREEN))instanceof $u&&i.isOpening&&a.push(i.softFadeOut()),e.next=12,u().all(a);case 12:return t.navigation.scene.screen.open(en.o4.SHOP_SCREEN),e.next=15,t.navigation.fadeIn("Shop",!1);case 15:r.setGlobalSceneInputEnabled(!0);case 16:case"end":return e.stop()}}),e)}))),this.usingCoins=function(){var e=(0,s.Z)(h().mark((function e(n){var r,a,i;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=t.navigation.scene,a=r.player.getCustomData("coins"),i=a-n,r.player.setCustomData("coins",i),t.coinBar.updateCoinCountWithAnimation(i,(function(){t.alignUI()}),!1),So.emit(Eo.UPDATE_STATUS_ITEM);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.alignCoinBarWhenRunAnimation=function(){var e=t.coinBar.displayWidth-t.coinBar.displayWidth*(t.coinBar.scaleX-1);t.coinBar.setX(t.navigation.displayWidth-6-e/2)},this.navigation=e,this.createCommonContainer(),this.createCoinBarButton(),this.createAnimItems(),this.alignUI(),this.listenEvents()}var t=e.prototype;return t.listenEvents=function(){So.on(Eo.USING_COINS,this.usingCoins)},t.fadeOut=function(){var e=(0,s.Z)(h().mark((function e(){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,va("right",this.commonContainer,[this.coinBar],250);case 2:this.coinBar.kill();case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),t.fadeIn=function(){var e=(0,s.Z)(h().mark((function e(){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.coinBar.revive(),e.abrupt("return",fa("right",this.commonContainer,[this.coinBar],[this.originalX],250));case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),t.runReceiveItemsAnim=function(){var e=(0,s.Z)(h().mark((function e(t,n){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.animItems.prepareFadeIn(t,n),this.animItems.revive(),e.next=4,this.animItems.fadeIn();case 4:return e.next=6,this.animItems.runReceiveAnim();case 6:return e.next=8,Oa(this.navigation.scene,200);case 8:return this.navigation.scene.audio.playSound(tn.Z.POPUP_OFF),e.next=11,this.animItems.fadeOut();case 11:this.animItems.kill();case 12:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}(),t.killAll=function(){this.coinBar.kill()},t.isCoinBarVisible=function(){return this.coinBar.visible},t.setCommonContainerVisible=function(e){this.commonContainer.setVisible(e)},t.createCommonContainer=function(){var e=this.navigation,t=e.width,n=e.height,r=this.navigation.scene.add.container();r.setSize(t,n),this.navigation.add(r),this.commonContainer=r},t.createCoinBarButton=function(){var e=new Kh(this.navigation.scene);this.commonContainer.add(e),e.onClick=this.handleCoinBarButtonClick,e.setDepth(oo.Z.ON_TOP+1),this.coinBar=e},t.createAnimItems=function(){var e=new Pd(this.navigation.scene);this.commonContainer.add(e),this.animItems=e,this.animItems.kill()},t.alignUI=function(){this.alignToTopRight(this.coinBar,-6,-6),this.originalX=this.coinBar.x,Phaser.Display.Align.To.BottomRight(this.animItems,this.coinBar,-10,10)},t.enablePlusIconAsync=function(){var e=(0,s.Z)(h().mark((function e(t){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.coinBar.enablePlusIconAsync(t));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),t.runCoinBarUpdateAnim=function(){var e=(0,s.Z)(h().mark((function e(t){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.coinBar.updateCoinCountWithAnimation(t,this.alignCoinBarWhenRunAnimation);case 2:return e.next=4,this.coinBar.playTweenScaleDown(this.alignCoinBarWhenRunAnimation);case 4:So.emit(Eo.UPDATE_STATUS_ITEM);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),t.alignToTopRight=function(e,t,n){e.setPosition(-(e.displayWidth-this.commonContainer.displayWidth)/2+t,(e.displayHeight-this.commonContainer.displayHeight)/2-n)},t.getCoinPosition=function(){return this.coinBar.getCoinPosition()},t.showCoinBarTop=function(){var e=(0,s.Z)(h().mark((function e(){var t,n,r;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.coinBar.getWorldPosition(),n=t.x,r=t.y,this.commonContainer.remove(this.coinBar),this.coinBar.setPosition(n,r),e.abrupt("return",this.coinBar.playTweenScaleUp(this.alignCoinBarWhenRunAnimation));case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),t.hideCoinBarTop=function(){var e=this.navigation.getLocalPosition(this.coinBar),t=e.x,n=e.y;this.commonContainer.add(this.coinBar),this.coinBar.setPosition(t,n),this.alignUI()},e}(),Od=Id,Md=ca.Z.GAMEPLAY,_d=Md.KEY,Ld=Md.FRAME,Rd=function(){function e(e){var t=this;this.navigation=void 0,this.backButton=void 0,this.backButtonOriginalX=void 0,this.handleClickBackButton=(0,s.Z)(h().mark((function e(){var n;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=t.navigation.scene).setGlobalSceneInputEnabled(!1),e.next=4,n.screen.closeAsync(en.o4.SHOP_SCREEN);case 4:n.screen.open(en.o4.REWARD_SCREEN),n.setGlobalSceneInputEnabled(!0);case 6:case"end":return e.stop()}}),e)}))),this.navigation=e,this.createBackButton(),this.alignUI()}var t=e.prototype;return t.killAll=function(){this.backButton.kill()},t.fadeOut=function(){var e=(0,s.Z)(h().mark((function e(){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.backButton.revive(),e.next=3,va("left",this.navigation,[this.backButton],250);case 3:this.backButton.kill();case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),t.fadeIn=function(){return this.backButton.revive(),fa("left",this.navigation,[this.backButton],[this.backButtonOriginalX],250)},t.createBackButton=function(){this.backButton=new Th(this.navigation.scene),this.backButton.setIcon(_d,Ld.ICON_BACK,0,-1),this.backButton.setName(Is.SHOP_BACK),this.backButton.onClick=this.handleClickBackButton,this.navigation.add(this.backButton)},t.alignUI=function(){Phaser.Display.Align.In.TopLeft(this.backButton,this.navigation,-6,-6),this.backButtonOriginalX=this.backButton.x},e}(),Bd=Rd,Dd=ca.Z.GAMEPLAY,Nd=Dd.KEY,Gd=Dd.FRAME,Fd=function(){function e(e){var t=this;this.navigation=void 0,this.backButton=void 0,this.backButtonOriginalX=void 0,this.handleClickBackButton=(0,s.Z)(h().mark((function e(){var n;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=t.navigation.scene).setGlobalSceneInputEnabled(!1),e.next=4,n.screen.closeAsync(en.o4.MAP_SCREEN);case 4:n.setGlobalSceneInputEnabled(!0);case 5:case"end":return e.stop()}}),e)}))),this.navigation=e,this.createBackButton(),this.alignUI()}var t=e.prototype;return t.killAll=function(){this.backButton.kill()},t.fadeOut=function(){var e=(0,s.Z)(h().mark((function e(){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,va("left",this.navigation,[this.backButton],250);case 2:this.backButton.kill();case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),t.fadeIn=function(){var e=(0,s.Z)(h().mark((function e(){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.backButton.revive(),e.abrupt("return",fa("left",this.navigation,[this.backButton],[this.backButtonOriginalX],250));case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),t.createBackButton=function(){this.backButton=new Th(this.navigation.scene),this.backButton.setIcon(Nd,Gd.ICON_BACK,0,-1),this.backButton.setName(Is.MAP_BACK),this.backButton.onClick=this.handleClickBackButton,this.navigation.add(this.backButton)},t.alignUI=function(){Phaser.Display.Align.In.TopLeft(this.backButton,this.navigation,-6,-6),this.backButtonOriginalX=this.backButton.x},e}(),Zd=Fd,Ud=function(e){function t(t){var n;(n=e.call(this,t)||this).dashboardElements=void 0,n.gameplayElements=void 0,n.hybridElements=void 0,n.shopElements=void 0,n.mapElements=void 0,n.currentElements=void 0;var r=n.scene.gameZone,a=r.width,i=r.height;return n.setDepth(en.Ks.NAVIGATION),n.setSize(a,i),n.scene.add.existing((0,jr.Z)(n)),n.dashboardElements=new _h((0,jr.Z)(n)),n.gameplayElements=new Nh((0,jr.Z)(n)),n.hybridElements=new Od((0,jr.Z)(n)),n.shopElements=new Bd((0,jr.Z)(n)),n.mapElements=new Zd((0,jr.Z)(n)),n.dashboardElements.killAll(),n.gameplayElements.killAll(),n.hybridElements.killAll(),n.shopElements.killAll(),n.mapElements.killAll(),n}(0,o.Z)(t,e);var n=t.prototype;return n.fadeOut=function(){var e=(0,s.Z)(h().mark((function e(){var t,n;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=null==(t=this.currentElements)?void 0:t.fadeOut(),this.currentElements=void 0,e.abrupt("return",n);case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.fadeOutHybrid=function(){var e=(0,s.Z)(h().mark((function e(){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.hybridElements.fadeOut());case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.fadeIn=function(){var e=(0,s.Z)(h().mark((function e(t,n){var r,a;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return void 0===n&&(n=!0),r=[],this.currentElements&&n&&r.push(this.currentElements.fadeOut()),a=!0,"Dashboard"===t?(!this.hybridElements.isCoinBarVisible()&&r.push(this.hybridElements.fadeIn()),r.push(this.dashboardElements.fadeIn()),this.currentElements=this.dashboardElements):"Gameplay"===t?(!this.hybridElements.isCoinBarVisible()&&r.push(this.hybridElements.fadeIn()),r.push(this.gameplayElements.fadeIn()),this.currentElements=this.gameplayElements):"Map"===t?(r.push(this.mapElements.fadeIn()),this.currentElements=this.mapElements):"Shop"===t?(a=!1,!this.hybridElements.isCoinBarVisible()&&r.push(this.hybridElements.fadeIn()),r.push(this.shopElements.fadeIn()),this.currentElements=this.shopElements):(this.hybridElements.isCoinBarVisible()&&r.push(this.hybridElements.fadeOut()),this.currentElements=void 0),r.push(this.hybridElements.enablePlusIconAsync(a)),e.next=8,u().all(r);case 8:return e.abrupt("return",u().resolve());case 9:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}(),n.getCoinPosition=function(){return this.hybridElements.getCoinPosition()},n.runCoinAnimToCurData=function(){var e=(0,s.Z)(h().mark((function e(t,n){var r,a,i=this;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return void 0===t&&(t=0),void 0===n&&(n=0),r=[],a=this.hybridElements.showCoinBarTop(),r.push(a),t&&n||(t=this.scene.gameZone.width/2,n=this.scene.gameZone.height/2),a=new(u())((function(e){var r=function(){var t=(0,s.Z)(h().mark((function t(){var n;return h().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=i.scene.player.getCustomData("coins"),t.next=3,i.hybridElements.runCoinBarUpdateAnim(n);case 3:e();case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();i.scene.screenParticleHandler.effectCollectCoin.handleShowCoinEffect(t,n,r)})),r.push(a),e.next=10,u().all(r);case 10:this.hybridElements.hideCoinBarTop();case 11:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}(),n.runItemAnimToCurData=function(){var e=(0,s.Z)(h().mark((function e(t,n,r){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Oa(this.scene,r);case 2:return e.abrupt("return",this.hybridElements.runReceiveItemsAnim(t,n));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}(),n.setCanShowGameplaySettingsButton=function(e){this.gameplayElements.setCanShowSettings(e)},n.setHybridElementsVisible=function(e){this.hybridElements.setCommonContainerVisible(e)},t}(Phaser.GameObjects.Container),Hd=Ud,Wd=ca.Z.GAMEPLAY,Vd=Wd.KEY,Yd=Wd.FRAME,zd=ca.Z.GAMEPLAY,Kd=zd.KEY,jd=zd.FRAME,Xd=function(e){function t(t){var n;return(n=e.call(this,t,Vd,Yd.NO_MORE_SCREEN_BTN_ORANGE,211,44)||this).coin=void 0,n.text=void 0,n.setName(Is.RW_WATCH_AD),n.createIcon(),n.createCenterText(),n.createIconCoin(),n.createRightText(),n}(0,o.Z)(t,e);var n=t.prototype;return n.setCoin=function(e){this.text.setText("+"+e),this.alignText()},n.createIcon=function(){var e=this.scene.make.image({key:Vd,frame:Yd.NO_MORE_SCREEN_ICON_AD});e.setSizeBasedOnDpr(),this.add(e),Phaser.Display.Align.In.LeftCenter(e,this,-24,0)},n.createCenterText=function(){var e=this.scene.make.text({style:{fontFamily:Ee.Z.FONT_FAMILY,fontSize:"17px"},text:"VIDEO"});e.setHighQuality(),this.add(e);var t=e.context.createLinearGradient(0,0,0,e.height);t.addColorStop(0,"#ffffff"),t.addColorStop(1,"#cce5f9"),e.setFill(t),e.setLineSpacing,e.setShadow(0,6,"#0000003F",0,!1,!0),Phaser.Display.Align.In.Center(e,this,-15,0)},n.createIconCoin=function(){this.coin=this.scene.make.image({key:Kd,frame:jd.ICON_COIN}),this.coin.setWorldSize(22,22),this.add(this.coin),Phaser.Display.Align.In.RightCenter(this.coin,this,-24,1)},n.createRightText=function(){var e=this.scene.make.text({style:{fontFamily:Ee.Z.FONT_FAMILY,fontSize:"17px"},text:"+20"});e.setHighQuality(),this.add(e);var t=e.context.createLinearGradient(0,0,0,e.height);t.addColorStop(0,"#ffffff"),t.addColorStop(1,"#cce5f9"),e.setFill(t),e.setLineSpacing,e.setShadow(0,6,"#0000003F",0,!1,!0),this.text=e,this.alignText()},n.alignText=function(){Phaser.Display.Align.In.RightCenter(this.text,this.coin,-this.coin.displayWidth-5,-1.5)},t}(Zu),qd=Xd,Qd=ca.Z.DEFAULT,Jd=Qd.KEY,$d=Qd.FRAME,ep=function(e){function t(t){var n;return(n=e.call(this,t)||this).background=void 0,n.closeButton=void 0,n.watchAdButton=void 0,n.createBackground(),n.updateSize(),n.createText(),n.createWatchAdButton(),n.createCloseButton(),n}(0,o.Z)(t,e);var n=t.prototype;return n.setCoin=function(e){this.watchAdButton.setCoin(e)},n.createBackground=function(){var e=Jd,t=new El(this.scene,{initialHeight:162,sliceTextures:{top:{key:e,frame:$d.SETTINGS_SCREEN_POPUP_TOP},middle:{key:e,frame:$d.SETTINGS_SCREEN_POPUP_MIDDLE},bottom:{key:e,frame:$d.SETTINGS_SCREEN_POPUP_BOTTOM}}});this.add(t),this.background=t},n.updateSize=function(){var e=this.background,t=e.width,n=e.height;this.setSize(t,n)},n.createText=function(){var e=this.scene.make.text({style:{fontFamily:Ee.Z.FONT_FAMILY,fontSize:"22px"},text:"EARN FREE COINS!"});e.setHighQuality(),this.add(e);var t=e.context.createLinearGradient(0,0,0,e.height);t.addColorStop(0,"#ffffff"),t.addColorStop(1,"#cce5f9"),e.setFill(t),e.setLineSpacing(1),e.setShadow(0,6,"#0000003F",0,!1,!0),Phaser.Display.Align.In.TopCenter(e,this,0,-15)},n.createWatchAdButton=function(){this.watchAdButton=new qd(this.scene),this.add(this.watchAdButton),Phaser.Display.Align.In.BottomCenter(this.watchAdButton,this,0,-30)},n.createCloseButton=function(){var e=new Ps.Z(this.scene,Jd,$d.SETTINGS_SCREEN_BTN_CANCEL,23,23);e.setName(Is.RW_CLOSE),this.add(e),Phaser.Display.Align.In.TopRight(e,this,-17,-15),this.closeButton=e},n.runWatchAdButtonAnimation=function(){this.watchAdButton.runAnimation()},n.stopWatchAdButtonAnimation=function(){this.watchAdButton.stopAnimation()},(0,le.Z)(t,[{key:"onCloseClick",set:function(e){this.closeButton.onClick=e}},{key:"onWatchAdClick",set:function(e){this.watchAdButton.onClick=e}}]),t}(Phaser.GameObjects.Container),tp=ep,np=function(e){function t(t,n,r){var a;return(a=e.call(this,t)||this).scene=void 0,a.parentName=void 0,a.onHandlePointerUp=void 0,a.isRunning=!1,a.isPointerOver=!0,a.handlePointerDown=function(){a.isRunning=!0,a.isPointerOver=!0,a.scene.input.once(Phaser.Input.Events.POINTER_UP,a.handlePointerUpOut)},a.handlePointerUpOver=function(){a.isRunning&&a.isPointerOver&&(a.isRunning=!1,a.isPointerOver=!0,a.onHandlePointerUp(),a.logButtonEvent())},a.handlePointerUpOut=function(){a.isRunning&&(a.isPointerOver||(a.isRunning=!1,a.isPointerOver=!0))},a.handlePointerOut=function(){a.isRunning&&(a.isPointerOver=!1)},a.handlePointerOver=function(){a.isRunning&&(a.isPointerOver=!0)},a.scene=t,a.setSize(n,r),a.addPointerEventListeners(),a}(0,o.Z)(t,e);var n=t.prototype;return n.addPointerEventListeners=function(){this.setInteractive({useHandCursor:!0}),this.on(Phaser.Input.Events.GAMEOBJECT_POINTER_DOWN,this.handlePointerDown),this.on(Phaser.Input.Events.GAMEOBJECT_POINTER_UP,this.handlePointerUpOver),this.on(Phaser.Input.Events.GAMEOBJECT_POINTER_OUT,this.handlePointerOut),this.on(Phaser.Input.Events.GAMEOBJECT_POINTER_OVER,this.handlePointerOver)},n.logButtonEvent=function(){var e=this.getParentName(),t=this.name;this.scene.analytics.event(an._.BUTTON_CLICK,{button_name:t,screen_name:e})},n.getParentName=function(){if(this.parentName)return this.parentName;for(var e=this.parentContainer;e;){if(e instanceof GameCore.Screen){var t=e;return this.parentName=t.getScreenName(),this.parentName}e=e.parentContainer}return this.parentName=this.scene.getSceneName(),this.parentName},(0,le.Z)(t,[{key:"onClick",set:function(e){this.onHandlePointerUp=e}}]),t}(Phaser.GameObjects.Container),rp=np,ap=function(e){function t(t,n,r,a){var i;return(i=e.call(this,t,n,r,a)||this).scene=void 0,i.backgroundInteractive=void 0,i.popup=void 0,i.rewardCoin=200,i.handleClickWatchAd=(0,s.Z)(h().mark((function e(){var t;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,xs(i.name);case 2:if(t=e.sent,i.popup.runWatchAdButtonAnimation(),!t){e.next=7;break}return e.next=7,i.handleWatchAdSuccess();case 7:case"end":return e.stop()}}),e)}))),i.handleWatchAdSuccess=(0,s.Z)(h().mark((function e(){var t,n;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i.scene.setGlobalSceneInputEnabled(!1),t=i.scene.player.getCustomData("coins"),n=t+i.rewardCoin,i.scene.player.setCustomData("coins",n),e.next=6,i.scene.navigation.runCoinAnimToCurData();case 6:i.scene.setGlobalSceneInputEnabled(!0);case 7:case"end":return e.stop()}}),e)}))),i.handleClose=function(){i.scene.screen.close(i.name)},i.scene=t,i.createBackground(),i.createPopup(),i.setDepth(en.Ks.PRIORITY),i.listenEvents(),i}(0,o.Z)(t,e);var n=t.prototype;return n.createBackground=function(){this.backgroundInteractive=new rp(this.scene,this.width,this.height),this.backgroundInteractive.setName(Is.RW_BG),this.add(this.backgroundInteractive)},n.listenEvents=function(){this.popup.setInteractive({useHandCursor:!1}),this.popup.onCloseClick=this.handleClose,this.popup.onWatchAdClick=this.handleClickWatchAd,this.backgroundInteractive.onHandlePointerUp=this.handleClose},n.createPopup=function(){this.popup=new tp(this.scene),this.add(this.popup)},n.open=function(){var t=(0,s.Z)(h().mark((function t(){return h().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.prototype.open.call(this),this.popup.setCoin(this.rewardCoin),this.popup.stopWatchAdButtonAnimation(),t.next=5,this.fadeIn();case 5:this.popup.runWatchAdButtonAnimation();case 6:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),n.close=function(){var t=(0,s.Z)(h().mark((function t(){return h().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.scene.setGlobalSceneInputEnabled(!1),this.popup.stopWatchAdButtonAnimation(),t.next=4,this.fadeOut();case 4:this.scene.setGlobalSceneInputEnabled(!0),e.prototype.close.call(this);case 6:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),n.fadeIn=function(){var e=(0,s.Z)(h().mark((function e(){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",u().all([this.tweenScaleUpPopup(),this.tweenBackgroundFadeIn()]));case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.tweenScaleUpPopup=function(){var e=(0,s.Z)(h().mark((function e(){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ua(this.scene,{targets:[this.popup],duration:200,scale:{from:0,to:1},ease:Phaser.Math.Easing.Back.Out}));case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.tweenBackgroundFadeIn=function(){var e=(0,s.Z)(h().mark((function e(){var t;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.scene.tweens.add({targets:this.background,duration:200,alpha:{from:0,to:.8}}),e.abrupt("return",t.waitForCompletion());case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.fadeOut=function(){var e=(0,s.Z)(h().mark((function e(){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u().all([Sa([this.background],200,0),this.tweenScaleDownPopup()]);case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.tweenScaleDownPopup=function(){var e=(0,s.Z)(h().mark((function e(){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ua(this.scene,{targets:[this.popup],duration:200,scale:{from:1,to:0},ease:Phaser.Math.Easing.Sine.In}));case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),t}(GameCore.Screen),ip=ap,sp=function(e){function t(t){var n;return(n=e.call(this,t)||this).index=0,n.delay=5,n.config=void 0,n.isChangeSpeed=void 0,n._angle=void 0,n.speed=void 0,n}(0,o.Z)(t,e);var n=t.prototype;return n.update=function(t,n,r){var a=e.prototype.update.call(this,t,n,r);return this.lifeT>=.2&&!this.isChangeSpeed&&(this.velocityX=-this.speed*Math.cos(this._angle),this.velocityY=-this.speed*Math.sin(this._angle)),this.lifeT>=.3&&!this.isChangeSpeed&&(this.speed/=2,this.velocityX=-this.speed*Math.cos(this._angle),this.velocityY=-this.speed*Math.sin(this._angle),this.isChangeSpeed=!0),a},n.init=function(e){this.config=e;var t=this.config.index;this.isChangeSpeed=!1,this.index=t,this.fluctuateInitPos(),this.modifyRotation(),this.modifySpeed()},n.fluctuateInitPos=function(){var e=this.config.fluctuateInitPos;if(e){var t=e.min,n=e.max,r=Phaser.Math.Between(0,360),a=Phaser.Math.Between(t,n),i=this.x+a*Math.cos(r),s=this.y+a*Math.sin(r);this.x=i,this.y=s}},n.modifyRotation=function(){if(this.config.randomRotation&&this.data.rotate){var e=Phaser.Math.Between(0,90),t=e+e/Math.abs(e)*45;this.data.rotate.min=e,this.data.rotate.max=t,this.angle=e}},n.modifySpeed=function(){var e=this.config,t=e.xCenter,n=e.yCenter,r=e.randomSpeed;if(r){var a=r.min,i=r.max;this._angle=Math.atan2(n-this.y,t-this.x),this.speed=Phaser.Math.Between(a,i),this.velocityX=-this.speed*Math.cos(this._angle),this.velocityY=-this.speed*Math.sin(this._angle)}},t}(Phaser.GameObjects.Particles.Particle),op=sp,cp=ca.Z.EFFECTS,up=cp.KEY,lp=cp.FRAME,hp=function(e){function t(t){var n;return(n=e.call(this,t,0,0,up,lp.COIN)||this).onComplete=void 0,n.positions=void 0,n.eatAnimation=void 0,n.particleManager=void 0,n.emitter=void 0,n.scene.add.existing((0,jr.Z)(n)),n.createParticles(),n}(0,o.Z)(t,e);var n=t.prototype;return n.createParticles=function(){var e=1/GameCore.Utils.Image.getImageScale();this.particleManager=this.scene.add.particles(up,lp.FX_COMET),this.emitter=this.particleManager.createEmitter({lifespan:500,scale:{start:e,end:0,ease:Phaser.Math.Easing.Sine.In},rotate:{start:0,end:180},blendMode:Phaser.BlendModes.COLOR,frequency:100,quantity:1,on:!1}),this.particleManager.kill()},n.setFromToPositions=function(e){this.positions=e},n.playAnimation=function(e){var t,n=this,r=1/GameCore.Utils.Image.getImageScale();null==(t=this.eatAnimation)||t.remove();var a=this.positions,i=a.from,o=a.to;this.setPosition(i.x,i.y);var c=400-50*e;this.particleManager.setDepth(oo.Z.TOP_SCREEN),this.particleManager.revive(),this.emitter.startFollow(this),this.emitter.start(),this.eatAnimation=this.scene.add.tween({targets:this,duration:c,ease:Phaser.Math.Easing.Quadratic.In,props:{x:o.x,y:o.y,scale:r},completeDelay:30,onComplete:function(){var e=(0,s.Z)(h().mark((function e(){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.emitter.stop(),n.kill(),n.onComplete&&n.onComplete(),n.onComplete=void 0,e.next=6,n.waitFinish();case 6:n.particleManager.kill();case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()})},n.waitFinish=function(){var e=(0,s.Z)(h().mark((function e(){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.emitter.getAliveParticleCount()>0)){e.next=5;break}return e.next=3,Oa(this.scene,100);case 3:e.next=0;break;case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.checkParticleManagerActive=function(){return this.particleManager.active},t}(Phaser.GameObjects.Image),dp=hp,pp=function(e){function t(t){var n;return(n=e.call(this,t)||this).alpha0=1,n}(0,o.Z)(t,e);var n=t.prototype;return n.update=function(t,n,r){var a=e.prototype.update.call(this,t,n,r);return this.updateAlpha(),a},n.updateAlpha=function(){var e=1-this.lifeCurrent%this.life/this.life;this.alpha=this.alpha0*Math.sin(e*Math.PI)},t}(Phaser.GameObjects.Particles.Particle),fp=pp,mp=ca.Z.EFFECTS.FRAME,vp=function(){function e(e,t){this.scene=void 0,this.particleManager=void 0,this.rewardCoin=void 0,this.starWhiteFireWork=void 0,this.colorfulStarFireWork=void 0,this.listCoinMove=[],this.depthOrder=0,this.indexCoin=0,this.currentEmitX=0,this.currentEmitY=0,this.onFirstCoinReachDest=void 0,this.scene=e,this.particleManager=t,this.createRewardCoin(),this.createStarFireWork(),this.createColorfulStarFireWorks(),this.createListCoinMove()}var t=e.prototype;return t.createListCoinMove=function(){for(var e=0;e<10;e++){var t=new dp(this.scene);t.kill(),this.listCoinMove.push(t)}},t.createRewardCoin=function(){var e=this,t=1/GameCore.Utils.Image.getImageScale();this.rewardCoin=this.particleManager.createEmitter({on:!1,frame:mp.COIN,quantity:10,alpha:{start:0,end:1,ease:Phaser.Math.Easing.Cubic.Out},scale:{start:.5*t,end:t,ease:Phaser.Math.Easing.Back.Out},timeScale:4,lifespan:1e3,particleClass:op,emitCallback:function(t){t.init({index:e.indexCoin,xCenter:e.currentEmitX,yCenter:e.currentEmitY,fluctuateInitPos:{min:-10,max:10},randomRotation:!0,randomSpeed:{min:0,max:120}}),e.indexCoin--},deathCallback:function(t){var n=e.scene.navigation.getCoinPosition(),r=n.x,a=n.y,i=e.getFreeCoinMove();i.revive(),i.setFromToPositions({from:{x:t.x,y:t.y},to:{x:r,y:a}}),i.scaleX=t.scaleX,i.scaleY=t.scaleY,i.setDepth(oo.Z.ON_TOP+e.depthOrder),0===e.depthOrder?i.onComplete=function(){e.onFirstCoinReachDest(),e.scene.screenParticleHandler.receiveEffect.explode("yellow",r,a,25,25),e.scene.audio.playSound(tn.Z.COINS_ADD,{volume:.15})}:i.onComplete=function(){na(50),e.scene.screenParticleHandler.receiveEffect.explode("yellow",r,a,25,25),e.scene.audio.playSound(tn.Z.COINS_ADD,{volume:.15})},i.playAnimation(e.depthOrder),e.depthOrder--}})},t.createStarFireWork=function(){var e=1/GameCore.Utils.Image.getImageScale();this.starWhiteFireWork=this.particleManager.createEmitter({on:!1,frame:mp.FX_STAR_WHITE,scale:{min:.3*e,max:e},lifespan:{min:1e3,max:1300},blendMode:Phaser.BlendModes.ADD,speedX:{min:-100,max:100},speedY:{min:-250,max:-350},gravityY:400,timeScale:1.8,frequency:100,quantity:6,particleClass:fp})},t.createColorfulStarFireWorks=function(){var e=1/GameCore.Utils.Image.getImageScale();this.colorfulStarFireWork=this.particleManager.createEmitter({on:!1,frame:mp.STAR,scale:{min:.3*e,max:.5*e},lifespan:{min:1e3,max:1300},speedX:{min:-100,max:100},speedY:{min:-250,max:-350},gravityY:400,timeScale:1.8,frequency:100,quantity:2,tint:[13879477,14010803,15125693,13488046,15583906,15454046],particleClass:fp})},t.handleShowCoinEffect=function(e,t,n){this.onFirstCoinReachDest=n,this.currentEmitX=e,this.currentEmitY=t,this.depthOrder=0,this.indexCoin=10,this.scene.audio.playSound(tn.Z.COIN_APPEAR,{volume:.5}),this.rewardCoin.emitParticleAt(e,t)},t.handleShowStarFirework=function(e,t){var n=this;this.starWhiteFireWork.setPosition(e,t),this.starWhiteFireWork.start(),this.colorfulStarFireWork.setPosition(e,t),this.colorfulStarFireWork.start(),setTimeout((function(){n.starWhiteFireWork.stop(),n.colorfulStarFireWork.stop()}),500)},t.getFreeCoinMove=function(){for(var e=0;e<this.listCoinMove.length;e++){var t=this.listCoinMove[e];if(!t.active&&!t.checkParticleManagerActive())return t}var n=new dp(this.scene);return n.kill(),this.listCoinMove.push(n),n},e}(),gp=function(e){function t(){for(var t,n,r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(n=e.call.apply(e,O()(t=[this]).call(t,a))||this).config=void 0,n.scale=void 0,n.isChangeSpeed=!1,n.delay=void 0,n}(0,o.Z)(t,e);var n=t.prototype;return n.init=function(e){this.config=e,this.fluctuateInitPos(),this.modifyStartScale(),this.modifyRotation(),this.modifySpeed()},n.update=function(t,n,r){var a=e.prototype.update.call(this,t,n,r);return this.updateScale(),this.changeSpeed(),a},n.updateScale=function(){var e=1-this.lifeCurrent%this.life/this.life;this.scaleX=this.scale*Math.sin(e*Math.PI),this.scaleY=this.scale*Math.sin(e*Math.PI)},n.changeSpeed=function(){if((this.lifeCurrent-this.delay)/this.life<=.5&&!this.isChangeSpeed){var e=this.lifeCurrent/1e3,t=this.config,n=t.xCenter,r=t.yCenter,a=(n-this.x)/e,i=(r-this.y)/e;this.velocityX=a,this.velocityY=i,this.isChangeSpeed=!0}},n.fluctuateInitPos=function(){var e=this.config,t=e.xCenter,n=e.yCenter,r=e.fluctuateInitPos;if(r){var a=r.min,i=r.max;this.x=this.x+Phaser.Math.Between(-50,50),this.y=this.y+Phaser.Math.Between(-50,50);var s=Math.atan2(n-this.y,t-this.x),o=Phaser.Math.Between(a,i),c=this.x-o*Math.cos(s),u=this.y-o*Math.sin(s);this.x=c,this.y=u}},n.modifyStartScale=function(){var e=this.config.randomScale;if(e){var t=e.min,n=e.max;this.scale=Phaser.Math.FloatBetween(t,n)}},n.modifyRotation=function(){if(this.config.randomRotation&&this.data.rotate){var e=Phaser.Math.Between(-45,45),t=e+e/Math.abs(e)*100;this.data.rotate.min=e,this.data.rotate.max=t,this.angle=e}},n.modifySpeed=function(){this.isChangeSpeed=!1;var e=this.config,t=e.xCenter,n=e.yCenter,r=Phaser.Math.Distance.Between(t,n,this.x,this.y);this.delay=-r/10;var a=this.life/1e3,i=(t-this.x)/a,s=(n-this.y)/a;this.velocityX=i/2,this.velocityY=s/2},t}(Phaser.GameObjects.Particles.Particle),yp=gp,wp=function(e){function t(){for(var t,n,r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(n=e.call.apply(e,O()(t=[this]).call(t,a))||this).config=void 0,n.scale=void 0,n.isChangeSpeed=!1,n}(0,o.Z)(t,e);var n=t.prototype;return n.init=function(e){this.config=e,this.isChangeSpeed=!1,this.fluctuateInitPos(),this.modifyStartScale(),this.modifyRotation(),this.modifySpeed()},n.update=function(t,n,r){var a=e.prototype.update.call(this,t,n,r);return this.updateScale(),this.changeSpeed(),a},n.updateScale=function(){var e=1-this.lifeCurrent%this.life/this.life;this.scaleX=this.scale*Math.sin(e*Math.PI),this.scaleY=this.scale*Math.sin(e*Math.PI)},n.changeSpeed=function(){this.lifeCurrent%this.life/this.life<=.7&&!this.isChangeSpeed&&(this.velocityX=0,this.velocityY=0,this.isChangeSpeed=!0)},n.fluctuateInitPos=function(){var e=this.config,t=e.xCenter,n=e.yCenter,r=e.fluctuateInitPos;if(r){var a=r.min,i=r.max,s=Math.atan2(n-this.y,t-this.x),o=Phaser.Math.Between(a,i),c=this.x+o*Math.cos(s),u=this.y+o*Math.sin(s);this.x=c,this.y=u}},n.modifyStartScale=function(){var e=this.config.randomScale;if(e){var t=e.min,n=e.max;this.scale=Phaser.Math.FloatBetween(t,n)}},n.modifyRotation=function(){if(this.config.randomRotation&&this.data.rotate){var e=Phaser.Math.Between(0,90),t=e+e/Math.abs(e)*45;this.data.rotate.min=e,this.data.rotate.max=t,this.angle=e}},n.modifySpeed=function(){var e=this.config,t=e.xCenter,n=e.yCenter,r=e.randomSpeed;if(r){var a=r.min,i=r.max,s=Math.atan2(n-this.y,t-this.x),o=Phaser.Math.Between(a,i),c=-o*Math.cos(s),u=-o*Math.sin(s);this.velocityX=c,this.velocityY=u}},t}(Phaser.GameObjects.Particles.Particle),Sp=wp,Ep=ca.Z.EFFECTS.FRAME,bp=GameCore.Utils.Image.getImageScale(),kp=function(){function e(e){this.particleManager=void 0,this.whiteStar=void 0,this.whiteStar2=void 0,this.colorfulStar=void 0,this.currentEmitX=0,this.currentEmitY=0,this.particleManager=e,this.createWhiteStar(),this.createWhiteStar2(),this.createColorfulStar()}var t=e.prototype;return t.handleShowMoveToCenterEffect=function(e,t,n,r){this.whiteStar.setVisible(!0),this.currentEmitX=e,this.currentEmitY=t;var a=new Phaser.Geom.Rectangle(e-n/2,t-r/2,n,r);this.whiteStar.setEmitZone({type:"edge",source:a,quantity:6}),this.whiteStar.start()},t.handleShowMoveOutCenterEffect=function(e,t,n,r){this.currentEmitX=e,this.currentEmitY=t;var a=new Phaser.Geom.Rectangle(e-n/2,t-r/2,n,r);this.whiteStar2.setEmitZone({type:"edge",source:a,quantity:20}),this.colorfulStar.setEmitZone({type:"edge",source:a,quantity:8}),this.whiteStar2.explode(20,0,0),this.colorfulStar.explode(8,0,0)},t.stopMoveToCenterEffect=function(){var e=this;this.whiteStar.stop(),this.particleManager.scene.time.delayedCall(50,(function(){e.whiteStar.forEachAlive((function(e){e.velocityX=0,e.velocityY=0,e.isChangeSpeed=!0}),e)}))},t.createWhiteStar=function(){var e=this;this.whiteStar=this.particleManager.createEmitter({frame:Ep.FX_STAR_WHITE,lifespan:400,quantity:6,frequency:50,alpha:{start:1,end:0,ease:Phaser.Math.Easing.Expo.In},scaleX:{start:1/0,end:0,ease:Phaser.Math.Easing.Expo.In},scaleY:{start:1/0,end:0,ease:Phaser.Math.Easing.Expo.In},rotate:{start:1/0,end:1/0},particleClass:yp,emitCallback:function(t){t.init({xCenter:e.currentEmitX,yCenter:e.currentEmitY,fluctuateInitPos:{min:-50,max:50},randomScale:{min:1/bp,max:1.5/bp},randomRotation:!0})},on:!1})},t.createWhiteStar2=function(){var e=this;this.whiteStar2=this.particleManager.createEmitter({frame:Ep.FX_STAR_WHITE,lifespan:{min:450,max:750},quantity:30,scaleX:{start:1/0,end:0,ease:Phaser.Math.Easing.Expo.In},scaleY:{start:1/0,end:0,ease:Phaser.Math.Easing.Expo.In},rotate:{start:1/0,end:1/0},alpha:{start:1,end:0,ease:Phaser.Math.Easing.Quadratic.In},blendMode:Phaser.BlendModes.ADD,particleClass:Sp,emitCallback:function(t){t.init({xCenter:e.currentEmitX,yCenter:e.currentEmitY,fluctuateInitPos:{min:-30,max:30},randomScale:{min:.6/bp,max:1/bp},randomRotation:!0,randomSpeed:{min:350,max:450}})},on:!1})},t.createColorfulStar=function(){var e=this;this.colorfulStar=this.particleManager.createEmitter({frame:Ep.STAR,lifespan:{min:450,max:750},quantity:8,scaleX:{start:1/0,end:0,ease:Phaser.Math.Easing.Expo.In},scaleY:{start:1/0,end:0,ease:Phaser.Math.Easing.Expo.In},rotate:{start:1/0,end:1/0},alpha:{start:1,end:0,ease:Phaser.Math.Easing.Quadratic.In},blendMode:Phaser.BlendModes.ADD,tint:[10200440,13684901,8769947,12632749,9293026,12689803,9295046,14273204],particleClass:Sp,emitCallback:function(t){t.init({xCenter:e.currentEmitX,yCenter:e.currentEmitY,fluctuateInitPos:{min:0,max:30},randomScale:{min:.4/bp,max:.6/bp},randomRotation:!0,randomSpeed:{min:350,max:450}})},on:!1})},e}(),xp=ca.Z.EFFECTS.FRAME,Ap=GameCore.Utils.Image.getImageScale(),Cp=function(){function e(e){this.particleManager=void 0,this.explodeEmitter=void 0,this.currentEmitX=0,this.currentEmitY=0,this.particleManager=e,this.createExplodeEmitter()}var t=e.prototype;return t.explode=function(e,t,n,r,a){this.currentEmitX=t,this.currentEmitY=n;var i=new Phaser.Geom.Rectangle(t-r/2,n-a/2,r,a);"yellow"===e?this.explodeEmitter.setFrame(xp.FX_COMET):this.explodeEmitter.setFrame(xp.FX_STAR_WHITE),this.explodeEmitter.setEmitZone({type:"random",source:i,quantity:20}),this.explodeEmitter.explode(3,0,0)},t.createExplodeEmitter=function(){var e=this;this.explodeEmitter=this.particleManager.createEmitter({frame:xp.FX_STAR_WHITE,lifespan:{min:550,max:650},quantity:30,scaleX:{start:1/0,end:0,ease:Phaser.Math.Easing.Expo.In},scaleY:{start:1/0,end:0,ease:Phaser.Math.Easing.Expo.In},rotate:{start:1/0,end:1/0},alpha:{start:1,end:0,ease:Phaser.Math.Easing.Quadratic.In},blendMode:Phaser.BlendModes.ADD,particleClass:Sp,emitCallback:function(t){t.init({xCenter:e.currentEmitX,yCenter:e.currentEmitY,fluctuateInitPos:{min:-30,max:30},randomScale:{min:.6/Ap,max:1/Ap},randomRotation:!0,randomSpeed:{min:0,max:10}})},on:!1})},e}(),Tp=ca.Z.EFFECTS,Pp=Tp.KEY,Ip=Tp.FRAME,Op=function(){function e(e){this.scene=void 0,this.particleManager=void 0,this.effectCollectCoin=void 0,this.resultEffect=void 0,this.receiveEffect=void 0,this.scene=e,this.createParticle(),this.resultEffect=new kp(this.particleManager),this.effectCollectCoin=new vp(this.scene,this.particleManager),this.receiveEffect=new Cp(this.particleManager)}return e.prototype.createParticle=function(){this.particleManager=this.scene.add.particles(Pp,Ip.FX_STAR_WHITE),this.particleManager.setDepth(oo.Z.SPECIAL_ANIM)},e}(),Mp=Op,_p=function(e){function t(t){var n;return(n=e.call(this,t)||this).level=void 0,n.slogan=void 0,n.scene=t,n.setSize(375,34),n.setDepth(oo.Z.UI),n.createLevel(),n.createSlogan(),t.add.existing((0,jr.Z)(n)),n}(0,o.Z)(t,e);var n=t.prototype;return n.setTextLevel=function(e){this.level.setText("LEVEL "+e)},n.setTextSlogan=function(e){this.slogan.setText(e.toUpperCase())},n.prepareFadeIn=function(){this.level.setAlpha(0),this.slogan.setAlpha(0)},n.fadeIn=function(){var e=(0,s.Z)(h().mark((function e(){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ya([this.level,this.slogan],200,300));case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.fadeOut=function(){var e=(0,s.Z)(h().mark((function e(){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Sa([this.level,this.slogan],100,150));case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.createLevel=function(){var e=this.scene.make.text({style:{fontFamily:Ee.Z.FONT_FAMILY,fontSize:"20px"},text:"LEVEL 999",origin:{x:.5,y:.5}});e.setHighQuality(),this.add(e);var t=e.context.createLinearGradient(0,0,0,e.height);t.addColorStop(0,"#ffffff"),t.addColorStop(1,"#cce5f9"),e.setFill(t),e.setShadow(0,6,"#0000003F",0,!1,!0),Phaser.Display.Align.In.Center(e,this,0,-10),this.level=e},n.createSlogan=function(){var e=this.scene.make.text({style:{fontFamily:Ee.Z.FONT_FAMILY,fontSize:"10px"},text:"EXCEL",origin:{x:.5,y:.5}});e.setHighQuality(),this.add(e);var t=e.context.createLinearGradient(0,0,0,e.height);t.addColorStop(0,"#ffffff"),t.addColorStop(1,"#cce5f9"),e.setFill(t),e.setShadow(0,6,"#0000003F",0,!1,!0),Phaser.Display.Align.In.Center(e,this,0,10),this.slogan=e},t}(Phaser.GameObjects.Container),Lp=_p,Rp=function(e){function t(t){var n;return(n=e.call(this,t)||this).scene=void 0,n.starterBlock=void 0,n.otherPackBlock=void 0,n.handleWatchAd=function(e,t){return(0,s.Z)(h().mark((function r(){return h().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,xs(n.name);case 2:if(r.sent){r.next=5;break}return r.abrupt("return");case 5:n.scene.handleReceivePack(e,t),n.scene.analytics.event(an._.SHOP_WATCH_ADS,{items:e,coin:t});case 7:case"end":return r.stop()}}),r)})))},n.handleIAP=function(e,t){return(0,s.Z)(h().mark((function e(){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})))},n.scene=t,n.updateSize(),n}(0,o.Z)(t,e);var n=t.prototype;return n.updateSize=function(){var e=Fp.WIDTH,t=Fp.HEIGHT;this.setSize(e,t)},n.createStarterBlock=function(){if(!this.starterBlock){var e=this.starterBlockPool.spawn();this.add(e),this.starterBlock=e}},n.createOtherPackBlock=function(){if(!this.otherPackBlock){var e=this.otherPackBlockPool.spawn();this.add(e),this.otherPackBlock=e}},n.updateInfo=function(e){var t,n,r,a,i,s,o,c,u,l,h,d,p,f,m,v,g,y=this,w=e.idx,S=this.getPackPayload(w),E=S.type,b=S.itemsWithCounts,k=S.coinCount,x=S.endTime,A=S.button;"starter"===E?(this.createStarterBlock(),this.returnOtherPackToPool(),null==(p=this.starterBlock)||p.revive(),null==(f=this.otherPackBlock)||f.kill()):(this.returnStaterToPool(),this.createOtherPackBlock(),null==(m=this.starterBlock)||m.kill(),null==(v=this.otherPackBlock)||v.revive());switch(E){case"super":null==(t=this.otherPackBlock)||t.title.setText("SUPER PACK"),this.setName("SUPER PACK"),null==(n=this.otherPackBlock)||n.superChest.revive(),null==(r=this.otherPackBlock)||r.megaChest.kill(),null==(a=this.otherPackBlock)||a.setBackgroundColor("blue");break;case"mega":null==(i=this.otherPackBlock)||i.title.setText("MEGA PACK"),null==(s=this.otherPackBlock)||s.superChest.kill(),null==(o=this.otherPackBlock)||o.megaChest.revive(),null==(c=this.otherPackBlock)||c.setBackgroundColor("blue");break;case"brilliant":null==(u=this.otherPackBlock)||u.title.setText("BRILLIANT PACK"),null==(l=this.otherPackBlock)||l.superChest.kill(),null==(h=this.otherPackBlock)||h.megaChest.revive(),null==(d=this.otherPackBlock)||d.setBackgroundColor("violet")}([this.starterBlock,this.otherPackBlock].forEach((function(e){if(e){e.setCoinPileCount(k);var t=e.itemWithCountGroup,n=e.buttonContainer;if(t.showItems(b),"ad"===A)return n.showButton("orange"),void(n.onClick=y.handleWatchAd(b,k));var r=A.price,a=A.currency;n.showButton("blue"),n.setPriceText(r,a),n.onClick=y.handleIAP(b,k)}})),"number"===typeof x)&&(null==(g=this.starterBlock)||g.startCountDown(x))},n.getPackPayload=function(e){return this.getShopScreen().packPayloads[e]},n.returnStaterToPool=function(){this.starterBlock&&(this.starterBlockPool.kill(this.starterBlock),this.starterBlock=void 0)},n.returnOtherPackToPool=function(){this.otherPackBlock&&(this.otherPackBlockPool.kill(this.otherPackBlock),this.otherPackBlock=void 0)},n.getShopScreen=function(){return this.scene.screen.get(en.o4.SHOP_SCREEN)},(0,le.Z)(t,[{key:"starterBlockPool",get:function(){return this.getShopScreen().starterBlockPool}},{key:"otherPackBlockPool",get:function(){return this.getShopScreen().otherPackBlockPool}}]),t}(Phaser.GameObjects.Container),Bp=Rp,Dp=Ms()(.38,1.37,.64,1),Np=function(e){function t(t){var n;return(n=e.call(this,t)||this).scene=void 0,n.inside=void 0,n.blocksAnimation=void 0,n.scene=t,n.updateSize(),n.createInside(),n}(0,o.Z)(t,e);var n=t.prototype;return n.updateInfo=function(e){this.inside.updateInfo(e),this.setInsideBlockAlpha(1)},n.updateSize=function(){this.setSize(t.WIDTH,t.HEIGHT)},n.createInside=function(){var e=new Bp(this.scene);this.add(e),this.inside=e},n.playEntranceAnimation=function(){var e=(0,s.Z)(h().mark((function e(t){var n,r=this;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return null==(n=this.blocksAnimation)||n.remove(),this.inside.setScale(0),this.inside.setAlpha(1),this.blocksAnimation=this.scene.add.tween({targets:this.inside,ease:Dp,duration:500,delay:100*t,props:{scale:1},onUpdate:function(){r.alignInTopCenter(r.inside)}}),e.abrupt("return",this.blocksAnimation.waitForCompletion());case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),n.playExitAnimation=function(){var e=(0,s.Z)(h().mark((function e(){var t,n=this;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return null==(t=this.blocksAnimation)||t.remove(),this.blocksAnimation=this.scene.add.tween({targets:this.inside,duration:200,props:{alpha:0},onComplete:function(){n.inside.returnStaterToPool(),n.inside.returnOtherPackToPool()}}),e.abrupt("return",this.blocksAnimation.waitForCompletion());case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.alignInTopCenter=function(e){e.setY((e.displayHeight-this.displayHeight)/2)},n.setInsideBlockAlpha=function(e){this.inside.setAlpha(e)},t}(Phaser.GameObjects.Container);Np.WIDTH=357.5,Np.HEIGHT=193.5;var Gp,Fp=Np,Zp=function(){function e(e,t,n){this.pool=[],this.scene=void 0,this.type=void 0,this.scene=e,this.type=t,this.createReadyItems(n)}var t=e.prototype;return t.createReadyItems=function(e){var t=this;this.pool=x()({length:e},(function(){var e=new t.type(t.scene);return e.kill(),e}))},t.spawn=function(){var e,t=_()(e=this.pool).call(e,(function(e){return!e.active}));return t?(t.revive(),t):new this.type(this.scene)},t.kill=function(e){var t,n;e.kill(),null==(t=e.parentContainer)||t.remove(e),y()(n=this.pool).call(n,e)||this.pool.push(e)},e}(),Up=Zp,Hp=ca.Z.DEFAULT,Wp=Hp.KEY,Vp=Hp.FRAME,Yp=function(e){function t(t){var n;return(n=e.call(this,t)||this).blueButton=void 0,n.priceText=void 0,n.orangeButton=void 0,n.onClick=void 0,n.createBlueButtonWithPrice(),n.createOrangeButton(),n.showButton("orange"),n}(0,o.Z)(t,e);var n=t.prototype;return n.createBlueButtonWithPrice=function(){var e=this,t=new Ps.Z(this.scene,Wp,Vp.SHOP_SCREEN_BTN_BLUE,107,38),n=this.scene.make.bitmapText({font:Ee.Z.NUMBERS.KEY,size:this.scene.fontSize(45),text:"29000",origin:{x:.5,y:.5}});t.add(n),this.add(t),t.onClick=function(){null==e.onClick||e.onClick()},this.blueButton=t,this.priceText=n},n.createOrangeButton=function(){var e=this,t=new Ps.Z(this.scene,Wp,Vp.SHOP_SCREEN_BTN_ORANGE,134.5,37),n=this.scene.make.image({key:Wp,frame:Vp.SHOP_SCREEN_ICON_AD});n.setWorldSize(22,17);var r=this.scene.make.image({key:Wp,frame:Vp.SHOP_SCREEN_WATCH_AD});r.setSizeBasedOnDpr(),t.add([n,r]),n.setX(-40),r.setX(13),this.add(t),t.onClick=function(){null==e.onClick||e.onClick()},this.orangeButton=t},n.showButton=function(e){var t=this.blueButton,n=this.orangeButton;"blue"===e?(t.revive(),n.kill(),t.setName(Is.SHOP_IAP)):(t.kill(),n.revive(),n.setName(Is.SHOP_ADS))},n.setPriceText=function(e,t){var n=this.addDots(e.toString()),r=this.currencyToSymbol(t);this.priceText.setText(r+" "+n)},n.currencyToSymbol=function(e){return"\u0111"},n.addDots=function(e){return e.replace(/\B(?=(\d{3})+(?!\d))/g,".")},t}(Phaser.GameObjects.Container),zp=Yp,Kp=ca.Z.DEFAULT,jp=Kp.KEY,Xp=Kp.FRAME,qp=((Gp={})[Xp.SHOP_SCREEN_ICON_HELP]={width:22,height:28.5},Gp[Xp.SHOP_SCREEN_ICON_SHUFFLE]={width:24.5,height:26.5},Gp[Xp.SHOP_SCREEN_ICON_UNDO]={width:26.5,height:27},Gp[Xp.SHOP_SCREEN_ICON_THUNDER]={width:18,height:29},Gp),Qp=function(e){function t(t,n){var r;return(r=e.call(this,t)||this).icon=void 0,r.countText=void 0,r.createIcon(),r.createCount(),r.setIcon(n),r}(0,o.Z)(t,e);var n=t.prototype;return n.createIcon=function(){var e=this.scene.make.image({key:jp,frame:Xp.SHOP_SCREEN_ICON_HELP});e.setWorldSize(22,28.5),this.add(e),e.setY(-12),this.icon=e},n.createCount=function(){var e=this.scene.make.text({text:"x25",style:{fontFamily:Ee.Z.FONT_FAMILY,fontSize:"16px"},origin:{x:.5,y:.5}});e.setHighQuality();var t=e.context.createLinearGradient(0,0,0,e.height);t.addColorStop(0,"#ffffff"),t.addColorStop(1,"#cce5f9"),e.setFill(t),e.setShadow(0,2,"#000000",0,!1,!0),this.add(e),e.setY(10),this.countText=e},n.setIcon=function(e){var t=qp[e],n=t.width,r=t.height;this.icon.setTexture(jp,e),this.icon.setWorldSize(n,r)},n.setCount=function(e){this.countText.setText("x"+e)},t}(Phaser.GameObjects.Container),Jp=Qp,$p=ca.Z.DEFAULT.FRAME,ef={undo:$p.SHOP_SCREEN_ICON_UNDO,magicWand:$p.SHOP_SCREEN_ICON_HELP,shuffle:$p.SHOP_SCREEN_ICON_SHUFFLE,return:$p.SHOP_SCREEN_ICON_THUNDER,extraSlot:$p.SHOP_SCREEN_ICON_THUNDER},tf=function(e){function t(t){var n;return(n=e.call(this,t)||this).itemsWithCounts=void 0,n.createItemsWithCounts(),n}(0,o.Z)(t,e);var n=t.prototype;return n.createItemsWithCounts=function(){this.itemsWithCounts={undo:new Jp(this.scene,ef.undo),magicWand:new Jp(this.scene,ef.magicWand),shuffle:new Jp(this.scene,ef.shuffle),return:new Jp(this.scene,ef.return),extraSlot:new Jp(this.scene,ef.extraSlot)},this.add(Jn()(this.itemsWithCounts))},n.showItems=function(e){var t=this;Jn()(this.itemsWithCounts).forEach((function(e){e.kill()})),e.forEach((function(e,n,r){var a=e.item,i=e.count,s=r.length,o=t.itemsWithCounts[a];o.setCount(i),o.revive(),o.setX(45*(n-(s-1)/2))}))},t}(Phaser.GameObjects.Container),nf=tf,rf=ca.Z.DEFAULT,af=rf.KEY,sf=rf.FRAME,of=function(e){function t(t){var n;return(n=e.call(this,t)||this).scene=void 0,n.coinPileCountText=void 0,n.itemWithCountGroup=void 0,n.chestContainer=void 0,n.timeLeftText=void 0,n.countDownEvent=void 0,n.buttonContainer=void 0,n.chestPulsateAnimation=void 0,n.updateCountDown=function(e){var t=1e3*e-Date.now();t=Math.max(t,0);var r=Math.floor(Math.abs(t)/864e5);t-=864e5*r,t=Math.max(t,0);var a=Math.floor(Math.abs(t)/36e5);t-=36e5*a,t=Math.max(t,0);var i=Math.floor(Math.abs(t)/6e4);t-=6e4*i,t=Math.max(t,0);var s,o=Math.round(Math.abs(t)/1e3),c=a;0===c&&(60*i+o>0?c=1:(null==(s=n.countDownEvent)||s.remove(),n.countDownEvent=void 0));var u="Limited time:\n"+r+"d "+c+"h";n.timeLeftText.setText(u)},n.scene=t,n.updateSize(),n.createBackground(),n.createTagValue(),n.createRibbon(),n.createCoinPile(),n.createCoinPileCount(),n.createItemWithCountGroup(),n.createStarterChest(),n.createTimeLeft(),n.createButtonContainer(),n.playChestPulsateAnimation(),n}(0,o.Z)(t,e);var n=t.prototype;return n.updateSize=function(){var e=Fp.WIDTH,t=Fp.HEIGHT;this.setSize(e,t)},n.createBackground=function(){var e=this.scene.make.image({key:af,frame:sf.SHOP_SCREEN_POPUP_BLUE});e.setWorldSize(Fp.WIDTH,Fp.HEIGHT),this.add(e)},n.createTagValue=function(){var e=this.scene.add.container();e.setSize(56,58);var t=this.scene.make.image({key:af,frame:sf.SHOP_SCREEN_TAG_VALUE});t.setWorldSize(56,58);var n=this.scene.make.text({text:"Value\nx3",style:{fontFamily:Ee.Z.FONT_FAMILY,fontSize:"12px",align:"center"},origin:{x:.5,y:.5}});n.setHighQuality();var r=n.context.createLinearGradient(0,0,0,n.height);r.addColorStop(0,"#ffffff"),r.addColorStop(1,"#cce5f9"),n.setFill(r),n.setShadow(0,2,"#000000",0,!1,!0),e.add([t,n]),n.setY(-3),this.add(e),Phaser.Display.Align.In.TopLeft(e,this,5,20)},n.createRibbon=function(){var e=this.scene.add.container();e.setSize(214,43.5);var t=this.scene.make.image({key:af,frame:sf.SHOP_SCREEN_RIBBON_PINK});t.setWorldSize(214,43.5);var n=this.scene.make.text({style:{fontFamily:Ee.Z.FONT_FAMILY,fontSize:"20px"},text:"STARTER PACK",origin:{x:.5,y:.5}});n.setHighQuality();var r=n.context.createLinearGradient(0,0,0,n.height);r.addColorStop(0,"#ffffff"),r.addColorStop(1,"#cce5f9"),n.setFill(r),n.setShadow(0,2,"#000000",0,!1,!0),e.add([t,n]),n.setY(-7),this.add(e),Phaser.Display.Align.In.TopCenter(e,this,0,10)},n.createCoinPile=function(){var e=this.scene.make.image({key:af,frame:sf.SHOP_SCREEN_COIN_PILE});e.setWorldSize(40,36.5),this.add(e),e.setPosition(-90,-35)},n.createCoinPileCount=function(){var e=this.scene.make.text({text:"x 500",style:{fontFamily:Ee.Z.FONT_FAMILY,fontSize:"16px"},origin:{x:0,y:.5}});e.setHighQuality();var t=e.context.createLinearGradient(0,0,0,e.height);t.addColorStop(0,"#ffffff"),t.addColorStop(1,"#cce5f9"),e.setFill(t),e.setShadow(0,2,"#000000",0,!1,!0),this.add(e),e.setPosition(-65,-35),this.coinPileCountText=e},n.setCoinPileCount=function(e){this.coinPileCountText.setText("x "+e)},n.createItemWithCountGroup=function(){var e=new nf(this.scene);e.showItems([{item:"magicWand",count:5}]),this.add(e),e.setPosition(-62.5,15),this.itemWithCountGroup=e},n.createStarterChest=function(){var e=this.scene.add.container();e.setSize(157,153);var t=this.scene.make.image({key:af,frame:sf.SHOP_SCREEN_SUN_RAY_YELLOW});t.setWorldSize(157,152);var n=this.scene.make.image({key:af,frame:sf.SHOP_SCREEN_ITEM_STARTER});n.setWorldSize(102.5,121.5),n.setPosition(15,-5),e.add([t,n]),this.add(e),Phaser.Display.Align.In.RightCenter(e,this),this.chestContainer=e},n.createTimeLeft=function(){var e=this.scene.make.text({text:"Limited time:\n1d 23h",style:{fontFamily:Ee.Z.FONT_FAMILY,fontSize:"15px",align:"center"},origin:{x:.5,y:.5}});e.setHighQuality(),this.add(e),e.setPosition(-129,70),this.timeLeftText=e},n.createButtonContainer=function(){var e=new zp(this.scene);this.add(e),e.setY(70),this.buttonContainer=e},n.startCountDown=function(e){var t,n=this;null==(t=this.countDownEvent)||t.remove(),this.countDownEvent=this.scene.time.addEvent({delay:1e3,loop:!0,startAt:1e3,callback:function(){n.updateCountDown(e)}})},n.playChestPulsateAnimation=function(){var e;null==(e=this.chestPulsateAnimation)||e.remove(),this.chestPulsateAnimation=new Gu({targets:[this.chestContainer],duration:1400,repeatDelay:200,props:{scale:1.05}}),this.chestPulsateAnimation.play()},t}(Phaser.GameObjects.Container),cf=of,uf=ca.Z.DEFAULT,lf=uf.KEY,hf=uf.FRAME,df=function(e){function t(t){var n;return(n=e.call(this,t)||this).scene=void 0,n.background=void 0,n.title=void 0,n.coinPileCountText=void 0,n.itemWithCountGroup=void 0,n.sunRayChestContainer=void 0,n.superChest=void 0,n.megaChest=void 0,n.buttonContainer=void 0,n.chestPulsateAnimation=void 0,n.scene=t,n.updateSize(),n.createBackground(),n.createTitle(),n.createCoinPile(),n.createCoinPileCountText(),n.createItemWithCountGroup(),n.createSunRayChestContainer(),n.createSunRay(),n.createSuperChest(),n.createMegaChest(),n.createButtonContainer(),n.playChestPulsateAnimation(),n}(0,o.Z)(t,e);var n=t.prototype;return n.updateSize=function(){var e=Fp.WIDTH,t=Fp.HEIGHT;this.setSize(e,t)},n.createBackground=function(){var e=this.scene.make.image({key:lf,frame:hf.SHOP_SCREEN_POPUP_BLUE});e.setWorldSize(Fp.WIDTH,Fp.HEIGHT),this.add(e),this.background=e},n.createTitle=function(){var e=this.scene.make.text({text:"SUPER PACK",style:{fontFamily:Ee.Z.FONT_FAMILY,fontSize:"20px",color:"#ffffff"},origin:{x:.5,y:.5}});e.setHighQuality();var t=e.context.createLinearGradient(0,0,0,e.height);t.addColorStop(0,"#ffffff"),t.addColorStop(1,"#cce5f9"),e.setFill(t),e.setShadow(0,2,"#000000",0,!1,!0),this.add(e),e.setY(-80),this.title=e},n.createCoinPile=function(){var e=this.scene.make.image({key:lf,frame:hf.SHOP_SCREEN_COIN_PILE});e.setWorldSize(40,36.5),this.add(e),e.setPosition(-90,-35)},n.createCoinPileCountText=function(){var e=this.scene.make.text({text:"x 500",style:{fontFamily:Ee.Z.FONT_FAMILY,fontSize:"16px"},origin:{x:0,y:.5}});e.setHighQuality();var t=e.context.createLinearGradient(0,0,0,e.height);t.addColorStop(0,"#ffffff"),t.addColorStop(1,"#cce5f9"),e.setFill(t),e.setShadow(0,2,"#000000",0,!1,!0),this.add(e),e.setPosition(-65,-35),this.coinPileCountText=e},n.setCoinPileCount=function(e){this.coinPileCountText.setText("x "+e)},n.createItemWithCountGroup=function(){var e=new nf(this.scene);e.showItems([{item:"undo",count:5},{item:"magicWand",count:5},{item:"shuffle",count:5},{item:"return",count:5}]),this.add(e),e.setPosition(-62.5,15),this.itemWithCountGroup=e},n.createSunRayChestContainer=function(){var e=this.scene.add.container();e.setSize(157,153),this.add(e),Phaser.Display.Align.In.RightCenter(e,this),this.sunRayChestContainer=e},n.createSunRay=function(){var e=this.scene.make.image({key:lf,frame:hf.SHOP_SCREEN_SUN_RAY_BLUE});e.setWorldSize(157,153),this.sunRayChestContainer.add(e)},n.createSuperChest=function(){var e=this.scene.make.image({key:lf,frame:hf.SHOP_SCREEN_ITEM_SUPER_PACK});e.setWorldSize(106,111.5),this.sunRayChestContainer.add(e),e.setPosition(15,-5),this.superChest=e},n.createMegaChest=function(){var e=this.scene.make.image({key:lf,frame:hf.SHOP_SCREEN_ITEM_MEGA_PACK});e.setWorldSize(118,114.5),this.sunRayChestContainer.add(e),e.setPosition(15,-5),this.megaChest=e},n.createButtonContainer=function(){var e=new zp(this.scene);this.add(e),e.setY(70),this.buttonContainer=e},n.setBackgroundColor=function(e){var t=hf.SHOP_SCREEN_POPUP_BLUE;this.background.setFrame(t),this.background.setWorldSize(Fp.WIDTH,Fp.HEIGHT)},n.playChestPulsateAnimation=function(){var e;null==(e=this.chestPulsateAnimation)||e.remove(),this.chestPulsateAnimation=new Gu({targets:[this.sunRayChestContainer],duration:1400,repeatDelay:200,props:{scale:1.05}}),this.chestPulsateAnimation.play()},t}(Phaser.GameObjects.Container),pf=df,ff=ca.Z.DEFAULT,mf=ff.KEY,vf=ff.FRAME,gf=function(e){function t(t,n,r,a){var i;return(i=e.call(this,t,n,r,a)||this).scene=void 0,i.header=void 0,i.headerOriginalY=void 0,i.scroller=void 0,i.packPayloads=[],i.backgroundAnimation=void 0,i.headerAnimation=void 0,i.starterBlockPool=void 0,i.otherPackBlockPool=void 0,i.scene=t,i.background.setAlpha(.8),i.createPools(),i.createScroller(),i.createHeader(),i.initPackPayloads(),i.setDepth(en.Ks.POPUP),i}(0,o.Z)(t,e);var n=t.prototype;return n.open=function(){var t=(0,s.Z)(h().mark((function t(n){var r,a,i,s,o;return h().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.prototype.open.call(this,n),a=this.packPayloads,i=this.scroller,s=Ne()(a).call(a,(function(e,t){return{idx:t}})),i.stopScrolling(),i.setEnable(!1),i.updateConfig(s),(o=i.getChildren()).forEach((function(e){return e.setInsideBlockAlpha(0)})),t.next=10,u().all([this.playBackgroundEntranceAnimation(),this.playHeaderEntranceAnimation()]);case 10:return t.next=12,u().all(O()(r=[]).call(r,Ne()(o).call(o,(function(e,t){return e.playEntranceAnimation(t)}))));case 12:i.setEnable(!0);case 13:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),n.close=function(){var t=(0,s.Z)(h().mark((function t(){var n,r,a,i,s,o;return h().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=this.scroller.getChildren(),this.scroller.stopScrolling(),this.scroller.setEnable(!1),t.next=5,u().all([Ne()(a).call(a,(function(e){return e.playExitAnimation()})),this.playBackgroundExitAnimation(),this.playHeaderExitAnimation(),this.scene.navigation.fadeOut()]);case 5:i=this.scene.screen.get(en.o4.DASHBOARD_SCREEN),s=i.isOpening,o=null!=(n=null==(r=this.scene.screen.get(en.o4.RESULT_SCREEN))?void 0:r.visible)&&n,s?(i.fadeIn(),this.fadeInDashboardNavigation()):o?this.fadeInDashboardNavigation():this.scene.navigation.fadeIn("Gameplay",!1),e.prototype.close.call(this);case 10:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),n.fadeInDashboardNavigation=function(){return this.scene.navigation.fadeIn("Dashboard",!1)},n.createHeader=function(){var e=this.scene.add.container();e.setSize(375,60);var t=this.scene.make.image({key:mf,frame:vf.SHOP_SCREEN_HEADER});t.setWorldSize(375,60);var n=this.scene.make.text({style:{fontFamily:Ee.Z.FONT_FAMILY,fontSize:"30px"},text:"SHOP",origin:{x:.5,y:.5}});n.setHighQuality();var r=n.context.createLinearGradient(0,0,0,n.height);r.addColorStop(0,"#ffffff"),r.addColorStop(1,"#cce5f9"),n.setFill(r),n.setShadow(0,4,"#000000",0,!1,!0),this.add(e),e.add([t,n]),Phaser.Display.Align.In.TopCenter(e,this),n.setY(-2),this.headerOriginalY=e.y,this.header=e},n.createPools=function(){this.starterBlockPool=new Up(this.scene,cf,0),this.otherPackBlockPool=new Up(this.scene,pf,1)},n.createScroller=function(){var e=new su(this.scene,{classType:Fp,width:Fp.WIDTH,height:this.height-60,listConfigs:[],padding:10,marginTop:30,marginBottom:10+this.scene.ads.getBannerHeight(),maxScrollOver:.3});this.add(e),Phaser.Display.Align.In.BottomCenter(e,this),this.scroller=e},n.initPackPayloads=function(){this.packPayloads=[{type:"super",coinCount:100,itemsWithCounts:[{item:"undo",count:2},{item:"magicWand",count:2},{item:"shuffle",count:2}],button:"ad"}]},n.playBackgroundEntranceAnimation=function(){var e=(0,s.Z)(h().mark((function e(){var t,n=this;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return null==(t=this.backgroundAnimation)||t.remove(),this.background.setAlpha(0),e.abrupt("return",new(u())((function(e){n.backgroundAnimation=n.scene.tweens.add({targets:n.background,duration:300,props:{alpha:.8},onComplete:e})})));case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.playHeaderEntranceAnimation=function(){var e=(0,s.Z)(h().mark((function e(){var t,n=this;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return null==(t=this.headerAnimation)||t.remove(),this.header.setAlpha(0),e.abrupt("return",new(u())((function(e){n.headerAnimation=n.scene.add.tween({targets:n.header,duration:200,props:{alpha:1,y:{from:n.headerOriginalY-n.header.displayHeight/2,to:n.headerOriginalY,ease:Phaser.Math.Easing.Cubic.Out}},onComplete:e})})));case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.playBackgroundExitAnimation=function(){var e=(0,s.Z)(h().mark((function e(){var t,n=this;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return null==(t=this.backgroundAnimation)||t.remove(),e.abrupt("return",new(u())((function(e){n.backgroundAnimation=n.scene.tweens.add({targets:n.background,duration:300,props:{alpha:0},onComplete:e})})));case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.playHeaderExitAnimation=function(){var e=(0,s.Z)(h().mark((function e(){var t,n=this;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return null==(t=this.headerAnimation)||t.remove(),e.abrupt("return",new(u())((function(e){n.headerAnimation=n.scene.add.tween({targets:n.header,duration:200,ease:Phaser.Math.Easing.Cubic.In,props:{y:n.headerOriginalY-n.header.displayHeight},onComplete:e})})));case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),t}(GameCore.Screen),yf=gf,wf=function(e){function t(t,n,r,a){var i;return(i=e.call(this,t,n,r,a)||this).scene=void 0,i.textTitle=void 0,i.textSubTitle=void 0,i.textLevels=void 0,i.initPositionY=[],i.open=(0,s.Z)(h().mark((function t(){return h().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.prototype.open.call((0,jr.Z)(i)),i.prepareFadeIn(),t.next=4,i.fadeIn();case 4:i.emitOpenCompleted();case 5:case"end":return t.stop()}}),t)}))),i.scene=t,i.background.setAlpha(0),i.setDepth(en.Ks.POPUP),i.createTitle(),i.createSubTitle(),i.createTextLevels(),i.alignUI(),i}(0,o.Z)(t,e);var n=t.prototype;return n.createTitle=function(){var e=this.scene.make.text({style:{fontFamily:Ee.Z.FONT_FAMILY,fontSize:"36px"}});e.setHighQuality(),e.setOrigin(.5,.5),this.add(e);var t=e.context.createLinearGradient(0,0,0,e.height);t.addColorStop(0,"#ffffff"),t.addColorStop(1,"#cce5f9"),e.setFill(t),e.setShadow(0,6,"#0000003F",0,!1,!0),this.textTitle=e},n.createSubTitle=function(){var e=this.scene.make.text({style:{fontFamily:Ee.Z.FONT_FAMILY,fontSize:"28px"}});e.setHighQuality(),e.setOrigin(.5,.5),this.add(e);var t=e.context.createLinearGradient(0,0,0,e.height);t.addColorStop(0,"#ffffff"),t.addColorStop(1,"#cce5f9"),e.setFill(t),e.setShadow(0,6,"#0000003F",0,!1,!0),this.textSubTitle=e},n.createTextLevels=function(){var e=this.scene.make.text({style:{fontFamily:Ee.Z.FONT_FAMILY,fontSize:"24px"}});e.setHighQuality(),e.setOrigin(.5,.5),this.add(e);var t=e.context.createLinearGradient(0,0,0,e.height);t.addColorStop(0,"#ffffff"),t.addColorStop(1,"#cce5f9"),e.setFill(t),e.setShadow(0,6,"#0000003F",0,!1,!0),this.textLevels=e},n.alignUI=function(){Phaser.Display.Align.In.Center(this.textTitle,this,0,-113),Phaser.Display.Align.In.Center(this.textSubTitle,this,0,-67),Phaser.Display.Align.In.Center(this.textLevels,this,0,8),this.initPositionY=[this.textTitle.y,this.textSubTitle.y,this.textLevels.y]},n.close=function(){var t=(0,s.Z)(h().mark((function t(){return h().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.fadeOut();case 2:e.prototype.close.call(this);case 3:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),n.prepareFadeIn=function(){this.textTitle.y=this.initPositionY[0],this.textSubTitle.y=this.initPositionY[1],this.textLevels.y=this.initPositionY[2],this.textLevels.setAlpha(0),this.textSubTitle.setAlpha(0),this.textTitle.setAlpha(0),this.loadContent()},n.loadContent=function(){var e=this.scene.level.getLevel(),t=Ne()(this.scene).getMapContentByLevel(e);if(t){var n=t.title,r=t.subtitle,a=t.startLevel,i=t.endLevel,s=t.gameplayBackgroundKey;this.textTitle.setText(n),this.shrinkTitleToFitScreen(),this.textSubTitle.setText(r),this.textLevels.setText("Levels "+a+" - "+i),this.scene.bgHandler.prepareSwitchAnim(s)}},n.shrinkTitleToFitScreen=function(){for(var e=36;this.textTitle.width>this.width;)this.textTitle.setFontSize(e+"px"),e--},n.fadeIn=function(){var e=(0,s.Z)(h().mark((function e(){var t,n,r=this;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.scene.bgHandler,this.scene.time.delayedCall(300,(function(){r.scene.audio.playSound(tn.Z.SWITCH_MAP)})),e.next=4,t.tweenHideCurBg();case 4:return e.next=6,Oa(this.scene,150);case 6:return e.next=8,t.tweenMoveLeftBgs();case 8:return e.next=10,Oa(this.scene,150);case 10:return n=[this.tweenFadeInTitle(),this.tweenFadeInSubTitle(),this.tweenFadeInTextLevels(),t.tweenScaleUpBackgroundRight()],e.next=13,u().all(n);case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.fadeOut=function(){var e=(0,s.Z)(h().mark((function e(){var t;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=[this.tweenFadeOutTitle(),this.tweenFadeOutSubTitle(),this.tweenFadeOutTextLevels()],e.next=3,u().all(t);case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.tweenFadeInTitle=function(){var e=(0,s.Z)(h().mark((function e(){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.textTitle.y-=this.textTitle.height,e.abrupt("return",ua(this.scene,{targets:this.textTitle,y:"+="+this.textTitle.height,alpha:{from:0,to:1},duration:1e3,delay:650,ease:Phaser.Math.Easing.Sine.InOut}));case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.tweenFadeInSubTitle=function(){var e=(0,s.Z)(h().mark((function e(){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.textSubTitle.y+=.5*this.textSubTitle.height,e.abrupt("return",ua(this.scene,{targets:this.textSubTitle,y:"-="+.5*this.textSubTitle.height,alpha:{from:.5,to:1},duration:500,delay:1400,ease:Phaser.Math.Easing.Sine.InOut}));case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.tweenFadeInTextLevels=function(){var e=(0,s.Z)(h().mark((function e(){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.textLevels.y+=.25*this.textLevels.height,e.abrupt("return",ua(this.scene,{targets:this.textLevels,y:"-="+.25*this.textLevels.height,alpha:{from:.5,to:1},duration:500,delay:1400,ease:Phaser.Math.Easing.Sine.InOut}));case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.tweenFadeOutTitle=function(){var e=(0,s.Z)(h().mark((function e(){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ua(this.scene,{targets:this.textTitle,y:"-="+this.textTitle.height,alpha:{from:1,to:0},duration:300,ease:Phaser.Math.Easing.Cubic.Out}));case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.tweenFadeOutSubTitle=function(){var e=(0,s.Z)(h().mark((function e(){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ua(this.scene,{targets:this.textSubTitle,y:"+="+.5*this.textSubTitle.height,alpha:{from:1,to:0},duration:300,ease:Phaser.Math.Easing.Cubic.Out}));case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.tweenFadeOutTextLevels=function(){var e=(0,s.Z)(h().mark((function e(){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ua(this.scene,{targets:this.textLevels,y:"+="+.25*this.textLevels.height,alpha:{from:1,to:0},duration:300,ease:Phaser.Math.Easing.Cubic.Out}));case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),t}(GameCore.Screen),Sf=wf;function Ef(e,t,n,r,a){return bf.apply(this,arguments)}function bf(){return bf=(0,s.Z)(h().mark((function e(t,n,r,a,i){var s,o;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===a&&(a=0),void 0===i&&(i=0),s=1,a>0&&(s+=a),r.textures.get(t).key!==t&&""!==t){e.next=7;break}return e.abrupt("return",!0);case 7:o=!1;case 8:if(!(s>0)){e.next=24;break}return e.prev=9,e.next=12,kf(t,n,r.load);case 12:return o=!0,e.abrupt("break",24);case 16:e.prev=16,e.t0=e.catch(9),s--;case 19:if(!(s>0)){e.next=22;break}return e.next=22,new(u())((function(e){return setTimeout(e,i)}));case 22:e.next=8;break;case 24:return e.abrupt("return",o);case 25:case"end":return e.stop()}}),e,null,[[9,16]])}))),bf.apply(this,arguments)}function kf(e,t,n){return new(u())((function(r,a){var i=Phaser.Loader.Events.FILE_KEY_COMPLETE+"image-"+e,s=Phaser.Loader.Events.FILE_LOAD_ERROR,o=function e(t){n.off(i,e),n.off(s,c),r()},c=function t(r){r.key===e&&(n.off(i,o),n.off(s,t),a())};n.on(i,o),n.on(s,c),n.image(e,t),n.start()}))}var xf=function(){function e(e){this.scene=void 0,this.currentBg=void 0,this.nextBg=void 0,this.originalScaleX=void 0,this.originalScaleY=void 0,this.scene=e,this.createBgs()}var t=e.prototype;return t.prepareFadeIn=function(){this.currentBg.revive(),this.currentBg.setAlpha(1)},t.fadeOut=function(){var e=(0,s.Z)(h().mark((function e(){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ua(this.scene,{targets:this.currentBg,props:{alpha:0},duration:200});case 2:this.currentBg.kill();case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),t.prepareSwitchAnim=function(e){var t=this.currentBg,n=t.x,r=t.y,a=this.scene.gameZone.width;this.nextBg.setAlpha(1),this.nextBg.setPosition(n+a,r),this.setBgTexture(e,this.nextBg),this.originalScaleX=this.nextBg.scaleX,this.originalScaleY=this.nextBg.scaleY},t.tweenHideCurBg=function(){var e=(0,s.Z)(h().mark((function e(){var t,n,r;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.currentBg,n=t.scaleX,r=t.scaleY,e.abrupt("return",ua(this.scene,{targets:this.currentBg,scaleX:.65*n,scaleY:.65*r,duration:720,ease:Phaser.Math.Easing.Quadratic.InOut}));case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),t.tweenMoveLeftBgs=function(){var e=(0,s.Z)(h().mark((function e(){var t,n,r;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.currentBg,n=t.displayWidth,r=t.displayHeight,this.nextBg.setWorldSize(n,r),e.next=4,u().all([ua(this.scene,{targets:[this.currentBg],x:"-="+this.scene.gameZone.width,alpha:{from:1,to:0},duration:960,ease:Phaser.Math.Easing.Quadratic.InOut}),ua(this.scene,{targets:[this.nextBg],x:"-="+this.scene.gameZone.width,duration:960,ease:Phaser.Math.Easing.Quadratic.InOut})]);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),t.tweenScaleUpBackgroundRight=function(){var e=(0,s.Z)(h().mark((function e(){var t,n;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.nextBg,n=[this.nextBg,this.currentBg],this.currentBg=n[0],this.nextBg=n[1],e.abrupt("return",ua(this.scene,{targets:t,scaleX:this.originalScaleX,scaleY:this.originalScaleY,duration:960,ease:Phaser.Math.Easing.Quadratic.InOut}));case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),t.setCurrentBg=function(e){this.setBgTexture(e,this.currentBg),Phaser.Display.Align.In.Center(this.currentBg,this.scene.gameZone),this.preloadNextUnlockBg()},t.createBgs=function(){this.currentBg=this.scene.add.image(0,0,""),this.currentBg.setDepth(oo.Z.BACKGROUND),this.nextBg=this.scene.add.image(0,0,""),this.nextBg.setDepth(oo.Z.BACKGROUND),this.nextBg.setAlpha(0)},t.setBgTexture=function(e,t){t.setTexture(e);var n=this.scene.gameZone,r=n.width,a=n.height;t.setWorldSize(r,a)},t.preloadNextUnlockBg=function(){var e=Ne()(this.scene).getNextBgKeyOfCurrentBlock();if(!this.scene.textures.exists(e)){var t=Pr.Z.GP_BACKGROUND,n=t.KEYS;return Ef(e,t.PATH+n[e],this.scene)}},e}(),Af=xf,Cf=ca.Z.DEFAULT,Tf=Cf.KEY,Pf=Cf.FRAME,If=function(e){function t(t){var n;return(n=e.call(this,t)||this).scene=void 0,n.background=void 0,n.title=void 0,n.closeButton=void 0,n.musicToggleButton=void 0,n.soundToggleButton=void 0,n.vibrationToggleButton=void 0,n.handleSoundChange=function(e){n.scene.player.setSetting("sound",e)},n.handleMusicChange=function(e){n.scene.player.setSetting("music",e),e?n.scene.audio.playMusic():n.scene.audio.pauseMusic()},n.handleVibrationChange=function(e){n.scene.player.setSetting("vibrate",e),e&&na(50)},n.scene=t,n.createBackground(),n.updateSize(),n.createTitle(),n.createCloseButton(),n.createIconLabelToggles(),n}(0,o.Z)(t,e);var n=t.prototype;return n.setMusicStatus=function(e){this.musicToggleButton.setStatus(e)},n.setSoundStatus=function(e){this.soundToggleButton.setStatus(e)},n.setVibrationStatus=function(e){var t;null==(t=this.vibrationToggleButton)||t.setStatus(e)},n.createBackground=function(){var e=Tf,t=new El(this.scene,{initialHeight:200,sliceTextures:{top:{key:e,frame:Pf.SETTINGS_SCREEN_POPUP_TOP},middle:{key:e,frame:Pf.SETTINGS_SCREEN_POPUP_MIDDLE},bottom:{key:e,frame:Pf.SETTINGS_SCREEN_POPUP_BOTTOM}}});this.add(t),this.background=t,$r()||t.setSize(t.width,150)},n.updateSize=function(){var e=this.background,t=e.width,n=e.height;this.setSize(t,n)},n.createTitle=function(){var e=this.scene.make.image({key:Tf,frame:Pf.SETTINGS_SCREEN_TITLE});e.setSizeBasedOnDpr(),this.add(e),Phaser.Display.Align.In.TopCenter(e,this,2,-18),this.title=e},n.createCloseButton=function(){var e=new Ps.Z(this.scene,Tf,Pf.SETTINGS_SCREEN_BTN_CANCEL,23,23);e.setName(Is.SETTINGS_CLOSE),this.add(e),Phaser.Display.Align.In.TopRight(e,this,-17,-15),this.closeButton=e},n.createIconLabelToggles=function(){var e=this,t=this.scene.player.getPlayerSettings(),n=t.sound,r=void 0===n||n,a=t.music,i=void 0===a||a,s=t.vibrate,o=void 0===s||s,c=[["Music",Pf.SETTINGS_SCREEN_ICON_MUSIC,r,this.handleMusicChange,Is.SETTINGS_MUSIC],["Sound",Pf.SETTINGS_SCREEN_ICON_SOUND,i,this.handleSoundChange,Is.SETTINGS_SOUND],["Vibration",Pf.SETTINGS_SCREEN_ICON_VIBRATE,o,this.handleVibrationChange,Is.SETTINGS_VIBRATION]],u=$r()?c:b()(c).call(c,0,2),l=Ne()(u).call(u,(function(t,n,r){var a=t[0],i=t[1],s=t[2],o=t[3],c=t[4],u=(r.length,e.createIcon(i)),l=e.createLabel(a),h=e.createToggleButton(s,o),d=e.createLine();return e.add([u,l,h,d]),Phaser.Display.Align.In.TopLeft(u,e,-11,-68-45*n),l.setPosition(-126,u.y),h.setPosition(126,u.y),d.setY(u.y+23.5),h.setName(c),h})),h=l[0],d=l[1],p=l[2];this.musicToggleButton=h,this.soundToggleButton=d,this.vibrationToggleButton=p},n.createIcon=function(e){var t=this.scene.make.image({key:Tf,frame:e});return t.setSizeBasedOnDpr(),t},n.createLabel=function(e){var t=this.scene.make.text({text:e,style:{fontFamily:Ee.Z.FONT_FAMILY,fontSize:"16px",align:"left"},origin:{x:0,y:.5}});t.setHighQuality();var n=t.context.createLinearGradient(0,0,0,t.height);return n.addColorStop(0,"#ffffff"),n.addColorStop(1,"#cce5f9"),t.setFill(n),t.setShadow(0,2,"#000000",0,!1,!0),t},n.createToggleButton=function(e,t){var n=new Wo(this.scene);return n.updateStatus(e),n.onClick=t,n},n.createLine=function(){var e=this.scene.make.image({key:Tf,frame:Pf.SETTINGS_SCREEN_BTN_DIVINE_LINE});return e.setSizeBasedOnDpr(),e},(0,le.Z)(t,[{key:"onCloseClick",set:function(e){this.closeButton.onClick=e}}]),t}(Phaser.GameObjects.Container),Of=If,Mf=function(e){function t(t,n){var r;return(r=e.call(this,t,n)||this).name="InvalidContextId",r.message=t||"This contextId is not valid",r.payload=n,r}return(0,o.Z)(t,e),t}((0,Z.Z)(Error)),_f=function(e){function t(t,n){var r;return(r=e.call(this,t,n)||this).name="InvalidOpponentId",r.message=t||"This opponentId is not valid",r.payload=n,r}return(0,o.Z)(t,e),t}((0,Z.Z)(Error)),Lf=function(e){function t(t,n){var r;return(r=e.call(this,t,n)||this).name="WideFrameRenderFail",r.message=t||"Wide frame render fail",r.payload=n,r}return(0,o.Z)(t,e),t}((0,Z.Z)(Error)),Rf=function(e){return e[Fn]},Bf=(0,fe.P1)([function(e){return Rf(e).stats.data}],(function(e){return e})),Df=(0,fe.P1)([function(e){return Rf(e).stats.current}],(function(e){return e})),Nf=((0,fe.P1)([function(e){return Rf(e).stats.isRequesting}],(function(e){return e})),n(346)),Gf=n.n(Nf),Ff="global",Zf="friend",Uf=GameCore.Configs,Hf=Uf.ApiHost,Wf=Uf.OtherHost,Vf=Uf.LeadersBoard,Yf=Vf.Prefix,zf=Vf.LeaderboardId,Kf=Vf.Name,jf=Yf+"/"+zf+"/leaders",Xf=Yf+"/"+zf+"/players",qf=function(e){var t="";return zf?(e===Ff?t=jf:e===Zf&&(t=Xf),t):t},Qf=function(){var e=(0,s.Z)(h().mark((function e(t){var n,r,a,s,o,c;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Ne()(t).call(t,(function(e){return e.playerId})),a=GameCore.Utils.Object.keyBy(t,"playerId"),s=GameCore.Utils.String.params({playerIds:r}),e.next=5,(0,qe.U)("players?"+s,{},Hf);case 5:return o=e.sent,c=Ne()(n=o.data).call(n,(function(e){var t=a[e.playerId];return(0,i.Z)({},e,{score:t.score,rank:t.rank,getScore:function(){return t.score},getFormattedScore:function(){return""},getTimestamp:function(){return(new Date).valueOf()},getRank:function(){return t.rank},getExtraData:function(){return t.extraData},getPlayer:function(){return{getName:function(){return e.name},getPhoto:function(){return e.photo},getID:function(){return e.playerId}}}})})),e.abrupt("return",c);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Jf=(function(){var e=(0,s.Z)(h().mark((function e(t){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===t&&(t={}),null==zf){e.next=3;break}return e.abrupt("return",Jf(t));case 3:return e.abrupt("return",$f(t));case 4:case"end":return e.stop()}}),e)})))}(),function(){var e=(0,s.Z)(h().mark((function e(t){var n,r,a,i,s;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===t&&(t={}),n=[],r=qf(Ff)){e.next=5;break}return e.abrupt("return",n);case 5:return a=GameCore.Utils.String.params(t),e.next=8,(0,qe.U)(r+"?"+a,{},Wf);case 8:if(i=e.sent,!((s=(null==i?void 0:i.data)||[]).length<1)){e.next=12;break}return e.abrupt("return",n);case 12:return n=s,e.abrupt("return",Qf(n));case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),$f=function(){var e=(0,s.Z)(h().mark((function e(t){var n,r,a,i,s;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return void 0===t&&(t={}),r=(n=t).limit,a=n.offset,e.next=4,window.GameSDK.getLeaderboardAsync(Kf);case 4:return i=e.sent,e.next=7,i.getEntriesAsync(r,a);case 7:return s=e.sent,e.abrupt("return",s);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),em=function(){var e=(0,s.Z)(h().mark((function e(t){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===t&&(t={}),null==zf){e.next=3;break}return e.abrupt("return",tm(t));case 3:return e.abrupt("return",nm(t));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),tm=function(){var e=(0,s.Z)(h().mark((function e(t){var n,r,a,i,s;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===t&&(t={}),n=[],r=qf(Zf)){e.next=5;break}return e.abrupt("return",n);case 5:return a=GameCore.Utils.String.params(t),e.next=8,(0,qe.U)(r+"?"+a,{},Wf);case 8:if(i=e.sent,!((s=(null==i?void 0:i.data)||[]).length<1)){e.next=12;break}return e.abrupt("return",n);case 12:return n=s,e.abrupt("return",Qf(n));case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),nm=function(){var e=(0,s.Z)(h().mark((function e(t){var n,r,a,i,s;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return void 0===t&&(t={}),r=(n=t).limit,a=n.offset,e.next=4,window.GameSDK.getLeaderboardAsync(Kf);case 4:return i=e.sent,e.next=7,i.getConnectedPlayerEntriesAsync(r,a);case 7:return s=e.sent,e.abrupt("return",s);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),rm=(function(){var e=(0,s.Z)(h().mark((function e(t){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==zf){e.next=2;break}return e.abrupt("return",rm(t));case 2:return e.abrupt("return",am());case 3:case"end":return e.stop()}}),e)})))}(),function(){var e=(0,s.Z)(h().mark((function e(t){var n,r,a,i,s;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=null,t){e.next=3;break}return e.abrupt("return",n);case 3:if(r=qf(Zf)){e.next=6;break}return e.abrupt("return",n);case 6:return a=GameCore.Utils.String.params({playerIds:t}),e.next=9,(0,qe.U)(r+"?"+a,{},Wf);case 9:if(i=e.sent,!((s=(null==i?void 0:i.data)||[]).length<1)){e.next=13;break}return e.abrupt("return",n);case 13:return e.next=15,Qf(s);case 15:return n=e.sent[0],e.abrupt("return",n);case 17:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),am=function(){var e=(0,s.Z)(h().mark((function e(){var t,n;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,window.GameSDK.getLeaderboardAsync(Kf);case 2:return t=e.sent,e.next=5,t.getPlayerEntryAsync();case 5:return n=e.sent,e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),im=(function(){var e=(0,s.Z)(h().mark((function e(t,n){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(window.GameSDK.submitGameResultsAsync(n).catch((function(e){console.log(e)})),null==zf){e.next=5;break}if(""!==window.game.auth.getToken()){e.next=4;break}return e.abrupt("return",u().reject("Not logged in"));case 4:return e.abrupt("return",im(t,n));case 5:return e.abrupt("return",sm(n));case 6:case"end":return e.stop()}}),e)})))}(),function(){var e=(0,s.Z)(h().mark((function e(t,n){var r;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,qe.v)("leaderboards/"+zf+"/players/"+t,{score:n},{},Wf);case 2:return r=e.sent,e.abrupt("return",(null==r?void 0:r.data)||{});case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),sm=function(){var e=(0,s.Z)(h().mark((function e(t){var n;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,window.GameSDK.getLeaderboardAsync(Kf);case 2:return n=e.sent,e.next=5,n.setScoreAsync(t);case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),om=function(e,t){return t.playerId},cm=((0,fe.P1)([function(e){return Rf(e).match.isRequesting}],(function(e){return e})),(0,fe.P1)([function(e){return Rf(e).match.single}],(function(e){return e})),(0,fe.P1)([function(e){return Rf(e).match.single._id}],(function(e){return e})),(0,fe.P1)([function(e){return Rf(e).match.single.score}],(function(e){return e||0})),(0,fe.P1)([function(e){return Rf(e).match.single.level}],(function(e){return e||0})),(0,fe.P1)([function(e){var t;return null==(t=Rf(e).match.single.data)?void 0:t.diamond}],(function(e){return e||0})),(0,fe.P1)([function(e){var t;return null==(t=Rf(e).match.single.data)?void 0:t.fen}],(function(e){return e||null})),(0,fe.P1)([function(e){return Rf(e).match.single.status}],(function(e){return e})),(0,fe.P1)([function(e){return Rf(e).match.single.playerId}],(function(e){return e})),(0,fe.P1)([function(e){return Rf(e).match.challenge}],(function(e){return e}))),um=((0,fe.P1)([function(e){return Rf(e).match.challenge._id}],(function(e){return e})),(0,fe.P1)([function(e){return Rf(e).match.challenge.status}],(function(e){return e})),(0,fe.P1)([function(e){return Rf(e).match.challenge.opponentInfo}],(function(e){return e}))),lm=((0,fe.P1)([function(e){return Rf(e).match.challenge.whitePlayerId}],(function(e){return e})),(0,fe.P1)([function(e){return Rf(e).match.challenge.blackPlayerId}],(function(e){return e})),(0,fe.P1)([cm,om],(function(e,t){var n=e.whitePlayerId,r=e.blackPlayerId;return n!==t&&r===t?n:r!==t&&n===t?r:""})),(0,fe.P1)([cm,om],(function(e,t){var n=e.whitePlayerId,r=e.blackPlayerId;return n===t?n:r===t?r:Ir.playerId})),(0,fe.P1)([cm,om],(function(e,t){var n=e.whitePlayerId,r=e.blackPlayerId,a=e.whitePlayerFinish,i=e.blackPlayerFinish;return t&&n===t?a:!(!t||r!==t)&&i}))),hm=(0,fe.P1)([cm,function(e,t){return t.opponentId}],(function(e,t){var n=e.whitePlayerId,r=e.blackPlayerId,a=e.whitePlayerFinish,i=e.blackPlayerFinish;return t&&n===t?a:!(!t||r!==t)&&i})),dm=(0,fe.P1)([function(e){return Rf(e).match.group.opponentInfo}],(function(e){return e})),pm=((0,fe.P1)([function(e){return Rf(e).match.online.players}],(function(e){return e})),function(e){if("string"!==typeof e||!e)throw new Lf(null,{imageShare:e})}),fm=function(){var e=(0,s.Z)(h().mark((function e(){var t,n,r,a,i,s,o,c,u,l;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=window.game,n=t.player,r=t.globalScene,a=n.getPlayer(),i=a.playerId,s=a.photo,o=a.data,c=(o||{}).score,u=mm({playerId:i,playerPhoto:s,playerScore:c})){e.next=7;break}return console.warn("getRenderOptionsBestScore"),e.abrupt("return");case 7:return l={name:"share-best-score",width:952,height:492,renderOptions:u},e.next=10,r.frameCapture.capture(l);case 10:return e.abrupt("return",e.sent);case 11:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),mm=(function(){var e=(0,s.Z)(h().mark((function e(t){var n,r,a,i,s,o,c,u,l,d,p;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=window.game,r=n.player,a=n.globalScene,i=Bf(t),s=r.getPlayer(),o=s.playerId,c=s.photo,u=i[o]||{},l=u.score,d=mm({playerId:o,playerPhoto:c,playerScore:l})){e.next=8;break}return console.warn("getRenderOptionsCurrentScore"),e.abrupt("return");case 8:return p={name:"share-current-score",width:952,height:492,renderOptions:d},e.next=11,a.frameCapture.capture(p);case 11:return e.abrupt("return",e.sent);case 12:case"end":return e.stop()}}),e)})))}(),function(e){var t=e.playerId,n=void 0===t?"10":t,r=e.playerPhoto,a=void 0===r?"":r,i=e.playerScore,s=void 0===i?0:i;return"string"!==typeof n||"string"!==typeof a||"number"!==typeof s?null:{avatar:{name:""+n,type:"image",x:103,y:124,image:a,width:240,height:240,fallbackWithImage:Pr.Z.AVATAR.KEY},wideFrame:{name:"wide-frame-message-win",type:"image",x:0,y:0,image:"./assets/wideframes/wide-frame-message-win.png",width:952,height:492},playerScore:{type:"text",x:223,y:425,font:"600 60px",fillStyle:["#f9e74d","#efcc08"],text:""+s,textAlign:"center",layer3D:{secondFillStyle:"#c47701",shadowFillStyle:"#050504"}}}}),vm=(function(){var e=(0,s.Z)(h().mark((function e(){var t,n,r,a,i,s,o,c,u,l,d,p,f,m,v,g,y,w,S,E;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=window.game,n=t.player,r=t.profile,a=t.globalScene,i=n.getPlayer(),s=i.playerId,o=i.name,c=i.photo,(u=n.getConnectedPlayerIds(99,0)).push(s),l=[],e.next=7,em({playerIds:GameCore.Utils.Array.unique(u),limit:u.length});case 7:d=e.sent,p=GameCore.Utils.Object.keyBy(d,"playerId"),f={playerId:s,name:o,photo:c,score:0},GameCore.Utils.Object.hasOwn(p,s)&&(f=p[s]),l.push(f),e.t0=Gf()(h()).call(h(),p);case 14:if((e.t1=e.t0()).done){e.next=27;break}if(m=e.t1.value,!GameCore.Utils.Object.hasOwn(p,m)){e.next=25;break}if(v=p[m],3!==l.length){e.next=20;break}return e.abrupt("break",27);case 20:if(v.playerId!==s){e.next=22;break}return e.abrupt("continue",14);case 22:if(!(Number(v.score)>Number(f.score))){e.next=24;break}return e.abrupt("continue",14);case 24:l.push(v);case 25:e.next=14;break;case 27:return g=GameCore.Utils.Array.unique(u),e.next=30,r.requestProfiles(g);case 30:if(y=r.getProfiles(),l.forEach((function(e,t){var n=e.playerId;if(GameCore.Utils.Object.hasOwn(y,n)){var r=y[n],a=r.name,i=r.photo;l[t].name=a,l[t].photo=i}})),l.length<3)for(w=0;w<=3-l.length;)l.push({playerId:"bot"+w,name:"???",score:0,photo:"./assets/images/others/avatar.png"}),w++;if(S=vm({playerId:s,playerName:o,playerPhoto:c,listLeaders:l})){e.next=37;break}return console.warn("getRenderOptionsLeaderboard"),e.abrupt("return");case 37:return E={name:"share-leaderboard",width:1500,height:2e3,renderOptions:S},e.next=40,a.frameCapture.capture(E);case 40:return e.abrupt("return",e.sent);case 41:case"end":return e.stop()}}),e)})))}(),function(e){var t=e.playerId,n=void 0===t?"10":t,r=e.playerPhoto,a=void 0===r?"":r,i=e.listLeaders,s=void 0===i?[]:i;if(!Array.isArray(s))return null;if("string"!==typeof n)return null;if("string"!==typeof a)return null;var o={avatar:{name:""+n,type:"image",x:510,y:278,image:a,width:510,height:510,fallbackWithImage:Pr.Z.AVATAR.KEY}};return s.forEach((function(e,t){var n=e.playerId,r=e.photo;o["photo_"+n]={name:""+n,type:"image",x:436,y:1294+180*t,image:r,width:96,height:96,fallbackWithImage:Pr.Z.AVATAR.KEY}})),o.wideFrame={name:"wide-frame-share",type:"image",x:0,y:0,image:"./assets/wideframes/wide-frame-share.png",width:1500,height:2e3},s.forEach((function(e,t){var n=e.playerId,r=e.name,a=e.score;o["name_"+n]={type:"text",x:600,y:1360+180*t,font:"600 48px",text:r,fillStyle:"#b18151"},o["score_"+n]={type:"text",x:1e3,y:1360+180*t,font:"600 48px",text:a,fillStyle:"#b18151"}})),o}),gm=(function(){var e=(0,s.Z)(h().mark((function e(t){var n,r,a,i,s,o,c,u,l,d,p,f,m,v,g,y,w,S;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=window.game,r=n.player,a=n.globalScene,i=Bf(t),s=r.getPlayer(),o=s.photo,c=s.playerId,u=um(t),l=u.playerId,d=u.photo,p=lm(t,{playerId:c}),f=hm(t,{opponentId:l}),m=i[c]||{},v=m.score,g=i[l]||{},y=g.score,w=gm({playerId:c,playerPhoto:o,playerScore:v,opponentId:l,opponentPhoto:d,opponentScore:y,isPlayerFinished:p,isOpponentFinished:f})){e.next=12;break}return console.warn("getRenderOptionsLeaderboard"),e.abrupt("return");case 12:return S={name:"share-game-result",width:952,height:492,renderOptions:w},e.next=15,a.frameCapture.capture(S);case 15:return e.abrupt("return",e.sent);case 16:case"end":return e.stop()}}),e)})))}(),function(){var e=(0,s.Z)(h().mark((function e(t){var n,r,a,i,s,o,c,u,l,d,p,f,m,v,g;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=window.game,r=n.player,a=n.globalScene,i=Bf(t),s=r.getPlayer(),o=s.photo,c=s.playerId,u=dm(t),l=u.playerId,d=u.photo,p=u.score,f=i[c]||{},m=f.score,v=gm({playerId:c,playerPhoto:o,playerScore:m,opponentId:l,opponentPhoto:d,opponentScore:p})){e.next=9;break}return console.warn("getRenderOptionsGroupResult"),e.abrupt("return");case 9:return g={name:"share-group-match-result",width:952,height:492,renderOptions:v},e.next=12,a.frameCapture.capture(g);case 12:return e.abrupt("return",e.sent);case 13:case"end":return e.stop()}}),e)})))}(),function(e){var t=e.playerId,n=void 0===t?"10":t,r=e.playerPhoto,a=void 0===r?"":r,i=e.playerScore,s=void 0===i?0:i,o=e.opponentId,c=void 0===o?"20":o,u=e.opponentPhoto,l=void 0===u?"":u,h=e.opponentScore,d=void 0===h?0:h,p=e.isPlayerFinished,f=e.isOpponentFinished;if("string"!==typeof n)return null;if("string"!==typeof a)return null;if("number"!==typeof s)return null;if("string"!==typeof c)return null;if("string"!==typeof l)return null;if("number"!==typeof d)return null;if("boolean"!==typeof p)return null;if("boolean"!==typeof f)return null;var m=s===d,v=s>d,g=p||f,y=p&&f,w={leftPhoto:{name:""+n,type:"image",x:56,y:140,image:a,width:220,height:220,fallbackWithImage:Pr.Z.AVATAR.KEY},rightPhoto:{name:""+c,type:"image",x:690,y:140,image:l,width:220,height:220,fallbackWithImage:Pr.Z.AVATAR.KEY},wideFrame:{name:"wide-frame-game-result",type:"image",x:0,y:0,image:"./assets/wideframes/wide-frame-game-result.png",width:952,height:492}};return g&&(w.leftScoreShadow={type:"text",x:162,y:444,font:"600 70px",fillStyle:"#c4683f",text:p?""+s:"???",textAlign:"center"},w.leftScore={type:"text",x:162,y:440,font:"600 70px",fillStyle:"#f2a62e",text:p?""+s:"???",textAlign:"center"},w.rightScoreShadow={type:"text",x:796,y:444,font:"600 70px",fillStyle:"#c4683f",text:f?""+d:"???",textAlign:"center"},w.rightScore={type:"text",x:796,y:440,font:"600 70px",fillStyle:"#f2a62e",text:f?""+d:"???",textAlign:"center"}),!m&&y&&(v?w.leftCrown={name:"crown-icon",type:"image",x:112,y:72,image:"./assets/images/others/crown-icon.png",width:106,height:78}:w.rightCrown={name:"crown-icon",type:"image",x:750,y:72,image:"./assets/images/others/crown-icon.png",width:106,height:78}),w}),ym=function(e){var t=e.opponentId,n=e.contextId;if(""===t||"string"!==typeof t)throw new _f(null,{opponentId:t});if(""===n||"string"!==typeof n)throw new Mf(null,{contextId:n})},wm=function(e){if(null===e.imageShare)throw new Lf},Sm=(function(){var e=(0,s.Z)(h().mark((function e(t,n){var a,i;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,a=window.game.facebook,ym({opponentId:t,contextId:n}),(i=FBInstant.context.getID())!==n||""===n){e.next=6;break}return e.abrupt("return",i);case 6:if("10"!==t||""===n){e.next=8;break}return e.abrupt("return",n);case 8:if(!n){e.next=12;break}return e.next=11,a.switchAsync(n);case 11:return e.abrupt("return",FBInstant.context.getID());case 12:e.next=17;break;case 14:e.prev=14,e.t0=e.catch(0),(0,r.tO)(e.t0);case 17:return e.abrupt("return","");case 18:case"end":return e.stop()}}),e,null,[[0,14]])})))}(),function(){var e=(0,s.Z)(h().mark((function e(t,n){var a,i,s,o,c,u,l,d,p,f;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a=window.game,i=a.player,s=a.facebook,o=i.getPlayer(),c=o.playerId,u=o.name,l=o.photo,d=Df(n),p=d.score,f={type:Tr,playerId:c,playerName:u,playerPhoto:l,playerScore:p},e.next=7,s.sendMessage({action:"CUSTOM",cta:{default:"Play",localizations:{en_US:"Play",vi_VN:"Ch\u01a1i"}},text:{default:u+" beats your high score. Their score: "+p+".",localizations:{en_US:u+" beats your high score. Their score: "+p+".",vi_VN:u+" v\u1eeba v\u01b0\u1ee3t \u0111i\u1ec3m s\u1ed1 cao nh\u1ea5t c\u1ee7a b\u1ea1n! Ch\u01a1i l\u1ea7n n\u1eefa ch\u1ee9?"}},image:t||"",template:"play_turn",data:f});case 7:e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),(0,r.tO)(e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})))}(),function(){var e=(0,s.Z)(h().mark((function e(t,n){var a,i,s,o,c,u,l,d,p,f;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=window.game,i=a.player,s=a.facebook,e.prev=1,o=i.getPlayer(),c=o.playerId,u=o.name,l=o.photo,d=Df(n),p=d.score,f={type:Tr,playerId:c,playerName:u,playerPhoto:l,playerScore:p},e.next=7,s.sendMessage({action:"CUSTOM",cta:{default:"Play",localizations:{en_US:"Play",vi_VN:"Ch\u01a1i ngay"}},text:{default:u+" got "+p+" scores. So easy! Can you?",localizations:{en_US:u+" got "+p+" scores. So easy! Can you?",vi_VN:u+" \u0111\xe3 \u0111\u1ea1t "+p+" \u0111i\u1ec3m! Qu\xe1 d\u1ec5 lu\xf4n. Ch\u01a1i l\u1ea1i n\xe0o!"}},image:t||"",template:"play_turn",data:f});case 7:e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),(0,r.tO)(e.t0);case 12:case"end":return e.stop()}}),e,null,[[1,9]])})))}(),function(e){function t(t,n,r,a){var i;return(i=e.call(this,t,n,r,a)||this).scene=void 0,i.interactiveBackground=void 0,i.popup=void 0,i.screenAnimation=void 0,i.popupAnimation=void 0,i.handleClose=function(){i.scene.screen.close(i.name)},i.handleInviteFriends=function(){i.inviteFriends()},i.scene=t,i.createInteractiveBackground(),i.createPopup(),i.background.setAlpha(.8),i.setDepth(en.Ks.POPUP),i.listenEvents(),i}(0,o.Z)(t,e);var n=t.prototype;return n.open=function(){var t=(0,s.Z)(h().mark((function t(n){var r,a,i,s,o,c,u;return h().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.prototype.open.call(this,n),r=this.scene.player.getPlayerSettings(),a=r.sound,i=void 0===a||a,s=r.music,o=void 0===s||s,c=r.vibrate,u=void 0===c||c,this.popup.setSoundStatus(i),this.popup.setMusicStatus(o),this.popup.setVibrationStatus(u),t.next=7,this.runEntranceAnimation();case 7:this.emitOpenCompleted();case 8:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),n.close=function(){var t=(0,s.Z)(h().mark((function t(){var n,r,a,i,s;return h().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.scene.setGlobalSceneInputEnabled(!1),t.next=3,this.runExitAnimation();case 3:a=this.scene.screen.get(en.o4.DASHBOARD_SCREEN),i=a.isOpening,s=null!=(n=null==(r=this.scene.screen.get(en.o4.RESULT_SCREEN))?void 0:r.visible)&&n,i?(a.fadeIn(),this.fadeInDashboardNavigation()):s?this.fadeInDashboardNavigation():this.scene.navigation.fadeIn("Gameplay",!1),this.scene.setGlobalSceneInputEnabled(!0),e.prototype.close.call(this);case 9:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),n.fadeInDashboardNavigation=function(){return this.scene.navigation.fadeIn("Dashboard",!1)},n.createInteractiveBackground=function(){var e=new rp(this.scene,this.width,this.height);e.setName(Is.SETTINGS_BG),this.add(e),this.interactiveBackground=e},n.createPopup=function(){var e=new Of(this.scene);this.add(e),this.popup=e},n.listenEvents=function(){this.popup.setInteractive({useHandCursor:!1}),this.popup.onCloseClick=this.handleClose,this.interactiveBackground.onClick=this.handleClose},n.inviteFriends=function(){var e=(0,s.Z)(h().mark((function e(){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.scene.setGlobalSceneInputEnabled(!1),!GameCore.Utils.Device.isAndroid()){e.next=6;break}return e.next=4,this.scene.storage.dispatch((0,s.Z)(h().mark((function e(){var t,n,a,i;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=window.game,n=t.analytics,a=t.facebook,e.prev=1,e.next=4,fm();case 4:return i=e.sent,wm({imageShare:i}),e.next=8,a.inviteAsync({cta:{default:"Play",localizations:{en_US:"Play",vi_VN:"Ch\u01a1i ngay"}},text:{default:"I am playing this game, it is so fun!",localizations:{en_US:"I am playing this game, it is so fun!",vi_VN:"Ch\u01a1i ngay!"}},image:i||"",data:{type:Cr}});case 8:n.event(an._.INVITE,{share_content_type:"Invite",success:!0}),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(1),n.event(an._.INVITE,{share_content_type:"Invite",success:!1}),(0,r.tO)(e.t0);case 15:case"end":return e.stop()}}),e,null,[[1,11]])}))));case 4:e.next=8;break;case 6:return e.next=8,this.scene.storage.dispatch((0,s.Z)(h().mark((function e(){var t,n,a,i,s,o,c,u,l,d;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=window.game,n=t.player,a=t.analytics,i=t.facebook,s=t.globalScene,e.prev=1,s.screen.open(en.o4.NOTIFY_SCREEN,{message:"Loading...",loading:!0}),e.next=5,fm();case 5:return o=e.sent,pm(o),c=n.getPlayer(),u=c.playerId,l=c.name,d=c.photo,e.next=10,i.shareAsync({text:"Great! I have a best score!",intent:"SHARE",image:o||"",data:{playerId:u,playerName:l,playerPhoto:d,type:Cr}});case 10:a.event(an._.SHARE,{share_content_type:"BestScore",success:!0}),e.next=17;break;case 13:e.prev=13,e.t0=e.catch(1),a.event(an._.SHARE,{share_content_type:"BestScore",success:!1}),(0,r.tO)(e.t0);case 17:return e.prev=17,s.screen.close(en.o4.NOTIFY_SCREEN),e.finish(17);case 20:case"end":return e.stop()}}),e,null,[[1,13,17,20]])}))));case 8:this.scene.setGlobalSceneInputEnabled(!0);case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.runEntranceAnimation=function(){var e=(0,s.Z)(h().mark((function e(){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",u().all([this.runScreenEntranceAnimation(),this.runPopupEntranceAnimation()]));case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.runExitAnimation=function(){var e=(0,s.Z)(h().mark((function e(){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",u().all([this.runScreenExitAnimation(),this.runPopupExitAnimation()]));case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.runScreenEntranceAnimation=function(){var e=(0,s.Z)(h().mark((function e(){var t,n;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return null==(t=this.screenAnimation)||t.remove(),this.screenAnimation=this.scene.tweens.add({targets:this,duration:250,props:{alpha:{from:0,to:1}}}),e.abrupt("return",null==(n=this.screenAnimation)?void 0:n.waitForCompletion());case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.runScreenExitAnimation=function(){var e=(0,s.Z)(h().mark((function e(){var t,n;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return null==(t=this.screenAnimation)||t.remove(),this.screenAnimation=this.scene.tweens.add({targets:this,duration:250,props:{alpha:0}}),e.abrupt("return",null==(n=this.screenAnimation)?void 0:n.waitForCompletion());case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.runPopupEntranceAnimation=function(){var e=(0,s.Z)(h().mark((function e(){var t,n;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return null==(t=this.popupAnimation)||t.remove(),this.popupAnimation=this.scene.tweens.add({targets:this.popup,duration:300,props:{scale:{from:.5,to:1,ease:Phaser.Math.Easing.Back.Out,easeParams:[1.5]}}}),e.abrupt("return",null==(n=this.popupAnimation)?void 0:n.waitForCompletion());case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.runPopupExitAnimation=function(){var e=(0,s.Z)(h().mark((function e(){var t,n;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return null==(t=this.popupAnimation)||t.remove(),this.popupAnimation=this.scene.tweens.add({targets:this.popup,duration:300,props:{scale:{value:.5,ease:Phaser.Math.Easing.Back.In}}}),e.abrupt("return",null==(n=this.popupAnimation)?void 0:n.waitForCompletion());case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),t}(GameCore.Screen)),Em=Sm,bm=ca.Z.GAMEPLAY,km=bm.KEY,xm=bm.FRAME,Am=function(e){function t(t){var n,r=(n=e.call(this,t)||this).createRibbon(),a=r.width,i=r.height;return n.setSize(a,i),n.createText(),n}(0,o.Z)(t,e);var n=t.prototype;return n.createRibbon=function(){var e=this.scene.make.image({key:km,frame:xm.TUTORIAL_SCREEN_RIBBON_TURQUOISE});return e.setSizeBasedOnDpr(),this.add(e),{width:e.displayWidth,height:e.displayHeight}},n.createText=function(){var e=this.scene.make.text({style:{fontFamily:Ee.Z.FONT_FAMILY,fontSize:"23px"},text:"HOW TO PLAY",origin:{x:.5,y:.5}});e.setHighQuality(),this.add(e);var t=e.context.createLinearGradient(0,0,0,e.height);t.addColorStop(0,"#ffffff"),t.addColorStop(1,"#cce5f9"),e.setFill(t),e.setShadow(0,6,"#0000003F",0,!1,!0),e.setY(-4)},t}(Phaser.GameObjects.Container),Cm=Am,Tm=ca.Z.GAMEPLAY,Pm=Tm.KEY,Im=Tm.FRAME,Om=function(e){function t(t){var n;return(n=e.call(this,t,Pm,Im.NO_MORE_SCREEN_BTN_BLUE,136,39)||this).setName(Is.TUT_OK),n.createText(),n}return(0,o.Z)(t,e),t.prototype.createText=function(){var e=this.scene.make.text({style:{fontFamily:Ee.Z.FONT_FAMILY,fontSize:"23px"},text:"OK",origin:{x:.5,y:.5}});e.setHighQuality(),this.add(e);var t=e.context.createLinearGradient(0,0,0,e.height);t.addColorStop(0,"#ffffff"),t.addColorStop(1,"#cce5f9"),e.setFill(t),e.setShadow(0,6,"#0000003F",0,!1,!0),e.setY(-1)},t}(Ps.Z),Mm=Om,_m=function(){function e(e){this.miniGame=void 0,this.solution=[],this.nextStepTimer=void 0,this.miniGame=e}var t=e.prototype;return t.init=function(e){var t;null==(t=this.nextStepTimer)||t.remove(),this.initSolution(e)},t.play=function(){var e=(0,s.Z)(h().mark((function e(){var t,n,r,a,i,o,c,l=this;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return null==(t=this.nextStepTimer)||t.remove(),n=0,r=this.miniGame,a=r.board,i=r.rack,o=r.popup,c=o.hand,e.abrupt("return",new(u())((function(e){l.nextStepTimer=l.miniGame.scene.time.addEvent({delay:100,loop:!0,callback:function(){var t=(0,s.Z)(h().mark((function t(){var r,s,o;return h().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=l.solution[n]){t.next=4;break}return i.isPlayingTweens()||(null==(s=l.nextStepTimer)||s.remove(),delete l.nextStepTimer,e()),t.abrupt("return");case 4:if(!l.miniGame.popup.hand.isMoving()){t.next=6;break}return t.abrupt("return");case 6:if(o=a.getTileViewByPosition(r.position)){t.next=9;break}return t.abrupt("return");case 9:return t.next=11,c.reachThenClick(o.x,o.y);case 11:l.miniGame.moveTileViewBoardToRack(o)&&n++;case 13:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}()})})));case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),t.stop=function(){var e;null==(e=this.nextStepTimer)||e.remove(),delete this.nextStepTimer},t.initSolution=function(e){var t=e.tiles,n={};t.forEach((function(e){var t=e.icon;n[t]||(n[t]=[]),n[t].push(e)}));var r=[];Jn()(n).forEach((function(e){r.push.apply(r,e)})),this.solution=r},e}(),Lm=_m,Rm=function(){function e(e){this.miniGame=void 0,this.boardMap={},this.miniGame=e}var t=e.prototype;return t.forEach=function(e){for(var t in this.boardMap)for(var n in this.boardMap[t])e(this.boardMap[t][n])},t.getTileViewByPosition=function(e){var t,n=e.x,r=e.y;return null==(t=this.boardMap[r])?void 0:t[n]},t.detachTileView=function(e){var t=e.tileModel;if(!this.existPosition(t))return!1;var n=t.x,r=t.y;return delete this.boardMap[r][n],0===te()(this.boardMap[r]).length&&delete this.boardMap[r],!0},t.init=function(e){var t,n=this;this.forEach((function(e){n.miniGame.tilePool.hideTileView(e)}));er()(t=e.tiles).call(t,(function(e,t){return e.position.y-t.position.y||e.position.x-t.position.x})),e.tiles.forEach((function(t){var r=t.position,a=t.icon,i=r.x,s=r.y,o=new Ka(i+","+s+","+a,i,s,0,a,"tutorial-id","uncovered"),c=n.miniGame.tilePool.spawnTileView(o);c.refresh(e),n.addTileView(c)}))},t.fadeIn=function(){var e=(0,s.Z)(h().mark((function e(){var t,n;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=[],this.forEach((function(e){e.setScale(0),t.push(e)})),n=this.miniGame.scene.add.tween({targets:t,duration:100,ease:Phaser.Math.Easing.Back.Out,delay:this.miniGame.scene.tweens.stagger(50,{start:0}),props:{scale:1}}),e.abrupt("return",n.waitForCompletion());case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),t.clear=function(){var e=this;this.forEach((function(t){e.miniGame.tilePool.hideTileView(t)})),this.boardMap={}},t.addTileView=function(e){var t=e.tileModel,n=t.x,r=t.y,a=this.boardMap;a[r]||(a[r]={}),a[r][n]=e},t.existPosition=function(e){var t,n=e.x,r=e.y;return null==(t=this.boardMap[r])?void 0:t[n]},e}(),Bm=Rm,Dm=function(e){function t(t,n){var r;return(r=e.call(this)||this).miniGame=void 0,r.icon=void 0,r.tileViewRackPayloads=[],r.match3State="none",r.onCompleteAddTileView=void 0,r.miniGame=t,r.icon=n,r}(0,o.Z)(t,e);var n=t.prototype;return n.isPlayingTweens=function(){return!!this.isMatching3()||this.tileViewRackPayloads.some((function(e){var t=e.moveData;return"fall"===(null==t?void 0:t.type)}))},n.isMatching3=function(){return"playing"===this.match3State||"ready"===this.match3State},n.canAddTileView=function(e){return this.icon===e.tileModel.icon},n.addTileView=function(e,t,n){var r=this.tileViewRackPayloads,a={tileView:e,slotIdx:t,isFallCompleted:!1};r.push(a),3===r.length&&(this.match3State="ready"),this.onCompleteAddTileView=n,this.updateNewFallData(a)},n.getRightMostPayload=function(){var e=this.tileViewRackPayloads;if(0!==e.length)return e[e.length-1]},n.canMatch3AfterFallCompleted=function(){var e;return 3===Be()(e=this.tileViewRackPayloads).call(e,(function(e){return e.isFallCompleted})).length},n.playMatch3Animation=function(){var e=(0,s.Z)(h().mark((function e(){var t,n,r;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Ne()(t=this.tileViewRackPayloads).call(t,(function(e){return e.tileView})),r=this.miniGame.scene.add.tween({targets:n,duration:100,props:{scale:0}}),e.abrupt("return",r.waitForCompletion());case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.clear=function(){var e=this;this.tileViewRackPayloads.forEach((function(t){var n=t.tileView,r=t.moveData;null==r||r.tween.stop(),e.miniGame.tilePool.hideTileView(n)})),this.tileViewRackPayloads=[]},n.updateNewFallData=function(e){var t,n=this,r=e.tileView,a=e.slotIdx,i=this.miniGame.rack;null==(t=e.moveData)||t.tween.stop(),delete e.moveData;var s=i.getSlotPosition(a),o=s.x,c=s.y,u=this.miniGame.scene.add.tween({targets:r,duration:500,ease:Phaser.Math.Easing.Sine.InOut,props:{x:o,y:c},onComplete:function(){delete e.moveData,e.isFallCompleted=!0,null==n.onCompleteAddTileView||n.onCompleteAddTileView()}});e.moveData={tween:u,targetSlotIdx:a,type:"fall"}},t}(Phaser.Events.EventEmitter),Nm=Dm,Gm=ca.Z.GAMEPLAY_COLORFUL,Fm=Gm.KEY,Zm=Gm.FRAME,Um=function(){function e(e){this.miniGame=void 0,this.rackImage=void 0,this.slotPositions=[],this.rackSegment=void 0,this.miniGame=e,this.createRackImage(),this.createSlotPositions()}var t=e.prototype;return t.addTileView=function(e){var t=e.tileModel.icon;if(this.rackSegment||(this.rackSegment=new Nm(this.miniGame,t)),!this.rackSegment.canAddTileView(e))return!1;var n=this.getNewSlotIdx();return this.rackSegment.addTileView(e,n,this.handleNewSegmentFallCompleted.bind(this)),!0},t.isPlayingTweens=function(){return!!this.rackSegment&&this.rackSegment.isPlayingTweens()},t.getSlotPosition=function(e){return this.slotPositions[e]},t.clear=function(){var e;null==(e=this.rackSegment)||e.clear(),delete this.rackSegment},t.getNewSlotIdx=function(){var e,t=null==(e=this.rackSegment)?void 0:e.getRightMostPayload();return t?this.getCorrectSlotIdx(t)+1:0},t.getCorrectSlotIdx=function(e){var t=e.slotIdx,n=e.moveData;return n?n.targetSlotIdx:t},t.handleNewSegmentFallCompleted=function(){var e=(0,s.Z)(h().mark((function e(){var t;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.rackSegment){e.next=3;break}return e.abrupt("return");case 3:if(t.canMatch3AfterFallCompleted()){e.next=5;break}return e.abrupt("return");case 5:return t.match3State="playing",e.next=8,t.playMatch3Animation();case 8:t.clear(),t.match3State="done",delete this.rackSegment,t.emit(Ri.MATCH_3_COMPLETED);case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),t.createRackImage=function(){var e=this.miniGame.scene.make.image({key:Fm,frame:Zm.TILE_CONTAINER});e.setSizeBasedOnDpr(),e.scale*=.6,this.miniGame.add(e),e.setY(80),this.rackImage=e},t.createSlotPositions=function(){var e=this,t=.6*ts.SLOT_DISTANCE,n=ts.SLOT_COUNT;this.slotPositions=x()({length:n},(function(r,a){return{x:e.rackImage.x+t*(a-(n-1)/2),y:e.rackImage.y-5.1}}))},e}(),Hm=Um,Wm=function(){function e(e){this.miniGame=void 0,this.tileViews=[],this.miniGame=e}var t=e.prototype;return t.spawnTileView=function(e){var t,n,r=_()(t=this.tileViews).call(t,(function(e){return!e.active}));if(r)(n=r).setTileModel(e),n.resetProperty(),this.miniGame.bringToTop(r);else{var a=new xi(this.miniGame.scene,e);this.tileViews.push(a),this.miniGame.add(a),n=a}return n},t.hideTileView=function(e){e.kill(),e.scene.tweens.killTweensOf(e),this.tileViews.some((function(t){return t===e}))||this.tileViews.push(e)},e}(),Vm=function(e){function t(t){var n;return(n=e.call(this,t.scene)||this).scene=void 0,n.popup=void 0,n.tilePool=void 0,n.board=void 0,n.rack=void 0,n.autoPlay=void 0,n.playing=!1,n.popup=t,n.scene=t.scene,n.setSize(330,270),n.tilePool=new Wm((0,jr.Z)(n)),n.board=new Bm((0,jr.Z)(n)),n.rack=new Hm((0,jr.Z)(n)),n.autoPlay=new Lm((0,jr.Z)(n)),n}(0,o.Z)(t,e);var n=t.prototype;return n.init=function(){var e=this.scene.gameManager.levelDataManager.getTutorialBoardData();this.board.init(e),this.autoPlay.init(e)},n.playEndlessly=function(){var e=(0,s.Z)(h().mark((function e(){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.playing){e.next=2;break}return e.abrupt("return");case 2:this.playing=!0;case 3:if(!this.playing){e.next=11;break}return this.init(),e.next=7,this.board.fadeIn();case 7:return e.next=9,this.autoPlay.play();case 9:e.next=3;break;case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.stop=function(){this.playing=!1,this.autoPlay.stop(),this.board.clear(),this.rack.clear()},n.moveTileViewBoardToRack=function(e){return!this.rack.isPlayingTweens()&&(!!this.board.detachTileView(e)&&(!!this.rack.addTileView(e)&&(this.bringToTop(e),!0)))},t}(Phaser.GameObjects.Container),Ym=Vm,zm=ca.Z.GAMEPLAY,Km=zm.KEY,jm=zm.FRAME,Xm=100,qm=0,Qm=function(e){(0,o.Z)(n,e);var t=n.prototype;function n(t){var n;return(n=e.call(this,t)||this).hand=void 0,n.originalHandScale=void 0,n.moving=!1,n.setSize(330,270),n.createHand(),n}return t.isMoving=function(){return this.moving},t.clickOnGameplayTile=function(){this.scene.add.tween({targets:this.hand,duration:600,yoyo:!0,loopDelay:200,repeat:-1,repeatDelay:200,ease:Du,props:{scale:1.12*this.originalHandScale}})},t.stopClickOnGameplayTile=function(){this.scene.tweens.killTweensOf(this.hand),this.hand.setScale(this.originalHandScale)},t.reachThenClick=function(){var e=(0,s.Z)(h().mark((function e(t,n){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.reachTo(t,n);case 2:return e.next=4,this.click();case 4:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}(),t.returnToRestPosition=function(){var e=(0,s.Z)(h().mark((function e(){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.moving=!1,this.scene.tweens.killTweensOf(this.hand),this.hand.setPosition(Xm,qm),this.hand.setScale(this.originalHandScale);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),t.reachTo=function(){var e=(0,s.Z)(h().mark((function e(t,n,r){var a;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return void 0===r&&(r=500),this.moving=!0,this.scene.tweens.killTweensOf(this.hand),a=this.scene.add.tween({targets:this.hand,duration:r,ease:Phaser.Math.Easing.Sine.InOut,props:{x:t,y:n}}),e.next=6,a.waitForCompletion();case 6:this.moving=!1;case 7:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}(),t.click=function(){var e=(0,s.Z)(h().mark((function e(){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.moving=!0,this.scene.tweens.killTweensOf(this.hand),e.next=4,this.scaleHandToNormal();case 4:return e.next=6,this.scaleHandDown();case 6:return e.next=8,this.scaleHandToNormal();case 8:this.moving=!1;case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),t.scaleHandDown=function(){var e=(0,s.Z)(h().mark((function e(){var t;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.scene.add.tween({targets:this.hand,duration:100,props:{scale:.8*this.originalHandScale}}),e.abrupt("return",t.waitForCompletion());case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),t.scaleHandToNormal=function(){var e=(0,s.Z)(h().mark((function e(){var t;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.hand.scale!==this.originalHandScale){e.next=2;break}return e.abrupt("return");case 2:return t=this.scene.add.tween({targets:this.hand,duration:100,props:{scale:this.originalHandScale}}),e.abrupt("return",t.waitForCompletion());case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),t.createHand=function(){var e=this.scene.make.image({key:Km,frame:jm.HAND});e.setSizeBasedOnDpr(),e.setOrigin(.5,0),this.add(e),e.setPosition(Xm,qm),this.hand=e,this.originalHandScale=e.scale},n}(Phaser.GameObjects.Container),Jm=Qm,$m=ca.Z.GAMEPLAY,ev=$m.KEY,tv=$m.FRAME,nv=function(e){function t(t){var n;return(n=e.call(this,t)||this).scene=void 0,n.background=void 0,n.ribbon=void 0,n.miniGame=void 0,n.text=void 0,n.okButton=void 0,n.hand=void 0,n.scene=t,n.createBackground(),n.setSize(n.background.width,n.background.height),n.createRibbon(),n.createMiniGame(),n.createText(),n.createOkButton(),n.createTutorialHand(),n.alignUI(),n}(0,o.Z)(t,e);var n=t.prototype;return n.playMiniGame=function(){this.miniGame.playEndlessly()},n.stopMiniGame=function(){this.miniGame.stop(),this.hand.returnToRestPosition()},n.runOkButtonEntranceAnimation=function(){var e=(0,s.Z)(h().mark((function e(){var t;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.okButton.setScale(0),t=this.scene.add.tween({targets:this.okButton,duration:300,delay:300,props:{scale:{from:.7,to:1,ease:Phaser.Math.Easing.Back.Out},alpha:{from:0,to:1}}}),e.abrupt("return",t.waitForCompletion());case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.createBackground=function(){var e=ev,t=new El(this.scene,{initialHeight:405.5,sliceTextures:{top:{key:e,frame:tv.NO_MORE_SCREEN_POPUP_TOP},middle:{key:e,frame:tv.NO_MORE_SCREEN_POPUP_MIDDLE},bottom:{key:e,frame:tv.NO_MORE_SCREEN_POPUP_BOTTOM}}});this.add(t),this.background=t},n.createRibbon=function(){var e=new Cm(this.scene);this.add(e),this.ribbon=e},n.createMiniGame=function(){var e=new Ym(this);this.add(e),this.miniGame=e},n.createTutorialHand=function(){var e=new Jm(this.scene);this.add(e),this.hand=e},n.createText=function(){var e=this.scene.make.text({style:{fontFamily:Ee.Z.FONT_FAMILY,fontSize:"16px"},text:"Collect 3 same tiles to eliminate",origin:{x:.5,y:.5}});e.setHighQuality(),this.add(e);var t=e.context.createLinearGradient(0,0,0,e.height);t.addColorStop(0,"#ffffff"),t.addColorStop(1,"#cce5f9"),e.setFill(t),e.setShadow(0,6,"#0000003F",0,!1,!0),this.text=e},n.createOkButton=function(){var e=new Mm(this.scene);this.add(e),this.okButton=e},n.alignUI=function(){var e=this.background,t=this.ribbon,n=this.miniGame,r=this.text,a=this.okButton,i=this.hand;Phaser.Display.Align.In.TopCenter(t,e,0,t.displayHeight/2-10),Phaser.Display.Align.In.TopCenter(n,e),Phaser.Display.Align.In.TopCenter(r,e,0,-295),Phaser.Display.Align.In.TopCenter(a,e,0,-340),Phaser.Display.Align.In.Center(i,n,0,0)},(0,le.Z)(t,[{key:"onCloseClick",set:function(e){this.okButton.onClick=e}}]),t}(Phaser.GameObjects.Container),rv=nv,av=function(e){function t(t,n,r,a){var i;return(i=e.call(this,t,n,r,a)||this).scene=void 0,i.popup=void 0,i.screenAnimation=void 0,i.popupAnimation=void 0,i.scene=t,i.createPopup(),i.background.setAlpha(.8),i.setDepth(en.Ks.POPUP),i}(0,o.Z)(t,e);var n=t.prototype;return n.open=function(){var t=(0,s.Z)(h().mark((function t(n){return h().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.prototype.open.call(this,n),t.next=3,this.runEntranceAnimation();case 3:this.popup.playMiniGame(),this.emitOpenCompleted();case 5:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),n.close=function(){var t=(0,s.Z)(h().mark((function t(){return h().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.runExitAnimation();case 2:this.popup.stopMiniGame(),e.prototype.close.call(this);case 4:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),n.createPopup=function(){var e=new rv(this.scene);this.add(e),this.popup=e,this.popup.onCloseClick=this.scene.tutorialHandler.handleTutorialOkClick},n.runEntranceAnimation=function(){var e=(0,s.Z)(h().mark((function e(){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",u().all([this.runScreenEntranceAnimation(),this.runPopupEntranceAnimation(),this.popup.runOkButtonEntranceAnimation()]));case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.runExitAnimation=function(){var e=(0,s.Z)(h().mark((function e(){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",u().all([this.runScreenExitAnimation(),this.runPopupExitAnimation()]));case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.runScreenEntranceAnimation=function(){var e=(0,s.Z)(h().mark((function e(){var t,n;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return null==(t=this.screenAnimation)||t.remove(),this.screenAnimation=this.scene.tweens.add({targets:this,duration:250,props:{alpha:{from:0,to:1}}}),e.abrupt("return",null==(n=this.screenAnimation)?void 0:n.waitForCompletion());case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.runScreenExitAnimation=function(){var e=(0,s.Z)(h().mark((function e(){var t,n;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return null==(t=this.screenAnimation)||t.remove(),this.screenAnimation=this.scene.tweens.add({targets:this,duration:250,props:{alpha:0}}),e.abrupt("return",null==(n=this.screenAnimation)?void 0:n.waitForCompletion());case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.runPopupEntranceAnimation=function(){var e=(0,s.Z)(h().mark((function e(){var t,n;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return null==(t=this.popupAnimation)||t.remove(),this.popupAnimation=this.scene.tweens.add({targets:this.popup,duration:300,props:{scale:{from:.5,to:1,ease:Phaser.Math.Easing.Back.Out,easeParams:[1.5]}}}),e.abrupt("return",null==(n=this.popupAnimation)?void 0:n.waitForCompletion());case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.runPopupExitAnimation=function(){var e=(0,s.Z)(h().mark((function e(){var t,n;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return null==(t=this.popupAnimation)||t.remove(),this.popupAnimation=this.scene.tweens.add({targets:this.popup,duration:300,props:{scale:{value:.5,ease:Phaser.Math.Easing.Back.In}}}),e.abrupt("return",null==(n=this.popupAnimation)?void 0:n.waitForCompletion());case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),t}(GameCore.Screen),iv=av;function sv(e,t){var n="undefined"!==typeof C()&&P()(e)||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=function(e,t){var n;if(!e)return;if("string"===typeof e)return ov(e,t);var r=b()(n=Object.prototype.toString.call(e)).call(n,8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return x()(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return ov(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0;return function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function ov(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var cv=function(){function e(e){var t=this;this.scene=void 0,this.handFadeAnimation=void 0,this.handContainer=void 0,this.tileViewsOnRack=[],this.handleTutorialOkClick=(0,s.Z)(h().mark((function e(){var n;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=1,ds&&window.game.analytics.event(an._.TUTORIAL_STEP,{step:r}),t.scene.setGlobalSceneInputEnabled(!1),t.tileViewsOnRack.forEach((function(e){e.setAlpha(1)})),t.tileViewsOnRack=[],e.next=6,u().all([t.scene.navigation.fadeIn("Gameplay"),t.scene.screen.closeAsync(en.o4.TUTORIAL_SCREEN)]);case 6:t.scene.setGlobalSceneInputEnabled(!0),null==(n=t.handContainer)||n.clickOnGameplayTile();case 8:case"end":return e.stop()}var r}),e)}))),this.fadeOutTutorialHand=(0,s.Z)(h().mark((function e(){var n;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return ws(),e.next=3,t.fadeTutorialHand("out");case 3:null==(n=t.handContainer)||n.stopClickOnGameplayTile();case 4:case"end":return e.stop()}}),e)}))),this.scene=e,this.createHandContainer()}var t=e.prototype;return t.showTutorialEarly=function(){var e=(0,s.Z)(h().mark((function e(){var t,n;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.isGameInTutorialLevels()){e.next=2;break}return e.abrupt("return",!1);case 2:return ps(this.scene.level.getLevel()),ms(this.scene.level.getLevel()),this.scene.stepLogHandler.reset(this.scene.level.getLevel()),this.incUserGuideDisplays(),null==(t=this.handContainer)||t.kill(),null==(n=this.handFadeAnimation)||n.remove(),this.softDisableFooterItems(),this.scene.setGlobalSceneInputEnabled(!1),this.scene.prepareFadeIn(),e.next=13,this.scene.fadeIn();case 13:return e.next=15,u().all([this.setupTutorialGameplay(),this.scene.navigation.fadeIn("Tutorial"),this.scene.screen.openAsync(en.o4.TUTORIAL_SCREEN)]);case 15:return this.scene.setGlobalSceneInputEnabled(!0),ys(),e.abrupt("return",!0);case 18:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),t.showTutorialLate=function(){var e=(0,s.Z)(h().mark((function e(){var t,n;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.scene.gameManager.getRescued()){e.next=2;break}return e.abrupt("return",!1);case 2:if(this.isGameInTutorialLevels()){e.next=4;break}return e.abrupt("return",!1);case 4:return this.incUserGuideDisplays(),null==(t=this.handContainer)||t.kill(),null==(n=this.handFadeAnimation)||n.remove(),this.softDisableFooterItems(),e.next=10,u().all([this.scene.navigation.fadeIn("Tutorial"),this.scene.screen.openAsync(en.o4.TUTORIAL_SCREEN)]);case 10:return e.next=12,this.setupTutorialGameplay();case 12:return ys(),e.abrupt("return",!0);case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),t.fadeOut=function(){var e=(0,s.Z)(h().mark((function e(){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.tileViewsOnRack=[],this.scene.gameManager.board.off(lo.MOVE_TILE_TO_RACK,this.fadeOutTutorialHand),e.abrupt("return",this.fadeOutTutorialHand());case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),t.isGameInTutorialLevels=function(){return 1===this.scene.level.getLevel()},t.setHandContainerPosition=function(e,t){var n;null==(n=this.handContainer)||n.setPosition(e,t)},t.createHandContainer=function(){if(this.isGameInTutorialLevels()){var e=new Jm(this.scene);e.setDepth(oo.Z.TUTORIAL_HAND),this.scene.add.existing(e),this.handContainer=e}},t.incUserGuideDisplays=function(){this.scene.player.getPlayerIsNew()&&this.scene.player.incUserGuideDisplays()},t.softDisableFooterItems=function(){var e=this.scene.footer;[e.undoItem,e.shuffleItem,e.magicWandItem].forEach((function(e){e.softDisableItem()}))},t.setupTutorialGameplay=function(){var e=(0,s.Z)(h().mark((function e(){var t,n,r;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.tileViewsOnRack=[],0!==(t=this.scene.gameManager.levelDataManager.getTutorialTripleTilePayloads()).length){e.next=4;break}return e.abrupt("return");case 4:return n=t[0],r=b()(t).call(t,1),e.abrupt("return",u().all([this.moveTutorialTilesToRack(r),this.showTutorialGameplayHand(n)]));case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),t.moveTutorialTilesToRack=function(){var e=(0,s.Z)(h().mark((function e(t){var n,r,a,i,s,o,c,u,l,d,p;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.scene.gameManager.rack.isEmpty()){e.next=2;break}return e.abrupt("return");case 2:n=[],r=sv(t);case 4:if((a=r()).done){e.next=13;break}if(i=a.value,s=i.clusterId,o=i.position,c=this.scene.gameManager.board.clusters[s],u=c.getTileViewByPosition(o)){e.next=10;break}return e.abrupt("return");case 10:n.push(u);case 11:e.next=4;break;case 13:this.tileViewsOnRack=n,l=0;case 15:if(!(l<n.length)){e.next=25;break}return d=l===n.length-1,(p=n[l]).setAlpha(0),p.invokeCallback(),e.next=22,Oa(this.scene,d?140:10);case 22:l++,e.next=15;break;case 25:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),t.showTutorialGameplayHand=function(){var e=(0,s.Z)(h().mark((function e(t){var n,r,a,i,s,o,c,l,d;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=t.position,s=t.clusterId,o=this.scene.gameManager.board.clusters[s],c=o.getTileViewByPosition(i),null==(n=this.handContainer)||n.setAlpha(0),null==(r=this.handContainer)||r.revive(),c){e.next=10;break}return(l=this.scene.gameManager.board).off(lo.MOVE_TILE_TO_RACK,ws),l.once(lo.MOVE_TILE_TO_RACK,ws),e.abrupt("return");case 10:return e.next=12,u().all([null==(a=this.handContainer)?void 0:a.reachTo(c.x,c.y,140),this.fadeTutorialHand("in")]);case 12:(d=this.scene.gameManager.board).off(lo.MOVE_TILE_TO_RACK,this.fadeOutTutorialHand),d.once(lo.MOVE_TILE_TO_RACK,this.fadeOutTutorialHand);case 15:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),t.fadeTutorialHand=function(){var e=(0,s.Z)(h().mark((function e(t){var n,r,a,i;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==(n=this.handFadeAnimation)||n.remove(),"in"===t&&(null==(a=this.handContainer)||a.setAlpha(0)),i="in"===t?1:0,(null==(r=this.handContainer)?void 0:r.alpha)!==i){e.next=5;break}return e.abrupt("return");case 5:return this.handFadeAnimation=this.scene.add.tween({targets:this.handContainer,duration:200,props:{alpha:i}}),e.abrupt("return",this.handFadeAnimation.waitForCompletion());case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),e}(),uv=cv,lv=[0,1,25,50,75,100],hv=function(){function e(e){this.scene=void 0,this.level=0,this.currentEvent=an._.LEVEL_PROGRESS,this.currentIdx=0,this.scene=e}var t=e.prototype;return t.logStep=function(e,t){if(!(e<=lv[this.currentIdx]||this.currentIdx===lv.length-1))for(;e>=lv[this.currentIdx+1]&&this.currentIdx+1<lv.length;)this.currentIdx++,this.scene.analytics.event(this.currentEvent,{step:lv[this.currentIdx],level:this.level,is_skip_log:t})},t.logAllRemainingSteps=function(){for(var e=this.currentIdx+1;e<lv.length;e++)this.scene.analytics.event(this.currentEvent,{step:lv[e],level:this.level,is_skip_log:!0});this.currentIdx=lv.length-1},t.reset=function(e){this.level=e,this.currentIdx=0,this.currentEvent=an._.LEVEL_PROGRESS},e}(),dv=hv,pv=function(e){function t(){for(var t,n,r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(n=e.call.apply(e,O()(t=[this]).call(t,a))||this).gameplayMode=void 0,n.header=void 0,n.footer=void 0,n.gameManager=void 0,n.tutorialHandler=void 0,n.bgHandler=void 0,n.gameplayParticleHandler=void 0,n.screenParticleHandler=void 0,n.navigation=void 0,n._stepLogHandler=void 0,n.devToolManager=void 0,n.create=function(){e.prototype.create.call((0,jr.Z)(n)),n.createBackground(ca.Z.GAMEPLAY.KEY,ca.Z.GAMEPLAY.FRAME.BLANK),n.background.setTintFill(3048429),n.background.setDepth(-100),n.input.setTopOnly(!0),n.createManagers(),n.createScreens(),n.createHeader(),n.createFooter(),n.createScreens(),n.alignDevToolManager(),n.startLevel()},n.run=(0,s.Z)(h().mark((function e(){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.checkAndAddShortcut(),!n.tutorialHandler.isGameInTutorialLevels()){e.next=7;break}return e.next=4,n.tutorialHandler.showTutorialEarly();case 4:if(!e.sent){e.next=7;break}return e.abrupt("return");case 7:return n.setGlobalSceneInputEnabled(!1),e.next=10,u().all([n.navigation.fadeIn("Dashboard"),n.screen.openAsync(en.o4.DASHBOARD_SCREEN)]);case 10:n.setGlobalSceneInputEnabled(!0);case 11:case"end":return e.stop()}}),e)}))),n.handleCloseBannerAds=function(){n.ads.hideBannerAdAsync().catch((function(e){console.warn(e)}))},n}(0,o.Z)(t,e);var n=t.prototype;return n.preload=function(){this.events.on(Phaser.Scenes.Events.WAKE,this.run),this.events.on(Phaser.Scenes.Events.CREATE,this.run),this.events.on(Phaser.Scenes.Events.SLEEP,this.handleCloseBannerAds)},n.createScreens=function(){this.screen.add(en.o4.DASHBOARD_SCREEN,$u),this.screen.add(en.o4.NO_MORE_MOVES_SCREEN,Pl),this.screen.add(en.o4.WELL_DONE_SCREEN,Zl),this.screen.add(en.o4.RESULT_SCREEN,bh),this.screen.add(en.o4.SHOP_SCREEN,yf),this.screen.add(en.o4.REWARD_SCREEN,ip),this.screen.add(en.o4.SWITCH_MAP_SCREEN,Sf),this.screen.add(en.o4.MAP_SCREEN,Pu),this.screen.add(en.o4.SETTINGS_SCREEN,Em),this.tutorialHandler.isGameInTutorialLevels()&&this.screen.add(en.o4.TUTORIAL_SCREEN,iv)},n.createHeader=function(){this.header=new Lp(this),this.header.kill(),Phaser.Display.Align.In.TopCenter(this.header,this.gameZone,0,-58.5)},n.createFooter=function(){this.footer=new No(this),this.footer.kill();var e=this.ads.getBannerHeight();Phaser.Display.Align.In.BottomCenter(this.footer,this.gameZone,0,-e)},n.createManagers=function(){if(this.gameManager=new po(this),this.gameManager.create(),this.tutorialHandler=new uv(this),this.bgHandler=new Af(this),this.gameplayParticleHandler=new Qc(this),this.screenParticleHandler=new Mp(this),this.navigation=new Hd(this),Phaser.Display.Align.In.Center(this.navigation,this.gameZone),this._stepLogHandler=new dv(this),GameCore.Utils.Valid.isDebugger()){var e=new uc(this);this.devToolManager=e}},n.alignDevToolManager=function(){GameCore.Utils.Valid.isDebugger()&&this.devToolManager&&Phaser.Display.Align.In.TopCenter(this.devToolManager,this.gameZone,0,0)},n.checkAndAddShortcut=function(){if(!this.game.player.getPlayer().isUserNew){var e=this.storage.getState();Rr(e)!=_r&&this.facebook.attemptToAddShortcut()}},n.addShortcut=function(){var e=new Date,t=this.player.getPlayerData().timeAddShortcut;this.areDatesEqual(e,new Date(t))||(console.log("attemptToAddShortcut"),this.player.setTimeAddShortcut(e.getTime()),this.facebook.attemptToAddShortcut())},n.areDatesEqual=function(e,t){return e.getDate()===t.getDate()&&e.getMonth()===t.getMonth()&&e.getFullYear()===t.getFullYear()},n.levelUp=function(){this.startLevel()},n.startLevel=function(){this.ads.preloadInterstitialAdAsync().catch((function(){})),this.ads.preloadRewardedVideoAsync().catch((function(){}));var e=this.level.getLevelData();if(e){var t=this.level.getLevel();this.header.setTextLevel(t),this.gameManager.buildLevel(e);var n=Ne()(this).getMapContentByLevel(t);if(n){var r=n.gameplayBackgroundKey,a=n.subtitle;this.bgHandler.setCurrentBg(r),this.header.setTextSlogan(a),this.navigation.setHybridElementsVisible(t>3),this.navigation.setCanShowGameplaySettingsButton(!this.tutorialHandler.isGameInTutorialLevels())}}},n.restartLevel=function(){this.startLevel(),this.gameManager.setRescued(!1)},n.updatePlayerLevel=function(){var e=(0,s.Z)(h().mark((function e(t){var n,r;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.player.getCustomData("level"),r=Math.max(t,n),e.abrupt("return",this.player.setCustomData("level",r));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),n.prepareFadeIn=function(){this.header.revive(),this.footer.revive(),[this.header,this.gameManager,this.footer,this.bgHandler].forEach((function(e){e.prepareFadeIn()}))},n.fadeIn=function(){var e=(0,s.Z)(h().mark((function e(){var t;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.audio.playMusic("gp",{volume:.35}),this.audio.playSound(tn.Z.START_LEVEL),e.next=4,u().all([this.header.fadeIn(),this.footer.fadeIn(),this.gameManager.fadeIn()]);case 4:this.gameplayParticleHandler.showEmittingParticles(),null==(t=this.devToolManager)||t.revive();case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.fadeOut=function(){var e=(0,s.Z)(h().mark((function e(t){var n,r;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return void 0===t&&(t=!0),null==(n=this.devToolManager)||n.kill(),this.gameplayParticleHandler.hideEmittingParticles(),r=[this.header.fadeOut(),this.gameManager.fadeOut(),this.footer.fadeOut()],t&&r.push(this.bgHandler.fadeOut()),e.next=7,u().all(r);case 7:this.header.kill(),this.footer.kill();case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),n.setGlobalSceneInputEnabled=function(e){var t=this.game.globalScene;e?t.enableInput():t.disableInput()},n.handleReceivePack=function(){var e=(0,s.Z)(h().mark((function e(t,n){var r,a,i,s,o;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.setGlobalSceneInputEnabled(!1),r=this.player.getCustomData("coins"),a=this.player.getCustomData("items"),i=r+n,s=this.getItemDataAfterPurchase(t),o={coins:i,items:s},this.player.setMultiCustomData(o),e.next=9,u().all([this.navigation.runCoinAnimToCurData(),this.navigation.runItemAnimToCurData(a,s,700)]);case 9:So.emit(Eo.UPDATE_ITEM_AMOUNT),this.setGlobalSceneInputEnabled(!0);case 11:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}(),n.logStepProgress=function(e){void 0===e&&(e=!1);var t=this.gameManager.levelDataManager.getLevelTileCount(),n=this.gameManager.board.getRemainingAmount(),r=Math.floor(100*(1-n/t));this._stepLogHandler.logStep(r,e),GameCore.Utils.Valid.isDebugger()&&console.log("%c Step Log Handler ","background-color: #9E9689","Board remaining: "+n+"/"+t+", Step: "+r)},n.getItemDataAfterPurchase=function(e){var t=this.player.getCustomData("items"),n=GameCore.Utils.Json.clone(t);return e.forEach((function(e){var t=e.item,r=e.count;n[t]+=r})),n},(0,le.Z)(t,[{key:"stepLogHandler",get:function(){return{reset:this._stepLogHandler.reset.bind(this._stepLogHandler),logAllRemainingSteps:this._stepLogHandler.logAllRemainingSteps.bind(this._stepLogHandler)}}}]),t}(Xr.Z);var fv=pv,mv=n(432),vv=function(e){function t(t,n){var r;return(r=e.call(this,t,n)||this).name="LoadResourceFail",r.message=t||"Load resource fail",r.payload=n,r}return(0,o.Z)(t,e),t}((0,Z.Z)(Error)),gv=n(430),yv={BACKGROUND:{db:"./assets/music/db_music.ogg",gp:"./assets/music/bg_music.ogg",win_music:"./assets/music/win_music.ogg"},EFFECTS:{button_click:"./assets/sounds/pick-92276.ogg",popup_show:"./assets/sounds/popup-show.ogg",popup_off:"./assets/sounds/popup-off.ogg",shop_popup_show:"./assets/sounds/bike-bell-173588.ogg",theme_popup_show:"./assets/sounds/theme.ogg",start_level:"./assets/sounds/tiles-loading.ogg",tile_tap:"./assets/sounds/tile-guru-tap.ogg",tile_drop:"./assets/sounds/tile-merge.ogg",tile_shake:"./assets/sounds/error-shake.ogg",match_1:"./assets/sounds/match1.ogg",match_2:"./assets/sounds/match2.ogg",match_3:"./assets/sounds/match3.ogg",match_4:"./assets/sounds/match4.ogg",match_5:"./assets/sounds/match5.ogg",win:"./assets/sounds/win.ogg",fail:"./assets/sounds/fail-sfx.ogg",star_1:"./assets/sounds/star-progress-1.ogg",star_2:"./assets/sounds/star-progress-2.ogg",star_3:"./assets/sounds/star-progress-3.ogg",score_increase_single:"./assets/sounds/score-increase-single.ogg",score_increase_end:"./assets/sounds/score-increase-end.ogg",boost:"./assets/sounds/level-button-appear.ogg",level_btn_appear:"./assets/sounds/level-up-on-button.ogg",coins_add:"./assets/sounds/coins-add.ogg",item_appear:"./assets/sounds/goal-progress.ogg",item_receive:"./assets/sounds/star-progress.ogg",coin_appear:"./assets/sounds/gift-received.ogg",open_chest:"./assets/sounds/use-paint.ogg",chest_drop:"./assets/sounds/open-chest.ogg",switch_map:"./assets/sounds/chapter-switch.ogg",dashboard_open:"./assets/sounds/gift-opening.ogg",shuffle_start:"./assets/sounds/tile-match-shorter.ogg",switch:"./assets/sounds/switch.ogg",extra_slot:"./assets/sounds/extra-slot.ogg"}},wv=n(421),Sv="How about diving into the game for a relaxing experience?",Ev=GameCore.Configs.Notification.DailyNotificationMessages,bv=void 0===Ev?{}:Ev,kv=function(){function e(){}e.sendNewUserNotification=function(){var e=(0,s.Z)(h().mark((function e(){var t;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.getInstance(),e.abrupt("return",t.sendNewUserNotificationInstance());case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),e.sendDailyNotification=function(){var e=(0,s.Z)(h().mark((function e(){var t;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.getInstance(),e.abrupt("return",t.sendDailyNotificationInstance());case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),e.sendTestDailyNotification=function(){var e=(0,s.Z)(h().mark((function e(t){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.getInstance();case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),e.getInstance=function(){return this._instance||(this._instance=new e),this._instance};var t=e.prototype;return t.sendNewUserNotificationInstance=function(){var e=(0,s.Z)(h().mark((function e(){var t,n,r,a,i,s;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=window.game,n=t.player,r=t.facebook,a=t.rollbar,e.prev=1,n.getPlayerIsNew()){e.next=5;break}return e.abrupt("return");case 5:if(n.getPlayerASID()){e.next=8;break}return e.abrupt("return");case 8:return e.next=10,FBInstant.player.getDataAsync(["isNotificationFirstSent"]);case 10:if(e.t0=e.sent,e.t0){e.next=13;break}e.t0={};case 13:if(i=e.t0,!0!==i.isNotificationFirstSent){e.next=17;break}return e.abrupt("return");case 17:return s={message:Sv,delayTime:14400,type:wv.Z.NEW_USER_NOTIFICATION},e.next=20,r.sendNotificationAsync(s);case 20:FBInstant.player.setDataAsync({isNotificationFirstSent:!0}),e.next=26;break;case 23:e.prev=23,e.t1=e.catch(1),a.sendException(e.t1);case 26:case"end":return e.stop()}}),e,null,[[1,23]])})));return function(){return e.apply(this,arguments)}}(),t.sendDailyNotificationInstance=function(){var e=(0,s.Z)(h().mark((function e(){var t,n,r;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=window.game.rollbar,e.prev=1,n=new Date,r=n.getDay(),e.t0=r,e.next=0===e.t0?7:1===e.t0?10:2===e.t0?13:3===e.t0?16:4===e.t0?19:22;break;case 7:return e.next=9,this.sendMondayNotification();case 9:return e.abrupt("break",22);case 10:return e.next=12,this.sendTuesdayNotification();case 12:return e.abrupt("break",22);case 13:return e.next=15,this.sendWednesdayNotification();case 15:return e.abrupt("break",22);case 16:return e.next=18,this.sendThursdayNotification();case 18:return e.abrupt("break",22);case 19:return e.next=21,this.sendFridayNotification();case 21:return e.abrupt("break",22);case 22:return e.next=24,this.sendSaturdayNotification();case 24:return e.next=26,this.sendSundayNotification();case 26:e.next=31;break;case 28:e.prev=28,e.t1=e.catch(1),t.sendException(e.t1);case 31:case"end":return e.stop()}}),e,this,[[1,28]])})));return function(){return e.apply(this,arguments)}}(),t.sendMondayNotification=function(){var e=(0,s.Z)(h().mark((function e(){var t,n,r,a,i;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=window.game,n=t.facebook,r=t.rollbar,e.prev=1,i={message:null!=(a=bv.MONDAY)?a:Sv,delayTime:86400,type:wv.Z.MONDAY_NOTIFICATION},e.next=5,n.sendNotificationAsync(i);case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),r.sendException(e.t0);case 10:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(){return e.apply(this,arguments)}}(),t.sendTuesdayNotification=function(){var e=(0,s.Z)(h().mark((function e(){var t,n,r,a,i;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=window.game,n=t.facebook,r=t.rollbar,e.prev=1,i={message:null!=(a=bv.TUESDAY)?a:Sv,delayTime:86400,type:wv.Z.TUESDAY_NOTIFICATION},e.next=5,n.sendNotificationAsync(i);case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),r.sendException(e.t0);case 10:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(){return e.apply(this,arguments)}}(),t.sendWednesdayNotification=function(){var e=(0,s.Z)(h().mark((function e(){var t,n,r,a,i;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=window.game,n=t.facebook,r=t.rollbar,e.prev=1,i={message:null!=(a=bv.WEDNESDAY)?a:Sv,delayTime:86400,type:wv.Z.WEDNESDAY_NOTIFICATION},e.next=5,n.sendNotificationAsync(i);case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),r.sendException(e.t0);case 10:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(){return e.apply(this,arguments)}}(),t.sendThursdayNotification=function(){var e=(0,s.Z)(h().mark((function e(){var t,n,r,a,i;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=window.game,n=t.facebook,r=t.rollbar,e.prev=1,i={message:null!=(a=bv.THURSDAY)?a:Sv,delayTime:86400,type:wv.Z.THURSDAY_NOTIFICATION},e.next=5,n.sendNotificationAsync(i);case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),r.sendException(e.t0);case 10:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(){return e.apply(this,arguments)}}(),t.sendFridayNotification=function(){var e=(0,s.Z)(h().mark((function e(){var t,n,r,a,i;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=window.game,n=t.facebook,r=t.rollbar,e.prev=1,i={message:null!=(a=bv.FRIDAY)?a:Sv,delayTime:86400,type:wv.Z.FRIDAY_NOTIFICATION},e.next=5,n.sendNotificationAsync(i);case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),r.sendException(e.t0);case 10:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(){return e.apply(this,arguments)}}(),t.sendSaturdayNotification=function(){var e=(0,s.Z)(h().mark((function e(){var t,n,r,a,i,s;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=window.game,n=t.facebook,r=t.rollbar,e.prev=1,i=this.findDelayTimeForNextDay(6,10),s={message:null!=(a=bv.SATURDAY)?a:Sv,delayTime:i,type:wv.Z.SATURDAY_NOTIFICATION},e.next=6,n.sendNotificationAsync(s);case 6:e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),r.sendException(e.t0);case 11:case"end":return e.stop()}}),e,this,[[1,8]])})));return function(){return e.apply(this,arguments)}}(),t.sendSundayNotification=function(){var e=(0,s.Z)(h().mark((function e(){var t,n,r,a,i,s;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=window.game,n=t.facebook,r=t.rollbar,e.prev=1,i=this.findDelayTimeForNextDay(0,10),s={message:null!=(a=bv.SUNDAY)?a:Sv,delayTime:i,type:wv.Z.SUNDAY_NOTIFICATION},e.next=6,n.sendNotificationAsync(s);case 6:e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),r.sendException(e.t0);case 11:case"end":return e.stop()}}),e,this,[[1,8]])})));return function(){return e.apply(this,arguments)}}(),t.findDelayTimeForNextDay=function(e,t){if(e<0||e>6)throw new Error("Invalid day for notification");if(t<0||t>23)throw new Error("Invalid hour for notification");var n=Date.now(),r=new Date(n).getDay(),a=new Date(n).getHours(),i=e,s=t;if(r===i&&a>=s){var o=3600*(168-a+s);if(o>604800)throw new Error("Notification delay time is more than 7 days");return o}var c=i<r?7-r+i:i-r;s<a&&c--;var u=3600*(24*c+(s<a?24-a+s:s-a));if(u>604800)throw new Error("Notification delay time is more than 7 days");return u},t.sendTestDailyNotificationInstance=function(){var e=(0,s.Z)(h().mark((function e(t){var n,r,a,i;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n={0:"SUNDAY",1:"MONDAY",2:"TUESDAY",3:"WEDNESDAY",4:"THURSDAY",5:"FRIDAY",6:"SATURDAY"},e.prev=1,a=Sv,!(t<0||t>6)){e.next=5;break}throw new Error("Invalid day for notification. Day must be between 0 (Sunday) and 6 (Saturday)");case 5:return a=null!=(r=bv[n[t]])?r:Sv,i={message:a,delayTime:300,type:wv.Z.GENERIC_NOTIFICATION},e.next=9,window.game.facebook.sendNotificationAsync(i);case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),console.warn(e.t0);case 14:case"end":return e.stop()}}),e,null,[[1,11]])})));return function(t){return e.apply(this,arguments)}}(),e}();kv._instance=void 0;var xv=kv,Av=GameCore.Configs.Notification.ApiUrl,Cv=function(){var e=(0,s.Z)(h().mark((function e(t){var n,r;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.playerId,e.next=3,(0,qe.v)("players/"+n,t,{},Av,10);case 3:return r=e.sent,e.abrupt("return",(null==r?void 0:r.data)||{});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Tv=GameCore.Configs,Pv=Tv.AppId,Iv=Tv.Notification,Ov=Tv.Level,Mv=function(e){function t(){for(var t,n,r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(n=e.call.apply(e,O()(t=[this]).call(t,a))||this).preloadedDefaultTextureUrl=void 0,n.loadLevelReadyPromise=void 0,n.loadBgPromise=void 0,n.isImportantLazyResourcesLoaded=!1,n.isDashboardBackgroundPreloaded=!1,n.isDashboardBackgroundLoaded=!1,n.handleFBInstantGameStarted=function(){window.__fbGameReady=!0,window.__fbPlatform=FBInstant.getPlatform(),n.player.requestConnectedPlayers()},n.processAfterUpdatePlayerProfile=function(){Iv.Enable&&(n.updatePlayerProfileToNotificationService(),Iv.DisableSendNotification||(xv.sendNewUserNotification(),xv.sendDailyNotification()))},n.startGame=function(){n.analytics.event(an._.APP_READY),n.storage.dispatch((0,gv.I)(Fr.C.LOAD_SCENE)),n.storage.dispatch((function(){var e=window.game,t=e.player,n=e.analytics,r=e.globalScene;try{t.getPlayer().isUserNew&&n.event(an._.NEW_USER),r.events.emit(Fr.K.SWITCH,Fr.C.GAME_SCENE)}catch(a){r.events.emit(Fr.K.SWITCH,Fr.C.GAME_SCENE),console.warn(a)}}))},n.subscribebot=function(){n.facebook.attemptToSubscribeBot()},n}(0,o.Z)(t,e);var n=t.prototype;return n.preload=function(){var e=this;this.facebook.progressLoading.loadingProgressFbLoadScene(),this.analytics.event(an._.SCREEN_OPEN,{screen_name:"LoadScene"}),function(){var e=GameCore.Utils.Image.getImageScale(),t=GameCore.Utils.Device.pixelRatio();window.game.analytics.event(an._.IMAGE_SCALE_DPR_LOAD,{image_scale:e,dpr:t})}(),this.load.on("progress",(function(t){e.facebook.progressLoading.onProgress(t)})),this.load.on(Phaser.Loader.Events.FILE_LOAD_ERROR,(function(e){var t=new vv("Load resources at LoadScene failed.");(0,r.R0)(t,{file:null==e?void 0:e.url})})),this.load.bitmapFont(Ee.Z.NUMBERS.KEY,Ee.Z.NUMBERS.TEXTURE,Ee.Z.NUMBERS.DATA),this.load.bitmapFont(Ee.Z.NUMBERS_ORANGE.KEY,Ee.Z.NUMBERS_ORANGE.TEXTURE,Ee.Z.NUMBERS_ORANGE.DATA),this.load.image(Pr.Z.AVATAR.KEY,Pr.Z.AVATAR.FILE),this.load.atlas({key:ca.Z.GAMEPLAY.KEY,textureURL:ca.Z.GAMEPLAY.TEXTURE,atlasURL:ca.Z.GAMEPLAY.JSON}),this.load.atlas({key:ca.Z.GAMEPLAY_COLORFUL.KEY,textureURL:ca.Z.GAMEPLAY_COLORFUL.TEXTURE,atlasURL:ca.Z.GAMEPLAY_COLORFUL.JSON}),this.load.multiatlas({key:ca.Z.EFFECTS.KEY,path:ca.Z.EFFECTS.PATH,atlasURL:ca.Z.EFFECTS.JSON}),this.textStyler.addFont({type:"local",fontType:"opentype",fontName:Ee.Z.FONT_FAMILY});var t=this.player.getCustomData("level");this.level.setMaxLevel(Ov.maxLevel),this.level.setLevel(t),this.level.getLevel()>1?(this.load.atlas({key:ca.Z.DEFAULT.KEY,textureURL:ca.Z.DEFAULT.TEXTURE,atlasURL:ca.Z.DEFAULT.JSON}),this.load.image(Pr.Z.DB_BACKGROUND.KEY,Pr.Z.DB_BACKGROUND.FILE),this.isDashboardBackgroundPreloaded=!0,this.preloadedDefaultTextureUrl=ca.Z.DEFAULT.TEXTURE):(this.load.atlas({key:ca.Z.DEFAULT.KEY,textureURL:ca.Z.DEFAULT.BLANK_TEXTURE,atlasURL:ca.Z.DEFAULT.BLANK_JSON}),this.isDashboardBackgroundPreloaded=!1,this.preloadedDefaultTextureUrl=ca.Z.DEFAULT.BLANK_TEXTURE),this.loadLevelReadyPromise=this.loadLevelAsync(),this.loadBgPromise=this.loadBgWithRetryAsync()},n.loadLevelAsync=function(){var e=(0,s.Z)(h().mark((function e(t){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return void 0===t&&(t=3),e.prev=1,e.next=4,this.level.preloadLevelDataAsync();case 4:e.next=12;break;case 6:if(e.prev=6,e.t0=e.catch(1),0!==t){e.next=10;break}return e.abrupt("return");case 10:return e.next=12,this.loadLevelAsync(t-1);case 12:case"end":return e.stop()}}),e,this,[[1,6]])})));return function(t){return e.apply(this,arguments)}}(),n.loadBgWithRetryAsync=function(){var e=(0,s.Z)(h().mark((function e(){var t,n,r;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=Ne()(this).getMapContentByLevel(this.level.getLevel())){e.next=3;break}return e.abrupt("return",!1);case 3:return n=t.gameplayBackgroundKey,r=Pr.Z.GP_BACKGROUND.PATH+Pr.Z.GP_BACKGROUND.KEYS[n],e.abrupt("return",Ef(n,r,this,3));case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.create=function(){var e=(0,s.Z)(h().mark((function e(){var t;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.isDashboardBackgroundPreloaded&&this.setDashboardBackgroundLoaded(),e.next=3,this.loadLevelReadyPromise;case 3:return e.next=5,this.loadBgPromise;case 5:this.player.updateData().then(this.processAfterUpdatePlayerProfile).catch(r.tO),t=this.level.getLevel(),this.level.preloadLevelDataAsync(t+1),this.audio.initSound(),this.audio.importSoundEffectKeys(yv.EFFECTS),this.audio.initMusic(),this.audio.importMusicKeys(yv.BACKGROUND),this.analytics.event(an._.LOAD_COMPLETE),this.facebook.on("startgame",this.handleFBInstantGameStarted),this.facebook.gameStarted(),this.setupGlobalScene(),this.lazyLoadResource(),this.handleShowAdWhenStartGame(),this.startGame();case 19:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.updatePlayerProfileToNotificationService=function(){var e=this.player.getPlayer(),t=e.playerId,n=e.name,r=e.photo,a=e.locale,i=e.ASID,s={appId:Pv,playerId:t,name:n,photo:r,locale:a,ASID:i};console.info("\ud83d\ude80 > profileData",s),Cv(s)},n.setupGlobalScene=function(){var e=this.scene.get(Fr.C.GLOBAL_SCENE);e instanceof mv.Z&&e.setup()},n.lazyLoadResource=function(){var e=this;this.events.on(Phaser.Scenes.Events.SLEEP,(function(){e.load.isLoading()?(e.scene.wake(),e.load.off(Phaser.Loader.Events.COMPLETE,t),e.load.once(Phaser.Loader.Events.COMPLETE,t)):e.load.once(Phaser.Loader.Events.START,(function(){e.scene.wake(),e.load.off(Phaser.Loader.Events.COMPLETE,t),e.load.once(Phaser.Loader.Events.COMPLETE,t)}))}));var t=function t(){setTimeout((function(){if(e.load.isLoading())return e.load.off(Phaser.Loader.Events.COMPLETE,t),void e.load.once(Phaser.Loader.Events.COMPLETE,t);e.scene.sleep()}),2e3)};this.load.once(Phaser.Loader.Events.COMPLETE,t),this.scene.wake(),this.loadSounds(),this.loadImportantLazyResources(),this.loadDashboardBackground(),this.loadWideframesResource(),this.load.start()},n.loadImportantLazyResources=function(){var e=(0,s.Z)(h().mark((function e(){var t,n,r,a,i,s,o=this;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=setTimeout((function(){o.rollbar.sendException(new Error("Load important lazy resources timeout"),{isSceneSleep:o.scene.isSleeping()})}),2e4),n=ca.Z.DEFAULT,r=n.KEY,a=n.TEXTURE,i=n.BLANK_TEXTURE,s=n.TEXTURE_32,this.preloadedDefaultTextureUrl!==i){e.next=5;break}return e.next=5,this.loadNewTexture(r,[a]);case 5:return clearTimeout(t),this.isImportantLazyResourcesLoaded=!0,this.events.emit("loadedImportantLazyResources"),e.next=10,this.loadNewTexture(r,[s]);case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.waitUntilImportantLazyResourcesLoaded=function(){var e=(0,s.Z)(h().mark((function e(){var t=this;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.isImportantLazyResourcesLoaded){e.next=2;break}return e.abrupt("return",u().resolve());case 2:return e.abrupt("return",new(u())((function(e){t.events.once("loadedImportantLazyResources",(function(){e()}))})));case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.waitUntilDashboardBackgroundLoaded=function(){var e=(0,s.Z)(h().mark((function e(){var t=this;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.isDashboardBackgroundLoaded){e.next=2;break}return e.abrupt("return");case 2:return e.abrupt("return",new(u())((function(e){t.events.once("loadedDashboardBackground",(function(){e()}))})));case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.waitUntilDashboardResourcesLoaded=function(){var e=(0,s.Z)(h().mark((function e(){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",u().all([this.waitUntilImportantLazyResourcesLoaded(),this.waitUntilDashboardBackgroundLoaded()]));case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.loadDashboardBackground=function(){var e=(0,s.Z)(h().mark((function e(){var t,n=this;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.isDashboardBackgroundLoaded){e.next=2;break}return e.abrupt("return");case 2:return t=setTimeout((function(){n.rollbar.sendException(new Error("Load loadDashboardBackground timeout"),{isSceneSleep:n.scene.isSleeping()})}),2e4),e.next=5,this.loadNewTexture(Pr.Z.DB_BACKGROUND.KEY,[Pr.Z.DB_BACKGROUND.FILE]);case 5:clearTimeout(t),this.setDashboardBackgroundLoaded();case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.setDashboardBackgroundLoaded=function(){this.isDashboardBackgroundLoaded=!0,this.events.emit("loadedDashboardBackground")},n.loadSounds=function(){this.loadSoundEffects(),this.loadMusic()},n.loadSoundEffects=function(){var e=this;te()(yv.EFFECTS).forEach((function(t){var n=yv.EFFECTS[t],r=n.replace(".ogg",".mp3");e.load.audio(t,[n,r])}))},n.loadMusic=function(){var e=this;te()(yv.BACKGROUND).forEach((function(t){var n=yv.BACKGROUND[t],r=n.replace(".ogg",".mp3");e.load.audio(t,[n,r])}))},n.loadWideframesResource=function(){},n.handleShowAdWhenStartGame=function(){var e=this;if(GameCore.Configs.Ads.InterstitialAdOptions.showWhenStartGame){var t={en:"Initializing...",ru:"\u0418\u043d\u0438\u0446\u0438\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u044f...",pt:"Inicializando...",es:"Inicializando...",ar:"\u062a\u0647\u064a\u0626\u0629...",hi:"\u092a\u094d\u0930\u093e\u0930\u0902\u092d \u0915\u0930 \u0930\u0939\u093e \u0939\u0948...",zh:"\u521d\u59cb\u5316\u4e2d...",tr:"Ba\u015flat\u0131l\u0131yor...",ja:"\u521d\u671f\u5316\u4e2d...",fr:"Initialisation en cours...",id:"Menginisialisasi...",de:"Initialisierung...",it:"Inizializzazione..."}[this.lang.getCurrentLanguage()||""]||"",n=document.createElement("div");n.id="wait-ads-mask";var a=document.createElement("div");a.id="wait-ads-content",n.appendChild(a);var i=document.createElement("div");i.id="wait-ads-dual-ring",a.appendChild(i);var o=document.createElement("div");o.id="wait-ads-text",o.innerHTML=t,a.appendChild(o),document.body.appendChild(n),this.audio.muteAll(),setTimeout((0,s.Z)(h().mark((function t(){return h().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,e.audio.stopMusic(),e.audio.muteAll(),t.next=5,e.ads.preloadInterstitialAdAsync();case 5:return t.next=7,e.ads.showInterstitialAdAsync();case 7:t.next=12;break;case 9:t.prev=9,t.t0=t.catch(0),(0,r.tO)(t.t0);case 12:return t.prev=12,n.remove(),e.audio.unmuteAll(),e.audio.playMusic(),t.finish(12);case 17:case"end":return t.stop()}}),t,null,[[0,9,12,17]])}))),0)}},n.loadNewTexture=function(){var e=(0,s.Z)(h().mark((function e(t,n){var r=this;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new(u())((function(e){var a=Ne()(n).call(n,(function(e){var t=GameCore.Utils.String.generateObjectId();return Ef(t,e,r,1e3,500),t}));r.load.start();var i=0;r.textures.on(Phaser.Textures.Events.ADD,(function n(s){var o=Ht()(a).call(a,s);if(-1!==o){var c=r.textures.get(s),u=r.textures.get(t),l=u.source[o].glTexture;u.source[o].glTexture=c.source[0].glTexture,u.source[o].glIndex=c.source[0].glIndex,u.source[o].glIndexCounter=c.source[0].glIndexCounter,u.source[o].source=c.source[0].source,Jn()(u.frames).forEach((function(e){e.glTexture=c.source[0].glTexture}));var h=r.game.renderer;h instanceof Phaser.Renderer.WebGL.WebGLRenderer&&h.deleteTexture(l,!0),++i===a.length&&(r.textures.off(Phaser.Textures.Events.ADD,n),e())}}))})));case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),(0,le.Z)(t,[{key:"importantLazyResourcesLoaded",get:function(){return this.isImportantLazyResourcesLoaded}},{key:"dashboardResourcesLoaded",get:function(){return this.isImportantLazyResourcesLoaded&&this.isDashboardBackgroundLoaded}}]),t}(Phaser.Scene),_v=Mv,Lv=function(e){function t(){for(var t,n,r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(n=e.call.apply(e,O()(t=[this]).call(t,a))||this).isVisible=!0,n.browserPrefixes=["moz","ms","o","","webkit"],n.visibleCallbacks=[],n.hiddenCallbacks=[],n.handleVisibilityChange=function(e){if("boolean"===typeof e)return e?n.onVisibleEvent():n.onHiddenEvent();var t=n.getBrowserPrefix(),r=n.getHiddenPropertyName(t);return document[r]?n.onHiddenEvent():n.onVisibleEvent()},n}(0,o.Z)(t,e);var n=t.prototype;return n.configure=function(){var e=this,t=this.getBrowserPrefix(),n=this.getVisibilityEvent(t);document.addEventListener(n,this.handleVisibilityChange,!1),document.addEventListener("focus",(function(){e.handleVisibilityChange(!0)}),!1),document.addEventListener("blur",(function(){e.handleVisibilityChange(!1)}),!1),window.addEventListener("focus",(function(){e.handleVisibilityChange(!0)}),!1),window.addEventListener("blur",(function(){e.handleVisibilityChange(!1)}),!1)},n.addEventVisible=function(e){this.visibleCallbacks.push(e)},n.addEventHidden=function(e){this.hiddenCallbacks.push(e)},n.isGameVisible=function(){return this.isVisible},n.getHiddenPropertyName=function(e){return e?e+"Hidden":"hidden"},n.getVisibilityEvent=function(e){return(e||"")+"visibilitychange"},n.getBrowserPrefix=function(){for(var e=0;e<this.browserPrefixes.length;e++)if(this.getHiddenPropertyName(this.browserPrefixes[e])in document)return this.browserPrefixes[e];return""},n.onVisibleEvent=function(){this.isVisible||(this.isVisible=!0,console.log("visible"),this.visibleCallbacks.forEach((function(e){e()})))},n.onHiddenEvent=function(){this.isVisible&&(this.isVisible=!1,console.log("hidden"),this.hiddenCallbacks.forEach((function(e){e()})))},t}(Phaser.Plugins.BasePlugin),Rv=Lv,Bv=n(589),Dv={1:[0],2:[0],3:[0,1],4:[0,1],5:[0,1],6:[0,1,2],7:[0,1,2],8:[0,1,2],9:[0,1,2],10:[0,1,2],11:[1,2,3],12:[1,2,3,4],13:[1,2,3,4],14:[1,2,3,4],15:[1,2,3,4],16:[1,2,3,4],17:[1,2,3,4],18:[1,2,3,4],19:[1,2,3,4],20:[1,2,3,4],21:[3,4,5,6],22:[3,4,5,6],23:[3,4,5,6],24:[3,4,5,6],25:[3,4,5,6],26:[3,4,5,6],27:[3,4,5,6],28:[3,4,5,6],29:[3,4,5,6],30:[3,4,5,6],31:[6,7,8,9,10],32:[6,7,8,9,10],33:[6,7,8,9,10,11],34:[6,7,8,9,10,11],35:[6,7,8,9,10,11],36:[6,7,8,9,10,11],37:[6,7,8,9,10,11],38:[6,7,8,9,10,11],39:[6,7,8,9,10,11],40:[6,7,8,9,10,11],41:[7,8,9,10,11,12],42:[7,8,9,10,11,12],43:[7,8,9,10,11,12],44:[7,8,9,10,11,12],45:[7,8,9,10,11,12],46:[7,8,9,10,11,12],47:[7,8,9,10,11,12],48:[7,8,9,10,11,12],49:[7,8,9,10,11,12],50:[7,8,9,10,11,12],51:[8,9,10,11,12,13],52:[8,9,10,11,12,13],53:[8,9,10,11,12,13],54:[8,9,10,11,12,13],55:[8,9,10,11,12,13],56:[8,9,10,11,12,13],57:[8,9,10,11,12,13],58:[8,9,10,11,12,13],59:[8,9,10,11,12,13],60:[8,9,10,11,12,13],61:[9,10,11,12,13,14],62:[9,10,11,12,13,14],63:[9,10,11,12,13,14],64:[9,10,11,12,13,14],65:[9,10,11,12,13,14],66:[9,10,11,12,13,14],67:[9,10,11,12,13,14],68:[9,10,11,12,13,14],69:[9,10,11,12,13,14],70:[9,10,11,12,13,14],71:[10,11,12,13,14,15],72:[10,11,12,13,14,15],73:[10,11,12,13,14,15],74:[10,11,12,13,14,15],75:[10,11,12,13,14,15],76:[10,11,12,13,14,15],77:[10,11,12,13,14,15],78:[10,11,12,13,14,15],79:[10,11,12,13,14,15],80:[10,11,12,13,14,15],81:[11,12,13,14,15,16],82:[11,12,13,14,15,16],83:[11,12,13,14,15,16],84:[11,12,13,14,15,16],85:[11,12,13,14,15,16],86:[11,12,13,14,15,16],87:[11,12,13,14,15,16],88:[11,12,13,14,15,16],89:[11,12,13,14,15,16],90:[11,12,13,14,15,16],91:[12,13,14,15,16,17],92:[12,13,14,15,16,17],93:[12,13,14,15,16,17],94:[12,13,14,15,16,17],95:[12,13,14,15,16,17],96:[12,13,14,15,16,17],97:[12,13,14,15,16,17],98:[12,13,14,15,16,17],99:[12,13,14,15,16,17],100:[12,13,14,15,16,17]},Nv={1:11,2:11,3:11,4:11,5:11,6:11,7:11,8:11,9:11,10:13,11:14,12:14,13:14,14:14,15:14,16:14,17:14,18:14,19:14,20:14,21:14,22:14,23:14,24:14,25:14,26:14,27:14,28:14,29:14,30:14,31:14,32:14,33:14,34:14,35:14,36:14,37:14,38:14,39:14,40:14,41:14,42:14,43:14,44:14,45:14,46:14,47:14,48:14,49:14,50:14,51:14,52:14,53:14,54:14,55:14,56:14,57:14,58:14,59:14,60:14,61:13,62:14,63:14,64:14,65:14,66:14,67:14,68:14,69:14,70:14,71:14,72:14,73:14,74:14,75:14,76:14,77:14,78:16,79:14,80:14,81:14,82:14,83:14,84:14,85:14,86:14,87:14,88:14,89:14,90:14,91:14,92:14,93:14,94:14,95:14,96:14,97:14,98:14,99:14,100:15,101:14,102:14,103:14,104:17,105:15,106:14,107:14,108:18,109:15,110:14,111:14,112:15,113:14,114:15,115:18,116:17,117:14,118:15,119:14,120:14,121:14,122:14,123:14,124:18,125:14,126:15,127:14,128:14,129:14,130:14,131:14,132:18,133:14,134:18,135:14,136:18,137:14,138:18,139:14,140:14,141:14,142:17,143:14,144:14,145:14,146:14,147:15,148:18,149:14,150:18,151:15,152:18,153:14,154:16,155:17,156:18,157:15,158:15,159:14,160:18,161:14,162:15,163:14,164:16,165:14,166:14,167:17,168:15,169:14,170:17,171:14,172:14,173:14,174:15,175:14,176:14,177:14,178:14,179:14,180:15,181:14,182:15,183:14,184:16,185:14,186:17,187:14,188:14,189:14,190:15,191:14,192:15,193:16,194:14,195:14,196:14,197:14,198:14,199:14,200:14,201:14,202:17,203:14,204:18,205:14,206:16,207:18,208:14,209:18,210:14,211:14,212:16,213:14,214:18,215:16,216:14,217:15,218:14,219:14,220:18,221:14,222:16,223:14,224:14,225:14,226:14,227:14,228:18,229:17,230:18,231:14,232:18,233:14,234:17,235:14,236:18,237:14,238:17,239:14,240:18,241:14,242:17,243:14,244:18,245:14,246:17,247:14,248:14,249:14,250:14,251:17,252:14,253:16,254:14,255:14,256:14,257:14,258:18,259:14,260:18,261:16,262:16,263:14,264:14,265:14,266:17,267:14,268:14,269:18,270:15,271:17,272:18,273:14,274:14,275:14,276:18,277:18,278:18,279:18,280:18,281:14,282:14,283:14,284:14,285:17,286:14,287:14,288:18,289:14,290:14,291:14,292:17,293:14,294:18,295:16,296:17,297:14,298:17,299:14,300:14,301:14,302:15,303:14,304:18,305:15,306:14,307:14,308:18,309:14,310:14,311:18,312:17,313:15,314:14,315:15,316:18,317:14,318:14,319:15,320:18,321:14,322:16,323:14,324:16,325:15,326:17,327:14,328:14,329:17,330:14,331:14,332:17,333:14,334:14,335:14,336:18,337:14,338:15,339:15,340:18,341:14,342:14,343:14,344:14,345:14,346:14,347:14,348:16,349:18,350:17,351:14,352:18,353:17,354:14,355:14,356:18,357:14,358:14,359:17,360:14,361:14,362:14,363:18,364:14,365:14,366:18,367:14,368:14,369:14,370:14,371:14,372:15,373:18,374:14,375:15,376:15,377:14,378:18,379:14,380:15,381:18,382:14,383:18,384:17,385:14,386:15,387:14,388:18,389:14,390:18,391:17,392:18,393:14,394:15,395:16,396:14,397:18,398:18,399:17,400:15,401:14,402:14,403:14,404:17,405:14,406:14,407:14,408:17,409:14,410:14,411:15,412:18,413:15,414:15,415:14,416:15,417:14,418:15,419:14,420:15,421:14,422:17,423:14,424:17,425:14,426:15,427:14,428:18,429:14,430:18,431:14,432:18,433:14,434:16,435:14,436:18,437:14,438:18,439:14,440:18,441:14,442:18,443:14,444:18,445:14,446:14,447:14,448:18,449:14,450:14,451:14,452:18,453:14,454:14,455:15,456:18,457:14,458:18,459:14,460:18,461:14,462:16,463:14,464:18,465:15,466:18,467:15,468:18,469:14,470:17,471:15,472:18,473:14,474:18,475:14,476:18,477:14,478:16,479:14,480:18,481:14,482:17,483:14,484:18,485:14,486:14,487:14,488:17,489:14,490:14,491:14,492:18,493:14,494:15,495:14,496:18,497:14,498:16,499:14,500:18,501:14,502:16,503:14,504:18,505:14,506:18,507:14,508:18,509:15,510:18,511:18,512:18,513:14,514:18,515:14,516:18,517:14,518:14,519:17,520:18,521:14,522:14,523:14,524:18,525:17,526:14,527:14,528:16,529:14,530:14,531:14,532:18,533:14,534:14,535:14,536:17,537:14,538:14,539:14,540:18,541:14,542:18,543:17,544:18,545:14,546:18,547:14,548:18,549:14,550:15,551:14,552:18,553:14,554:16,555:14,556:18,557:14,558:18,559:14,560:18,561:14,562:14,563:17,564:18,565:14,566:18,567:15,568:18,569:14,570:14,571:14,572:18,573:14,574:15,575:14,576:17,577:14,578:18,579:14,580:18,581:14,582:16,583:14,584:18,585:14,586:18,587:14,588:18,589:16,590:14,591:14,592:18,593:14,594:16,595:14,596:18,597:14,598:16,599:14,600:18,601:14,602:16,603:14,604:18,605:14,606:14,607:14,608:18,609:17,610:15,611:14,612:18,613:15,614:17,615:14,616:18,617:14,618:14,619:14,620:18,621:14,622:17,623:14,624:18,625:14,626:14,627:16,628:18,629:15,630:14,631:14,632:18,633:14,634:18,635:14,636:18,637:14,638:14,639:14,640:18,641:15,642:18,643:14,644:16,645:14,646:14,647:15,648:18,649:14,650:18,651:14,652:18,653:14,654:14,655:14,656:18,657:14,658:18,659:14,660:18,661:14,662:18,663:14,664:16,665:14,666:17,667:14,668:18,669:14,670:18,671:14,672:18,673:14,674:14,675:16,676:18,677:14,678:14,679:14,680:18,681:14,682:15,683:14,684:16,685:14,686:18,687:14,688:18,689:14,690:18,691:14,692:14,693:14,694:18,695:14,696:18,697:14,698:18,699:14,700:18,701:14,702:18,703:14,704:18,705:14,706:18,707:14,708:18,709:14,710:18,711:14,712:18,713:14,714:18,715:14,716:18,717:14,718:18,719:14,720:18,721:14,722:18,723:14,724:18,725:14,726:18,727:14,728:18,729:14,730:18,731:14,732:18,733:14,734:18,735:14,736:18,737:14,738:18,739:14,740:18,741:14,742:18,743:14,744:18,745:14,746:18,747:14,748:18,749:14,750:18,751:14,752:18,753:14,754:18,755:14,756:18,757:14,758:18,759:14,760:18,761:14,762:18,763:14,764:18,765:14,766:18,767:14,768:18,769:14,770:18,771:14,772:18,773:14,774:18,775:14,776:18,777:14,778:18,779:14,780:18,781:14,782:18,783:14,784:18,785:14,786:18,787:14,788:18,789:14,790:18,791:14,792:18,793:14,794:18,795:14,796:18,797:14,798:18,799:14,800:18,801:14,802:18,803:14,804:18,805:14,806:18,807:14,808:18,809:14,810:18,811:14,812:18,813:14,814:18,815:14,816:18,817:14,818:18,819:14,820:18,821:14,822:18,823:14,824:18,825:14,826:18,827:14,828:18,829:14,830:18,831:14,832:18,833:14,834:18,835:14,836:18,837:14,838:18,839:14,840:18,841:14,842:18,843:14,844:18,845:14,846:18,847:14,848:18,849:14,850:18,851:14,852:18,853:14,854:18,855:14,856:18,857:14,858:18,859:14,860:18,861:14,862:18,863:14,864:18,865:14,866:18,867:14,868:18,869:14,870:18,871:14,872:18,873:14,874:18,875:14,876:18,877:14,878:18,879:14,880:18,881:14,882:18,883:14,884:18,885:14,886:18,887:14,888:18,889:14,890:18,891:14,892:18,893:14,894:18,895:14,896:18,897:14,898:18,899:14,900:18,901:14,902:18,903:14,904:18,905:14,906:18,907:14,908:18,909:14,910:18,911:14,912:18,913:14,914:18,915:14,916:18,917:14,918:18,919:14,920:18,921:14,922:18,923:14,924:18,925:14,926:18,927:14,928:18,929:14,930:18,931:14,932:18,933:14,934:18,935:14,936:18,937:14,938:18,939:14,940:18,941:14,942:18,943:14,944:18,945:14,946:18,947:14,948:18,949:14,950:18,951:14,952:18,953:14,954:18,955:14,956:18,957:14,958:18,959:14,960:18,961:14,962:18,963:14,964:18,965:14,966:18,967:14,968:18,969:14,970:18,971:14,972:18,973:14,974:18,975:14,976:18,977:14,978:18,979:14,980:18,981:14,982:18,983:14,984:18,985:14,986:18,987:14,988:18,989:14,990:18,991:14,992:18,993:14,994:18,995:14,996:18,997:14,998:18,999:14,1e3:18,1001:18,1002:15,1003:16,1004:15,1005:18,1006:18,1007:18,1008:18,1009:18,1010:15,1011:16,1012:14,1013:16,1014:16,1015:18,1016:18,1017:14,1018:18,1019:14,1020:18,1021:17,1022:14,1023:14,1024:14,1025:14,1026:18,1027:14,1028:18,1029:14,1030:14,1031:14,1032:18,1033:18,1034:14,1035:14,1036:18,1037:15,1038:15,1039:16,1040:18,1041:17,1042:16,1043:14,1044:18,1045:14,1046:18,1047:14,1048:18,1049:18,1050:15,1051:18,1052:14,1053:15,1054:14,1055:14,1056:18,1057:18,1058:15,1059:14,1060:16,1061:14,1062:14,1063:15,1064:17,1065:14,1066:18,1067:14,1068:18,1069:14,1070:14,1071:16,1072:16,1073:14,1074:15,1075:14,1076:15,1077:16,1078:14,1079:14,1080:18,1081:18,1082:14,1083:16,1084:18,1085:18,1086:15,1087:18,1088:18,1089:17,1090:14,1091:18,1092:15,1093:18,1094:14,1095:16,1096:14,1097:14,1098:17,1099:14,1100:14,1101:18,1102:17,1103:14,1104:18,1105:17,1106:14,1107:18,1108:18,1109:14,1110:18,1111:14,1112:14,1113:14,1114:14,1115:17,1116:15,1117:14,1118:14,1119:17,1120:14,1121:14,1122:17,1123:18,1124:17,1125:14,1126:16,1127:14,1128:18,1129:15,1130:14,1131:14,1132:18,1133:16,1134:15,1135:18,1136:15,1137:14,1138:17,1139:16,1140:18,1141:14,1142:16,1143:14,1144:18,1145:14,1146:18,1147:14,1148:15,1149:16,1150:14,1151:14,1152:15,1153:18,1154:18,1155:14,1156:14,1157:14,1158:18,1159:18,1160:18,1161:18,1162:14,1163:18,1164:14,1165:14,1166:18,1167:14,1168:18,1169:14,1170:14,1171:17,1172:18,1173:18,1174:14,1175:17,1176:18,1177:14,1178:16,1179:18,1180:16,1181:14,1182:14,1183:18,1184:15,1185:18,1186:14,1187:18,1188:18,1189:18,1190:14,1191:14,1192:18,1193:14,1194:18,1195:14,1196:18,1197:16,1198:14,1199:14,1200:15,1201:14,1202:17,1203:14,1204:18,1205:14,1206:16,1207:18,1208:18,1209:16,1210:14,1211:18,1212:18,1213:18,1214:14,1215:14,1216:14,1217:14,1218:14,1219:14,1220:17,1221:14,1222:17,1223:16,1224:18,1225:14,1226:14,1227:18,1228:16,1229:15,1230:18,1231:18,1232:17,1233:18,1234:16,1235:15,1236:15,1237:15,1238:18,1239:17,1240:14,1241:14,1242:14,1243:17,1244:18,1245:14,1246:14,1247:14,1248:18,1249:14,1250:14,1251:14,1252:15,1253:17,1254:14,1255:14,1256:18,1257:16,1258:14,1259:18,1260:18,1261:14,1262:15,1263:14,1264:18,1265:15,1266:18,1267:14,1268:18,1269:14,1270:14,1271:17,1272:18,1273:15,1274:18,1275:14,1276:14,1277:18,1278:18,1279:15,1280:14,1281:17,1282:14,1283:18,1284:15,1285:18,1286:18,1287:17,1288:18,1289:14,1290:15,1291:15,1292:18,1293:14,1294:17,1295:14,1296:14,1297:14,1298:15,1299:14,1300:16,1301:15,1302:17,1303:18,1304:17,1305:18,1306:14,1307:18,1308:18,1309:15,1310:14,1311:14,1312:18,1313:14,1314:14,1315:14,1316:18,1317:14,1318:14,1319:18,1320:18,1321:18,1322:18,1323:14,1324:17,1325:14,1326:18,1327:18,1328:14,1329:14,1330:18,1331:14,1332:18,1333:17,1334:18,1335:14,1336:14,1337:15,1338:14,1339:14,1340:18,1341:14,1342:18,1343:17,1344:15,1345:17,1346:14,1347:15,1348:14,1349:14,1350:17,1351:14,1352:18,1353:17,1354:14,1355:14,1356:18,1357:14,1358:15,1359:18,1360:18,1361:14,1362:14,1363:14,1364:16,1365:18,1366:14,1367:14,1368:15,1369:14,1370:18,1371:18,1372:18,1373:14,1374:14,1375:18,1376:18,1377:16,1378:14,1379:17,1380:14,1381:18,1382:14,1383:14,1384:18,1385:15,1386:14,1387:17,1388:18,1389:14,1390:14,1391:14,1392:18,1393:14,1394:18,1395:14,1396:14,1397:14,1398:18,1399:14,1400:18,1401:14,1402:17,1403:18,1404:15,1405:14,1406:16,1407:14,1408:16,1409:18,1410:18,1411:18,1412:15,1413:14,1414:14,1415:18,1416:15,1417:14,1418:14,1419:14,1420:18,1421:14,1422:14,1423:18,1424:16,1425:14,1426:14,1427:14,1428:18,1429:14,1430:14,1431:15,1432:18,1433:14,1434:18,1435:14,1436:18,1437:14,1438:15,1439:18,1440:17,1441:15,1442:14,1443:15,1444:18,1445:14,1446:18,1447:15,1448:18,1449:14,1450:16,1451:14,1452:18,1453:17,1454:14,1455:14,1456:18,1457:14,1458:15,1459:14,1460:15,1461:14,1462:14,1463:15,1464:18,1465:14,1466:18,1467:14,1468:14,1469:15,1470:14,1471:18,1472:14,1473:14,1474:15,1475:14,1476:14,1477:14,1478:17,1479:14,1480:18,1481:14,1482:17,1483:18,1484:15,1485:18,1486:18,1487:18,1488:18,1489:16,1490:14,1491:14,1492:16,1493:18,1494:18,1495:14,1496:14,1497:14,1498:14,1499:16,1500:18,1501:18,1502:14,1503:18,1504:18,1505:14,1506:14,1507:18,1508:18,1509:18,1510:17,1511:14,1512:18,1513:16,1514:14,1515:14,1516:15,1517:14,1518:14,1519:16,1520:18,1521:15,1522:18,1523:14,1524:14,1525:15,1526:14,1527:18,1528:14,1529:14,1530:14,1531:18,1532:15,1533:14,1534:17,1535:17,1536:18,1537:14,1538:16,1539:18,1540:17,1541:14,1542:18,1543:14,1544:18,1545:14,1546:18,1547:18,1548:18,1549:18,1550:14,1551:14,1552:17,1553:14,1554:18,1555:15,1556:17,1557:14,1558:14,1559:18,1560:18,1561:14,1562:15,1563:14,1564:17,1565:16,1566:18,1567:14,1568:18,1569:14,1570:14,1571:14,1572:18,1573:17,1574:18,1575:14,1576:14,1577:16,1578:15,1579:15,1580:15,1581:14,1582:14,1583:18,1584:18,1585:16,1586:18,1587:14,1588:15,1589:14,1590:18,1591:18,1592:14,1593:16,1594:18,1595:15,1596:14,1597:14,1598:18,1599:14,1600:18,1601:14,1602:14,1603:17,1604:15,1605:18,1606:14,1607:14,1608:18,1609:16,1610:18,1611:14,1612:17,1613:14,1614:14,1615:18,1616:17,1617:14,1618:15,1619:15,1620:18,1621:17,1622:15,1623:17,1624:17,1625:14,1626:14,1627:14,1628:15,1629:18,1630:14,1631:17,1632:15,1633:14,1634:17,1635:17,1636:18,1637:15,1638:17,1639:15,1640:15,1641:14,1642:14,1643:14,1644:18,1645:18,1646:15,1647:14,1648:17,1649:14,1650:14,1651:18,1652:18,1653:14,1654:14,1655:16,1656:18,1657:14,1658:14,1659:18,1660:18,1661:14,1662:14,1663:16,1664:16,1665:14,1666:14,1667:14,1668:17,1669:14,1670:16,1671:14,1672:18,1673:18,1674:14,1675:14,1676:14,1677:14,1678:18,1679:14,1680:18,1681:14,1682:14,1683:14,1684:14,1685:14,1686:16,1687:14,1688:18,1689:14,1690:18,1691:14,1692:14,1693:14,1694:14,1695:14,1696:18,1697:14,1698:14,1699:17,1700:14,1701:14,1702:18,1703:14,1704:18,1705:14,1706:14,1707:14,1708:18,1709:14,1710:14,1711:14,1712:18,1713:17,1714:14,1715:14,1716:18,1717:14,1718:18,1719:14,1720:18,1721:15,1722:17,1723:14,1724:18,1725:14,1726:18,1727:14,1728:18,1729:14,1730:14,1731:14,1732:18,1733:14,1734:14,1735:14,1736:14,1737:14,1738:15,1739:14,1740:18,1741:16,1742:17,1743:14,1744:18,1745:15,1746:14,1747:14,1748:14,1749:14,1750:14,1751:14,1752:16,1753:14,1754:15,1755:17,1756:17,1757:16,1758:18,1759:18,1760:17,1761:14,1762:18,1763:15,1764:18,1765:14,1766:14,1767:14,1768:16,1769:18,1770:18,1771:14,1772:18,1773:16,1774:14,1775:14,1776:14,1777:18,1778:14,1779:14,1780:14,1781:14,1782:17,1783:14,1784:15,1785:18,1786:18,1787:14,1788:16,1789:15,1790:14,1791:18,1792:18,1793:15,1794:14,1795:14,1796:14,1797:18,1798:14,1799:18,1800:18,1801:15,1802:14,1803:18,1804:18,1805:18,1806:15,1807:14,1808:14,1809:18,1810:15,1811:17,1812:18,1813:14,1814:14,1815:17,1816:14,1817:14,1818:14,1819:14,1820:18,1821:14,1822:16,1823:18,1824:18,1825:14,1826:14,1827:18,1828:14,1829:15,1830:17,1831:15,1832:17,1833:14,1834:17,1835:18,1836:18,1837:14,1838:18,1839:14,1840:18,1841:14,1842:18,1843:14,1844:14,1845:18,1846:17,1847:17,1848:15,1849:14,1850:18,1851:14,1852:17,1853:14,1854:18,1855:14,1856:18,1857:15,1858:14,1859:18,1860:17,1861:14,1862:14,1863:15,1864:16,1865:14,1866:16,1867:14,1868:14,1869:17,1870:18,1871:14,1872:14,1873:14,1874:15,1875:14,1876:14,1877:15,1878:14,1879:18,1880:15,1881:18,1882:14,1883:14,1884:18,1885:14,1886:14,1887:18,1888:17,1889:14,1890:14,1891:14,1892:16,1893:14,1894:18,1895:14,1896:14,1897:18,1898:15,1899:15,1900:18,1901:14,1902:18,1903:14,1904:16,1905:14,1906:18,1907:14,1908:14,1909:17,1910:14,1911:14,1912:18,1913:14,1914:18,1915:18,1916:16,1917:14,1918:15,1919:14,1920:18,1921:14,1922:18,1923:16,1924:18,1925:17,1926:16,1927:14,1928:14,1929:14,1930:17,1931:14,1932:18,1933:14,1934:18,1935:18,1936:16,1937:14,1938:18,1939:18,1940:15,1941:18,1942:14,1943:14,1944:18,1945:18,1946:18,1947:14,1948:15,1949:18,1950:16,1951:14,1952:18,1953:14,1954:14,1955:14,1956:18,1957:18,1958:14,1959:17,1960:18,1961:15,1962:14,1963:15,1964:18,1965:18,1966:14,1967:14,1968:18,1969:18,1970:14,1971:18,1972:18,1973:14,1974:14,1975:15,1976:18,1977:15,1978:14,1979:14,1980:14,1981:14,1982:17,1983:18,1984:16,1985:15,1986:14,1987:18,1988:18,1989:14,1990:18,1991:15,1992:14,1993:14,1994:14,1995:14,1996:18,1997:14,1998:15,1999:18,2e3:18};function Gv(e,t){var n=function(e){var t=0;return e.forEach((function(e){e.layers.forEach((function(e){t+=e.tiles.length}))})),t}(e);if(n%3!=0)return console.log("Map Error"),{totalSkinIdx:0,infoLayer:{}};for(var r=n/3,a=[],i=Nv[t],s=0;s<r;s++){var o,c=s%i;a=O()(a).call(a,$c()(o=Array(3)).call(o,c))}Uv(a);var u=[];e.forEach((function(e){e.layers.forEach((function(e,t){for(var n=0;n<e.tiles.length;n++)u[t]?u[t].push(-1):u.push([-1])}))}));for(var l={},h=u.length-1;h>=0;h--){var d=Hv(u[h],a,h),p=d.match,f=void 0===p?0:p,m=d.layer,v=d.typeTiles,g=void 0===v?0:v;u[h]=m,l[h]={match:f,typeTiles:g,numberTiles:m.length}}for(var y=0;a.length>0;){for(var w=Fv(),S=0;S<w.length;S++){var E=Zv(w[S].toString(),u);if(3==E.length){var b=Wv(a,[]);if(-1==b){y=i;break}for(var k=0;k<E.length;k++){var x=E[k],A=x.layerIndex,C=x.tileIndex;void 0!=b&&(u[A][C]=b,Vv(a,b))}}}if(++y>i)break}u.forEach((function(e){for(var t=0;t<e.length;t++)if(-1==e[t]){var n=a.shift();void 0!=n&&(e[t]=n)}}));for(var T=0;T<u.length;T++)Uv(u[T]);return e.forEach((function(e){e.layers.forEach((function(e,t){for(var n=0;n<e.tiles.length;n++)e.tiles[n].skinIdx=u[t][n]}))})),{totalSkinIdx:i,infoLayer:l}}function Fv(){var e=[12,21,111],t=O()(e).call(e,[102,1002,1011,1101,10011,11001,201,2001]);return Uv(t),t}function Zv(e,t){var n=e.split(""),r=function(e){for(var t=e.length-1;t>0;t--)for(var n=e[t],r=0;r<n.length;r++){if(-1==n[r])return t}return 0}(t);if(!r)return[];for(var a=[],i=0;i<n.length;i++){var s=n[i];if("2"!=s)if("1"!=s)if("0"!=s);else{if(3==a.length)return a;if(r-1<0)break;r--}else{for(var o=t[r],c=0;c<o.length;c++){if(-1==o[c]){a.push({layerIndex:parseInt(r.toString()),tileIndex:c});break}}if(r-1<0)break;r--}else{for(var u=0,l=t[r],h=0;h<l.length;h++){if(-1!=l[h]);else if(a.push({layerIndex:parseInt(r.toString()),tileIndex:h}),2==++u)break}if(3==a.length)return a;if(r-1<0)break;r--}}return 3==a.length?a:[]}function Uv(e){for(var t=e.length-1;t>0;t--){var n=Math.floor(Math.random()*(t+1)),r=[e[n],e[t]];e[t]=r[0],e[n]=r[1]}}function Hv(e,t,n){var r,a=Dv[e.length]||[0],i=a[Math.floor(Math.random()*a.length)];if(0!=i&&0!=n){for(var s,o=[],c=0;c<i;c++){var u=Wv(t,o);if(-1==u)break;o.push(u,u,u),Vv(t,u),Vv(t,u),Vv(t,u)}for(var l=0;l<e.length;l++){var h,d=o[l];if(void 0==d)return{layer:e,match:i,typeTiles:O()(h=[]).call(h,new(Dn())(e)).length};e[l]=d}return{layer:e,match:i,typeTiles:O()(s=[]).call(s,new(Dn())(e)).length}}return{layer:e,match:0,typeTiles:O()(r=[]).call(r,new(Dn())(e)).length}}function Wv(e,t){for(var n={},r=0;r<e.length;r++){var a=e[r];if(n[a]=(n[a]||0)+1,n[a]>2&&!y()(t).call(t,Number(a)))return Number(a)}return-1}function Vv(e,t){var n=Ht()(e).call(e,t);-1!==n&&Qr()(e).call(e,n,1)}function Yv(e,t){var n="undefined"!==typeof C()&&P()(e)||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=function(e,t){var n;if(!e)return;if("string"===typeof e)return zv(e,t);var r=b()(n=Object.prototype.toString.call(e)).call(n,8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return x()(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return zv(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0;return function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function zv(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Kv={TOP:{x:0,y:-.5},BOTTOM:{x:0,y:.5},LEFT:{x:-.5,y:0},RIGHT:{x:.5,y:0},TOP_LEFT:{x:-.5,y:-.5},TOP_RIGHT:{x:.5,y:-.5},BOTTOM_LEFT:{x:-.5,y:.5},BOTTOM_RIGHT:{x:.5,y:.5},CENTER:{x:0,y:0},TOP_2:{x:0,y:-.075},BOTTOM_2:{x:0,y:.075},LEFT_2:{x:-.075,y:0},RIGHT_2:{x:.075,y:0},TOP_LEFT_2:{x:-.075,y:-.075},TOP_RIGHT_2:{x:.075,y:-.075},BOTTOM_LEFT_2:{x:-.075,y:.075},BOTTOM_RIGHT_2:{x:.075,y:.075}},jv=7;function Xv(e){return JSON.parse(Zt()(e))}function qv(e){return{clusters:Ne()(e).call(e,(function(e,t){var n=e.layers,r=e.x,a=e.y,i=e.type,s=function(e){var t={};return e.forEach((function(e,n){e.tiles.forEach((function(e){var r=e.x,a=e.y,i=e.skinIdx;!function(e,t){var n=t.position,r=n.x,a=n.y,i=n.z;e[i]||(e[i]={}),e[i][a]||(e[i][a]={}),e[i][a][r]=t}(t,{position:{x:r,y:a,z:n},icon:i.toString()})}))})),t}(n);return{id:"cluster-"+t,tileMap:s,x:r,y:a,type:i}}))}}function Qv(e,t){var n,r=e.x,a=e.y;return!(null==(n=t[e.z])||null==(n=n[a])||!n[r])}function Jv(e,t){var n,r,a;if(!Qv(e,t))return!1;for(var i,s=er()(n=Be()(r=Ne()(a=te()(t)).call(a,Number)).call(r,(function(t){return t>e.z}))).call(n,(function(e,t){return e-t})),o=Jn()(Kv),c=Yv(s);!(i=c()).done;)for(var u,l=i.value,h=Yv(o);!(u=h()).done;){var d,p=u.value,f=e.x+p.x,m=e.y+p.y;if(null!=(d=t[l])&&null!=(d=d[m])&&d[f])return!0}return!1}function $v(e){for(var t=[],n=0;n<e.length;n++){var r=e[n];for(var a in r){var i=r[a];if(i)for(var s in i){var o=i[s];if(o)for(var c in o){var u=o[c];if(u){var l=!Jv(u.position,r);u.inUsedTileMapIndex=n,l&&t.push(u)}}}}}return t}function eg(e,t){if(!e)return!1;var n=e.position,r=n.x,a=n.y,i=n.z;return!!Qv({x:r,y:a,z:i},t)&&(delete t[i][a][r],!0)}function tg(e){for(var t=e[e.length-1],n=0,r=0;r<e.length-1;r++){e[r]===t&&n++}return 2==n&&(e=Be()(e).call(e,(function(e){return e!==t}))),e}function ng(e){var t=0;return e.forEach((function(e){e.layers.forEach((function(e){t+=e.tiles.length}))})),t}function rg(e){return ag.apply(this,arguments)}function ag(){return ag=(0,s.Z)(h().mark((function e(t){var n,r,a,i,s,o,c,u,l,d,p,f,m,v,g;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=ng(t),r=1,a={win:0,lose:0,totalPick:0,averagePick:0,maxRack:0},i=!0,s="",o=0,c=0;case 7:if(!(c<r)){e.next=28;break}l=[],d=Xv(t),p=qv(d),f=Ne()(u=p.clusters).call(u,(function(e){var t=Xv(e);return Xv(t.tileMap)})),m=!1,v=h().mark((function e(){var t,n,r,c,u,d,p,v,g,w,S,E,b,k,x,A,C,T,P;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a.totalPick++,t=$v(f),n=[],r=[],c=[],u=h().mark((function e(){var r;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t[d],2==Be()(l).call(l,(function(e){return e==r.icon})).length&&n.push(r),e.next=5,(0,Jr.qZ)(0);case 5:case"end":return e.stop()}}),e)})),d=0;case 7:if(!(d<t.length)){e.next=12;break}return e.delegateYield(u(),"t0",9);case 9:d++,e.next=7;break;case 12:p=0;case 13:if(!(p<t.length)){e.next=31;break}if(0===(v=t[p]).inUsedTileMapIndex){e.next=17;break}return e.abrupt("continue",28);case 17:g=Xv(f),w=g[v.inUsedTileMapIndex||0],eg(v,w),S=$v(g),E=h().mark((function e(){var t;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=S[b],2==Be()(l).call(l,(function(e){return e==t.icon})).length&&r.push(v);case 3:case"end":return e.stop()}}),e)})),b=0;case 23:if(!(b<S.length)){e.next=28;break}return e.delegateYield(E(),"t1",25);case 25:b++,e.next=23;break;case 28:p++,e.next=13;break;case 31:for(k=0;k<t.length;k++)x=t[k],y()(l).call(l,x.icon)&&c.push(x);if(A=void 0,i&&(A=_()(t).call(t,(function(e){return e.icon==s})),o--),n.length>0&&(A=n[Math.floor(Math.random()*n.length)]),void 0!=(C=ig(t))&&!A&&l.length<jv-2&&(A=_()(t).call(t,(function(e){return e.icon==C})),s=C,i=!0,o=2),r.length>0&&!A&&(A=r[Math.floor(Math.random()*r.length)]),c.length>0&&!A&&(A=c[Math.floor(Math.random()*c.length)]),void 0!=(T=sg(t))&&!A&&l.length<jv-2&&(A=_()(t).call(t,(function(e){return e.icon==T})),s=T,i=!0,o=1),A||(A=t[Math.floor(Math.random()*t.length)]),0==o&&(i=!1,s=""),P=f[A.inUsedTileMapIndex||0],l.push(A.icon),eg(A,P),!((l=tg(l)).length>=jv)){e.next=51;break}return m=!0,a.lose++,e.abrupt("return",1);case 51:return l.length>a.maxRack&&(a.maxRack=l.length),e.next=54,(0,Jr.qZ)(0);case 54:case"end":return e.stop()}}),e)})),g=0;case 15:if(!(g<n)){e.next=22;break}return e.delegateYield(v(),"t0",17);case 17:if(!e.t0){e.next=19;break}return e.abrupt("break",22);case 19:g++,e.next=15;break;case 22:if(!m){e.next=24;break}return e.abrupt("continue",25);case 24:a.win++;case 25:c++,e.next=7;break;case 28:return e.abrupt("return",a);case 29:case"end":return e.stop()}}),e)}))),ag.apply(this,arguments)}var ig=function(e){var t={};for(var n in e.forEach((function(e){t[e.icon]=(t[e.icon]||0)+1})),t)if(t[n]>2)return n},sg=function(e){var t={};for(var n in e.forEach((function(e){t[e.icon]=(t[e.icon]||0)+1})),t)if(t[n]>1)return n},og=function(){function e(e,t,n){this.manager=void 0,this.levelNumber=void 0,this.data=void 0,this.solutionManager=this.getSolutionManager(),this.manager=e,this.data=t,this.levelNumber=n,this.solve()}var t=e.prototype;return t.getShuffledData=function(){return this.solve(),this.solutionManager.getSolution()},t.nextLevel=function(){this.solve()},t.solve=function(){var e=this.levelNumber-this.manager.getLevel();e<0?this.solutionManager.clear():e>1||this.startSolveAsync(e)},t.startSolveAsync=function(){var e=(0,s.Z)(h().mark((function e(t){var n,r;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,Jr.qZ)(1e3*t);case 2:return Gv(n=JSON.parse(Zt()(this.data)),this.levelNumber),e.next=6,rg(n);case 6:r=e.sent,console.warn("output",r),r.win>0&&this.solutionManager.addSolution(n);case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),t.getSolutionManager=function(){var e=[],t=[];return{addSolution:function(t){e.push(t)},getSolution:function(){var n=e.shift();return n?(console.warn("Use ready solution",n),t.push(n),n):0!==t.length?(console.warn("Use used solution",t),Phaser.Math.RND.pick(t)):void console.warn("No solution")},clear:function(){e=[],t=[]}}},e}(),cg=og,ug=function(e){function t(){for(var t,n,r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(n=e.call.apply(e,O()(t=[this]).call(t,a))||this).level=1,n.maxLevel=1,n.promisePreloadLevel={},n.loadedLevel={},n.stepLevel=GameCore.Configs.Level.step,n.dynamicLevels={},n}(0,o.Z)(t,e);var n=t.prototype;return n.getLevel=function(){return this.level},n.getMaxLevel=function(){return this.maxLevel},n.setLevel=function(e){e>this.maxLevel?this.level=this.maxLevel:this.level=e},n.setMaxLevel=function(e){this.maxLevel=e},n.nextLevel=function(){this.setLevel(this.level+1),this.preloadCurrentLevel(),Jn()(this.loadedLevel).forEach((function(e){e.shuffler.nextLevel()}))},n.preloadCurrentLevel=function(){var e=(0,s.Z)(h().mark((function e(){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.preloadLevelDataAsync(this.level);case 2:return e.next=4,this.preloadLevelDataAsync(this.level+1);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.getKeyLevel=function(e){var t;return"level_"+us()(t=GameCore.Utils.Number).call(t,e,5)},n.getLevelPath=function(e){var t,n=Math.floor((e-1)/this.stepLevel);return"level_"+us()(t=GameCore.Utils.Number).call(t,n*this.stepLevel+1,5)+"-"+this.stepLevel},n.preloadLevelDataAsync=function(){var e=(0,s.Z)(h().mark((function e(t){var n,r,a,i,s,o,c,u,l;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=GameCore.Configs.Level,!((t=t||this.level)>r.maxLevel)){e.next=4;break}return e.abrupt("return");case 4:if(a=this.getKeyLevel(t),i=this.getLevelPath(t),!(s=this.loadedLevel[a])){e.next=9;break}return e.abrupt("return",s.data);case 9:return(!y()(n=te()(this.promisePreloadLevel)).call(n,i)||r.alwaysLoadNew)&&(this.promisePreloadLevel[i]=this.preloadLevelWithRetry(t,r.retryCount,r.retryDelay)),e.next=13,this.promisePreloadLevel[i];case 13:if(o=e.sent){e.next=19;break}return delete this.promisePreloadLevel[i],e.abrupt("return");case 19:for(c=1;c<=o.length;c++)u=o[c-1],l=Math.floor((t-1)/this.stepLevel)*this.stepLevel+c,this.loadedLevel[this.getKeyLevel(l)]={data:u,shuffler:new cg(this,u,l)};return e.abrupt("return",this.loadedLevel[a].data);case 21:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),n.preloadLevelWithRetry=function(){var e=(0,s.Z)(h().mark((function e(t,n,r){var a;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===n&&(n=3),void 0===r&&(r=2e3),!(n<0)){e.next=4;break}return e.abrupt("return");case 4:return e.next=6,this.preloadLevel(t);case 6:if(a=e.sent){e.next=11;break}return e.next=10,(0,Jr.qZ)(r);case 10:return e.abrupt("return",this.preloadLevelWithRetry(t,n-1));case 11:return e.abrupt("return",a);case 12:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}(),n.preloadLevel=function(){var e=(0,s.Z)(h().mark((function e(t){var n,r,a,i;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n=this.getLevelPath(t),r=GameCore.Configs.Level.url,e.next=5,fetch(""+r+n+".json",{method:"GET"});case 5:return a=e.sent,e.next=8,a.json();case 8:return i=e.sent,e.abrupt("return",i);case 12:return e.prev=12,e.t0=e.catch(0),e.abrupt("return");case 15:case"end":return e.stop()}}),e,this,[[0,12]])})));return function(t){return e.apply(this,arguments)}}(),n.getLevelDataAsync=function(){var e=(0,s.Z)(h().mark((function e(t){var n;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.preloadLevelDataAsync(t||this.level);case 3:return n=e.sent,e.abrupt("return",n);case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return");case 10:case"end":return e.stop()}}),e,this,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),n.getLevelData=function(e){var t=this.getKeyLevel(e||this.getLevel());if(this.loadedLevel[t]){var n=this.loadedLevel[t],r=n.data,a=n.shuffler.getShuffledData();return a?(console.warn("Use shuffled data",a),this.dynamicLevels[t]=!0,a):(this.dynamicLevels[t]=!1,r)}},n.hasLevelData=function(e){var t=this.getKeyLevel(null!=e?e:this.getLevel());return void 0!==this.loadedLevel[t]},n.isLevelDynamic=function(e){var t=this.getKeyLevel(null!=e?e:this.getLevel());return void 0===this.dynamicLevels[t]&&(this.dynamicLevels[t]=!1),this.dynamicLevels[t]},t}(Phaser.Plugins.BasePlugin),lg=ug,hg=[{title:"BEGINNER",startLevel:1,endLevel:12,textures:{key:"default-resources",frame:"theme-screen/frame-turquoise"},backgroundCardPayloads:[{title:"Apple",startLevel:1,endLevel:4,locked:!1,texture:{key:"default-resources",frame:"theme-screen/card-03"},gameplayBackgroundKey:"background_3"},{title:"Banana",startLevel:5,endLevel:8,locked:!1,texture:{key:"default-resources",frame:"theme-screen/card-01"},gameplayBackgroundKey:"background_1"},{title:"Cherry",startLevel:9,endLevel:12,locked:!1,texture:{key:"default-resources",frame:"theme-screen/card-02"},gameplayBackgroundKey:"background_2"}]},{title:"RISE",startLevel:13,endLevel:80,textures:{key:"default-resources",frame:"theme-screen/frame-yellow"},backgroundCardPayloads:[{title:"Date",startLevel:13,endLevel:20,locked:!1,texture:{key:"default-resources",frame:"theme-screen/card-03"},gameplayBackgroundKey:"background_3"},{title:"Fig",startLevel:21,endLevel:28,locked:!1,texture:{key:"default-resources",frame:"theme-screen/card-01"},gameplayBackgroundKey:"background_1"},{title:"Grape",startLevel:29,endLevel:36,locked:!1,texture:{key:"default-resources",frame:"theme-screen/card-02"},gameplayBackgroundKey:"background_2"},{title:"Kiwi",startLevel:37,endLevel:44,locked:!1,texture:{key:"default-resources",frame:"theme-screen/card-03"},gameplayBackgroundKey:"background_3"},{title:"Lemon",startLevel:45,endLevel:80,locked:!1,texture:{key:"default-resources",frame:"theme-screen/card-01"},gameplayBackgroundKey:"background_1"}]},{title:"PHILIPPINES",startLevel:81,endLevel:160,textures:{key:"default-resources",frame:"theme-screen/frame-violet"},backgroundCardPayloads:[{title:"Mango",startLevel:81,endLevel:96,locked:!1,texture:{key:"default-resources",frame:"theme-screen/card-03"},gameplayBackgroundKey:"background_3"},{title:"Orange",startLevel:97,endLevel:112,locked:!1,texture:{key:"default-resources",frame:"theme-screen/card-01"},gameplayBackgroundKey:"background_1"},{title:"Papaya",startLevel:113,endLevel:128,locked:!1,texture:{key:"default-resources",frame:"theme-screen/card-02"},gameplayBackgroundKey:"background_2"},{title:"Pear",startLevel:129,endLevel:144,locked:!1,texture:{key:"default-resources",frame:"theme-screen/card-03"},gameplayBackgroundKey:"background_3"},{title:"Plum",startLevel:145,endLevel:160,locked:!1,texture:{key:"default-resources",frame:"theme-screen/card-01"},gameplayBackgroundKey:"background_1"}]},{title:"BRAZIL",startLevel:161,endLevel:240,textures:{key:"default-resources",frame:"theme-screen/frame-green"},backgroundCardPayloads:[{title:"Raspberry",startLevel:161,endLevel:176,locked:!1,texture:{key:"default-resources",frame:"theme-screen/card-03"},gameplayBackgroundKey:"background_3"},{title:"Strawberry",startLevel:177,endLevel:192,locked:!1,texture:{key:"default-resources",frame:"theme-screen/card-01"},gameplayBackgroundKey:"background_1"},{title:"Tangerine",startLevel:193,endLevel:208,locked:!1,texture:{key:"default-resources",frame:"theme-screen/card-02"},gameplayBackgroundKey:"background_2"},{title:"Watermelon",startLevel:209,endLevel:224,locked:!1,texture:{key:"default-resources",frame:"theme-screen/card-03"},gameplayBackgroundKey:"background_3"},{title:"Pineapple",startLevel:225,endLevel:240,locked:!1,texture:{key:"default-resources",frame:"theme-screen/card-01"},gameplayBackgroundKey:"background_1"}]},{title:"SWITZERLAND",startLevel:241,endLevel:320,textures:{key:"default-resources",frame:"theme-screen/frame-turquoise"},backgroundCardPayloads:[{title:"Peach",startLevel:241,endLevel:256,locked:!1,texture:{key:"default-resources",frame:"theme-screen/card-03"},gameplayBackgroundKey:"background_3"},{title:"Apricot",startLevel:257,endLevel:272,locked:!1,texture:{key:"default-resources",frame:"theme-screen/card-01"},gameplayBackgroundKey:"background_1"},{title:"Avocado",startLevel:273,endLevel:288,locked:!1,texture:{key:"default-resources",frame:"theme-screen/card-02"},gameplayBackgroundKey:"background_2"},{title:"Blackberry",startLevel:289,endLevel:304,locked:!1,texture:{key:"default-resources",frame:"theme-screen/card-03"},gameplayBackgroundKey:"background_3"},{title:"Blueberry",startLevel:305,endLevel:320,locked:!1,texture:{key:"default-resources",frame:"theme-screen/card-01"},gameplayBackgroundKey:"background_1"}]},{title:"INDONESIA",startLevel:321,endLevel:400,textures:{key:"default-resources",frame:"theme-screen/frame-yellow"},backgroundCardPayloads:[{title:"Cantaloupe",startLevel:321,endLevel:336,locked:!1,texture:{key:"default-resources",frame:"theme-screen/card-03"},gameplayBackgroundKey:"background_3"},{title:"Coconut",startLevel:337,endLevel:352,locked:!1,texture:{key:"default-resources",frame:"theme-screen/card-01"},gameplayBackgroundKey:"background_1"},{title:"Grapefruit",startLevel:353,endLevel:368,locked:!1,texture:{key:"default-resources",frame:"theme-screen/card-02"},gameplayBackgroundKey:"background_2"},{title:"Guava",startLevel:369,endLevel:384,locked:!1,texture:{key:"default-resources",frame:"theme-screen/card-03"},gameplayBackgroundKey:"background_3"},{title:"Kumquat",startLevel:385,endLevel:400,locked:!1,texture:{key:"default-resources",frame:"theme-screen/card-01"},gameplayBackgroundKey:"background_1"}]},{title:"EGYPT",startLevel:401,endLevel:480,textures:{key:"default-resources",frame:"theme-screen/frame-violet"},backgroundCardPayloads:[{title:"Lychee",startLevel:401,endLevel:416,locked:!1,texture:{key:"default-resources",frame:"theme-screen/card-03"},gameplayBackgroundKey:"background_3"},{title:"Olive",startLevel:417,endLevel:432,locked:!1,texture:{key:"default-resources",frame:"theme-screen/card-01"},gameplayBackgroundKey:"background_1"},{title:"Pomegranate",startLevel:433,endLevel:448,locked:!1,texture:{key:"default-resources",frame:"theme-screen/card-02"},gameplayBackgroundKey:"background_2"},{title:"Rhubarb",startLevel:449,endLevel:464,locked:!1,texture:{key:"default-resources",frame:"theme-screen/card-03"},gameplayBackgroundKey:"background_3"},{title:"Starfruit",startLevel:465,endLevel:480,locked:!1,texture:{key:"default-resources",frame:"theme-screen/card-01"},gameplayBackgroundKey:"background_1"}]},{title:"FRANCE",startLevel:481,endLevel:560,textures:{key:"default-resources",frame:"theme-screen/frame-green"},backgroundCardPayloads:[{title:"Tamarind",startLevel:481,endLevel:496,locked:!1,texture:{key:"default-resources",frame:"theme-screen/card-03"},gameplayBackgroundKey:"background_3"},{title:"Jackfruit",startLevel:497,endLevel:512,locked:!1,texture:{key:"default-resources",frame:"theme-screen/card-01"},gameplayBackgroundKey:"background_1"},{title:"Durian",startLevel:513,endLevel:528,locked:!1,texture:{key:"default-resources",frame:"theme-screen/card-02"},gameplayBackgroundKey:"background_2"},{title:"Bergamot",startLevel:529,endLevel:544,locked:!1,texture:{key:"default-resources",frame:"theme-screen/card-03"},gameplayBackgroundKey:"background_3"},{title:"Cranberry",startLevel:545,endLevel:560,locked:!1,texture:{key:"default-resources",frame:"theme-screen/card-01"},gameplayBackgroundKey:"background_1"}]},{title:"ITALY",startLevel:561,endLevel:640,textures:{key:"default-resources",frame:"theme-screen/frame-turquoise"},backgroundCardPayloads:[{title:"Dewberry",startLevel:561,endLevel:576,locked:!1,texture:{key:"default-resources",frame:"theme-screen/card-03"},gameplayBackgroundKey:"background_3"},{title:"Gala",startLevel:577,endLevel:592,locked:!1,texture:{key:"default-resources",frame:"theme-screen/card-01"},gameplayBackgroundKey:"background_1"},{title:"Lingonberry",startLevel:593,endLevel:608,locked:!1,texture:{key:"default-resources",frame:"theme-screen/card-02"},gameplayBackgroundKey:"background_2"},{title:"Longan",startLevel:609,endLevel:624,locked:!1,texture:{key:"default-resources",frame:"theme-screen/card-03"},gameplayBackgroundKey:"background_3"},{title:"Mamey",startLevel:625,endLevel:640,locked:!1,texture:{key:"default-resources",frame:"theme-screen/card-01"},gameplayBackgroundKey:"background_1"}]},{title:"MEXICO",startLevel:641,endLevel:720,textures:{key:"default-resources",frame:"theme-screen/frame-yellow"},backgroundCardPayloads:[{title:"Mandarin",startLevel:641,endLevel:656,locked:!1,texture:{key:"default-resources",frame:"theme-screen/card-03"},gameplayBackgroundKey:"background_3"},{title:"Mulberry",startLevel:657,endLevel:672,locked:!1,texture:{key:"default-resources",frame:"theme-screen/card-01"},gameplayBackgroundKey:"background_1"},{title:"Sapodilla",startLevel:673,endLevel:688,locked:!1,texture:{key:"default-resources",frame:"theme-screen/card-02"},gameplayBackgroundKey:"background_2"},{title:"Soursop",startLevel:689,endLevel:704,locked:!1,texture:{key:"default-resources",frame:"theme-screen/card-03"},gameplayBackgroundKey:"background_3"},{title:"Acerola",startLevel:705,endLevel:720,locked:!1,texture:{key:"default-resources",frame:"theme-screen/card-01"},gameplayBackgroundKey:"background_1"}]},{title:"CANADA",startLevel:721,endLevel:800,textures:{key:"default-resources",frame:"theme-screen/frame-violet"},backgroundCardPayloads:[{title:"Cherimoya",startLevel:721,endLevel:736,locked:!1,texture:{key:"default-resources",frame:"theme-screen/card-03"},gameplayBackgroundKey:"background_3"},{title:"Kaffir",startLevel:737,endLevel:752,locked:!1,texture:{key:"default-resources",frame:"theme-screen/card-01"},gameplayBackgroundKey:"background_1"},{title:"Loquat",startLevel:753,endLevel:768,locked:!1,texture:{key:"default-resources",frame:"theme-screen/card-02"},gameplayBackgroundKey:"background_2"},{title:"Mangosteen",startLevel:769,endLevel:784,locked:!1,texture:{key:"default-resources",frame:"theme-screen/card-03"},gameplayBackgroundKey:"background_3"},{title:"Pawpaw",startLevel:785,endLevel:800,locked:!1,texture:{key:"default-resources",frame:"theme-screen/card-01"},gameplayBackgroundKey:"background_1"}]},{title:"JAPAN",startLevel:801,endLevel:880,textures:{key:"default-resources",frame:"theme-screen/frame-green"},backgroundCardPayloads:[{title:"Persimmon",startLevel:801,endLevel:816,locked:!1,texture:{key:"default-resources",frame:"theme-screen/card-03"},gameplayBackgroundKey:"background_3"},{title:"Pitanga",startLevel:817,endLevel:832,locked:!1,texture:{key:"default-resources",frame:"theme-screen/card-01"},gameplayBackgroundKey:"background_1"},{title:"Plantain",startLevel:833,endLevel:848,locked:!1,texture:{key:"default-resources",frame:"theme-screen/card-02"},gameplayBackgroundKey:"background_2"},{title:"Raisin",startLevel:849,endLevel:864,locked:!1,texture:{key:"default-resources",frame:"theme-screen/card-03"},gameplayBackgroundKey:"background_3"},{title:"Salmonberry",startLevel:865,endLevel:880,locked:!1,texture:{key:"default-resources",frame:"theme-screen/card-01"},gameplayBackgroundKey:"background_1"}]},{title:"UNITED KINGDOM",startLevel:881,endLevel:960,textures:{key:"default-resources",frame:"theme-screen/frame-turquoise"},backgroundCardPayloads:[{title:"Satsuma",startLevel:881,endLevel:896,locked:!1,texture:{key:"default-resources",frame:"theme-screen/card-03"},gameplayBackgroundKey:"background_3"},{title:"Surinam",startLevel:897,endLevel:912,locked:!1,texture:{key:"default-resources",frame:"theme-screen/card-01"},gameplayBackgroundKey:"background_1"},{title:"Nance",startLevel:913,endLevel:928,locked:!1,texture:{key:"default-resources",frame:"theme-screen/card-02"},gameplayBackgroundKey:"background_2"},{title:"Kei",startLevel:929,endLevel:944,locked:!1,texture:{key:"default-resources",frame:"theme-screen/card-03"},gameplayBackgroundKey:"background_3"},{title:"Mamey",startLevel:945,endLevel:960,locked:!1,texture:{key:"default-resources",frame:"theme-screen/card-01"},gameplayBackgroundKey:"background_1"}]},{title:"SOUTH KOREA",startLevel:961,endLevel:1040,textures:{key:"default-resources",frame:"theme-screen/frame-yellow"},backgroundCardPayloads:[{title:"Prickly",startLevel:961,endLevel:976,locked:!1,texture:{key:"default-resources",frame:"theme-screen/card-03"},gameplayBackgroundKey:"background_3"},{title:"Rambutan",startLevel:977,endLevel:992,locked:!1,texture:{key:"default-resources",frame:"theme-screen/card-01"},gameplayBackgroundKey:"background_1"},{title:"Rose",startLevel:993,endLevel:1008,locked:!1,texture:{key:"default-resources",frame:"theme-screen/card-02"},gameplayBackgroundKey:"background_2"},{title:"Star",startLevel:1009,endLevel:1024,locked:!1,texture:{key:"default-resources",frame:"theme-screen/card-03"},gameplayBackgroundKey:"background_3"},{title:"Oak",startLevel:1025,endLevel:1040,locked:!1,texture:{key:"default-resources",frame:"theme-screen/card-01"},gameplayBackgroundKey:"background_1"}]},{title:"SPAIN",startLevel:1041,endLevel:1120,textures:{key:"default-resources",frame:"theme-screen/frame-violet"},backgroundCardPayloads:[{title:"Pine",startLevel:1041,endLevel:1056,locked:!1,texture:{key:"default-resources",frame:"theme-screen/card-03"},gameplayBackgroundKey:"background_3"},{title:"Birch",startLevel:1057,endLevel:1072,locked:!1,texture:{key:"default-resources",frame:"theme-screen/card-01"},gameplayBackgroundKey:"background_1"},{title:"Maple",startLevel:1073,endLevel:1088,locked:!1,texture:{key:"default-resources",frame:"theme-screen/card-02"},gameplayBackgroundKey:"background_2"},{title:"Cedar",startLevel:1089,endLevel:1104,locked:!1,texture:{key:"default-resources",frame:"theme-screen/card-03"},gameplayBackgroundKey:"background_3"},{title:"Aspen",startLevel:1105,endLevel:1120,locked:!1,texture:{key:"default-resources",frame:"theme-screen/card-01"},gameplayBackgroundKey:"background_1"}]},{title:"CHINA",startLevel:1121,endLevel:1200,textures:{key:"default-resources",frame:"theme-screen/frame-green"},backgroundCardPayloads:[{title:"Elm",startLevel:1121,endLevel:1136,locked:!1,texture:{key:"default-resources",frame:"theme-screen/card-03"},gameplayBackgroundKey:"background_3"},{title:"Fir",startLevel:1137,endLevel:1152,locked:!1,texture:{key:"default-resources",frame:"theme-screen/card-01"},gameplayBackgroundKey:"background_1"},{title:"Willow",startLevel:1153,endLevel:1168,locked:!1,texture:{key:"default-resources",frame:"theme-screen/card-02"},gameplayBackgroundKey:"background_2"},{title:"Cherry",startLevel:1169,endLevel:1184,locked:!1,texture:{key:"default-resources",frame:"theme-screen/card-03"},gameplayBackgroundKey:"background_3"},{title:"Redwood",startLevel:1185,endLevel:1200,locked:!1,texture:{key:"default-resources",frame:"theme-screen/card-01"},gameplayBackgroundKey:"background_1"}]},{title:"GREECE",startLevel:1201,endLevel:1280,textures:{key:"default-resources",frame:"theme-screen/frame-turquoise"},backgroundCardPayloads:[{title:"Sequoia",startLevel:1201,endLevel:1216,locked:!1,texture:{key:"default-resources",frame:"theme-screen/card-03"},gameplayBackgroundKey:"background_3"},{title:"Eucalyptus",startLevel:1217,endLevel:1232,locked:!1,texture:{key:"default-resources",frame:"theme-screen/card-01"},gameplayBackgroundKey:"background_1"},{title:"Sycamore",startLevel:1233,endLevel:1248,locked:!1,texture:{key:"default-resources",frame:"theme-screen/card-02"},gameplayBackgroundKey:"background_2"},{title:"Magnolia",startLevel:1249,endLevel:1264,locked:!1,texture:{key:"default-resources",frame:"theme-screen/card-03"},gameplayBackgroundKey:"background_3"},{title:"Hickory",startLevel:1265,endLevel:1280,locked:!1,texture:{key:"default-resources",frame:"theme-screen/card-01"},gameplayBackgroundKey:"background_1"}]},{title:"UNITED STATES",startLevel:1281,endLevel:1360,textures:{key:"default-resources",frame:"theme-screen/frame-yellow"},backgroundCardPayloads:[{title:"Alder",startLevel:1281,endLevel:1296,locked:!1,texture:{key:"default-resources",frame:"theme-screen/card-03"},gameplayBackgroundKey:"background_3"},{title:"Chestnut",startLevel:1297,endLevel:1312,locked:!1,texture:{key:"default-resources",frame:"theme-screen/card-01"},gameplayBackgroundKey:"background_1"},{title:"Juniper",startLevel:1313,endLevel:1328,locked:!1,texture:{key:"default-resources",frame:"theme-screen/card-02"},gameplayBackgroundKey:"background_2"},{title:"Palm",startLevel:1329,endLevel:1344,locked:!1,texture:{key:"default-resources",frame:"theme-screen/card-03"},gameplayBackgroundKey:"background_3"},{title:"Linden",startLevel:1345,endLevel:1360,locked:!1,texture:{key:"default-resources",frame:"theme-screen/card-01"},gameplayBackgroundKey:"background_1"}]},{title:"GERMANY",startLevel:1361,endLevel:1440,textures:{key:"default-resources",frame:"theme-screen/frame-violet"},backgroundCardPayloads:[{title:"Ash",startLevel:1361,endLevel:1376,locked:!1,texture:{key:"default-resources",frame:"theme-screen/card-03"},gameplayBackgroundKey:"background_3"},{title:"Cypress",startLevel:1377,endLevel:1392,locked:!1,texture:{key:"default-resources",frame:"theme-screen/card-01"},gameplayBackgroundKey:"background_1"},{title:"Poplar",startLevel:1393,endLevel:1408,locked:!1,texture:{key:"default-resources",frame:"theme-screen/card-02"},gameplayBackgroundKey:"background_2"},{title:"Mahogany",startLevel:1409,endLevel:1424,locked:!1,texture:{key:"default-resources",frame:"theme-screen/card-03"},gameplayBackgroundKey:"background_3"},{title:"Teak",startLevel:1425,endLevel:1440,locked:!1,texture:{key:"default-resources",frame:"theme-screen/card-01"},gameplayBackgroundKey:"background_1"}]},{title:"IRELAND",startLevel:1441,endLevel:1520,textures:{key:"default-resources",frame:"theme-screen/frame-green"},backgroundCardPayloads:[{title:"Balsa",startLevel:1441,endLevel:1456,locked:!1,texture:{key:"default-resources",frame:"theme-screen/card-03"},gameplayBackgroundKey:"background_3"},{title:"Rosewood",startLevel:1457,endLevel:1472,locked:!1,texture:{key:"default-resources",frame:"theme-screen/card-01"},gameplayBackgroundKey:"background_1"},{title:"Zebrawood",startLevel:1473,endLevel:1488,locked:!1,texture:{key:"default-resources",frame:"theme-screen/card-02"},gameplayBackgroundKey:"background_2"},{title:"Ironwood",startLevel:1489,endLevel:1504,locked:!1,texture:{key:"default-resources",frame:"theme-screen/card-03"},gameplayBackgroundKey:"background_3"},{title:"Ebony",startLevel:1505,endLevel:1520,locked:!1,texture:{key:"default-resources",frame:"theme-screen/card-01"},gameplayBackgroundKey:"background_1"}]},{title:"SAUDI ARABIA",startLevel:1521,endLevel:1600,textures:{key:"default-resources",frame:"theme-screen/frame-turquoise"},backgroundCardPayloads:[{title:"Boxwood",startLevel:1521,endLevel:1536,locked:!1,texture:{key:"default-resources",frame:"theme-screen/card-03"},gameplayBackgroundKey:"background_3"},{title:"Holly",startLevel:1537,endLevel:1552,locked:!1,texture:{key:"default-resources",frame:"theme-screen/card-01"},gameplayBackgroundKey:"background_1"},{title:"Acacia",startLevel:1553,endLevel:1568,locked:!1,texture:{key:"default-resources",frame:"theme-screen/card-02"},gameplayBackgroundKey:"background_2"},{title:"Elder",startLevel:1569,endLevel:1584,locked:!1,texture:{key:"default-resources",frame:"theme-screen/card-03"},gameplayBackgroundKey:"background_3"},{title:"Hackberry",startLevel:1585,endLevel:1600,locked:!1,texture:{key:"default-resources",frame:"theme-screen/card-01"},gameplayBackgroundKey:"background_1"}]},{title:"NORWAY",startLevel:1601,endLevel:1680,textures:{key:"default-resources",frame:"theme-screen/frame-yellow"},backgroundCardPayloads:[{title:"Catalpa",startLevel:1601,endLevel:1616,locked:!1,texture:{key:"default-resources",frame:"theme-screen/card-03"},gameplayBackgroundKey:"background_3"},{title:"Gingko",startLevel:1617,endLevel:1632,locked:!1,texture:{key:"default-resources",frame:"theme-screen/card-01"},gameplayBackgroundKey:"background_1"},{title:"Mango",startLevel:1633,endLevel:1648,locked:!1,texture:{key:"default-resources",frame:"theme-screen/card-02"},gameplayBackgroundKey:"background_2"},{title:"Bamboo",startLevel:1649,endLevel:1664,locked:!1,texture:{key:"default-resources",frame:"theme-screen/card-03"},gameplayBackgroundKey:"background_3"},{title:"Laurel",startLevel:1665,endLevel:1680,locked:!1,texture:{key:"default-resources",frame:"theme-screen/card-01"},gameplayBackgroundKey:"background_1"}]},{title:"AUSTRALIA",startLevel:1681,endLevel:1760,textures:{key:"default-resources",frame:"theme-screen/frame-violet"},backgroundCardPayloads:[{title:"Olive",startLevel:1681,endLevel:1696,locked:!1,texture:{key:"default-resources",frame:"theme-screen/card-03"},gameplayBackgroundKey:"background_3"},{title:"Pomegranate",startLevel:1697,endLevel:1712,locked:!1,texture:{key:"default-resources",frame:"theme-screen/card-01"},gameplayBackgroundKey:"background_1"},{title:"Rose",startLevel:1713,endLevel:1728,locked:!1,texture:{key:"default-resources",frame:"theme-screen/card-02"},gameplayBackgroundKey:"background_2"},{title:"Tulip",startLevel:1729,endLevel:1744,locked:!1,texture:{key:"default-resources",frame:"theme-screen/card-03"},gameplayBackgroundKey:"background_3"},{title:"Lily",startLevel:1745,endLevel:1760,locked:!1,texture:{key:"default-resources",frame:"theme-screen/card-01"},gameplayBackgroundKey:"background_1"}]},{title:"THAILAND",startLevel:1761,endLevel:1840,textures:{key:"default-resources",frame:"theme-screen/frame-green"},backgroundCardPayloads:[{title:"Orchid",startLevel:1761,endLevel:1776,locked:!1,texture:{key:"default-resources",frame:"theme-screen/card-03"},gameplayBackgroundKey:"background_3"},{title:"Sunflower",startLevel:1777,endLevel:1792,locked:!1,texture:{key:"default-resources",frame:"theme-screen/card-01"},gameplayBackgroundKey:"background_1"},{title:"Daisy",startLevel:1793,endLevel:1808,locked:!1,texture:{key:"default-resources",frame:"theme-screen/card-02"},gameplayBackgroundKey:"background_2"},{title:"Peony",startLevel:1809,endLevel:1824,locked:!1,texture:{key:"default-resources",frame:"theme-screen/card-03"},gameplayBackgroundKey:"background_3"},{title:"Daffodil",startLevel:1825,endLevel:1840,locked:!1,texture:{key:"default-resources",frame:"theme-screen/card-01"},gameplayBackgroundKey:"background_1"}]},{title:"POLAND",startLevel:1841,endLevel:1920,textures:{key:"default-resources",frame:"theme-screen/frame-turquoise"},backgroundCardPayloads:[{title:"Violet",startLevel:1841,endLevel:1856,locked:!1,texture:{key:"default-resources",frame:"theme-screen/card-03"},gameplayBackgroundKey:"background_3"},{title:"Marigold",startLevel:1857,endLevel:1872,locked:!1,texture:{key:"default-resources",frame:"theme-screen/card-01"},gameplayBackgroundKey:"background_1"},{title:"Lavender",startLevel:1873,endLevel:1888,locked:!1,texture:{key:"default-resources",frame:"theme-screen/card-02"},gameplayBackgroundKey:"background_2"},{title:"Carnation",startLevel:1889,endLevel:1904,locked:!1,texture:{key:"default-resources",frame:"theme-screen/card-03"},gameplayBackgroundKey:"background_3"},{title:"Chrysanthemum",startLevel:1905,endLevel:1920,locked:!1,texture:{key:"default-resources",frame:"theme-screen/card-01"},gameplayBackgroundKey:"background_1"}]},{title:"SWEDEN",startLevel:1921,endLevel:2e3,textures:{key:"default-resources",frame:"theme-screen/frame-yellow"},backgroundCardPayloads:[{title:"Hibiscus",startLevel:1921,endLevel:1936,locked:!1,texture:{key:"default-resources",frame:"theme-screen/card-03"},gameplayBackgroundKey:"background_3"},{title:"Gardenia",startLevel:1937,endLevel:1952,locked:!1,texture:{key:"default-resources",frame:"theme-screen/card-01"},gameplayBackgroundKey:"background_1"},{title:"Camellia",startLevel:1953,endLevel:1968,locked:!1,texture:{key:"default-resources",frame:"theme-screen/card-02"},gameplayBackgroundKey:"background_2"},{title:"Hollyhock",startLevel:1969,endLevel:1984,locked:!1,texture:{key:"default-resources",frame:"theme-screen/card-03"},gameplayBackgroundKey:"background_3"},{title:"Jasmine",startLevel:1985,endLevel:2e3,locked:!1,texture:{key:"default-resources",frame:"theme-screen/card-01"},gameplayBackgroundKey:"background_1"}]}];function dg(e,t){var n="undefined"!==typeof C()&&P()(e)||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=function(e,t){var n;if(!e)return;if("string"===typeof e)return pg(e,t);var r=b()(n=Object.prototype.toString.call(e)).call(n,8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return x()(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return pg(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0;return function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function pg(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var fg=te()(Pr.Z.GP_BACKGROUND.KEYS),mg=function(e){function t(){for(var t,n,r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(n=e.call.apply(e,O()(t=[this]).call(t,a))||this).fixedPayloads=void 0,n}(0,o.Z)(t,e);var n=t.prototype;return n.init=function(){this.fixedPayloads=hg},n.getAllScrollerBlockInfo=function(){var e;return Ne()(e=this.fixedPayloads).call(e,(function(e,t){return{id:String(t)}}))},n.getScrollerBlockPayload=function(e){var t=Number(e),n=this.fixedPayloads[t],r=this.getCurrentGameLevel();return n.backgroundCardPayloads.forEach((function(e){e.locked=r<e.startLevel})),(0,i.Z)({},n)},n.getCurrentGameLevel=function(){return this.game.level.getLevel()},n.getCurrentBlockId=function(){for(var e=this.getCurrentGameLevel(),t=0;t<this.fixedPayloads.length;t++){var n=this.fixedPayloads[t],r=n.startLevel,a=n.endLevel;if(e>=r&&e<=a)return String(t)}return String(this.fixedPayloads.length-1)},n.getBlockIdByLevel=function(e){for(var t=0;t<this.fixedPayloads.length;t++){var n=this.fixedPayloads[t],r=n.startLevel,a=n.endLevel;if(e>=r&&e<=a)return String(t)}return String(this.fixedPayloads.length-1)},n.getMapContentByLevel=function(e){for(var t,n=this.getBlockIdByLevel(e),r=this.getScrollerBlockPayload(n),a=r.title,i=dg(r.backgroundCardPayloads);!(t=i()).done;){var s=t.value,o=s.title,c=s.startLevel,u=s.endLevel,l=s.gameplayBackgroundKey;if(e>=c&&e<=u)return{title:a,subtitle:o,startLevel:c,endLevel:u,gameplayBackgroundKey:l}}},n.getCurBgKeyOfCurrentBlock=function(){for(var e,t=this.getCurrentGameLevel(),n=this.getBlockIdByLevel(t),r=dg(this.getScrollerBlockPayload(n).backgroundCardPayloads);!(e=r()).done;){var a=e.value,i=a.startLevel,s=a.endLevel;if(t>=i&&t<=s)return a.gameplayBackgroundKey}return fg[0]},n.getNextBgKeyOfCurrentBlock=function(){for(var e,t=this.getCurrentGameLevel(),n=this.getCurrentBlockId(),r=-1,a=dg(this.getScrollerBlockPayload(n).backgroundCardPayloads);!(e=a()).done;){var i=e.value,s=i.startLevel,o=i.endLevel;if(t>=s&&t<=o){r=o+1;break}}var c=this.getMapContentByLevel(r);return c?c.gameplayBackgroundKey:fg[0]},t}(Phaser.Plugins.BasePlugin),vg=mg,gg=["Enable"],yg=function(e){function t(){return e.apply(this,arguments)||this}(0,o.Z)(t,e);var r=t.prototype;return r.boot=function(){var t=(0,s.Z)(h().mark((function t(){return h().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.prototype.boot.call(this),this.addExtraGameObjectMethods(),this.addExtraFBInstantFunctions(),this.addPlugins(),t.next=6,this.addDevPlugins();case 6:return t.next=8,this.initAdsAsync();case 8:this.addScenes(),this.addDevScenes(),this.initWorld(),this.initStorage(),this.initLanguage(),this.initVisibilityChangeHandler(),this.initUtils(),this.initRollbar(),this.initConsole(),this.initDebugger(),this.initStatistics(),this.initParticleEditor(),this.initProfilerPlugin(),this.initAdaptivePerformance(),this.initCanvasRecorderPlugin();case 23:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),r.start=function(){e.prototype.start.call(this)},r.addExtraGameObjectMethods=function(){var e=new S(this);e.addKillRevive(),e.addKillReviveGroup(),e.addDrawDebugBox(),e.addSetWorldSize(),e.addSetWorldSizeForContainer(),e.addGetWorldPosition(),e.addHighQuality(),e.addSetLineHeightForBitmapText(),e.addGetLocalPosition(),e.addSetSizeBasedOnDpr(),e.addWaitPromises(),e.addDrawDynamicDebugBox()},r.addExtraFBInstantFunctions=function(){var e=new d.Z(this.facebook);this.facebook.getLocale=e.getLocale,this.facebook.shareAsync=e.shareAsync,this.facebook.inviteAsync=e.inviteAsync,this.facebook.switchAsync=e.switchAsync,this.facebook.chooseAsync=e.chooseAsync,this.facebook.createAsync=e.createAsync,this.facebook.sendMessage=e.sendMessage,this.facebook.getContextID=e.getContextID,this.facebook.getPlayerToken=e.getPlayerToken,this.facebook.matchPlayerAsync=e.matchPlayerAsync,this.facebook.getContextPlayers=e.getContextPlayers,this.facebook.setLoadingProgress=e.setLoadingProgress,this.facebook.attemptToAddShortcut=e.attemptToAddShortcut,this.facebook.attemptToSubscribeBot=e.attemptToSubscribeBot,this.facebook.postSessionScoreAsync=e.postSessionScoreAsync,this.facebook.getRewardedVideoAsync=e.getRewardedVideoAsync,this.facebook.sendNotificationAsync=e.sendNotificationAsync,this.facebook.getInterstitialAdAsync=e.getInterstitialAdAsync,this.facebook.isSupportedAPI=e.isSupportedAPI,e.injectTournament(),this.facebook.progressLoading=new v(this)},r.addPlugins=function(){this.plugins.install("Storage",pr,!0,"storage"),this.plugins.install("Rollbar",$t,!0,"rollbar"),this.plugins.install("AdsManager",z,!0,"ads"),this.plugins.install("AuthManager",Se,!0,"auth"),this.plugins.install("AudioManager",ue,!0,"audio"),this.plugins.install("WorldManager",kr,!0,"world"),this.plugins.install("PlayerManager",It,!0,"player"),this.plugins.install("ProfileManager",Gt,!0,"profile"),this.plugins.install("LanguageManager",Wr,!0,"lang"),this.plugins.install("AnalyticsManager",Q,!0,"analytics"),this.plugins.install("AdaptivePerformance",_e,!0,"performance"),this.plugins.install("VisibilityChangeHandler",Rv,!0,"visibility"),this.plugins.install("LevelManager",lg,!0,"level"),this.plugins.install("MapManager",vg,!0,"map"),this.plugins.installScenePlugin("textStyler",yr,"textStyler"),this.plugins.installScenePlugin("ScreenManager",hn,"screen"),this.plugins.installScenePlugin("FrameCapture",Te,"frameCapture"),window.SpinePlugin&&this.plugins.installScenePlugin("SpinePlugin",SpinePlugin,"spine"),this.storage=this.plugins.get("Storage"),this.rollbar=this.plugins.get("Rollbar"),this.ads=this.plugins.get("AdsManager"),this.auth=this.plugins.get("AuthManager"),this.audio=this.plugins.get("AudioManager"),this.world=this.plugins.get("WorldManager"),this.player=this.plugins.get("PlayerManager"),this.lang=this.plugins.get("LanguageManager"),this.profile=this.plugins.get("ProfileManager"),this.analytics=this.plugins.get("AnalyticsManager"),this.performance=this.plugins.get("AdaptivePerformance"),this.visibility=this.plugins.get("VisibilityChangeHandler"),this.level=this.plugins.get("LevelManager"),this.map=this.plugins.get("MapManager")},r.addDevPlugins=function(){var e=(0,s.Z)(h().mark((function e(){var t,r,a,i,s,o;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(GameCore.Utils.Valid.isDebugger()){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,Promise.all([n.e(7),n.e(942)]).then(n.bind(n,590));case 4:return t=e.sent.default,e.next=7,Promise.all([n.e(498),n.e(739),n.e(530)]).then(n.bind(n,591));case 7:return r=e.sent.default,e.next=10,n.e(401).then(n.bind(n,592));case 10:return a=e.sent.default,e.next=13,Promise.all([n.e(498),n.e(123)]).then(n.bind(n,593));case 13:return i=e.sent.default,e.next=16,Promise.all([n.e(498),n.e(803)]).then(n.bind(n,594));case 16:return s=e.sent.default,e.next=19,Promise.all([n.e(498),n.e(616),n.e(613)]).then(n.bind(n,595));case 19:o=e.sent.default,this.plugins.install("Console",t,!0,"console"),this.plugins.install("Debugger",r,!0,"debugger"),this.plugins.install("Statistics",a,!0,"statistics"),this.plugins.install("Profiler",i,!0,"profiler"),this.plugins.install("ParticleEditor",s,!0,"particle-editor"),this.plugins.install("CanvasRecorder",o,!0,"canvasRecorder"),this.eruda=this.plugins.get("Console"),this.debugger=this.plugins.get("Debugger"),this.statistics=this.plugins.get("Statistics"),this.profiler=this.plugins.get("Profiler"),this.particleEditor=this.plugins.get("ParticleEditor"),this.canvasRecorder=this.plugins.get("CanvasRecorder");case 32:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),r.addScenes=function(){this.scene.add(Fr.C.BOOT_SCENE,Kr,!0),this.scene.add(Fr.C.LOAD_SCENE,_v,!1),this.scene.add(Fr.C.GAME_SCENE,fv,!1),this.scene.add(Fr.C.GLOBAL_SCENE,mv.Z,!1)},r.addDevScenes=function(){var e=(0,s.Z)(h().mark((function e(){var t,r;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(GameCore.Utils.Valid.isDebugger()){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,n.e(638).then(n.bind(n,596));case 4:return t=e.sent.default,e.next=7,n.e(926).then(n.bind(n,597));case 7:r=e.sent.default,this.scene.add(Fr.C.TEST_SCENE,t,!1),this.scene.add(Fr.C.ANIMATIONS_SCENE,r,!1);case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),r.initAdsAsync=function(){var e=(0,s.Z)(h().mark((function e(){var t,r,a,s;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=GameCore.Configs.Ads,Bv.Z.setGame(this),r=Bv.Z,!t.Mockup.Enable){e.next=8;break}return e.next=6,n.e(131).then(n.bind(n,598));case 6:a=e.sent.default,r=a;case 8:s=(0,i.Z)({},t.InterstitialAdOptions),this.ads.configure(r,{enabled:t.Enabled,calculateSafeAreaBottom:t.CalculateSafeAreaBottom,enableRewardVideoResetInterstitial:t.EnableRewardVideoResetInterstitial,interstitialAdOptions:s,rewardAdOptions:t.RewardAdOptions,bannerAdOptions:t.BannerAdOptions});case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),r.initWorld=function(){var e=GameCore.Configs.Game,t=e.AutoResize,n=e.PortraitRatio,r=e.PortraitWidth,a=e.PortraitHeight,i=e.LandscapeRatio,s=e.LandscapeWidth,o=e.LandscapeHeight,c=t,u=e.DisableLandscape,l=e.FullSizeOnLandscape,h=n,d=r,p=a,f=i,m=s,v=o;console.info("\ud83d\ude80 > portraitRatio",h),console.info("\ud83d\ude80 > landscapeRatio",f),this.world.configure({autoResize:c,portraitRatio:h,portraitWidth:d,portraitHeight:p,landscapeRatio:f,landscapeWidth:m,landscapeHeight:v,disableLandscape:u,fullSizeOnLandscape:l}),this.world.resize(e.ForcePixelRatio)},r.initStorage=function(){var e=new Gr(this);this.storage.setInitiator(e)},r.initLanguage=function(){var e=this.facebook.getLocale();this.lang.configure({locale:e,upperCaseText:!0})},r.initVisibilityChangeHandler=function(){this.visibility.configure()},r.initUtils=function(){this.handlePauseAudio(),this.removeUnusedPipelines()},r.initConsole=function(){GameCore.Utils.Valid.isDebugger()&&(GameCore.Configs.Debugger.ShowConsole&&this.eruda.configure({tool:["console","info"],defaults:{theme:"Dark"}}))},r.initDebugger=function(){if(GameCore.Utils.Valid.isDebugger()){var e=GameCore.Configs.Debugger,t=e.ShowInspector,n=e.ShowMonitoring;(t||n)&&this.debugger.configure(GameCore.Configs.Debugger)}},r.initStatistics=function(){GameCore.Utils.Valid.isDebugger()&&(GameCore.Configs.Statistics.Enable&&this.statistics.configure(GameCore.Configs.Statistics))},r.initParticleEditor=function(){GameCore.Utils.Valid.isDebugger()&&(GameCore.Configs.ParticleEditor.Enable&&this.particleEditor.configure(GameCore.Configs.ParticleEditor))},r.initProfilerPlugin=function(){GameCore.Utils.Valid.isDebugger()&&(GameCore.Configs.ProfilerPlugin.Enable&&this.profiler.configure())},r.initAdaptivePerformance=function(){var e=GameCore.Configs.Performance,t=e.Enable,n=(0,a.Z)(e,gg);if(t){var r=this.world.getPixelRatio();this.performance.configure((0,i.Z)({pixelRatio:r},n)),this.performance.active()}},r.initCanvasRecorderPlugin=function(){var e=this;if(GameCore.Utils.Valid.isDebugger()){var t=GameCore.Configs.CanvasRecorder;if(t.Enable){var n=t.Options,r=n.Type,a=n.Quality,i=n.RecordFps,o=n.SyncFps;this.canvasRecorder.configure({type:r,quality:a,syncFps:o,recordFps:i});var c=document.querySelector("canvas");if(!c)return console.error("Canvas not found");this.canvasRecorder.setCanvas(c);var l=this.canvasRecorder.getOptions(),d=this.canvasRecorder.waitNextFrame;this.canvasRecorder.waitNextFrame=(0,s.Z)(h().mark((function t(){return h().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!l.syncFps){t.next=5;break}return e.loop.sleep(),t.abrupt("return",new(u())((function(t){e.events.once(Phaser.Core.Events.POST_RENDER,t),e.loop.lastTime=1e3/l.recordFps,e.loop.step()})));case 5:return e.loop.wake(),t.abrupt("return",d.call(e.canvasRecorder));case 7:case"end":return t.stop()}}),t)})))}}},r.initRollbar=function(){var e=GameCore.Configs.Rollbar.Enable;console.warn({isRollbarEnabled:e}),e&&this.rollbar.setup()},r.handlePauseAudio=function(){var e=this;this.sound.pauseOnBlur=!1,this.visibility.addEventVisible((function(){e.audio.playMusic(),e.audio.resumeAllSounds()})),this.visibility.addEventHidden((function(){e.audio.pauseMusic(),e.audio.pauseAllSounds()}))},r.removeUnusedPipelines=function(){var e=this.renderer;if(e instanceof Phaser.Renderer.WebGL.WebGLRenderer){var t=e.pipelines,n=Phaser.Renderer.WebGL.Pipelines;if(n)[n.ROPE_PIPELINE,n.LIGHT_PIPELINE,n.POSTFX_PIPELINE,n.POINTLIGHT_PIPELINE,n.BITMAPMASK_PIPELINE].forEach((function(e){var n;null==(n=t.get(e))||n.destroy(),t.remove(e)}))}},t}(Phaser.Game),wg=yg,Sg=GameCore.Configs.Debugger.ShowInspector,Eg={parent:"app",type:Phaser.AUTO,width:0,height:0,scale:{autoRound:!0},dom:{createContainer:!1},loader:{maxParallelDownloads:6,crossOrigin:"no-cros"},input:{gamepad:!1,keyboard:Sg,touch:{capture:!0},smoothFactor:1,activePointers:1,windowEvents:!1},disableContextMenu:!0,render:{pixelArt:!1,antialias:!0,antialiasGL:!0,transparent:!0,desynchronized:!1,powerPreference:"high-performance",clearBeforeRender:!1,roundPixels:!1},plugins:{global:[]}};(0,r.j6)();var bg=setInterval((function(){window.__analyticsInitiated&&(window.__fbGameReady=!1,clearInterval(bg),clearInterval(window.__fbInstantLoadingTimer),GameSDK.setLoadingProgress(30),gtag("event","app_initialize",{send_to:["GA"]}),function(){try{var e=new wg(Eg);window.game=e}catch(t){(0,r.tO)(t)}}())}),50)},91:function(e,t,n){"use strict";n.d(t,{_:function(){return r}});var r={BUTTON_CLICK:"button_click",SCREEN_OPEN:"screen_open",LOAD_START:"load_start",LOAD_COMPLETE:"load_complete",APP_READY:"app_ready",TUTORIAL_BEGIN:"tutorial_begin",TUTORIAL_STEP:"tutorial_step",TUTORIAL_COMPLETE:"tutorial_complete",MATCH_START:"match_start",MATCH_RESCUE:"match_rescue",MATCH_END:"match_end",LEVEL_START:"level_start",LEVEL_RESCUE:"level_rescue",LEVEL_END:"level_end",LEVEL_STOP:"level_stop",LEVEL_PROGRESS:"level_progress",LEVEL_RESCUE_PROGRESS:"level_rescue_progress",SHARE:"share",MESSAGE:"message",INVITE:"invite",SHORTCUT_CREATE:"shortcut_create",SHORTCUT_CREATE_POPUP:"shortcut_create_popup",BOT_SUBSCRIBE:"bot_subscribe",BOT_SUBSCRIBE_POPUP:"bot_subscribe_popup",AD_LOAD:"ad_load",AD_LOAD_FAILED:"ad_load_failed",AD_SHOW:"ad_show",AD_SHOW_FAILED:"ad_show_failed",MISSING_AD_SHOW:"missing_ad_show",NEW_USER:"new_user",AD_IMPRESSION:"ad_impression",JOIN_GROUP:"join_group",SHOP_WATCH_ADS:"shop_watch_ads",USE_ITEM:"use_item",LOSING:"losing",WINNING:"winning",IMAGE_SCALE_DPR_LOAD:"image_scale_dpr_load",SHOW_ADS:"show_ads",TOURNAMENT_SHARE:"tournament_share",TOURNAMENT_CREATE:"tournament_create",TOURNAMENT_POST_SCORE:"tournament_post_score",PAGE_VIEW:"page_view"}},419:function(e,t,n){"use strict";var r=n(420),a=function(){function e(e,t,n,a){this.playerId=void 0,this.name=void 0,this.photo=void 0,this.locale=void 0,this.playerId=e,this.name=t,this.photo=n||r.Z.AVATAR.FILE,this.locale=a||"en_US"}return e.prototype.toObject=function(){return{playerId:this.playerId,name:this.name,photo:this.photo,locale:this.locale}},e}();t.Z=a},426:function(e,t){"use strict";t.Z={RESIZE:"resize",CHANGE_LAYOUT:"change-layout"}},430:function(e,t,n){"use strict";n.d(t,{I:function(){return a}});var r=n(424),a=function(e){return{type:r.DW,payload:{sceneKey:e}}}},184:function(e,t,n){"use strict";n.d(t,{Gm:function(){return s},qZ:function(){return i}});var r=n(76),a=n.n(r),i=(n(59),function(e){return new(a())((function(t){return setTimeout(t,e)}))}),s=function(e){var t=new Date(e),n=new Date;return t.getDate()===n.getDate()&&t.getMonth()===n.getMonth()&&t.getFullYear()===n.getFullYear()}},183:function(e,t,n){"use strict";n.d(t,{R0:function(){return c},Tv:function(){return s},j6:function(){return a},sw:function(){return i},tO:function(){return u}});n(418),n(200),n(60),n(93);var r=!1,a=function(){var e=setInterval((function(){window.Sentry&&(clearInterval(e),console.warn({isSentryEnabled:r}))}),100)},i=function(e,t){window.Sentry&&window.Sentry.addBreadcrumb({category:e,message:t})},s=function(e){window.Sentry&&window.Sentry.setUser(e)},o=function(e){console.error(e)},c=function(e,t){if(e){try{window.game.rollbar.sendException(e,t)}catch(e){}window.Sentry&&window.Sentry.withScope((function(n){n.setExtras(t),o(e)}))}},u=function(e){if(e){try{window.game.rollbar.sendException(e)}catch(e){}window.Sentry&&o(e)}}},421:function(e,t){"use strict";t.Z={GENERIC_NOTIFICATION:0,NEW_USER_NOTIFICATION:1,MONDAY_NOTIFICATION:2,TUESDAY_NOTIFICATION:3,WEDNESDAY_NOTIFICATION:4,THURSDAY_NOTIFICATION:5,FRIDAY_NOTIFICATION:6,SATURDAY_NOTIFICATION:7,SUNDAY_NOTIFICATION:8}},584:function(e,t,n){"use strict";n.d(t,{Z:function(){return i}});var r=JSON.parse('{"data":["Smith","Johnson","Williams","Brown","Jones","Miller","Davis","Garcia","Rodriguez","Wilson","Martinez","Anderson","Taylor","Thomas","Hernandez","Moore","Martin","Jackson","Thompson","White","Lopez","Lee","Gonzalez","Harris","Clark","Lewis","Robinson","Walker","Perez","Hall","Young","Allen","Sanchez","Wright","King","Scott","Green","Baker","Adams","Nelson","Hill","Ramirez","Campbell","Mitchell","Roberts","Carter","Phillips","Evans","Turner","Torres","Parker","Collins","Edwards","Stewart","Flores","Morris","Nguyen","Murphy","Rivera","Cook","Rogers","Morgan","Peterson","Cooper","Reed","Bailey","Bell","Gomez","Kelly","Howard","Ward","Cox","Diaz","Richardson","Wood","Watson","Brooks","Bennett","Gray","James","Reyes","Cruz","Hughes","Price","Myers","Long","Foster","Sanders","Ross","Morales","Powell","Sullivan","Russell","Ortiz","Jenkins","Gutierrez","Perry","Butler","Barnes","Fisher","Henderson","Coleman","Simmons","Patterson","Jordan","Reynolds","Hamilton","Graham","Kim","Gonzales","Alexander","Ramos","Wallace","Griffin","West","Cole","Hayes","Chavez","Gibson","Bryant","Ellis","Stevens","Murray","Ford","Marshall","Owens","Mcdonald","Harrison","Ruiz","Kennedy","Wells","Alvarez","Woods","Mendoza","Castillo","Olson","Webb","Washington","Tucker","Freeman","Burns","Henry","Vasquez","Snyder","Simpson","Crawford","Jimenez","Porter","Mason","Shaw","Gordon","Wagner","Hunter","Romero","Hicks","Dixon","Hunt","Palmer","Robertson","Black","Holmes","Stone","Meyer","Boyd","Mills","Warren","Fox","Rose","Rice","Moreno","Schmidt","Patel","Ferguson","Nichols","Herrera","Medina","Ryan","Fernandez","Weaver","Daniels","Stephens","Gardner","Payne","Kelley","Dunn","Pierce","Arnold","Tran","Spencer","Peters","Hawkins","Grant","Hansen","Castro","Hoffman","Hart","Elliott","Cunningham","Knight","Bradley","Carroll","Hudson","Duncan","Armstrong","Berry","Andrews","Johnston","Ray","Lane","Riley","Carpenter","Perkins","Aguilar","Silva","Richards","Willis","Matthews","Chapman","Lawrence","Garza","Vargas","Watkins","Wheeler","Larson","Carlson","Harper","George","Greene","Burke","Guzman","Morrison","Munoz","Jacobs","Obrien","Lawson","Franklin","Lynch","Bishop","Carr","Salazar","Austin","Mendez","Gilbert","Jensen","Williamson","Montgomery","Harvey","Oliver","Howell","Dean","Hanson","Weber","Garrett","Sims","Burton","Fuller","Soto","Mccoy","Welch","Chen","Schultz","Walters","Reid","Fields","Walsh","Little","Fowler","Bowman","Davidson","May","Day","Schneider","Newman","Brewer","Lucas","Holland","Wong","Banks","Santos","Curtis","Pearson","Delgado","Valdez","Pena","Rios","Douglas","Sandoval","Barrett","Hopkins","Keller","Guerrero","Stanley","Bates","Alvarado","Beck","Ortega","Wade","Estrada","Contreras","Barnett","Caldwell","Santiago","Lambert","Powers","Chambers","Nunez","Craig","Leonard","Lowe","Rhodes","Byrd","Gregory","Shelton","Frazier","Becker","Maldonado","Fleming","Vega","Sutton","Cohen","Jennings","Parks","Mcdaniel","Watts","Barker","Norris","Vaughn","Vazquez","Holt","Schwartz","Steele","Benson","Neal","Dominguez","Horton","Terry","Wolfe","Hale","Lyons","Graves","Haynes","Miles","Park","Warner","Padilla","Bush","Thornton","Mccarthy","Mann","Zimmerman","Erickson","Fletcher","Mckinney","Page","Dawson","Joseph","Marquez","Reeves","Klein","Espinoza","Baldwin","Moran","Love","Robbins","Higgins","Ball","Cortez","Le","Griffith","Bowen","Sharp","Cummings","Ramsey","Hardy","Swanson","Barber","Acosta","Luna","Chandler","Blair","Daniel","Cross","Simon","Dennis","Oconnor","Quinn","Gross","Navarro","Moss","Fitzgerald","Doyle","Mclaughlin","Rojas","Rodgers","Stevenson","Singh","Yang","Figueroa","Harmon","Newton","Paul","Manning","Garner","Mcgee","Reese","Francis","Burgess","Adkins","Goodman","Curry","Brady","Christensen","Potter","Walton","Goodwin","Mullins","Molina","Webster","Fischer","Campos","Avila","Sherman","Todd","Chang","Blake","Malone","Wolf","Hodges","Juarez","Gill","Farmer","Hines","Gallagher","Duran","Hubbard","Cannon","Miranda","Wang","Saunders","Tate","Mack","Hammond","Carrillo","Townsend","Wise","Ingram","Barton","Mejia","Ayala","Schroeder","Hampton","Rowe","Parsons","Frank","Waters","Strickland","Osborne","Maxwell","Chan","Deleon","Norman","Harrington","Casey","Patton","Logan","Bowers","Mueller","Glover","Floyd","Hartman","Buchanan","Cobb","French","Kramer","Mccormick","Clarke","Tyler","Gibbs","Moody","Conner","Sparks","Mcguire","Leon","Bauer","Norton","Pope","Flynn","Hogan","Robles","Salinas","Yates","Lindsey","Lloyd","Marsh","Mcbride","Owen","Solis","Pham","Lang","Pratt","Lara","Brock","Ballard","Trujillo","Shaffer","Drake","Roman","Aguirre","Morton","Stokes","Lamb","Pacheco","Patrick","Cochran","Shepherd","Cain","Burnett","Hess","Li","Cervantes","Olsen","Briggs","Ochoa","Cabrera","Velasquez","Montoya","Roth","Meyers","Cardenas","Fuentes","Weiss","Hoover","Wilkins","Nicholson","Underwood","Short","Carson","Morrow","Colon","Holloway","Summers","Bryan","Petersen","Mckenzie","Serrano","Wilcox","Carey","Clayton","Poole","Calderon","Gallegos","Greer","Rivas","Guerra","Decker","Collier","Wall","Whitaker","Bass","Flowers","Davenport","Conley","Houston","Huff","Copeland","Hood","Monroe","Massey","Roberson","Combs","Franco","Larsen","Pittman","Randall","Skinner","Wilkinson","Kirby","Cameron","Bridges","Anthony","Richard","Kirk","Bruce","Singleton","Mathis","Bradford","Boone","Abbott","Charles","Allison","Sweeney","Atkinson","Horn","Jefferson","Rosales","York","Christian","Phelps","Farrell","Castaneda","Nash","Dickerson","Bond","Wyatt","Foley","Chase","Gates","Vincent","Mathews","Hodge","Garrison","Trevino","Villarreal","Heath","Dalton","Valencia","Callahan","Hensley","Atkins","Huffman","Roy","Boyer","Shields","Lin","Hancock","Grimes","Glenn","Cline","Delacruz","Camacho","Dillon","Parrish","Oneill","Melton","Booth","Kane","Berg","Harrell","Pitts","Savage","Wiggins","Brennan","Salas","Marks","Russo","Sawyer","Baxter","Golden","Hutchinson","Liu","Walter","Mcdowell","Wiley","Rich","Humphrey","Johns","Koch","Suarez","Hobbs","Beard","Gilmore","Ibarra","Keith","Macias","Khan","Andrade","Ware","Stephenson","Henson","Wilkerson","Dyer","Mcclure","Blackwell","Mercado","Tanner","Eaton","Clay","Barron","Beasley","Oneal","Preston","Small","Wu","Zamora","Macdonald","Vance","Snow","Mcclain","Stafford","Orozco","Barry","English","Shannon","Kline","Jacobson","Woodard","Huang","Kemp","Mosley","Prince","Merritt","Hurst","Villanueva","Roach","Nolan","Lam","Yoder","Mccullough","Lester","Santana","Valenzuela","Winters","Barrera","Leach","Orr","Berger","Mckee","Strong","Conway","Stein","Whitehead","Bullock","Escobar","Knox","Meadows","Solomon","Velez","Odonnell","Kerr","Stout","Blankenship","Browning","Kent","Lozano","Bartlett","Pruitt","Buck","Barr","Gaines","Durham","Gentry","Mcintyre","Sloan","Melendez","Rocha","Herman","Sexton","Moon","Hendricks","Rangel","Stark","Lowery","Hardin","Hull","Sellers","Ellison","Calhoun","Gillespie","Mora","Knapp","Mccall","Morse","Dorsey","Weeks","Nielsen","Livingston","Leblanc","Mclean","Bradshaw","Glass","Middleton","Buckley","Schaefer","Frost","Howe","House","Mcintosh","Ho","Pennington","Reilly","Hebert","Mcfarland","Hickman","Noble","Spears","Conrad","Arias","Galvan","Velazquez","Huynh","Frederick","Randolph","Cantu","Fitzpatrick","Mahoney","Peck","Villa","Michael","Donovan","Mcconnell","Walls","Boyle","Mayer","Zuniga","Giles","Pineda","Pace","Hurley","Mays","Mcmillan","Crosby","Ayers","Case","Bentley","Shepard","Everett","Pugh","David","Mcmahon","Dunlap","Bender","Hahn","Harding","Acevedo","Raymond","Blackburn","Duffy","Landry","Dougherty","Bautista","Shah","Potts","Arroyo","Valentine","Meza","Gould","Vaughan","Fry","Rush","Avery","Herring","Dodson","Clements","Sampson","Tapia","Bean","Lynn","Crane","Farley","Cisneros","Benton","Ashley","Mckay","Finley","Best","Blevins","Friedman","Moses","Sosa","Blanchard","Huber","Frye","Krueger","Bernard","Rosario","Rubio","Mullen","Benjamin","Haley","Chung","Moyer","Choi","Horne","Yu","Woodward","Ali","Nixon","Hayden","Rivers","Estes","Mccarty","Richmond","Stuart","Maynard","Brandt","Oconnell","Hanna","Sanford","Sheppard","Church","Burch","Levy","Rasmussen","Coffey","Ponce","Faulkner","Donaldson","Schmitt","Novak","Costa","Montes","Booker","Cordova","Waller","Arellano","Maddox","Mata","Bonilla","Stanton","Compton","Kaufman","Dudley","Mcpherson","Beltran","Dickson","Mccann","Villegas","Proctor","Hester","Cantrell","Daugherty","Cherry","Bray","Davila","Rowland","Levine","Madden","Spence","Good","Irwin","Werner","Krause","Petty","Whitney","Baird","Hooper","Pollard","Zavala","Jarvis","Holden","Haas","Hendrix","Mcgrath","Bird","Lucero","Terrell","Riggs","Joyce","Mercer","Rollins","Galloway","Duke","Odom","Andersen","Downs","Hatfield","Benitez","Archer","Huerta","Travis","Mcneil","Hinton","Zhang","Hays","Mayo","Fritz","Branch","Mooney","Ewing","Ritter","Esparza","Frey","Braun","Gay","Riddle","Haney","Kaiser","Holder","Chaney","Mcknight","Gamble","Vang","Cooley","Carney","Cowan","Forbes","Ferrell","Davies","Barajas","Shea","Osborn","Bright","Cuevas","Bolton","Murillo","Lutz","Duarte","Kidd","Key","Cooke"]}'),a=function(e){return Math.floor(Math.random()*e)},i=function(){if(!r)return"Unknown";if(!r.data)return"Unknown";var e=r.data;if(!Array.isArray(e))return"Unknown";var t=e.length;return e[a(t)]+" "+e[a(t)]}},415:function(e,t){"use strict";t.Z=function(e,t){var n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789*#%&!",r="",a=e;void 0!=t&&(a-=t.length,r+=t);for(var i=0;i<a;i++){var s=Math.floor(67*Math.random());r+=n.charAt(s)}return r}}},t={};function n(r){var a=t[r];if(void 0!==a)return a.exports;var i=t[r]={id:r,loaded:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.loaded=!0,i.exports}n.m=e,n.amdO={},function(){var e=[];n.O=function(t,r,a,i){if(!r){var s=1/0;for(l=0;l<e.length;l++){r=e[l][0],a=e[l][1],i=e[l][2];for(var o=!0,c=0;c<r.length;c++)(!1&i||s>=i)&&Object.keys(n.O).every((function(e){return n.O[e](r[c])}))?r.splice(c--,1):(o=!1,i<s&&(s=i));if(o){e.splice(l--,1);var u=a();void 0!==u&&(t=u)}}return t}i=i||0;for(var l=e.length;l>0&&e[l-1][2]>i;l--)e[l]=e[l-1];e[l]=[r,a,i]}}(),n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,{a:t}),t},n.d=function(e,t){for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.f={},n.e=function(e){return Promise.all(Object.keys(n.f).reduce((function(t,r){return n.f[r](e,t),t}),[]))},n.u=function(e){return e+"."+{7:"1ac54b67694133556b18",109:"3dc59d8af6dbea69cef2",123:"fed146cb447145bd6c88",131:"9380c1fab5f2f9fd28da",401:"1abd431c0e4ca9951814",498:"d67eae66d4fa662da04a",530:"2b64c4f62cec4dc284cf",613:"78446ff8f2564b38dcd2",616:"25aad30c0dbdad2bb6c1",638:"864ea5f772e5172183e3",739:"4f36cc1d4b3cf646f0ae",783:"d7859814973f5a081aaf",803:"a2329549b7fa4d285596",926:"29dac23d7f76bb4e5d44",942:"d53b1bdfd44ba34337a0",961:"1e9c4aeb85e20914411f"}[e]+".bundle.js"},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.hmd=function(e){return(e=Object.create(e)).children||(e.children=[]),Object.defineProperty(e,"exports",{enumerable:!0,set:function(){throw new Error("ES Modules may not assign module.exports or exports.*, Use ESM export syntax, instead: "+e.id)}}),e},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},function(){var e={},t="game-core:";n.l=function(r,a,i,s){if(e[r])e[r].push(a);else{var o,c;if(void 0!==i)for(var u=document.getElementsByTagName("script"),l=0;l<u.length;l++){var h=u[l];if(h.getAttribute("src")==r||h.getAttribute("data-webpack")==t+i){o=h;break}}o||(c=!0,(o=document.createElement("script")).charset="utf-8",o.timeout=120,n.nc&&o.setAttribute("nonce",n.nc),o.setAttribute("data-webpack",t+i),o.src=r),e[r]=[a];var d=function(t,n){o.onerror=o.onload=null,clearTimeout(p);var a=e[r];if(delete e[r],o.parentNode&&o.parentNode.removeChild(o),a&&a.forEach((function(e){return e(n)})),t)return t(n)},p=setTimeout(d.bind(null,void 0,{type:"timeout",target:o}),12e4);o.onerror=d.bind(null,o.onerror),o.onload=d.bind(null,o.onload),c&&document.head.appendChild(o)}}}(),n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},function(){var e;n.g.importScripts&&(e=n.g.location+"");var t=n.g.document;if(!e&&t&&(t.currentScript&&(e=t.currentScript.src),!e)){var r=t.getElementsByTagName("script");if(r.length)for(var a=r.length-1;a>-1&&!e;)e=r[a--].src}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),n.p=e}(),function(){var e={757:0};n.f.j=function(t,r){var a=n.o(e,t)?e[t]:void 0;if(0!==a)if(a)r.push(a[2]);else{var i=new Promise((function(n,r){a=e[t]=[n,r]}));r.push(a[2]=i);var s=n.p+n.u(t),o=new Error;n.l(s,(function(r){if(n.o(e,t)&&(0!==(a=e[t])&&(e[t]=void 0),a)){var i=r&&("load"===r.type?"missing":r.type),s=r&&r.target&&r.target.src;o.message="Loading chunk "+t+" failed.\n("+i+": "+s+")",o.name="ChunkLoadError",o.type=i,o.request=s,a[1](o)}}),"chunk-"+t,t)}},n.O.j=function(t){return 0===e[t]};var t=function(t,r){var a,i,s=r[0],o=r[1],c=r[2],u=0;if(s.some((function(t){return 0!==e[t]}))){for(a in o)n.o(o,a)&&(n.m[a]=o[a]);if(c)var l=c(n)}for(t&&t(r);u<s.length;u++)i=s[u],n.o(e,i)&&e[i]&&e[i][0](),e[i]=0;return n.O(l)},r=self.webpackChunkgame_core=self.webpackChunkgame_core||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))}(),n.O(void 0,[216,630,542],(function(){return n(600)})),n.O(void 0,[216,630,542],(function(){return n(601)})),n.O(void 0,[216,630,542],(function(){return n(440)})),n.O(void 0,[216,630,542],(function(){return n(441)})),n.O(void 0,[216,630,542],(function(){return n(602)})),n.O(void 0,[216,630,542],(function(){return n(538)}));var r=n.O(void 0,[216,630,542],(function(){return n(551)}));r=n.O(r)})();